import{N as T,O as A,P as G,aG as I,bb as V,aZ as B,ah as S,S as $,bg as lt,be as it,bf as st,d as j,bW as ut,J as dt,bX as at,w as J,bY as _,D as X,bj as pt,bk as ht,bA as ft,a5 as M,L as Y,b6 as mt,aF as bt}from"./index-D_-DzWhp.js";import{b as vt}from"./next-frame-once-C5Ksf8W7.js";import{c as g,a as ct,o as wt}from"./cssr-BW6v_MNg.js";const Nt=T("n-internal-select-menu"),xt=T("n-internal-select-menu-body"),U="__disabled__";function Z(n){const t=$(lt,null),e=$(it,null),i=$(st,null),u=$(xt,null),m=A();if(typeof document<"u"){m.value=document.fullscreenElement;const d=()=>{m.value=document.fullscreenElement};G(()=>{I("fullscreenchange",document,d)}),V(()=>{B("fullscreenchange",document,d)})}return S(()=>{var d;const{to:h}=n;return h!==void 0?h===!1?U:h===!0?m.value||"body":h:t!=null&&t.value?(d=t.value.$el)!==null&&d!==void 0?d:t.value:e!=null&&e.value?e.value:i!=null&&i.value?i.value:u!=null&&u.value?u.value:h??(m.value||"body")})}Z.tdkey=U;Z.propTo={type:[String,Object,Boolean],default:void 0};let x=null;function q(){if(x===null&&(x=document.getElementById("v-binder-view-measurer"),x===null)){x=document.createElement("div"),x.id="v-binder-view-measurer";const{style:n}=x;n.position="fixed",n.left="0",n.right="0",n.top="0",n.bottom="0",n.pointerEvents="none",n.visibility="hidden",document.body.appendChild(x)}return x.getBoundingClientRect()}function $t(n,t){const e=q();return{top:t,left:n,height:0,width:0,right:e.width-n,bottom:e.height-t}}function E(n){const t=n.getBoundingClientRect(),e=q();return{left:t.left-e.left,top:t.top-e.top,bottom:e.height+e.top-t.bottom,right:e.width+e.left-t.right,width:t.width,height:t.height}}function yt(n){return n.nodeType===9?null:n.parentNode}function H(n){if(n===null)return null;const t=yt(n);if(t===null)return null;if(t.nodeType===9)return document;if(t.nodeType===1){const{overflow:e,overflowX:i,overflowY:u}=getComputedStyle(t);if(/(auto|scroll|overlay)/.test(e+u+i))return t}return H(t)}const It=j({name:"Binder",props:{syncTargetWithParent:Boolean,syncTarget:{type:Boolean,default:!0}},setup(n){var t;dt("VBinder",(t=at())===null||t===void 0?void 0:t.proxy);const e=$("VBinder",null),i=A(null),u=r=>{i.value=r,e&&n.syncTargetWithParent&&e.setTargetRef(r)};let m=[];const d=()=>{let r=i.value;for(;r=H(r),r!==null;)m.push(r);for(const v of m)I("scroll",v,c,!0)},h=()=>{for(const r of m)B("scroll",r,c,!0);m=[]},l=new Set,b=r=>{l.size===0&&d(),l.has(r)||l.add(r)},w=r=>{l.has(r)&&l.delete(r),l.size===0&&h()},c=()=>{vt(o)},o=()=>{l.forEach(r=>r())},s=new Set,p=r=>{s.size===0&&I("resize",window,f),s.has(r)||s.add(r)},a=r=>{s.has(r)&&s.delete(r),s.size===0&&B("resize",window,f)},f=()=>{s.forEach(r=>r())};return V(()=>{B("resize",window,f),h()}),{targetRef:i,setTargetRef:u,addScrollListener:b,removeScrollListener:w,addResizeListener:p,removeResizeListener:a}},render(){return ut("binder",this.$slots)}}),St=j({name:"Target",setup(){const{setTargetRef:n,syncTarget:t}=$("VBinder");return{syncTarget:t,setTargetDirective:{mounted:n,updated:n}}},render(){const{syncTarget:n,setTargetDirective:t}=this;return n?J(_("follower",this.$slots),[[t]]):_("follower",this.$slots)}}),z={top:"bottom",bottom:"top",left:"right",right:"left"},k={start:"end",center:"center",end:"start"},N={top:"height",bottom:"height",left:"width",right:"width"},Mt={"bottom-start":"top left",bottom:"top center","bottom-end":"top right","top-start":"bottom left",top:"bottom center","top-end":"bottom right","right-start":"top left",right:"center left","right-end":"bottom left","left-start":"top right",left:"center right","left-end":"bottom right"},gt={"bottom-start":"bottom left",bottom:"bottom center","bottom-end":"bottom right","top-start":"top left",top:"top center","top-end":"top right","right-start":"top right",right:"center right","right-end":"bottom right","left-start":"top left",left:"center left","left-end":"bottom left"},zt={"bottom-start":"right","bottom-end":"left","top-start":"right","top-end":"left","right-start":"bottom","right-end":"top","left-start":"bottom","left-end":"top"},K={top:!0,bottom:!1,left:!0,right:!1},P={top:"end",bottom:"start",left:"end",right:"start"};function Bt(n,t,e,i,u,m){if(!u||m)return{placement:n,top:0,left:0};const[d,h]=n.split("-");let l=h??"center",b={top:0,left:0};const w=(s,p,a)=>{let f=0,r=0;const v=e[s]-t[p]-t[s];return v>0&&i&&(a?r=K[p]?v:-v:f=K[p]?v:-v),{left:f,top:r}},c=d==="left"||d==="right";if(l!=="center"){const s=zt[n],p=z[s],a=N[s];if(e[a]>t[a]){if(t[s]+t[a]<e[a]){const f=(e[a]-t[a])/2;t[s]<f||t[p]<f?t[s]<t[p]?(l=k[h],b=w(a,p,c)):b=w(a,s,c):l="center"}}else e[a]<t[a]&&t[p]<0&&t[s]>t[p]&&(l=k[h])}else{const s=d==="bottom"||d==="top"?"left":"top",p=z[s],a=N[s],f=(e[a]-t[a])/2;(t[s]<f||t[p]<f)&&(t[s]>t[p]?(l=P[s],b=w(a,s,c)):(l=P[p],b=w(a,p,c)))}let o=d;return t[d]<e[N[d]]&&t[d]<t[z[d]]&&(o=z[d]),{placement:l!=="center"?`${o}-${l}`:o,left:b.left,top:b.top}}function At(n,t){return t?gt[n]:Mt[n]}function Ot(n,t,e,i,u,m){if(m)switch(n){case"bottom-start":return{top:`${Math.round(e.top-t.top+e.height)}px`,left:`${Math.round(e.left-t.left)}px`,transform:"translateY(-100%)"};case"bottom-end":return{top:`${Math.round(e.top-t.top+e.height)}px`,left:`${Math.round(e.left-t.left+e.width)}px`,transform:"translateX(-100%) translateY(-100%)"};case"top-start":return{top:`${Math.round(e.top-t.top)}px`,left:`${Math.round(e.left-t.left)}px`,transform:""};case"top-end":return{top:`${Math.round(e.top-t.top)}px`,left:`${Math.round(e.left-t.left+e.width)}px`,transform:"translateX(-100%)"};case"right-start":return{top:`${Math.round(e.top-t.top)}px`,left:`${Math.round(e.left-t.left+e.width)}px`,transform:"translateX(-100%)"};case"right-end":return{top:`${Math.round(e.top-t.top+e.height)}px`,left:`${Math.round(e.left-t.left+e.width)}px`,transform:"translateX(-100%) translateY(-100%)"};case"left-start":return{top:`${Math.round(e.top-t.top)}px`,left:`${Math.round(e.left-t.left)}px`,transform:""};case"left-end":return{top:`${Math.round(e.top-t.top+e.height)}px`,left:`${Math.round(e.left-t.left)}px`,transform:"translateY(-100%)"};case"top":return{top:`${Math.round(e.top-t.top)}px`,left:`${Math.round(e.left-t.left+e.width/2)}px`,transform:"translateX(-50%)"};case"right":return{top:`${Math.round(e.top-t.top+e.height/2)}px`,left:`${Math.round(e.left-t.left+e.width)}px`,transform:"translateX(-100%) translateY(-50%)"};case"left":return{top:`${Math.round(e.top-t.top+e.height/2)}px`,left:`${Math.round(e.left-t.left)}px`,transform:"translateY(-50%)"};case"bottom":default:return{top:`${Math.round(e.top-t.top+e.height)}px`,left:`${Math.round(e.left-t.left+e.width/2)}px`,transform:"translateX(-50%) translateY(-100%)"}}switch(n){case"bottom-start":return{top:`${Math.round(e.top-t.top+e.height+i)}px`,left:`${Math.round(e.left-t.left+u)}px`,transform:""};case"bottom-end":return{top:`${Math.round(e.top-t.top+e.height+i)}px`,left:`${Math.round(e.left-t.left+e.width+u)}px`,transform:"translateX(-100%)"};case"top-start":return{top:`${Math.round(e.top-t.top+i)}px`,left:`${Math.round(e.left-t.left+u)}px`,transform:"translateY(-100%)"};case"top-end":return{top:`${Math.round(e.top-t.top+i)}px`,left:`${Math.round(e.left-t.left+e.width+u)}px`,transform:"translateX(-100%) translateY(-100%)"};case"right-start":return{top:`${Math.round(e.top-t.top+i)}px`,left:`${Math.round(e.left-t.left+e.width+u)}px`,transform:""};case"right-end":return{top:`${Math.round(e.top-t.top+e.height+i)}px`,left:`${Math.round(e.left-t.left+e.width+u)}px`,transform:"translateY(-100%)"};case"left-start":return{top:`${Math.round(e.top-t.top+i)}px`,left:`${Math.round(e.left-t.left+u)}px`,transform:"translateX(-100%)"};case"left-end":return{top:`${Math.round(e.top-t.top+e.height+i)}px`,left:`${Math.round(e.left-t.left+u)}px`,transform:"translateX(-100%) translateY(-100%)"};case"top":return{top:`${Math.round(e.top-t.top+i)}px`,left:`${Math.round(e.left-t.left+e.width/2+u)}px`,transform:"translateY(-100%) translateX(-50%)"};case"right":return{top:`${Math.round(e.top-t.top+e.height/2+i)}px`,left:`${Math.round(e.left-t.left+e.width+u)}px`,transform:"translateY(-50%)"};case"left":return{top:`${Math.round(e.top-t.top+e.height/2+i)}px`,left:`${Math.round(e.left-t.left+u)}px`,transform:"translateY(-50%) translateX(-100%)"};case"bottom":default:return{top:`${Math.round(e.top-t.top+e.height+i)}px`,left:`${Math.round(e.left-t.left+e.width/2+u)}px`,transform:"translateX(-50%)"}}}const Ct=g([g(".v-binder-follower-container",{position:"absolute",left:"0",right:"0",top:"0",height:"0",pointerEvents:"none",zIndex:"auto"}),g(".v-binder-follower-content",{position:"absolute",zIndex:"auto"},[g("> *",{pointerEvents:"all"})])]),Vt=j({name:"Follower",inheritAttrs:!1,props:{show:Boolean,enabled:{type:Boolean,default:void 0},placement:{type:String,default:"bottom"},syncTrigger:{type:Array,default:["resize","scroll"]},to:[String,Object],flip:{type:Boolean,default:!0},internalShift:Boolean,x:Number,y:Number,width:String,minWidth:String,containerClass:String,teleportDisabled:Boolean,zindexable:{type:Boolean,default:!0},zIndex:Number,overlap:Boolean},setup(n){const t=$("VBinder"),e=S(()=>n.enabled!==void 0?n.enabled:n.show),i=A(null),u=A(null),m=()=>{const{syncTrigger:o}=n;o.includes("scroll")&&t.addScrollListener(l),o.includes("resize")&&t.addResizeListener(l)},d=()=>{t.removeScrollListener(l),t.removeResizeListener(l)};G(()=>{e.value&&(l(),m())});const h=ft();Ct.mount({id:"vueuc/binder",head:!0,anchorMetaName:ct,ssr:h}),V(()=>{d()}),wt(()=>{e.value&&l()});const l=()=>{if(!e.value)return;const o=i.value;if(o===null)return;const s=t.targetRef,{x:p,y:a,overlap:f}=n,r=p!==void 0&&a!==void 0?$t(p,a):E(s);o.style.setProperty("--v-target-width",`${Math.round(r.width)}px`),o.style.setProperty("--v-target-height",`${Math.round(r.height)}px`);const{width:v,minWidth:O,placement:D,internalShift:Q,flip:R}=n;o.setAttribute("v-placement",D),f?o.setAttribute("v-overlap",""):o.removeAttribute("v-overlap");const{style:y}=o;v==="target"?y.width=`${r.width}px`:v!==void 0?y.width=v:y.width="",O==="target"?y.minWidth=`${r.width}px`:O!==void 0?y.minWidth=O:y.minWidth="";const tt=E(o),et=E(u.value),{left:L,top:W,placement:C}=Bt(D,r,tt,Q,R,f),F=At(C,f),{left:nt,top:ot,transform:rt}=Ot(C,et,r,W,L,f);o.setAttribute("v-placement",C),o.style.setProperty("--v-offset-left",`${Math.round(L)}px`),o.style.setProperty("--v-offset-top",`${Math.round(W)}px`),o.style.transform=`translateX(${nt}) translateY(${ot}) ${rt}`,o.style.setProperty("--v-transform-origin",F),o.style.transformOrigin=F};M(e,o=>{o?(m(),b()):d()});const b=()=>{bt().then(l).catch(o=>console.error(o))};["placement","x","y","internalShift","flip","width","overlap","minWidth"].forEach(o=>{M(Y(n,o),l)}),["teleportDisabled"].forEach(o=>{M(Y(n,o),b)}),M(Y(n,"syncTrigger"),o=>{o.includes("resize")?t.addResizeListener(l):t.removeResizeListener(l),o.includes("scroll")?t.addScrollListener(l):t.removeScrollListener(l)});const w=mt(),c=S(()=>{const{to:o}=n;if(o!==void 0)return o;w.value});return{VBinder:t,mergedEnabled:e,offsetContainerRef:u,followerRef:i,mergedTo:c,syncPosition:l}},render(){return X(pt,{show:this.show,to:this.mergedTo,disabled:this.teleportDisabled},{default:()=>{var n,t;const e=X("div",{class:["v-binder-follower-container",this.containerClass],ref:"offsetContainerRef"},[X("div",{class:"v-binder-follower-content",ref:"followerRef"},(t=(n=this.$slots).default)===null||t===void 0?void 0:t.call(n))]);return this.zindexable?J(e,[[ht,{enabled:this.mergedEnabled,zIndex:this.zIndex}]]):e}})}});export{It as B,St as V,Vt as a,xt as b,Nt as i,Z as u};
