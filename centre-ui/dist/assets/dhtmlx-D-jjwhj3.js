import{d as Ni,cZ as Ce,P as Li,b as De,l as Jt,k as Ot,b8 as Pi,e as Ri,g as Hi,F as Oi,Z as Bi,o as Ae,X as zi,Y as ji}from"./index-D_-DzWhp.js";import{a as Wi,_ as Fi}from"./Tabs-eVBKXMm-.js";import"./Add-CIDYJCEd.js";import"./cssr-BW6v_MNg.js";import"./use-compitable-Cr7qxnTd.js";import"./use-merged-state-DuV1Lu3L.js";import"./debounce-Dhm6kdwJ.js";const Vi=[{id:11,text:"Architecture design",type:"project",progress:0,open:!0,start_date:new Date("2024-01-10 00:00"),duration:12,parent:0},{id:12,text:"Test version",start_date:new Date("2024-03-20 00:00"),type:"project",duration:5,render:"split",parent:"11",progress:0,open:!0},{id:99,text:"Test version 1 release",start_date:new Date("2024-03-20 00:00"),end_date:new Date("2024-03-25 00:00"),parent:"12",progress:0,open:!0},{id:98,text:"Test version 2 release",start_date:new Date("2024-03-26 00:00"),duration:4,parent:"12",progress:0,open:!0},{id:97,text:"Test version 3 release",start_date:new Date("2024-03-31 00:00"),duration:10,parent:"12",progress:0,open:!0},{id:13,text:"1.0 version",start_date:new Date("2024-03-31 00:00"),type:"project",render:"split",parent:"11",progress:.5,open:!1,duration:11},{id:17,text:"1.0 release",start_date:new Date("2024-03-31 00:00"),end_date:new Date("2024-04-03 00:00"),parent:"13",progress:0,open:!0},{id:18,text:"1.0.1 version",start_date:new Date("2024-04-03 00:00"),duration:5,parent:"13",progress:0,open:!0},{id:19,text:"1.0.2 version",start_date:new Date("2024-04-08 00:00"),duration:6,parent:"13",progress:0,open:!0},{id:20,text:"1.0.3 version",start_date:new Date("2024-04-16 00:00"),duration:8,parent:"13",progress:0,open:!0},{id:31,text:"1.0.4 version",start_date:new Date("2024-04-17 00:00"),duration:8,parent:"13",progress:0,open:!0},{id:32,text:"1.0.5 version",start_date:new Date("2024-04-26 00:00"),duration:9,parent:"13",progress:0,open:!0},{id:33,text:"1.0.9 version",start_date:new Date("2024-05-05 00:00"),duration:2,parent:"13",progress:0,open:!0},{id:14,text:"1.1 version",start_date:new Date("2024-05-07 00:00"),duration:30,parent:"11",progress:0,open:!0},{id:15,text:"1.2 version",start_date:new Date("2024-06-06 00:00"),duration:46,parent:"11",progress:0,open:!0},{id:16,text:"1.3 version",type:"project",render:"split",parent:"11",progress:0,open:!0,start_date:new Date("2024-07-22 00:00"),duration:11},{id:21,text:"1.3.1 version",start_date:new Date("2024-07-22 00:00"),duration:7,parent:"16",progress:0,open:!0},{id:22,text:"1.3.2 version",start_date:new Date("2024-07-29 00:00"),duration:7,parent:"16",progress:0,open:!0}];/** @license

dhtmlxGantt v.9.0.6 Standard

This version of dhtmlxGantt is distributed under GPL 2.0 license and can be legally used in GPL projects.

To use dhtmlxGantt in non-GPL projects (and get Pro version of the product), please obtain Individual, Commercial, Enterprise or Ultimate license on our site https://dhtmlx.com/docs/products/dhtmlxGantt/#licensing or contact us at info@dhtmlx.com

(c) XB Software

*/function F(t){var e=0,i=0,n=0,a=0;if(t.getBoundingClientRect){var r=t.getBoundingClientRect(),s=document.body,o=document.documentElement||document.body.parentNode||document.body,l=window.pageYOffset||o.scrollTop||s.scrollTop,d=window.pageXOffset||o.scrollLeft||s.scrollLeft,c=o.clientTop||s.clientTop||0,u=o.clientLeft||s.clientLeft||0;e=r.top+l-c,i=r.left+d-u,n=document.body.offsetWidth-r.right,a=document.body.offsetHeight-r.bottom}else{for(;t;)e+=parseInt(t.offsetTop,10),i+=parseInt(t.offsetLeft,10),t=t.offsetParent;n=document.body.offsetWidth-t.offsetWidth-i,a=document.body.offsetHeight-t.offsetHeight-e}return{y:Math.round(e),x:Math.round(i),width:t.offsetWidth,height:t.offsetHeight,right:Math.round(n),bottom:Math.round(a)}}function Ui(t){var e=!1,i=!1;if(window.getComputedStyle){var n=window.getComputedStyle(t,null);e=n.display,i=n.visibility}else t.currentStyle&&(e=t.currentStyle.display,i=t.currentStyle.visibility);return e!="none"&&i!="hidden"}function qi(t){return!isNaN(t.getAttribute("tabindex"))&&1*t.getAttribute("tabindex")>=0}function Gi(t){return!{a:!0,area:!0}[t.nodeName.loLowerCase()]||!!t.getAttribute("href")}function Yi(t){return!{input:!0,select:!0,textarea:!0,button:!0,object:!0}[t.nodeName.toLowerCase()]||!t.hasAttribute("disabled")}function xe(t){for(var e=t.querySelectorAll(["a[href]","area[href]","input","select","textarea","button","iframe","object","embed","[tabindex]","[contenteditable]"].join(", ")),i=Array.prototype.slice.call(e,0),n=0;n<i.length;n++)i[n].$position=n;for(i.sort(function(r,s){return r.tabIndex===0&&s.tabIndex!==0?1:r.tabIndex!==0&&s.tabIndex===0?-1:r.tabIndex===s.tabIndex?r.$position-s.$position:r.tabIndex<s.tabIndex?-1:1}),n=0;n<i.length;n++){var a=i[n];(qi(a)||Yi(a)||Gi(a))&&Ui(a)||(i.splice(n,1),n--)}return i}function ni(){var t=document.createElement("div");t.style.cssText="visibility:hidden;position:absolute;left:-1000px;width:100px;padding:0px;margin:0px;height:110px;min-height:100px;overflow-y:scroll;",document.body.appendChild(t);var e=t.offsetWidth-t.clientWidth;return document.body.removeChild(t),Math.max(e,15)}function X(t){if(!t)return"";var e=t.className||"";return e.baseVal&&(e=e.baseVal),e.indexOf||(e=""),le(e)}function St(t,e){e&&t.className.indexOf(e)===-1&&(t.className+=" "+e)}function Gt(t,e){e=e.split(" ");for(var i=0;i<e.length;i++){var n=new RegExp("\\s?\\b"+e[i]+"\\b(?![-_.])","");t.className=t.className.replace(n,"")}}function $e(t){return typeof t=="string"?document.getElementById(t)||document.querySelector(t)||document.body:t||document.body}var Bt;function ai(t,e){Bt||(Bt=document.createElement("div")),Bt.innerHTML=e;var i=Bt.firstChild;return t.appendChild(i),i}function ri(t){t&&t.parentNode&&t.parentNode.removeChild(t)}function si(t,e){for(var i=t.childNodes,n=i.length,a=[],r=0;r<n;r++){var s=i[r];s.className&&s.className.indexOf(e)!==-1&&a.push(s)}return a}function bt(t){var e;return t.tagName?e=t:(e=(t=t||window.event).target||t.srcElement).shadowRoot&&t.composedPath&&(e=t.composedPath()[0]),e}function et(t,e){if(e){for(var i=bt(t);i;){if(i.getAttribute&&i.getAttribute(e))return i;i=i.parentNode}return null}}function le(t){return(String.prototype.trim||function(){return this.replace(/^\s+|\s+$/g,"")}).apply(t)}function mt(t,e,i){var n=bt(t),a="";for(i===void 0&&(i=!0);n;){if(a=X(n)){var r=a.indexOf(e);if(r>=0){if(!i)return n;var s=r===0||!le(a.charAt(r-1)),o=r+e.length>=a.length||!le(a.charAt(r+e.length));if(s&&o)return n}}n=n.parentNode}return null}function rt(t,e){var i=document.documentElement,n=F(e);return{x:t.clientX+i.scrollLeft-i.clientLeft-n.x+e.scrollLeft,y:t.clientY+i.scrollTop-i.clientTop-n.y+e.scrollTop}}function oi(t,e){const i=F(t),n=F(e);return{x:i.x-n.x,y:i.y-n.y}}function G(t,e){if(!t||!e)return!1;for(;t&&t!=e;)t=t.parentNode;return t===e}function ct(t,e){if(t.closest)return t.closest(e);if(t.matches||t.msMatchesSelector||t.webkitMatchesSelector){var i=t;if(!document.documentElement.contains(i))return null;do{if((i.matches||i.msMatchesSelector||i.webkitMatchesSelector).call(i,e))return i;i=i.parentElement||i.parentNode}while(i!==null&&i.nodeType===1);return null}return console.error("Your browser is not supported"),null}function li(t){for(;t;){if(t.offsetWidth>0&&t.offsetHeight>0)return t;t=t.parentElement}return null}function di(){return document.head.createShadowRoot||document.head.attachShadow}function de(){var t=document.activeElement;return t.shadowRoot&&(t=t.shadowRoot.activeElement),t===document.body&&document.getSelection&&(t=document.getSelection().focusNode||document.body),t}function kt(t){if(!t||!di())return document.body;for(;t.parentNode&&(t=t.parentNode);)if(t instanceof ShadowRoot)return t.host;return document.body}const ci=Object.freeze(Object.defineProperty({__proto__:null,addClassName:St,closest:ct,getActiveElement:de,getChildNodes:si,getClassName:X,getClosestSizedElement:li,getFocusableNodes:xe,getNodePosition:F,getRelativeEventPosition:rt,getRelativeNodePosition:oi,getRootNode:kt,getScrollSize:ni,getTargetNode:bt,hasClass:function(t,e){return"classList"in t?t.classList.contains(e):new RegExp("\\b"+e+"\\b").test(t.className)},hasShadowParent:function(t){return!!kt(t)},insertNode:ai,isChildOf:G,isShadowDomSupported:di,locateAttribute:et,locateClassName:mt,removeClassName:Gt,removeNode:ri,toNode:$e},Symbol.toStringTag,{value:"Module"})),dt=typeof window<"u"?window:global;let Ji=class{constructor(t){this._mouseDown=!1,this._gantt=t,this._domEvents=t._createDomEventScope()}attach(t,e,i){const n=this._gantt,a=t.getViewPort();this._originPosition=dt.getComputedStyle(a).display,this._restoreOriginPosition=()=>{a.style.position=this._originPosition},this._originPosition==="static"&&(a.style.position="relative");const r=n.$services.getService("state");r.registerProvider("clickDrag",()=>({autoscroll:!1}));let s=null;const o=()=>{s&&(this._mouseDown=!0,t.setStart(n.copy(s)),t.setPosition(n.copy(s)),t.setEnd(n.copy(s)),s=null)};this._domEvents.attach(a,"mousedown",d=>{s=null;let c=".gantt_task_line, .gantt_task_link";i!==void 0&&(c=i instanceof Array?i.join(", "):i),c&&n.utils.dom.closest(d.target,c)||(r.registerProvider("clickDrag",()=>({autoscroll:this._mouseDown})),e&&d[e]!==!0||(s=this._getCoordinates(d,t)))});const l=kt(n.$root)||document.body;this._domEvents.attach(l,"mouseup",d=>{if(s=null,(!e||d[e]===!0)&&this._mouseDown===!0){this._mouseDown=!1;const c=this._getCoordinates(d,t);t.dragEnd(c)}}),this._domEvents.attach(a,"mousemove",d=>{if(e&&d[e]!==!0)return;const c=this._gantt.ext.clickDrag,u=(this._gantt.config.drag_timeline||{}).useKey;if(c&&u&&!e&&d[u])return;let h=null;if(!this._mouseDown&&s)return h=this._getCoordinates(d,t),void(Math.abs(s.relative.left-h.relative.left)>5&&o());this._mouseDown===!0&&(h=this._getCoordinates(d,t),t.setEnd(h),t.render())})}detach(){const t=this._gantt;this._domEvents.detachAll(),this._restoreOriginPosition&&this._restoreOriginPosition(),t.$services.getService("state").unregisterProvider("clickDrag")}destructor(){this.detach()}_getCoordinates(t,e){const i=e.getViewPort(),n=i.getBoundingClientRect(),{clientX:a,clientY:r}=t;return{absolute:{left:a,top:r},relative:{left:a-n.left+i.scrollLeft,top:r-n.top+i.scrollTop}}}};var ui=function(){this._silent_mode=!1,this.listeners={}};ui.prototype={_silentStart:function(){this._silent_mode=!0},_silentEnd:function(){this._silent_mode=!1}};var Ki=function(t){var e={},i=0,n=function(){var a=!0;for(var r in e){var s=e[r].apply(t,arguments);a=a&&s}return a};return n.addEvent=function(a,r){if(typeof a=="function"){var s;if(r&&r.id?s=r.id:(s=i,i++),r&&r.once){var o=a;a=function(){o(),n.removeEvent(s)}}return e[s]=a,s}return!1},n.removeEvent=function(a){delete e[a]},n.clear=function(){e={}},n};function ot(t){var e=new ui;t.attachEvent=function(i,n,a){i="ev_"+i.toLowerCase(),e.listeners[i]||(e.listeners[i]=Ki(this)),a&&a.thisObject&&(n=n.bind(a.thisObject));var r=i+":"+e.listeners[i].addEvent(n,a);return a&&a.id&&(r=a.id),r},t.attachAll=function(i){this.attachEvent("listen_all",i)},t.callEvent=function(i,n){if(e._silent_mode)return!0;var a="ev_"+i.toLowerCase(),r=e.listeners;return r.ev_listen_all&&r.ev_listen_all.apply(this,[i].concat(n)),!r[a]||r[a].apply(this,n)},t.checkEvent=function(i){return!!e.listeners["ev_"+i.toLowerCase()]},t.detachEvent=function(i){if(i){var n=e.listeners;for(var a in n)n[a].removeEvent(i);var r=i.split(":");if(n=e.listeners,r.length===2){var s=r[0],o=r[1];n[s]&&n[s].removeEvent(o)}}},t.detachAllEvents=function(){for(var i in e.listeners)e.listeners[i].clear()}}var Ie={second:1,minute:60,hour:3600,day:86400,week:604800,month:2592e3,quarter:7776e3,year:31536e3};function Vt(t){return Ie[t]||Ie.hour}function yt(t,e){if(t.forEach)t.forEach(e);else for(var i=t.slice(),n=0;n<i.length;n++)e(i[n],n)}function Xi(t,e){if(t.find)return t.find(e);for(var i=0;i<t.length;i++)if(e(t[i],i))return t[i]}function zt(t,e){if(t.includes)return t.includes(e);for(var i=0;i<t.length;i++)if(t[i]===e)return!0;return!1}function ce(t){return Array.isArray?Array.isArray(t):t&&t.length!==void 0&&t.pop&&t.push}function Z(t){return!(!t||typeof t!="object")&&!!(t.getFullYear&&t.getMonth&&t.getDate)}function xt(t){return Z(t)&&!isNaN(t.getTime())}function Me(t,e){var i,n=function(){n.$cancelTimeout(),n.$pending=!0;var a=Array.prototype.slice.call(arguments);i=setTimeout(function(){t.apply(this,a),n.$pending=!1},e)};return n.$pending=!1,n.$cancelTimeout=function(){clearTimeout(i),n.$pending=!1},n.$execute=function(){var a=Array.prototype.slice.call(arguments);t.apply(this,a),n.$cancelTimeout()},n}function at(t,e){return Ne(t)&&!Ne(e)&&(t="0"),t}function Ne(t){return t===0}function It(t,e){for(var i,n,a,r=0,s=t.length-1;r<=s;)if(n=+t[i=Math.floor((r+s)/2)],a=+t[i-1],n<e)r=i+1;else{if(!(n>e)){for(;+t[i]==+t[i+1];)i++;return i}if(!isNaN(a)&&a<e)return i-1;s=i-1}return t.length-1}class Zi{constructor(e,i,n){var a;this._el=document.createElement("div"),this.defaultRender=(r,s)=>{this._el||(this._el=document.createElement("div"));const o=this._el,l=Math.min(r.relative.top,s.relative.top),d=Math.max(r.relative.top,s.relative.top),c=Math.min(r.relative.left,s.relative.left),u=Math.max(r.relative.left,s.relative.left);if(this._singleRow){const h=this._getTaskPositionByTop(this._startPoint.relative.top);o.style.height=h.height+"px",o.style.top=h.top+"px"}else o.style.height=Math.abs(d-l)+"px",o.style.top=l+"px";return o.style.width=Math.abs(u-c)+"px",o.style.left=c+"px",o},this._gantt=i,this._view=n,this._viewPort=e.viewPort,this._el.classList.add(e.className),typeof e.callback=="function"&&(this._callback=e.callback),this.render=()=>{let r;r=e.render?e.render(this._startPoint,this._endPoint):this.defaultRender(this._startPoint,this._endPoint),r!==this._el&&(this._el&&this._el.parentNode&&this._el.parentNode.removeChild(this._el),this._el=r),e.className!==""&&this._el.classList.add(e.className),this.draw()},(a=this._viewPort).attachEvent&&a.detachEvent||ot(this._viewPort),this._singleRow=e.singleRow,this._useRequestAnimationFrame=e.useRequestAnimationFrame}draw(){if(this._useRequestAnimationFrame)return requestAnimationFrame(()=>{this._viewPort.appendChild(this.getElement())});this._viewPort.appendChild(this.getElement())}clear(){if(this._useRequestAnimationFrame)return requestAnimationFrame(()=>{this._el.parentNode&&this._viewPort.removeChild(this._el)});this._el.parentNode&&this._viewPort.removeChild(this._el)}getElement(){return this._el}getViewPort(){return this._viewPort}setStart(e){const i=this._gantt;this._startPoint=e,this._startDate=i.dateFromPos(this._startPoint.relative.left),this._viewPort.callEvent("onBeforeDrag",[this._startPoint])}setEnd(e){const i=this._gantt;if(this._endPoint=e,this._singleRow){const n=this._getTaskPositionByTop(this._startPoint.relative.top);this._endPoint.relative.top=n.top}this._endDate=i.dateFromPos(this._endPoint.relative.left),this._startPoint.relative.left>this._endPoint.relative.left&&(this._positionPoint={relative:{left:this._endPoint.relative.left,top:this._positionPoint.relative.top},absolute:{left:this._endPoint.absolute.left,top:this._positionPoint.absolute.top}}),this._startPoint.relative.top>this._endPoint.relative.top&&(this._positionPoint={relative:{left:this._positionPoint.relative.left,top:this._endPoint.relative.top},absolute:{left:this._positionPoint.absolute.left,top:this._endPoint.absolute.top}}),this._viewPort.callEvent("onDrag",[this._startPoint,this._endPoint])}setPosition(e){this._positionPoint=e}dragEnd(e){const i=this._gantt;e.relative.left<0&&(e.relative.left=0),this._viewPort.callEvent("onBeforeDragEnd",[this._startPoint,e]),this.setEnd(e),this._endDate=this._endDate||i.getState().max_date,this._startDate.valueOf()>this._endDate.valueOf()&&([this._startDate,this._endDate]=[this._endDate,this._startDate]),this.clear();const n=i.getTaskByTime(this._startDate,this._endDate),a=this._getTasksByTop(this._startPoint.relative.top,this._endPoint.relative.top);this._viewPort.callEvent("onDragEnd",[this._startPoint,this._endPoint]),this._callback&&this._callback(this._startPoint,this._endPoint,this._startDate,this._endDate,n,a)}getInBounds(){return this._singleRow}_getTasksByTop(e,i){const n=this._gantt;let a=e,r=i;e>i&&(a=i,r=e);const s=this._getTaskPositionByTop(a).index,o=this._getTaskPositionByTop(r).index,l=[];for(let d=s;d<=o;d++)n.getTaskByIndex(d)&&l.push(n.getTaskByIndex(d));return l}_getTaskPositionByTop(e){const i=this._gantt,n=this._view,a=n.getItemIndexByTopPosition(e),r=i.getTaskByIndex(a);if(r){const s=n.getItemHeight(r.id);return{top:n.getItemTop(r.id)||0,height:s||0,index:a}}{const s=n.getTotalHeight();return{top:e>s?s:0,height:i.config.row_height,index:e>s?i.getTaskCount():0}}}}class we{constructor(e){this._mouseDown=!1,this._calculateDirectionVector=()=>{if(this._trace.length>=10){const i=this._trace.slice(this._trace.length-10),n=[];for(let r=1;r<i.length;r++)n.push({x:i[r].x-i[r-1].x,y:i[r].y-i[r-1].y});const a={x:0,y:0};return n.forEach(r=>{a.x+=r.x,a.y+=r.y}),{magnitude:Math.sqrt(a.x*a.x+a.y*a.y),angleDegrees:180*Math.atan2(Math.abs(a.y),Math.abs(a.x))/Math.PI}}return null},this._applyDndReadyStyles=()=>{this._timeline.$task.classList.add("gantt_timeline_move_available")},this._clearDndReadyStyles=()=>{this._timeline.$task.classList.remove("gantt_timeline_move_available")},this._getScrollPosition=i=>{const n=this._gantt;return{x:n.$ui.getView(i.$config.scrollX).getScrollState().position,y:n.$ui.getView(i.$config.scrollY).getScrollState().position}},this._countNewScrollPosition=i=>{const n=this._calculateDirectionVector();let a=this._startPoint.x-i.x,r=this._startPoint.y-i.y;return n&&(n.angleDegrees<15?r=0:n.angleDegrees>75&&(a=0)),{x:this._scrollState.x+a,y:this._scrollState.y+r}},this._setScrollPosition=(i,n)=>{const a=this._gantt;requestAnimationFrame(()=>{a.scrollLayoutCell(i.$id,n.x,n.y)})},this._stopDrag=i=>{const n=this._gantt;if(this._trace=[],n.$root.classList.remove("gantt_noselect"),this._originalReadonly!==void 0&&(n.config.readonly=this._originalReadonly,this._mouseDown&&n.config.drag_timeline&&n.config.drag_timeline.render&&n.render()),this._originAutoscroll!==void 0&&(n.config.autoscroll=this._originAutoscroll),n.config.drag_timeline){const{useKey:a}=n.config.drag_timeline;if(a&&i[a]!==!0)return}this._mouseDown=!1},this._startDrag=i=>{const n=this._gantt;this._originAutoscroll=n.config.autoscroll,n.config.autoscroll=!1,n.$root.classList.add("gantt_noselect"),this._originalReadonly=n.config.readonly,n.config.readonly=!0,n.config.drag_timeline&&n.config.drag_timeline.render&&n.render(),this._trace=[],this._mouseDown=!0;const{x:a,y:r}=this._getScrollPosition(this._timeline);this._scrollState={x:a,y:r},this._startPoint={x:i.clientX,y:i.clientY},this._trace.push(this._startPoint)},this._gantt=e,this._domEvents=e._createDomEventScope(),this._trace=[]}static create(e){return new we(e)}destructor(){this._domEvents.detachAll()}attach(e){this._timeline=e;const i=this._gantt;this._domEvents.attach(e.$task,"mousedown",n=>{if(!i.config.drag_timeline)return;const{useKey:a,ignore:r,enabled:s}=i.config.drag_timeline;if(s===!1)return;let o=".gantt_task_line, .gantt_task_link";r!==void 0&&(o=r instanceof Array?r.join(", "):r),o&&i.utils.dom.closest(n.target,o)||a&&n[a]!==!0||this._startDrag(n)}),this._domEvents.attach(document,"keydown",n=>{if(!i.config.drag_timeline)return;const{useKey:a}=i.config.drag_timeline;a&&n[a]===!0&&this._applyDndReadyStyles()}),this._domEvents.attach(document,"keyup",n=>{if(!i.config.drag_timeline)return;const{useKey:a}=i.config.drag_timeline;a&&n[a]===!1&&(this._clearDndReadyStyles(),this._stopDrag(n))}),this._domEvents.attach(document,"mouseup",n=>{this._stopDrag(n)}),this._domEvents.attach(i.$root,"mouseup",n=>{this._stopDrag(n)}),this._domEvents.attach(document,"mouseleave",n=>{this._stopDrag(n)}),this._domEvents.attach(i.$root,"mouseleave",n=>{this._stopDrag(n)}),this._domEvents.attach(i.$root,"mousemove",n=>{if(!i.config.drag_timeline)return;const{useKey:a}=i.config.drag_timeline;if(a&&n[a]!==!0)return;const r=this._gantt.ext.clickDrag,s=(this._gantt.config.click_drag||{}).useKey;if((!r||!s||a||!n[s])&&this._mouseDown===!0){this._trace.push({x:n.clientX,y:n.clientY});const o=this._countNewScrollPosition({x:n.clientX,y:n.clientY});this._setScrollPosition(e,o),this._scrollState=o,this._startPoint={x:n.clientX,y:n.clientY}}})}}function Qi(t){(function(){var e=[];function i(){return!!e.length}function n(d){setTimeout(function(){i()||t.$destroyed||t.focus()},1)}function a(d){t.eventRemove(d,"keydown",s),t.event(d,"keydown",s),e.push(d)}function r(){var d=e.pop();d&&t.eventRemove(d,"keydown",s),n()}function s(d){var c=d.currentTarget;c==e[e.length-1]&&t.$keyboardNavigation.trapFocus(c,d)}function o(){a(t.getLightbox())}t.attachEvent("onLightbox",o),t.attachEvent("onAfterLightbox",r),t.attachEvent("onLightboxChange",function(){r(),o()}),t.attachEvent("onAfterQuickInfo",function(){n()}),t.attachEvent("onMessagePopup",function(d){l=t.utils.dom.getActiveElement(),a(d)}),t.attachEvent("onAfterMessagePopup",function(){r(),setTimeout(function(){l&&(l.focus(),l=null)},1)});var l=null;t.$keyboardNavigation.isModal=i})()}class tn{constructor(e){this.show=(i,n)=>{n===void 0?this._showForTask(i):this._showAtCoordinates(i,n)},this.hide=i=>{const n=this._gantt,a=this._quickInfoBox;this._quickInfoBoxId=0;const r=this._quickInfoTask;if(this._quickInfoTask=null,a&&a.parentNode){if(n.config.quick_info_detached)return n.callEvent("onAfterQuickInfo",[r]),a.parentNode.removeChild(a);a.className+=" gantt_qi_hidden",a.style.right==="auto"?a.style.left="-350px":a.style.right="-350px",i&&(a.style.left=a.style.right="",a.parentNode.removeChild(a)),n.callEvent("onAfterQuickInfo",[r])}},this.getNode=()=>this._quickInfoBox?this._quickInfoBox:null,this.setContainer=i=>{i&&(this._container=typeof i=="string"?document.getElementById(i):i)},this.setContent=i=>{const n=this._gantt,a={taskId:null,header:{title:"",date:""},content:"",buttons:n.config.quickinfo_buttons};i||(i=a),i.taskId||(i.taskId=a.taskId),i.header||(i.header=a.header),i.header.title||(i.header.title=a.header.title),i.header.date||(i.header.date=a.header.date),i.content||(i.content=a.content),i.buttons||(i.buttons=a.buttons);let r=this.getNode();r||(r=this._createQuickInfoElement()),i.taskId&&(this._quickInfoBoxId=i.taskId);const s=r.querySelector(".gantt_cal_qi_title"),o=s.querySelector(".gantt_cal_qi_tcontent"),l=s.querySelector(".gantt_cal_qi_tdate"),d=r.querySelector(".gantt_cal_qi_content"),c=r.querySelector(".gantt_cal_qi_controls");n._waiAria.quickInfoHeader(r,[i.header.title,i.header.date].join(" ")),o.innerHTML=i.header.title,l.innerHTML=i.header.date,i.header.title||i.header.date?s.style.display="":s.style.display="none",d.innerHTML=i.content;const u=i.buttons;u.length?c.style.display="":c.style.display="none";let h="";for(let f=0;f<u.length;f++){const g=n._waiAria.quickInfoButtonAttrString(n.locale.labels[u[f]]);h+=`<div class="gantt_qi_big_icon ${u[f]} dhx_gantt_${u[f]}" title="${n.locale.labels[u[f]]}" ${g}>
            <div class='dhx_menu_icon dhx_gantt_icon ${u[f]} gantt_menu_icon dhx_gantt_${u[f]}'></div>
            <div>${n.locale.labels[u[f]]}</div>
         </div>`}c.innerHTML=h,n.eventRemove(r,"click",this._qiButtonClickHandler),n.eventRemove(r,"keypress",this._qiKeyPressHandler),n.event(r,"click",this._qiButtonClickHandler),n.event(r,"keypress",this._qiKeyPressHandler)},this._qiButtonClickHandler=i=>{this._qi_button_click(i.target)},this._qiKeyPressHandler=i=>{const n=i.which;n!==13&&n!==32||setTimeout(()=>{this._qi_button_click(i.target)},1)},this._gantt=e}_showAtCoordinates(e,i){this.hide(!0),this._quickInfoBoxId=0,this._quickInfoTask=null,this._quickInfoBox||(this._createQuickInfoElement(),this.setContent()),this._appendAtCoordinates(e,i),this._gantt.callEvent("onQuickInfo",[null])}_showForTask(e){const i=this._gantt;if(e===this._quickInfoBoxId&&i.utils.dom.isChildOf(this._quickInfoBox,document.body)||!i.config.show_quick_info)return;this.hide(!0);const n=this._getContainer(),a=this._get_event_counter_part(e,6,n.xViewport,n.yViewport);a&&(this._quickInfoBox=this._init_quick_info(e),this._quickInfoTask=e,this._quickInfoBox.className=this._prepare_quick_info_classname(e),this._fill_quick_data(e),this._show_quick_info(a,6),i.callEvent("onQuickInfo",[e]))}_get_event_counter_part(e,i,n,a){const r=this._gantt;let s=r.getTaskNode(e);if(!s&&(s=r.getTaskRowNode(e),!s))return null;let o=0;const l=i+s.offsetTop+s.offsetHeight;let d=s;if(r.utils.dom.isChildOf(d,n))for(;d&&d!==n;)o+=d.offsetLeft,d=d.offsetParent;const c=r.getScrollState();return d?{left:o,top:l,dx:o+s.offsetWidth/2-c.x>n.offsetWidth/2?1:0,dy:l+s.offsetHeight/2-c.y>a.offsetHeight/2?1:0,width:s.offsetWidth,height:s.offsetHeight}:null}_createQuickInfoElement(){const e=this._gantt,i=document.createElement("div");i.className+="gantt_cal_quick_info",e._waiAria.quickInfoAttr(i);var n=`
		<div class="gantt_cal_qi_tcontrols">
			<a class="gantt_cal_qi_close_btn dhx_gantt_icon dhx_gantt_icon_close"></a>
		</div>
		<div class="gantt_cal_qi_title" ${e._waiAria.quickInfoHeaderAttrString()}>
				
				<div class="gantt_cal_qi_tcontent"></div>
				<div class="gantt_cal_qi_tdate"></div>
			</div>
			<div class="gantt_cal_qi_content"></div>`;if(n+='<div class="gantt_cal_qi_controls">',n+="</div>",i.innerHTML=n,e.config.quick_info_detached){const a=this._getContainer();e.event(a.parent,"scroll",()=>{this.hide()})}return this._quickInfoBox=i,i}_init_quick_info(e){const i=this._gantt,n=i.getTask(e);return typeof this._quickInfoReadonly=="boolean"&&i.isReadonly(n)!==this._quickInfoReadonly&&(this.hide(!0),this._quickInfoBox=null),this._quickInfoReadonly=i.isReadonly(n),this._quickInfoBox||(this._quickInfoBox=this._createQuickInfoElement()),this._quickInfoBox}_prepare_quick_info_classname(e){const i=this._gantt,n=i.getTask(e);let a=`gantt_cal_quick_info gantt_${i.getTaskType(n)}`;const r=i.templates.quick_info_class(n.start_date,n.end_date,n);return r&&(a+=" "+r),a}_fill_quick_data(e){const i=this._gantt,n=i.getTask(e);this._quickInfoBoxId=e;let a=[];if(this._quickInfoReadonly){const r=i.config.quickinfo_buttons,s={icon_delete:!0,icon_edit:!0};for(let o=0;o<r.length;o++)this._quickInfoReadonly&&s[r[o]]||a.push(r[o])}else a=i.config.quickinfo_buttons;this.setContent({header:{title:i.templates.quick_info_title(n.start_date,n.end_date,n),date:i.templates.quick_info_date(n.start_date,n.end_date,n)},content:i.templates.quick_info_content(n.start_date,n.end_date,n),buttons:a})}_appendAtCoordinates(e,i){const n=this._quickInfoBox,a=this._getContainer();n.parentNode&&n.parentNode.nodeName.toLowerCase()!=="#document-fragment"||a.parent.appendChild(n),n.style.left=e+"px",n.style.top=i+"px"}_show_quick_info(e,i){const n=this._gantt,a=this._quickInfoBox;if(n.config.quick_info_detached){const r=this._getContainer();a.parentNode&&a.parentNode.nodeName.toLowerCase()!=="#document-fragment"||r.parent.appendChild(a);const s=a.offsetWidth,o=a.offsetHeight,l=n.getScrollState(),d=r.xViewport,c=r.yViewport,u=d.offsetWidth+l.x-s,h=e.top-l.y+o;let f=e.top;h>c.offsetHeight/2&&(f=e.top-(o+e.height+2*i),f<l.y&&h<=c.offsetHeight&&(f=e.top)),f<l.y&&(f=l.y);const g=Math.min(Math.max(l.x,e.left-e.dx*(s-e.width)),u),y=f;this._appendAtCoordinates(g,y)}else a.style.top="20px",e.dx===1?(a.style.right="auto",a.style.left="-300px",setTimeout(()=>{a.style.left="10px"},1)):(a.style.left="auto",a.style.right="-300px",setTimeout(()=>{a.style.right="10px"},1)),a.className+=" gantt_qi_"+(e.dx===1?"left":"right"),n.$root.appendChild(a)}_qi_button_click(e){const i=this._gantt,n=this._quickInfoBox;if(!e||e===n)return;if(e.closest(".gantt_cal_qi_close_btn"))return void this.hide();const a=e.className;if(a.indexOf("_icon")!==-1){const r=this._quickInfoBoxId;i.$click.buttons[a.split(" ")[1].replace("icon_","")](r)}else this._qi_button_click(e.parentNode)}_getContainer(){const e=this._gantt;let i=this._container?this._container:e.$task_data;return i&&i.offsetHeight&&i.offsetWidth?{parent:i,xViewport:e.$task,yViewport:e.$task_data}:(i=this._container?this._container:e.$grid_data,i&&i.offsetHeight&&i.offsetWidth?{parent:i,xViewport:e.$grid,yViewport:e.$grid_data}:{parent:this._container?this._container:e.$layout,xViewport:e.$layout,yViewport:e.$layout})}}var Kt,en={}.constructor.toString();function q(t){var e,i;if(t&&typeof t=="object")switch(!0){case Z(t):i=new Date(t);break;case ce(t):for(i=new Array(t.length),e=0;e<t.length;e++)i[e]=q(t[e]);break;default:for(e in i=function(n){return n.constructor.toString()!==en}(t)?Object.create(t):{},t)Object.prototype.hasOwnProperty.apply(t,[e])&&(i[e]=q(t[e]))}return i||t}function N(t,e,i){for(var n in e)(t[n]===void 0||i)&&(t[n]=e[n]);return t}function j(t){return t!==void 0}function st(){return Kt||(Kt=new Date().valueOf()),++Kt}function R(t,e){return t.bind?t.bind(e):function(){return t.apply(e,arguments)}}function hi(t,e,i,n){t.addEventListener?t.addEventListener(e,i,n!==void 0&&n):t.attachEvent&&t.attachEvent("on"+e,i)}function _i(t,e,i,n){t.removeEventListener?t.removeEventListener(e,i,n!==void 0&&n):t.detachEvent&&t.detachEvent("on"+e,i)}const nn=Object.freeze(Object.defineProperty({__proto__:null,bind:R,copy:q,defined:j,event:hi,eventRemove:_i,mixin:N,uid:st},Symbol.toStringTag,{value:"Module"}));function Se(t,e){t=t||hi,e=e||_i;var i=[],n={attach:function(a,r,s,o){i.push({element:a,event:r,callback:s,capture:o}),t(a,r,s,o)},detach:function(a,r,s,o){e(a,r,s,o);for(var l=0;l<i.length;l++){var d=i[l];d.element===a&&d.event===r&&d.callback===s&&d.capture===o&&(i.splice(l,1),l--)}},detachAll:function(){for(var a=i.slice(),r=0;r<a.length;r++){var s=a[r];n.detach(s.element,s.event,s.callback,s.capture),n.detach(s.element,s.event,s.callback,void 0),n.detach(s.element,s.event,s.callback,!1),n.detach(s.element,s.event,s.callback,!0)}i.splice(0,i.length)},extend:function(){return Se(this.event,this.eventRemove)}};return n}class an{constructor(e){this._gantt=e}getNode(){const e=this._gantt;return this._tooltipNode||(this._tooltipNode=document.createElement("div"),this._tooltipNode.className="gantt_tooltip",e._waiAria.tooltipAttr(this._tooltipNode)),this._tooltipNode}setViewport(e){return this._root=e,this}show(e,i){const n=this._gantt,a=document.body,r=this.getNode();if(G(r,a)||(this.hide(),r.style.top=r.style.top||"0px",r.style.left=r.style.left||"0px",a.appendChild(r)),this._isLikeMouseEvent(e)){const s=this._calculateTooltipPosition(e);i=s.top,e=s.left}return r.style.top=i+"px",r.style.left=e+"px",n._waiAria.tooltipVisibleAttr(r),this}hide(){const e=this._gantt,i=this.getNode();return i&&i.parentNode&&i.parentNode.removeChild(i),e._waiAria.tooltipHiddenAttr(i),this}setContent(e){return this.getNode().innerHTML=e,this}_isLikeMouseEvent(e){return!(!e||typeof e!="object")&&"clientX"in e&&"clientY"in e}_getViewPort(){return this._root||document.body}_calculateTooltipPosition(e){const i=this._gantt,n=this._getViewPortSize(),a=this.getNode(),r={top:0,left:0,width:a.offsetWidth,height:a.offsetHeight,bottom:0,right:0},s=i.config.tooltip_offset_x,o=i.config.tooltip_offset_y,l=document.body,d=rt(e,l),c=F(l);d.y+=c.y,r.top=d.y,r.left=d.x,r.top+=o,r.left+=s,r.bottom=r.top+r.height,r.right=r.left+r.width;const u=window.scrollY+l.scrollTop;return r.top<n.top-u?(r.top=n.top,r.bottom=r.top+r.height):r.bottom>n.bottom&&(r.bottom=n.bottom,r.top=r.bottom-r.height),r.left<n.left?(r.left=n.left,r.right=n.left+r.width):r.right>n.right&&(r.right=n.right,r.left=r.right-r.width),d.x>=r.left&&d.x<=r.right&&(r.left=d.x-r.width-s,r.right=r.left+r.width),d.y>=r.top&&d.y<=r.bottom&&(r.top=d.y-r.height-o,r.bottom=r.top+r.height),r}_getViewPortSize(){const e=this._gantt,i=this._getViewPort();let n,a=i,r=window.scrollY+document.body.scrollTop,s=window.scrollX+document.body.scrollLeft;return i===e.$task_data?(a=e.$task,r=0,s=0,n=F(e.$task)):n=F(a),{left:n.x+s,top:n.y+r,width:n.width,height:n.height,bottom:n.y+n.height+r,right:n.x+n.width+s}}}class rn{constructor(e){this._listeners={},this.tooltip=new an(e),this._gantt=e,this._domEvents=Se(),this._initDelayedFunctions()}destructor(){this.tooltip.hide(),this._domEvents.detachAll()}hideTooltip(){this.delayHide()}attach(e){let i=document.body;const n=this._gantt;e.global||(i=n.$root);let a=null;const r=s=>{const o=bt(s),l=ct(o,e.selector);if(G(o,this.tooltip.getNode()))return;const d=()=>{a=l,e.onmouseenter(s,l)};a?l&&l===a?e.onmousemove(s,l):(e.onmouseleave(s,a),a=null,l&&l!==a&&d()):l&&d()};this.detach(e.selector),this._domEvents.attach(i,"mousemove",r),this._listeners[e.selector]={node:i,handler:r}}detach(e){const i=this._listeners[e];i&&this._domEvents.detach(i.node,"mousemove",i.handler)}tooltipFor(e){const i=n=>{let a=n;return document.createEventObject&&!document.createEvent&&(a=document.createEventObject(n)),a};this._initDelayedFunctions(),this.attach({selector:e.selector,global:e.global,onmouseenter:(n,a)=>{const r=e.html(n,a);r&&this.delayShow(i(n),r)},onmousemove:(n,a)=>{const r=e.html(n,a);r?this.delayShow(i(n),r):(this.delayShow.$cancelTimeout(),this.delayHide())},onmouseleave:()=>{this.delayShow.$cancelTimeout(),this.delayHide()}})}_initDelayedFunctions(){const e=this._gantt;this.delayShow&&this.delayShow.$cancelTimeout(),this.delayHide&&this.delayHide.$cancelTimeout(),this.tooltip.hide(),this.delayShow=Me((i,n)=>{e.callEvent("onBeforeTooltip",[i])===!1?this.tooltip.hide():(this.tooltip.setContent(n),this.tooltip.show(i))},e.config.tooltip_timeout||1),this.delayHide=Me(()=>{this.delayShow.$cancelTimeout(),this.tooltip.hide()},e.config.tooltip_hide_timeout||1)}}const Le={onBeforeUndo:"onAfterUndo",onBeforeRedo:"onAfterRedo"},Pe=["onTaskDragStart","onAfterTaskUpdate","onAfterParentExpand","onAfterTaskDelete","onBeforeBatchUpdate"];class sn{constructor(e,i){this._batchAction=null,this._batchMode=!1,this._ignore=!1,this._ignoreMoveEvents=!1,this._initialTasks={},this._initialLinks={},this._nestedTasks={},this._nestedLinks={},this._undo=e,this._gantt=i,this._attachEvents()}store(e,i,n=!1){return i===this._gantt.config.undo_types.task?this._storeTask(e,n):i===this._gantt.config.undo_types.link&&this._storeLink(e,n)}isMoveEventsIgnored(){return this._ignoreMoveEvents}toggleIgnoreMoveEvents(e){this._ignoreMoveEvents=e||!1}startIgnore(){this._ignore=!0}stopIgnore(){this._ignore=!1}startBatchAction(){this._timeout||(this._timeout=setTimeout(()=>{this.stopBatchAction(),this._timeout=null},10)),this._ignore||this._batchMode||(this._batchMode=!0,this._batchAction=this._undo.action.create())}stopBatchAction(){if(this._ignore)return;const e=this._undo;this._batchAction&&e.logAction(this._batchAction),this._batchMode=!1,this._batchAction=null}onTaskAdded(e){this._ignore||this._storeTaskCommand(e,this._undo.command.type.add)}onTaskUpdated(e){this._ignore||this._storeTaskCommand(e,this._undo.command.type.update)}onTaskMoved(e){if(!this._ignore){e.$local_index=this._gantt.getTaskIndex(e.id);const i=this.getInitialTask(e.id);if(e.$local_index===i.$local_index&&this._gantt.getParent(e)===this._gantt.getParent(i))return;this._storeEntityCommand(e,this.getInitialTask(e.id),this._undo.command.type.move,this._undo.command.entity.task)}}onTaskDeleted(e){if(!this._ignore){if(this._storeTaskCommand(e,this._undo.command.type.remove),this._nestedTasks[e.id]){const i=this._nestedTasks[e.id];for(let n=0;n<i.length;n++)this._storeTaskCommand(i[n],this._undo.command.type.remove)}if(this._nestedLinks[e.id]){const i=this._nestedLinks[e.id];for(let n=0;n<i.length;n++)this._storeLinkCommand(i[n],this._undo.command.type.remove)}}}onLinkAdded(e){this._ignore||this._storeLinkCommand(e,this._undo.command.type.add)}onLinkUpdated(e){this._ignore||this._storeLinkCommand(e,this._undo.command.type.update)}onLinkDeleted(e){this._ignore||this._storeLinkCommand(e,this._undo.command.type.remove)}setNestedTasks(e,i){const n=this._gantt;let a=null;const r=[];let s=this._getLinks(n.getTask(e));for(let d=0;d<i.length;d++)a=this.setInitialTask(i[d]),s=s.concat(this._getLinks(a)),r.push(a);const o={};for(let d=0;d<s.length;d++)o[s[d]]=!0;const l=[];for(const d in o)l.push(this.setInitialLink(d));this._nestedTasks[e]=r,this._nestedLinks[e]=l}setInitialTask(e,i){const n=this._gantt;if(i||!this._initialTasks[e]||!this._batchMode){const a=n.copy(n.getTask(e));a.$index=n.getGlobalTaskIndex(e),a.$local_index=n.getTaskIndex(e),this.setInitialTaskObject(e,a)}return this._initialTasks[e]}getInitialTask(e){return this._initialTasks[e]}clearInitialTasks(){this._initialTasks={}}setInitialTaskObject(e,i){this._initialTasks[e]=i}setInitialLink(e,i){return this._initialLinks[e]&&this._batchMode||(this._initialLinks[e]=this._gantt.copy(this._gantt.getLink(e))),this._initialLinks[e]}getInitialLink(e){return this._initialLinks[e]}clearInitialLinks(){this._initialLinks={}}_attachEvents(){let e=null;const i=this._gantt,n=()=>{e||(e=setTimeout(()=>{e=null}),this.clearInitialTasks(),i.eachTask(l=>{this.setInitialTask(l.id)}),this.clearInitialLinks(),i.getLinks().forEach(l=>{this.setInitialLink(l.id)}))},a=l=>i.copy(i.getTask(l));for(const l in Le)i.attachEvent(l,()=>(this.startIgnore(),!0)),i.attachEvent(Le[l],()=>(this.stopIgnore(),!0));for(let l=0;l<Pe.length;l++)i.attachEvent(Pe[l],()=>(this.startBatchAction(),!0));i.attachEvent("onParse",()=>{this._undo.clearUndoStack(),this._undo.clearRedoStack(),n()}),i.attachEvent("onAfterTaskAdd",(l,d)=>{this.setInitialTask(l,!0),this.onTaskAdded(d)}),i.attachEvent("onAfterTaskUpdate",(l,d)=>{this.onTaskUpdated(d)}),i.attachEvent("onAfterParentExpand",(l,d)=>{this.onTaskUpdated(d)}),i.attachEvent("onAfterTaskDelete",(l,d)=>{this.onTaskDeleted(d)}),i.attachEvent("onAfterLinkAdd",(l,d)=>{this.setInitialLink(l,!0),this.onLinkAdded(d)}),i.attachEvent("onAfterLinkUpdate",(l,d)=>{this.onLinkUpdated(d)}),i.attachEvent("onAfterLinkDelete",(l,d)=>{this.onLinkDeleted(d)}),i.attachEvent("onRowDragEnd",(l,d)=>(this.onTaskMoved(a(l)),this.toggleIgnoreMoveEvents(),!0)),i.attachEvent("onBeforeTaskDelete",l=>{this.store(l,i.config.undo_types.task);const d=[];return n(),i.eachTask(c=>{d.push(c.id)},l),this.setNestedTasks(l,d),!0});const r=i.getDatastore("task");r.attachEvent("onBeforeItemMove",(l,d,c)=>(this.isMoveEventsIgnored()||n(),!0)),r.attachEvent("onAfterItemMove",(l,d,c)=>(this.isMoveEventsIgnored()||this.onTaskMoved(a(l)),!0)),i.attachEvent("onRowDragStart",(l,d,c)=>(this.toggleIgnoreMoveEvents(!0),n(),!0));let s=null,o=!1;if(i.attachEvent("onBeforeTaskDrag",l=>{if(s=i.getState().drag_id,s===l){const d=i.getTask(l);i.isSummaryTask(d)&&i.config.drag_project&&(o=!0)}if(i.plugins().multiselect){const d=i.getSelectedTasks();d.length>1&&d.forEach(c=>{this.store(c,i.config.undo_types.task,!0)})}return this.store(l,i.config.undo_types.task)}),i.attachEvent("onAfterTaskDrag",l=>{(o||i.plugins().multiselect&&i.getSelectedTasks().length>1)&&s===l&&(o=!1,s=null,this.stopBatchAction()),this.store(l,i.config.undo_types.task,!0)}),i.attachEvent("onLightbox",l=>this.store(l,i.config.undo_types.task)),i.attachEvent("onBeforeTaskAutoSchedule",l=>(this.store(l.id,i.config.undo_types.task,!0),!0)),i.ext.inlineEditors){let l=null,d=null;i.attachEvent("onGanttLayoutReady",()=>{l&&i.ext.inlineEditors.detachEvent(l),d&&i.ext.inlineEditors.detachEvent(d),d=i.ext.inlineEditors.attachEvent("onEditStart",c=>{this.store(c.id,i.config.undo_types.task)}),l=i.ext.inlineEditors.attachEvent("onBeforeEditStart",c=>(this.stopBatchAction(),!0))})}}_storeCommand(e){const i=this._undo;if(i.updateConfigs(),i.undoEnabled)if(this._batchMode)this._batchAction.commands.push(e);else{const n=i.action.create([e]);i.logAction(n)}}_storeEntityCommand(e,i,n,a){const r=this._undo.command.create(e,i,n,a);this._storeCommand(r)}_storeTaskCommand(e,i){this._gantt.isTaskExists(e.id)&&(e.$local_index=this._gantt.getTaskIndex(e.id)),this._storeEntityCommand(e,this.getInitialTask(e.id),i,this._undo.command.entity.task)}_storeLinkCommand(e,i){this._storeEntityCommand(e,this.getInitialLink(e.id),i,this._undo.command.entity.link)}_getLinks(e){return e.$source.concat(e.$target)}_storeTask(e,i=!1){const n=this._gantt;return this.setInitialTask(e,i),n.eachTask(a=>{this.setInitialTask(a.id)},e),!0}_storeLink(e,i=!1){return this.setInitialLink(e,i),!0}}class on{constructor(e){this.maxSteps=100,this.undoEnabled=!0,this.redoEnabled=!0,this.action={create:i=>({commands:i?i.slice():[]}),invert:i=>{const n=this._gantt.copy(i),a=this.command;for(let r=0;r<i.commands.length;r++){const s=n.commands[r]=a.invert(n.commands[r]);s.type!==a.type.update&&s.type!==a.type.move||([s.value,s.oldValue]=[s.oldValue,s.value])}return n}},this.command={entity:null,type:null,create:(i,n,a,r)=>{const s=this._gantt;return{entity:r,type:a,value:s.copy(i),oldValue:s.copy(n||i)}},invert:i=>{const n=this._gantt.copy(i);return n.type=this.command.inverseCommands(i.type),n},inverseCommands:i=>{const n=this._gantt,a=this.command.type;switch(i){case a.update:return a.update;case a.remove:return a.add;case a.add:return a.remove;case a.move:return a.move;default:return n.assert(!1,"Invalid command "+i),null}}},this._undoStack=[],this._redoStack=[],this._gantt=e}getUndoStack(){return this._undoStack}setUndoStack(e){this._undoStack=e}getRedoStack(){return this._redoStack}setRedoStack(e){this._redoStack=e}clearUndoStack(){this._undoStack=[]}clearRedoStack(){this._redoStack=[]}updateConfigs(){const e=this._gantt;this.maxSteps=e.config.undo_steps||100,this.command.entity=e.config.undo_types,this.command.type=e.config.undo_actions,this.undoEnabled=!!e.config.undo,this.redoEnabled=!!e.config.redo}undo(){const e=this._gantt;if(this.updateConfigs(),!this.undoEnabled)return;const i=this._pop(this._undoStack);if(i&&this._reorderCommands(i),e.callEvent("onBeforeUndo",[i])!==!1&&i)return this._applyAction(this.action.invert(i)),this._push(this._redoStack,e.copy(i)),void e.callEvent("onAfterUndo",[i]);e.callEvent("onAfterUndo",[null])}redo(){const e=this._gantt;if(this.updateConfigs(),!this.redoEnabled)return;const i=this._pop(this._redoStack);if(i&&this._reorderCommands(i),e.callEvent("onBeforeRedo",[i])!==!1&&i)return this._applyAction(i),this._push(this._undoStack,e.copy(i)),void e.callEvent("onAfterRedo",[i]);e.callEvent("onAfterRedo",[null])}logAction(e){this._push(this._undoStack,e),this._redoStack=[]}_push(e,i){const n=this._gantt;if(!i.commands.length)return;const a=e===this._undoStack?"onBeforeUndoStack":"onBeforeRedoStack";if(n.callEvent(a,[i])!==!1&&i.commands.length){for(e.push(i);e.length>this.maxSteps;)e.shift();return i}}_pop(e){return e.pop()}_reorderCommands(e){const i={any:0,link:1,task:2},n={move:1,any:0};e.commands.sort(function(a,r){if(a.entity==="task"&&r.entity==="task")return a.type!==r.type?(n[r.type]||0)-(n[a.type]||0):a.type==="move"&&a.oldValue&&r.oldValue&&r.oldValue.parent===a.oldValue.parent?a.oldValue.$index-r.oldValue.$index:0;{const s=i[a.entity]||i.any;return(i[r.entity]||i.any)-s}})}_applyAction(e){let i=null;const n=this.command.entity,a=this.command.type,r=this._gantt,s={};s[n.task]={add:"addTask",get:"getTask",update:"updateTask",remove:"deleteTask",move:"moveTask",isExists:"isTaskExists"},s[n.link]={add:"addLink",get:"getLink",update:"updateLink",remove:"deleteLink",isExists:"isLinkExists"},r.batchUpdate(function(){for(let o=0;o<e.commands.length;o++){i=e.commands[o];const l=s[i.entity][i.type],d=s[i.entity].get,c=s[i.entity].isExists;if(i.type===a.add)r[l](i.oldValue,i.oldValue.parent,i.oldValue.$local_index);else if(i.type===a.remove)r[c](i.value.id)&&r[l](i.value.id);else if(i.type===a.update){const u=r[d](i.value.id);for(const h in i.value){let f=!(h.startsWith("$")||h.startsWith("_"));["$open"].indexOf(h)>-1&&(f=!0),f&&(u[h]=i.value[h])}r[l](i.value.id)}else i.type===a.move&&(r[l](i.value.id,i.value.$local_index,i.value.parent),r.callEvent("onRowDragEnd",[i.value.id]))}})}}const ln={click_drag:function(t){t.ext||(t.ext={});const e={className:"gantt_click_drag_rect",useRequestAnimationFrame:!0,callback:void 0,singleRow:!1};function i(){const n={viewPort:t.$task_data,...e};t.ext.clickDrag&&t.ext.clickDrag.destructor(),t.ext.clickDrag=new Ji(t);const a=t.config.click_drag;n.render=a.render||e.render,n.className=a.className||e.className,n.callback=a.callback||e.callback,n.viewPort=a.viewPort||t.$task_data,n.useRequestAnimationFrame=a.useRequestAnimationFrame===void 0?e.useRequestAnimationFrame:a.useRequestAnimationFrame,n.singleRow=a.singleRow===void 0?e.singleRow:a.singleRow;const r=t.$ui.getView("timeline"),s=new Zi(n,t,r);t.ext.clickDrag.attach(s,a.useKey,a.ignore)}t.attachEvent("onGanttReady",()=>{t.config.click_drag&&i()}),t.attachEvent("onGanttLayoutReady",function(){t.$container&&t.config.click_drag&&t.attachEvent("onGanttRender",function(){i()},{once:!0})}),t.attachEvent("onDestroy",()=>{t.ext.clickDrag&&t.ext.clickDrag.destructor()})},drag_timeline:function(t){t.ext||(t.ext={}),t.ext.dragTimeline={create:()=>we.create(t)},t.config.drag_timeline={enabled:!0,render:!1}},fullscreen:function(t){function e(){const c=document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement;return!(!c||c!==document.body)}function i(){try{return document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled}catch(c){console.error("Fullscreen is not available:",c)}}t.$services.getService("state").registerProvider("fullscreen",()=>i()?{fullscreen:e()}:void 0);let n={overflow:null,padding:null,paddingTop:null,paddingRight:null,paddingBottom:null,paddingLeft:null};const a={width:null,height:null,top:null,left:null,position:null,zIndex:null,modified:!1};let r=null;function s(c,u){u.width=c.width,u.height=c.height,u.top=c.top,u.left=c.left,u.position=c.position,u.zIndex=c.zIndex}let o=!1;function l(){if(!t.$container)return;let c;e()?o&&(c="onExpand",function(){const u=t.ext.fullscreen.getFullscreenElement(),h=document.body;s(u.style,a),n={overflow:h.style.overflow,padding:h.style.padding?h.style.padding:null,paddingTop:h.style.paddingTop?h.style.paddingTop:null,paddingRight:h.style.paddingRight?h.style.paddingRight:null,paddingBottom:h.style.paddingBottom?h.style.paddingBottom:null,paddingLeft:h.style.paddingLeft?h.style.paddingLeft:null},h.style.padding&&(h.style.padding="0"),h.style.paddingTop&&(h.style.paddingTop="0"),h.style.paddingRight&&(h.style.paddingRight="0"),h.style.paddingBottom&&(h.style.paddingBottom="0"),h.style.paddingLeft&&(h.style.paddingLeft="0"),h.style.overflow="hidden",u.style.width="100vw",u.style.height="100vh",u.style.top="0px",u.style.left="0px",u.style.position="absolute",u.style.zIndex=1,a.modified=!0,r=function(f){let g=f.parentNode;const y=[];for(;g&&g.style;)y.push({element:g,originalPositioning:g.style.position}),g.style.position="static",g=g.parentNode;return y}(u)}()):o&&(o=!1,c="onCollapse",function(){const u=t.ext.fullscreen.getFullscreenElement(),h=document.body;a.modified&&(n.padding&&(h.style.padding=n.padding),n.paddingTop&&(h.style.paddingTop=n.paddingTop),n.paddingRight&&(h.style.paddingRight=n.paddingRight),n.paddingBottom&&(h.style.paddingBottom=n.paddingBottom),n.paddingLeft&&(h.style.paddingLeft=n.paddingLeft),h.style.overflow=n.overflow,n={overflow:null,padding:null,paddingTop:null,paddingRight:null,paddingBottom:null,paddingLeft:null},s(a,u.style),a.modified=!1),r.forEach(f=>{f.element.style.position=f.originalPositioning}),r=null}()),setTimeout(()=>{t.render()}),setTimeout(()=>{t.callEvent(c,[t.ext.fullscreen.getFullscreenElement()])})}function d(){return!t.$container||!t.ext.fullscreen.getFullscreenElement()?!0:i()?!1:((console.warning||console.log)("The `fullscreen` feature not being allowed, or full-screen mode not being supported"),!0)}t.ext.fullscreen={expand(){if(d()||e()||!t.callEvent("onBeforeExpand",[this.getFullscreenElement()]))return;o=!0;const c=document.body,u=c.webkitRequestFullscreen?[Element.ALLOW_KEYBOARD_INPUT]:[],h=c.msRequestFullscreen||c.mozRequestFullScreen||c.webkitRequestFullscreen||c.requestFullscreen;h&&h.apply(c,u)},collapse(){if(d()||!e()||!t.callEvent("onBeforeCollapse",[this.getFullscreenElement()]))return;const c=document.msExitFullscreen||document.mozCancelFullScreen||document.webkitExitFullscreen||document.exitFullscreen;c&&c.apply(document)},toggle(){d()||(e()?this.collapse():this.expand())},getFullscreenElement:()=>t.$root},t.expand=function(){t.ext.fullscreen.expand()},t.collapse=function(){t.ext.fullscreen.collapse()},t.attachEvent("onGanttReady",function(){t.event(document,"webkitfullscreenchange",l),t.event(document,"mozfullscreenchange",l),t.event(document,"MSFullscreenChange",l),t.event(document,"fullscreenChange",l),t.event(document,"fullscreenchange",l)})},keyboard_navigation:function(t){(function(e){e.config.keyboard_navigation=!0,e.config.keyboard_navigation_cells=!1,e.$keyboardNavigation={},e._compose=function(){for(var i=Array.prototype.slice.call(arguments,0),n={},a=0;a<i.length;a++){var r=i[a];for(var s in typeof r=="function"&&(r=new r),r)n[s]=r[s]}return n},function(i){i.$keyboardNavigation.shortcuts={createCommand:function(){return{modifiers:{shift:!1,alt:!1,ctrl:!1,meta:!1},keyCode:null}},parse:function(n){for(var a=[],r=this.getExpressions(this.trim(n)),s=0;s<r.length;s++){for(var o=this.getWords(r[s]),l=this.createCommand(),d=0;d<o.length;d++)this.commandKeys[o[d]]?l.modifiers[o[d]]=!0:this.specialKeys[o[d]]?l.keyCode=this.specialKeys[o[d]]:l.keyCode=o[d].charCodeAt(0);a.push(l)}return a},getCommandFromEvent:function(n){var a=this.createCommand();a.modifiers.shift=!!n.shiftKey,a.modifiers.alt=!!n.altKey,a.modifiers.ctrl=!!n.ctrlKey,a.modifiers.meta=!!n.metaKey,a.keyCode=n.which||n.keyCode,a.keyCode>=96&&a.keyCode<=105&&(a.keyCode-=48);var r=String.fromCharCode(a.keyCode);return r&&(a.keyCode=r.toLowerCase().charCodeAt(0)),a},getHashFromEvent:function(n){return this.getHash(this.getCommandFromEvent(n))},getHash:function(n){var a=[];for(var r in n.modifiers)n.modifiers[r]&&a.push(r);return a.push(n.keyCode),a.join(this.junctionChar)},getExpressions:function(n){return n.split(this.junctionChar)},getWords:function(n){return n.split(this.combinationChar)},trim:function(n){return n.replace(/\s/g,"")},junctionChar:",",combinationChar:"+",commandKeys:{shift:16,alt:18,ctrl:17,meta:!0},specialKeys:{backspace:8,tab:9,enter:13,esc:27,space:32,up:38,down:40,left:37,right:39,home:36,end:35,pageup:33,pagedown:34,delete:46,insert:45,plus:107,f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123}}}(e),function(i){i.$keyboardNavigation.EventHandler={_handlers:null,findHandler:function(n){this._handlers||(this._handlers={});var a=i.$keyboardNavigation.shortcuts.getHash(n);return this._handlers[a]},doAction:function(n,a){var r=this.findHandler(n);if(r){if(i.$keyboardNavigation.facade.callEvent("onBeforeAction",[n,a])===!1)return;r.call(this,a),a.preventDefault?a.preventDefault():a.returnValue=!1}},bind:function(n,a){this._handlers||(this._handlers={});for(var r=i.$keyboardNavigation.shortcuts,s=r.parse(n),o=0;o<s.length;o++)this._handlers[r.getHash(s[o])]=a},unbind:function(n){for(var a=i.$keyboardNavigation.shortcuts,r=a.parse(n),s=0;s<r.length;s++)this._handlers[a.getHash(r[s])]&&delete this._handlers[a.getHash(r[s])]},bindAll:function(n){for(var a in n)this.bind(a,n[a])},initKeys:function(){this._handlers||(this._handlers={}),this.keys&&this.bindAll(this.keys)}}}(e),function(i){i.$keyboardNavigation.getFocusableNodes=xe,i.$keyboardNavigation.trapFocus=function(n,a){if(a.keyCode!=9)return!1;for(var r=i.$keyboardNavigation.getFocusableNodes(n),s=de(),o=-1,l=0;l<r.length;l++)if(r[l]==s){o=l;break}if(a.shiftKey){if(o<=0){var d=r[r.length-1];if(d)return d.focus(),a.preventDefault(),!0}}else if(o>=r.length-1){var c=r[0];if(c)return c.focus(),a.preventDefault(),!0}return!1}}(e),function(i){i.$keyboardNavigation.GanttNode=function(){},i.$keyboardNavigation.GanttNode.prototype=i._compose(i.$keyboardNavigation.EventHandler,{focus:function(){i.focus()},blur:function(){},isEnabled:function(){return i.$container.hasAttribute("tabindex")},scrollHorizontal:function(n){var a=i.dateFromPos(i.getScrollState().x),r=i.getScale(),s=n<0?-r.step:r.step;a=i.date.add(a,s,r.unit),i.scrollTo(i.posFromDate(a))},scrollVertical:function(n){var a=i.getScrollState().y,r=i.config.row_height;i.scrollTo(null,a+(n<0?-1:1)*r)},keys:{"alt+left":function(n){this.scrollHorizontal(-1)},"alt+right":function(n){this.scrollHorizontal(1)},"alt+up":function(n){this.scrollVertical(-1)},"alt+down":function(n){this.scrollVertical(1)},"ctrl+z":function(){i.undo&&i.undo()},"ctrl+r":function(){i.redo&&i.redo()}}}),i.$keyboardNavigation.GanttNode.prototype.bindAll(i.$keyboardNavigation.GanttNode.prototype.keys)}(e),function(i){i.$keyboardNavigation.KeyNavNode=function(){},i.$keyboardNavigation.KeyNavNode.prototype=i._compose(i.$keyboardNavigation.EventHandler,{isValid:function(){return!0},fallback:function(){return null},moveTo:function(n){i.$keyboardNavigation.dispatcher.setActiveNode(n)},compareTo:function(n){if(!n)return!1;for(var a in this){if(!!this[a]!=!!n[a])return!1;var r=!(!this[a]||!this[a].toString),s=!(!n[a]||!n[a].toString);if(s!=r)return!1;if(s&&r){if(n[a].toString()!=this[a].toString())return!1}else if(n[a]!=this[a])return!1}return!0},getNode:function(){},focus:function(){var n=this.getNode();if(n){var a=i.$keyboardNavigation.facade;a.callEvent("onBeforeFocus",[n])!==!1&&n&&(n.setAttribute("tabindex","-1"),n.$eventAttached||(n.$eventAttached=!0,i.event(n,"focus",function(r){return r.preventDefault(),!1},!1)),i.utils.dom.isChildOf(document.activeElement,n)&&(n=document.activeElement),n.focus&&n.focus(),a.callEvent("onFocus",[this.getNode()]))}},blur:function(){var n=this.getNode();n&&(i.$keyboardNavigation.facade.callEvent("onBlur",[n]),n.setAttribute("tabindex","-1"))}})}(e),function(i){i.$keyboardNavigation.HeaderCell=function(n){this.index=n||0},i.$keyboardNavigation.HeaderCell.prototype=i._compose(i.$keyboardNavigation.KeyNavNode,{_handlers:null,isValid:function(){return!(!i.config.show_grid&&i.getVisibleTaskCount()||!i.getGridColumns()[this.index]&&i.getVisibleTaskCount())},fallback:function(){if(!i.config.show_grid)return i.getVisibleTaskCount()?new i.$keyboardNavigation.TaskRow:null;for(var n=i.getGridColumns(),a=this.index;a>=0&&!n[a];)a--;return n[a]?new i.$keyboardNavigation.HeaderCell(a):null},fromDomElement:function(n){var a=mt(n,"gantt_grid_head_cell");if(a){for(var r=0;a&&a.previousSibling;)a=a.previousSibling,r+=1;return new i.$keyboardNavigation.HeaderCell(r)}return null},getNode:function(){return i.$grid_scale.childNodes[this.index]},keys:{left:function(){this.index>0&&this.moveTo(new i.$keyboardNavigation.HeaderCell(this.index-1))},right:function(){var n=i.getGridColumns();this.index<n.length-1&&this.moveTo(new i.$keyboardNavigation.HeaderCell(this.index+1))},down:function(){var n,a=i.getChildren(i.config.root_id);i.isTaskExists(a[0])&&(n=a[0]),n&&(i.config.keyboard_navigation_cells?this.moveTo(new i.$keyboardNavigation.TaskCell(n,this.index)):this.moveTo(new i.$keyboardNavigation.TaskRow(n)))},end:function(){var n=i.getGridColumns();this.moveTo(new i.$keyboardNavigation.HeaderCell(n.length-1))},home:function(){this.moveTo(new i.$keyboardNavigation.HeaderCell(0))},"enter, space":function(){de().click()},"ctrl+enter":function(){i.isReadonly(this)||i.createTask({},this.taskId)}}}),i.$keyboardNavigation.HeaderCell.prototype.bindAll(i.$keyboardNavigation.HeaderCell.prototype.keys)}(e),function(i){i.$keyboardNavigation.TaskRow=function(n){if(!n){var a=i.getChildren(i.config.root_id);a[0]&&(n=a[0])}this.taskId=n,i.isTaskExists(this.taskId)&&(this.index=i.getTaskIndex(this.taskId),this.globalIndex=i.getGlobalTaskIndex(this.taskId),this.splitItem=!!i.getTask(this.taskId).$split_subtask,this.parentId=i.getParent(this.taskId))},i.$keyboardNavigation.TaskRow.prototype=i._compose(i.$keyboardNavigation.KeyNavNode,{_handlers:null,isValid:function(){return i.isTaskExists(this.taskId)&&i.getTaskIndex(this.taskId)>-1},fallback:function(){if(!i.getVisibleTaskCount()){var n=new i.$keyboardNavigation.HeaderCell;return n.isValid()?n:null}if(this.splitItem)return new i.$keyboardNavigation.TaskRow(this.parentId);var a=-1;if(i.getTaskByIndex(this.globalIndex-1))a=this.globalIndex-1;else if(i.getTaskByIndex(this.globalIndex+1))a=this.globalIndex+1;else for(var r=this.globalIndex;r>=0;){if(i.getTaskByIndex(r)){a=r;break}r--}return a>-1?new i.$keyboardNavigation.TaskRow(i.getTaskByIndex(a).id):void 0},fromDomElement:function(n){if(i.config.keyboard_navigation_cells)return null;var a=i.locate(n);return i.isTaskExists(a)?new i.$keyboardNavigation.TaskRow(a):null},getNode:function(){if(i.isTaskExists(this.taskId)&&i.isTaskVisible(this.taskId))return i.config.show_grid?i.$grid.querySelector(`.gantt_row[${i.config.task_attribute}="${String(this.taskId).replaceAll('"','\\"')}"]`):i.getTaskNode(this.taskId)},focus:function(n){if(!n){const a=i.getTaskPosition(i.getTask(this.taskId)),r=i.getTaskHeight(this.taskId),s=i.getScrollState();let o,l;o=i.$task?i.$task.offsetWidth:s.inner_width,l=i.$grid_data||i.$task_data?(i.$grid_data||i.$task_data).offsetHeight:s.inner_height,a.top<s.y||a.top+r>s.y+l?i.scrollTo(null,a.top-20):i.config.scroll_on_click&&i.config.show_chart&&(a.left>s.x+o?i.scrollTo(a.left-i.config.task_scroll_offset):a.left+a.width<s.x&&i.scrollTo(a.left+a.width-i.config.task_scroll_offset))}i.$keyboardNavigation.KeyNavNode.prototype.focus.apply(this,[n]),function(){var a=i.$ui.getView("grid"),r=parseInt(a.$grid.scrollLeft),s=parseInt(a.$grid_data.scrollTop),o=a.$config.scrollX;if(o&&a.$config.scrollable){var l=i.$ui.getView(o);l&&l.scrollTo(r,s)}var d=a.$config.scrollY;if(d){var c=i.$ui.getView(d);c&&c.scrollTo(r,s)}}()},keys:{pagedown:function(){i.getVisibleTaskCount()&&this.moveTo(new i.$keyboardNavigation.TaskRow(i.getTaskByIndex(i.getVisibleTaskCount()-1).id))},pageup:function(){i.getVisibleTaskCount()&&this.moveTo(new i.$keyboardNavigation.TaskRow(i.getTaskByIndex(0).id))},up:function(){var n=null,a=i.getPrev(this.taskId);n=i.isTaskExists(a)?new i.$keyboardNavigation.TaskRow(a):new i.$keyboardNavigation.HeaderCell,this.moveTo(n)},down:function(){var n=i.getNext(this.taskId);i.isTaskExists(n)&&this.moveTo(new i.$keyboardNavigation.TaskRow(n))},"shift+down":function(){i.hasChild(this.taskId)&&!i.getTask(this.taskId).$open&&i.open(this.taskId)},"shift+up":function(){i.hasChild(this.taskId)&&i.getTask(this.taskId).$open&&i.close(this.taskId)},"shift+right":function(){if(!i.isReadonly(this)){var n=i.getPrevSibling(this.taskId);i.isTaskExists(n)&&!i.isChildOf(this.taskId,n)&&(i.getTask(n).$open=!0,i.moveTask(this.taskId,-1,n)!==!1&&i.updateTask(this.taskId))}},"shift+left":function(){if(!i.isReadonly(this)){var n=i.getParent(this.taskId);i.isTaskExists(n)&&i.moveTask(this.taskId,i.getTaskIndex(n)+1,i.getParent(n))!==!1&&i.updateTask(this.taskId)}},space:function(n){i.isSelectedTask(this.taskId)?i.unselectTask(this.taskId):i.selectTask(this.taskId)},"ctrl+left":function(n){i.close(this.taskId)},"ctrl+right":function(n){i.open(this.taskId)},delete:function(n){i.isReadonly(this)||i.$click.buttons.delete(this.taskId)},enter:function(){i.isReadonly(this)||i.showLightbox(this.taskId)},"ctrl+enter":function(){i.isReadonly(this)||i.createTask({},this.taskId)}}}),i.$keyboardNavigation.TaskRow.prototype.bindAll(i.$keyboardNavigation.TaskRow.prototype.keys)}(e),function(i){i.$keyboardNavigation.TaskCell=function(n,a){if(!(n=at(n,i.config.root_id))){var r=i.getChildren(i.config.root_id);r[0]&&(n=r[0])}this.taskId=n,this.columnIndex=a||0,i.isTaskExists(this.taskId)&&(this.index=i.getTaskIndex(this.taskId),this.globalIndex=i.getGlobalTaskIndex(this.taskId))},i.$keyboardNavigation.TaskCell.prototype=i._compose(i.$keyboardNavigation.TaskRow,{_handlers:null,isValid:function(){return i.$keyboardNavigation.TaskRow.prototype.isValid.call(this)&&!!i.getGridColumns()[this.columnIndex]},fallback:function(){var n=i.$keyboardNavigation.TaskRow.prototype.fallback.call(this),a=n;if(n instanceof i.$keyboardNavigation.TaskRow){for(var r=i.getGridColumns(),s=this.columnIndex;s>=0&&!r[s];)s--;r[s]&&(a=new i.$keyboardNavigation.TaskCell(n.taskId,s))}return a},fromDomElement:function(n){if(!i.config.keyboard_navigation_cells)return null;var a=i.locate(n);if(i.isTaskExists(a)){var r=0,s=et(n,"data-column-index");return s&&(r=1*s.getAttribute("data-column-index")),new i.$keyboardNavigation.TaskCell(a,r)}return null},getNode:function(){if(i.isTaskExists(this.taskId)&&(i.isTaskVisible(this.taskId)||i.config.show_tasks_outside_timescale)){if(i.config.show_grid){var n=i.$grid.querySelector(".gantt_row["+i.config.task_attribute+"='"+this.taskId+"']");return n?n.querySelector("[data-column-index='"+this.columnIndex+"']"):null}return i.getTaskNode(this.taskId)}},keys:{up:function(){var n=null,a=i.getPrev(this.taskId);n=i.isTaskExists(a)?new i.$keyboardNavigation.TaskCell(a,this.columnIndex):new i.$keyboardNavigation.HeaderCell(this.columnIndex),this.moveTo(n)},down:function(){var n=i.getNext(this.taskId);i.isTaskExists(n)&&this.moveTo(new i.$keyboardNavigation.TaskCell(n,this.columnIndex))},left:function(){this.columnIndex>0&&this.moveTo(new i.$keyboardNavigation.TaskCell(this.taskId,this.columnIndex-1))},right:function(){var n=i.getGridColumns();this.columnIndex<n.length-1&&this.moveTo(new i.$keyboardNavigation.TaskCell(this.taskId,this.columnIndex+1))},end:function(){var n=i.getGridColumns();this.moveTo(new i.$keyboardNavigation.TaskCell(this.taskId,n.length-1))},home:function(){this.moveTo(new i.$keyboardNavigation.TaskCell(this.taskId,0))},pagedown:function(){i.getVisibleTaskCount()&&this.moveTo(new i.$keyboardNavigation.TaskCell(i.getTaskByIndex(i.getVisibleTaskCount()-1).id,this.columnIndex))},pageup:function(){i.getVisibleTaskCount()&&this.moveTo(new i.$keyboardNavigation.TaskCell(i.getTaskByIndex(0).id,this.columnIndex))}}}),i.$keyboardNavigation.TaskCell.prototype.bindAll(i.$keyboardNavigation.TaskRow.prototype.keys),i.$keyboardNavigation.TaskCell.prototype.bindAll(i.$keyboardNavigation.TaskCell.prototype.keys)}(e),Qi(e),function(i){i.$keyboardNavigation.dispatcher={isActive:!1,activeNode:null,globalNode:new i.$keyboardNavigation.GanttNode,enable:function(){this.isActive=!0,this.setActiveNode(this.getActiveNode())},disable:function(){this.isActive=!1},isEnabled:function(){return!!this.isActive},getDefaultNode:function(){var n;return(n=i.config.keyboard_navigation_cells?new i.$keyboardNavigation.TaskCell:new i.$keyboardNavigation.TaskRow).isValid()||(n=n.fallback()),n},setDefaultNode:function(){this.setActiveNode(this.getDefaultNode())},getActiveNode:function(){var n=this.activeNode;return n&&!n.isValid()&&(n=n.fallback()),n},fromDomElement:function(n){for(var a=[i.$keyboardNavigation.TaskRow,i.$keyboardNavigation.TaskCell,i.$keyboardNavigation.HeaderCell],r=0;r<a.length;r++)if(a[r].prototype.fromDomElement){var s=a[r].prototype.fromDomElement(n);if(s)return s}return null},focusGlobalNode:function(){this.blurNode(this.globalNode),this.focusNode(this.globalNode)},setActiveNode:function(n){var a=!0;this.activeNode&&this.activeNode.compareTo(n)&&(a=!1),this.isEnabled()&&(a&&this.blurNode(this.activeNode),this.activeNode=n,this.focusNode(this.activeNode,!a))},focusNode:function(n,a){n&&n.focus&&n.focus(a)},blurNode:function(n){n&&n.blur&&n.blur()},keyDownHandler:function(n){if(!i.$keyboardNavigation.isModal()&&this.isEnabled()&&!n.defaultPrevented){var a=this.globalNode,r=i.$keyboardNavigation.shortcuts.getCommandFromEvent(n),s=this.getActiveNode();i.$keyboardNavigation.facade.callEvent("onKeyDown",[r,n])!==!1&&(s?s.findHandler(r)?s.doAction(r,n):a.findHandler(r)&&a.doAction(r,n):this.setDefaultNode())}},_timeout:null,awaitsFocus:function(){return this._timeout!==null},delay:function(n,a){clearTimeout(this._timeout),this._timeout=setTimeout(i.bind(function(){this._timeout=null,n()},this),a||1)},clearDelay:function(){clearTimeout(this._timeout)}}}(e),function(){var i=e.$keyboardNavigation.dispatcher;i.isTaskFocused=function(v){var b=i.activeNode;return(b instanceof e.$keyboardNavigation.TaskRow||b instanceof e.$keyboardNavigation.TaskCell)&&b.taskId==v};var n=function(v){if(e.config.keyboard_navigation&&(e.config.keyboard_navigation_cells||!s(v))&&!o(v)&&!function(b){return!!ct(b.target,".gantt_cal_light")}(v))return i.keyDownHandler(v)},a=function(v){if(i.$preventDefault)return v.preventDefault(),e.$container.blur(),!1;i.awaitsFocus()||i.focusGlobalNode()},r=function(){if(!i.isEnabled())return;const v=!G(document.activeElement,e.$container)&&document.activeElement.localName!="body";var b=i.getActiveNode();if(b&&!v){var _,m,p=b.getNode();p&&p.parentNode&&(_=p.parentNode.scrollTop,m=p.parentNode.scrollLeft),b.focus(!0),p&&p.parentNode&&(p.parentNode.scrollTop=_,p.parentNode.scrollLeft=m)}};function s(v){return!!ct(v.target,".gantt_grid_editor_placeholder")}function o(v){return!!ct(v.target,".no_keyboard_navigation")}function l(v){if(!e.config.keyboard_navigation||!e.config.keyboard_navigation_cells&&s(v))return!0;if(!o(v)){var b,_=i.fromDomElement(v);_&&(i.activeNode instanceof e.$keyboardNavigation.TaskCell&&G(v.target,e.$task)&&(_=new e.$keyboardNavigation.TaskCell(_.taskId,i.activeNode.columnIndex)),b=_),b?i.isEnabled()?i.delay(function(){i.setActiveNode(b)}):i.activeNode=b:(i.$preventDefault=!0,setTimeout(function(){i.$preventDefault=!1},300))}}e.attachEvent("onDataRender",function(){e.config.keyboard_navigation&&r()}),e.attachEvent("onGanttRender",function(){e.$root&&(e.eventRemove(e.$root,"keydown",n),e.eventRemove(e.$container,"focus",a),e.eventRemove(e.$container,"mousedown",l),e.config.keyboard_navigation?(e.event(e.$root,"keydown",n),e.event(e.$container,"focus",a),e.event(e.$container,"mousedown",l),e.$container.setAttribute("tabindex","0")):e.$container.removeAttribute("tabindex"))});var d=e.attachEvent("onGanttReady",function(){if(e.detachEvent(d),e.$data.tasksStore.attachEvent("onStoreUpdated",function(b){if(e.config.keyboard_navigation&&i.isEnabled()){const _=i.getActiveNode(),m=e.$ui.getView("grid"),p=m.getItemTop(b),k=m.$grid_data.scrollTop,$=k+m.$grid_data.getBoundingClientRect().height;_&&_.taskId==b&&k<=p&&$>=p&&r()}}),e._smart_render){var v=e._smart_render._redrawTasks;e._smart_render._redrawTasks=function(b,_){if(e.config.keyboard_navigation&&i.isEnabled()){var m=i.getActiveNode();if(m&&m.taskId!==void 0){for(var p=!1,k=0;k<_.length;k++)if(_[k].id==m.taskId&&_[k].start_date){p=!0;break}p||_.push(e.getTask(m.taskId))}}return v.apply(this,arguments)}}});let c=null,u=!1;e.attachEvent("onTaskCreated",function(v){return c=v.id,!0}),e.attachEvent("onAfterTaskAdd",function(v,b){if(!e.config.keyboard_navigation)return!0;if(i.isEnabled()){if(v==c&&(u=!0,setTimeout(()=>{u=!1,c=null})),u&&b.type==e.config.types.placeholder)return;var _=0,m=i.activeNode;m instanceof e.$keyboardNavigation.TaskCell&&(_=m.columnIndex);var p=e.config.keyboard_navigation_cells?e.$keyboardNavigation.TaskCell:e.$keyboardNavigation.TaskRow;b.type==e.config.types.placeholder&&e.config.placeholder_task.focusOnCreate===!1||i.setActiveNode(new p(v,_))}}),e.attachEvent("onTaskIdChange",function(v,b){if(!e.config.keyboard_navigation)return!0;var _=i.activeNode;return i.isTaskFocused(v)&&(_.taskId=b),!0});var h=setInterval(function(){e.config.keyboard_navigation&&(i.isEnabled()||i.enable())},500);function f(v){var b={gantt:e.$keyboardNavigation.GanttNode,headerCell:e.$keyboardNavigation.HeaderCell,taskRow:e.$keyboardNavigation.TaskRow,taskCell:e.$keyboardNavigation.TaskCell};return b[v]||b.gantt}function g(v){for(var b=e.getGridColumns(),_=0;_<b.length;_++)if(b[_].name==v)return _;return 0}e.attachEvent("onDestroy",function(){clearInterval(h)});var y={};ot(y),e.mixin(y,{addShortcut:function(v,b,_){var m=f(_);m&&m.prototype.bind(v,b)},getShortcutHandler:function(v,b){var _=e.$keyboardNavigation.shortcuts.parse(v);if(_.length)return y.getCommandHandler(_[0],b)},getCommandHandler:function(v,b){var _=f(b);if(_&&v)return _.prototype.findHandler(v)},removeShortcut:function(v,b){var _=f(b);_&&_.prototype.unbind(v)},focus:function(v){var b,_=v?v.type:null,m=f(_);switch(_){case"taskCell":b=new m(v.id,g(v.column));break;case"taskRow":b=new m(v.id);break;case"headerCell":b=new m(g(v.column))}i.delay(function(){b?i.setActiveNode(b):(i.enable(),i.getActiveNode()?i.awaitsFocus()||i.enable():i.setDefaultNode())})},getActiveNode:function(){if(i.isEnabled()){var v=i.getActiveNode(),b=(m=v)instanceof e.$keyboardNavigation.GanttNode?"gantt":m instanceof e.$keyboardNavigation.HeaderCell?"headerCell":m instanceof e.$keyboardNavigation.TaskRow?"taskRow":m instanceof e.$keyboardNavigation.TaskCell?"taskCell":null,_=e.getGridColumns();switch(b){case"taskCell":return{type:"taskCell",id:v.taskId,column:_[v.columnIndex].name};case"taskRow":return{type:"taskRow",id:v.taskId};case"headerCell":return{type:"headerCell",column:_[v.index].name}}}var m;return null}}),e.$keyboardNavigation.facade=y,e.ext.keyboardNavigation=y,e.focus=function(){y.focus()},e.addShortcut=y.addShortcut,e.getShortcutHandler=y.getShortcutHandler,e.removeShortcut=y.removeShortcut}()})(t)},quick_info:function(t){t.ext||(t.ext={}),t.ext.quickInfo=new tn(t),t.config.quickinfo_buttons=["icon_edit","icon_delete"],t.config.quick_info_detached=!0,t.config.show_quick_info=!0,t.templates.quick_info_title=function(a,r,s){return s.text.substr(0,50)},t.templates.quick_info_content=function(a,r,s){return s.details||s.text},t.templates.quick_info_date=function(a,r,s){return t.templates.task_time(a,r,s)},t.templates.quick_info_class=function(a,r,s){return""},t.attachEvent("onTaskClick",function(a,r){return t.utils.dom.closest(r.target,".gantt_add")||setTimeout(function(){t.ext.quickInfo.show(a)},0),!0});const e=["onViewChange","onLightbox","onBeforeTaskDelete","onBeforeDrag"],i=function(){return t.ext.quickInfo.hide(),!0};for(let a=0;a<e.length;a++)t.attachEvent(e[a],i);function n(){return t.ext.quickInfo.hide(),t.ext.quickInfo._quickInfoBox=null,!0}t.attachEvent("onEmptyClick",function(a){let r=!0;const s=document.querySelector(".gantt_cal_quick_info");s&&t.utils.dom.isChildOf(a.target,s)&&(r=!1),r&&i()}),t.attachEvent("onGanttReady",n),t.attachEvent("onDestroy",n),t.event(window,"keydown",function(a){a.keyCode===27&&t.ext.quickInfo.hide()}),t.showQuickInfo=function(){t.ext.quickInfo.show.apply(t.ext.quickInfo,arguments)},t.hideQuickInfo=function(){t.ext.quickInfo.hide.apply(t.ext.quickInfo,arguments)}},tooltip:function(t){t.config.tooltip_timeout=30,t.config.tooltip_offset_y=20,t.config.tooltip_offset_x=10,t.config.tooltip_hide_timeout=30;const e=new rn(t);t.ext.tooltips=e,t.attachEvent("onGanttReady",function(){t.$root&&e.tooltipFor({selector:"["+t.config.task_attribute+"]:not(.gantt_task_row)",html:i=>{if(t.config.touch&&!t.config.touch_tooltip)return;const n=t.locate(i);if(t.isTaskExists(n)){const a=t.getTask(n);return t.templates.tooltip_text(a.start_date,a.end_date,a)}return null},global:!1})}),t.attachEvent("onDestroy",function(){e.destructor()}),t.attachEvent("onLightbox",function(){e.hideTooltip()}),t.attachEvent("onBeforeTooltip",function(){if(t.getState().link_source_id)return!1}),t.attachEvent("onGanttScroll",function(){e.hideTooltip()})},undo:function(t){const e=new on(t),i=new sn(e,t);function n(d,c,u){d&&(d.id===c&&(d.id=u),d.parent===c&&(d.parent=u))}function a(d,c,u){n(d.value,c,u),n(d.oldValue,c,u)}function r(d,c,u){d&&(d.source===c&&(d.source=u),d.target===c&&(d.target=u))}function s(d,c,u){r(d.value,c,u),r(d.oldValue,c,u)}function o(d,c,u){const h=e;for(let f=0;f<d.length;f++){const g=d[f];for(let y=0;y<g.commands.length;y++)g.commands[y].entity===h.command.entity.task?a(g.commands[y],c,u):g.commands[y].entity===h.command.entity.link&&s(g.commands[y],c,u)}}function l(d,c,u){const h=e;for(let f=0;f<d.length;f++){const g=d[f];for(let y=0;y<g.commands.length;y++){const v=g.commands[y];v.entity===h.command.entity.link&&(v.value&&v.value.id===c&&(v.value.id=u),v.oldValue&&v.oldValue.id===c&&(v.oldValue.id=u))}}}t.config.undo=!0,t.config.redo=!0,t.config.undo_types={link:"link",task:"task"},t.config.undo_actions={update:"update",remove:"remove",add:"add",move:"move"},t.ext||(t.ext={}),t.ext.undo={undo:()=>e.undo(),redo:()=>e.redo(),getUndoStack:()=>e.getUndoStack(),setUndoStack:d=>e.setUndoStack(d),getRedoStack:()=>e.getRedoStack(),setRedoStack:d=>e.setRedoStack(d),clearUndoStack:()=>e.clearUndoStack(),clearRedoStack:()=>e.clearRedoStack(),saveState:(d,c)=>i.store(d,c,!0),getInitialState:(d,c)=>c===t.config.undo_types.link?i.getInitialLink(d):i.getInitialTask(d)},t.undo=t.ext.undo.undo,t.redo=t.ext.undo.redo,t.getUndoStack=t.ext.undo.getUndoStack,t.getRedoStack=t.ext.undo.getRedoStack,t.clearUndoStack=t.ext.undo.clearUndoStack,t.clearRedoStack=t.ext.undo.clearRedoStack,t.attachEvent("onTaskIdChange",(d,c)=>{const u=e;o(u.getUndoStack(),d,c),o(u.getRedoStack(),d,c)}),t.attachEvent("onLinkIdChange",(d,c)=>{const u=e;l(u.getUndoStack(),d,c),l(u.getRedoStack(),d,c)}),t.attachEvent("onGanttReady",()=>{e.updateConfigs()})},marker:function(t){function e(n){if(!t.config.show_markers||!n.start_date)return!1;var a=t.getState();if(+n.start_date>+a.max_date||(!n.end_date||+n.end_date<+a.min_date)&&+n.start_date<+a.min_date)return;var r=document.createElement("div");r.setAttribute("data-marker-id",n.id);var s="gantt_marker";t.templates.marker_class&&(s+=" "+t.templates.marker_class(n)),n.css&&(s+=" "+n.css),t.templates.marker_class&&(s+=" "+t.templates.marker_class(n)),n.title&&(r.title=n.title),r.className=s;var o=t.posFromDate(n.start_date);r.style.left=o+"px";let l=Math.max(t.getRowTop(t.getVisibleTaskCount()),0)+"px";if(t.config.timeline_placeholder&&t.$task_data&&(l=t.$task_data.scrollHeight+"px"),r.style.height=l,n.end_date){var d=t.posFromDate(n.end_date);r.style.width=Math.max(d-o,0)+"px"}return n.text&&(r.innerHTML="<div class='gantt_marker_content' >"+n.text+"</div>"),r}function i(){if(t.$task_data){var n=document.createElement("div");n.className="gantt_marker_area",t.$task_data.appendChild(n),t.$marker_area=n}}t._markers||(t._markers=t.createDatastore({name:"marker",initItem:function(n){return n.id=n.id||t.uid(),n}})),t.config.show_markers=!0,t.attachEvent("onBeforeGanttRender",function(){t.$marker_area||i()}),t.attachEvent("onDataRender",function(){t.$marker_area||(i(),t.renderMarkers())}),t.attachEvent("onGanttLayoutReady",function(){t.attachEvent("onBeforeGanttRender",function(){i(),t.$services.getService("layers").createDataRender({name:"marker",defaultContainer:function(){return t.$marker_area}}).addLayer(e)},{once:!0})}),t.getMarker=function(n){return this._markers?this._markers.getItem(n):null},t.addMarker=function(n){return this._markers.addItem(n)},t.deleteMarker=function(n){return!!this._markers.exists(n)&&(this._markers.removeItem(n),!0)},t.updateMarker=function(n){this._markers.refresh(n)},t._getMarkers=function(){return this._markers.getItems()},t.renderMarkers=function(){this._markers.refresh()}},multiselect:function(t){t.config.multiselect=!0,t.config.multiselect_one_level=!1,t._multiselect={_selected:{},_one_level:!1,_active:!0,_first_selected_when_shift:null,getDefaultSelected:function(){var e=this.getSelected();return e.length?e[e.length-1]:null},setFirstSelected:function(e){this._first_selected_when_shift=e},getFirstSelected:function(){return this._first_selected_when_shift},isActive:function(){return this.updateState(),this._active},updateState:function(){this._one_level=t.config.multiselect_one_level;var e=this._active;this._active=t.config.select_task,this._active!=e&&this.reset()},reset:function(){this._selected={}},setLastSelected:function(e){t.$data.tasksStore.silent(function(){var i=t.$data.tasksStore;e?i.select(e+""):i.unselect(null)})},getLastSelected:function(){var e=t.$data.tasksStore.getSelectedId();return e&&t.isTaskExists(e)?e:null},select:function(e,i){return!!(e&&t.callEvent("onBeforeTaskMultiSelect",[e,!0,i])&&t.callEvent("onBeforeTaskSelected",[e]))&&(this._selected[e]=!0,this.setLastSelected(e),this.afterSelect(e),t.callEvent("onTaskMultiSelect",[e,!0,i]),t.callEvent("onTaskSelected",[e]),!0)},toggle:function(e,i){this._selected[e]?this.unselect(e,i):this.select(e,i)},unselect:function(e,i){e&&t.callEvent("onBeforeTaskMultiSelect",[e,!1,i])&&(this._selected[e]=!1,this.getLastSelected()==e&&this.setLastSelected(this.getDefaultSelected()),this.afterSelect(e),t.callEvent("onTaskMultiSelect",[e,!1,i]),t.callEvent("onTaskUnselected",[e]))},isSelected:function(e){return!(!t.isTaskExists(e)||!this._selected[e])},getSelected:function(){var e=[];for(var i in this._selected)this._selected[i]&&t.isTaskExists(i)?e.push(i):this._selected[i]=!1;return e.sort(function(n,a){return t.getGlobalTaskIndex(n)>t.getGlobalTaskIndex(a)?1:-1}),e},forSelected:function(e){for(var i=this.getSelected(),n=0;n<i.length;n++)e(i[n])},isSameLevel:function(e){if(!this._one_level)return!0;var i=this.getLastSelected();return!i||!t.isTaskExists(i)||!t.isTaskExists(e)||t.calculateTaskLevel(t.getTask(i))==t.calculateTaskLevel(t.getTask(e))},afterSelect:function(e){t.isTaskExists(e)&&t._quickRefresh(function(){t.refreshTask(e)})},doSelection:function(e){if(!this.isActive()||t._is_icon_open_click(e))return!1;var i=t.locate(e);if(!i||!t.callEvent("onBeforeMultiSelect",[e]))return!1;var n=this.getSelected(),a=this.getFirstSelected(),r=!1,s=this.getLastSelected(),o=t.config.multiselect,l=(function(){var c=t.ext.inlineEditors,u=c.getState(),h=c.locateCell(e.target);t.config.inline_editors_multiselect_open&&h&&c.getEditorConfig(h.columnName)&&(c.isVisible()&&u.id==h.id&&u.columnName==h.columnName||c.startEdit(h.id,h.columnName)),this.setFirstSelected(i),this.isSelected(i)||this.select(i,e),n=this.getSelected();for(var f=0;f<n.length;f++)n[f]!==i&&this.unselect(n[f],e)}).bind(this),d=(function(){if(s){if(i){var c=t.getGlobalTaskIndex(this.getFirstSelected()),u=t.getGlobalTaskIndex(i),h=t.getGlobalTaskIndex(s);c!=-1&&h!=-1||(c=u,this.reset());for(var f=s;t.getGlobalTaskIndex(f)!==c;)this.unselect(f,e),f=c>h?t.getNext(f):t.getPrev(f);for(f=i;t.getGlobalTaskIndex(f)!==c;)this.select(f,e)&&!r&&(r=!0,a=f),f=c>u?t.getNext(f):t.getPrev(f)}}else s=i}).bind(this);return o&&(e.ctrlKey||e.metaKey)?(this.isSelected(i)||this.setFirstSelected(i),i&&this.toggle(i,e)):o&&e.shiftKey?(t.isTaskExists(this.getFirstSelected())&&this.getFirstSelected()!==null||this.setFirstSelected(i),n.length?d():l()):l(),this.isSelected(i)?this.setLastSelected(i):a?i==s&&this.setLastSelected(e.shiftKey?a:this.getDefaultSelected()):this.setLastSelected(null),this.getSelected().length||this.setLastSelected(null),this.getLastSelected()&&this.isSelected(this.getFirstSelected())||this.setFirstSelected(this.getLastSelected()),!0}},function(){var e=t.selectTask;t.selectTask=function(n){if(!(n=at(n,this.config.root_id)))return!1;var a=t._multiselect,r=n;return a.isActive()?(a.select(n,null)&&a.setLastSelected(n),a.setFirstSelected(a.getLastSelected())):r=e.call(this,n),r};var i=t.unselectTask;t.unselectTask=function(n){var a=t._multiselect,r=a.isActive();(n=n||a.getLastSelected())&&r&&(a.unselect(n,null),n==a.getLastSelected()&&a.setLastSelected(null),t.refreshTask(n),a.setFirstSelected(a.getLastSelected()));var s=n;return r||(s=i.call(this,n)),s},t.toggleTaskSelection=function(n){var a=t._multiselect;n&&a.isActive()&&(a.toggle(n),a.setFirstSelected(a.getLastSelected()))},t.getSelectedTasks=function(){var n=t._multiselect;return n.isActive(),n.getSelected()},t.eachSelectedTask=function(n){return this._multiselect.forSelected(n)},t.isSelectedTask=function(n){return this._multiselect.isSelected(n)},t.getLastSelectedTask=function(){return this._multiselect.getLastSelected()},t.attachEvent("onGanttReady",function(){var n=t.$data.tasksStore.isSelected;t.$data.tasksStore.isSelected=function(a){return t._multiselect.isActive()?t._multiselect.isSelected(a):n.call(this,a)}})}(),t.attachEvent("onTaskIdChange",function(e,i){var n=t._multiselect;if(!n.isActive())return!0;t.isSelectedTask(e)&&(n.unselect(e,null),n.select(i,null))}),t.attachEvent("onAfterTaskDelete",function(e,i){var n=t._multiselect;if(!n.isActive())return!0;n._selected[e]&&(n._selected[e]=!1,n.setLastSelected(n.getDefaultSelected())),n.forSelected(function(a){t.isTaskExists(a)||n.unselect(a,null)})}),t.attachEvent("onBeforeTaskMultiSelect",function(e,i,n){const a=t._multiselect;if(i&&a.isActive()){let r=t.getSelectedId(),s=null;r&&(s=t.getTask(r));let o=t.getTask(e),l=!1;if(s&&s.$level!=o.$level&&(l=!0),t.config.multiselect_one_level&&l&&!n.ctrlKey&&!n.shiftKey)return!0;if(a._one_level)return a.isSameLevel(e)}return!0}),t.attachEvent("onTaskClick",function(e,i){return t._multiselect.doSelection(i)&&t.callEvent("onMultiSelect",[i]),!0})},export_api:function(t){return t.ext=t.ext||{},t.ext.export_api=t.ext.export_api||{_apiUrl:"https://export.dhtmlx.com/gantt",_preparePDFConfigRaw(e,i){let n=null;e.start&&e.end&&(n={start_date:t.config.start_date,end_date:t.config.end_date},t.config.start_date=t.date.str_to_date(t.config.date_format)(e.start),t.config.end_date=t.date.str_to_date(t.config.date_format)(e.end)),e=t.mixin(e,{name:"gantt."+i,data:t.ext.export_api._serializeHtml()}),n&&(t.config.start_date=n.start_date,t.config.end_date=n.end_date)},_prepareConfigPDF:(e,i)=>(e=t.mixin(e||{},{name:"gantt."+i,data:t.ext.export_api._serializeAll(),config:t.config}),t.ext.export_api._fixColumns(e.config.columns),e),_pdfExportRouter(e,i){e&&e.raw?t.ext.export_api._preparePDFConfigRaw(e,i):e=t.ext.export_api._prepareConfigPDF(e,i),e.version=t.version,t.ext.export_api._sendToExport(e,i)},exportToPDF(e){t.ext.export_api._pdfExportRouter(e,"pdf")},exportToPNG(e){t.ext.export_api._pdfExportRouter(e,"png")},exportToICal(e){e=t.mixin(e||{},{name:"gantt.ical",data:t.ext.export_api._serializePlain().data,version:t.version}),t.ext.export_api._sendToExport(e,"ical")},exportToExcel(e){let i,n,a,r;e=e||{};const s=t.config.smart_rendering;if(e.visual==="base-colors"&&(t.config.smart_rendering=!1),e.start||e.end){a=t.getState(),n=[t.config.start_date,t.config.end_date],r=t.getScrollState();const o=t.date.str_to_date(t.config.date_format);i=t.eachTask,e.start&&(t.config.start_date=o(e.start)),e.end&&(t.config.end_date=o(e.end)),t.render(),t.config.smart_rendering=s,t.eachTask=t.ext.export_api._eachTaskTimed(t.config.start_date,t.config.end_date)}else e.visual==="base-colors"&&(t.render(),t.config.smart_rendering=s);t._no_progress_colors=e.visual==="base-colors",(e=t.mixin(e,{name:"gantt.xlsx",title:"Tasks",data:t.ext.export_api._serializeTimeline(e).data,columns:t.ext.export_api._serializeGrid({rawDates:!0}),version:t.version})).visual&&(e.scales=t.ext.export_api._serializeScales(e)),t.ext.export_api._sendToExport(e,"excel"),(e.start||e.end)&&(t.config.start_date=a.min_date,t.config.end_date=a.max_date,t.eachTask=i,t.render(),t.scrollTo(r.x,r.y),t.config.start_date=n[0],t.config.end_date=n[1])},exportToJSON(e){e=t.mixin(e||{},{name:"gantt.json",data:t.ext.export_api._serializeAll(),config:t.config,columns:t.ext.export_api._serializeGrid(),worktime:t.ext.export_api._getWorktimeSettings(),version:t.version}),t.ext.export_api._sendToExport(e,"json")},importFromExcel(e){try{const i=e.data;if(i instanceof File){const n=new FormData;n.append("file",i),e.data=n}}catch{}t.ext.export_api._sendImportAjaxExcel(e)},importFromMSProject(e){const i=e.data;try{if(i instanceof File){const n=new FormData;n.append("file",i),e.data=n}}catch{}t.ext.export_api._sendImportAjaxMSP(e)},importFromPrimaveraP6:e=>(e.type="primaveraP6-parse",t.importFromMSProject(e)),exportToMSProject(e){(e=e||{}).skip_circular_links=e.skip_circular_links===void 0||!!e.skip_circular_links;const i=t.templates.xml_format,n=t.templates.format_date,a=t.config.xml_date,r=t.config.date_format,s="%d-%m-%Y %H:%i:%s";t.config.xml_date=s,t.config.date_format=s,t.templates.xml_format=t.date.date_to_str(s),t.templates.format_date=t.date.date_to_str(s);const o=t.ext.export_api._serializeAll();t.ext.export_api._customProjectProperties(o,e),t.ext.export_api._customTaskProperties(o,e),e.skip_circular_links&&t.ext.export_api._clearRecLinks(o),e=t.ext.export_api._exportConfig(o,e),t.ext.export_api._sendToExport(e,e.type||"msproject"),t.config.xml_date=a,t.config.date_format=r,t.templates.xml_format=i,t.templates.format_date=n,t.config.$custom_data=null,t.config.custom=null},exportToPrimaveraP6:e=>((e=e||{}).type="primaveraP6",t.exportToMSProject(e)),_fixColumns(e){for(let i=0;i<e.length;i++)e[i].label=e[i].label||t.locale.labels["column_"+e[i].name],typeof e[i].width=="string"&&(e[i].width=1*e[i].width)},_xdr(e,i,n){t.ajax.post(e,i,n)},_markColumns(e){const i=e.config.columns;if(i)for(let n=0;n<i.length;n++)i[n].template&&(i[n].$template=!0)},_sendImportAjaxExcel(e){const i=e.server||t.ext.export_api._apiUrl,n=e.store||0,a=e.data,r=e.callback;a.append("type","excel-parse"),a.append("data",JSON.stringify({sheet:e.sheet||0})),n&&a.append("store",n);const s=new XMLHttpRequest;s.onreadystatechange=function(o){s.readyState===4&&s.status===0&&r&&r(null)},s.onload=function(){let o=null;if(!(s.status>400))try{o=JSON.parse(s.responseText)}catch{}r&&r(o)},s.open("POST",i,!0),s.setRequestHeader("X-Requested-With","XMLHttpRequest"),s.send(a)},_ajaxToExport(e,i,n){delete e.callback;const a=e.server||t.ext.export_api._apiUrl,r="type="+i+"&store=1&data="+encodeURIComponent(JSON.stringify(e));t.ext.export_api._xdr(a,r,function(s){const o=s.xmlDoc||s;let l=null;if(!(o.status>400))try{l=JSON.parse(o.responseText)}catch{}n(l)})},_serializableGanttConfig(e){const i=t.mixin({},e);return i.columns&&(i.columns=i.columns.map(function(n){const a=t.mixin({},n);return delete a.editor,a})),delete i.editor_types,i},_sendToExport(e,i){const n=t.date.date_to_str(t.config.date_format||t.config.xml_date);if(e.skin||(e.skin=t.skin),e.config&&(e.config=t.copy(t.ext.export_api._serializableGanttConfig(e.config)),t.ext.export_api._markColumns(e,i),e.config.start_date&&e.config.end_date&&(e.config.start_date instanceof Date&&(e.config.start_date=n(e.config.start_date)),e.config.end_date instanceof Date&&(e.config.end_date=n(e.config.end_date)))),e.callback)return t.ext.export_api._ajaxToExport(e,i,e.callback);const a=t.ext.export_api._createHiddenForm();a.firstChild.action=e.server||t.ext.export_api._apiUrl,a.firstChild.childNodes[0].value=JSON.stringify(e),a.firstChild.childNodes[1].value=i,a.firstChild.submit()},_createHiddenForm(){if(!t.ext.export_api._hidden_export_form){const e=t.ext.export_api._hidden_export_form=document.createElement("div");e.style.display="none",e.innerHTML="<form method='POST' target='_blank'><textarea name='data' style='width:0px; height:0px;' readonly='true'></textarea><input type='hidden' name='type' value=''></form>",document.body.appendChild(e)}return t.ext.export_api._hidden_export_form},_copyObjectBase(e){const i={start_date:void 0,end_date:void 0,constraint_date:void 0,deadline:void 0};for(const a in e)a.charAt(0)!=="$"&&a!=="baselines"&&(i[a]=e[a]);const n=t.templates.xml_format||t.templates.format_date;return i.start_date=n(i.start_date),i.end_date&&(i.end_date=n(i.end_date)),i.constraint_date&&(i.constraint_date=n(i.constraint_date)),i.deadline&&(i.deadline=n(i.deadline)),i},_color_box:null,_color_hash:{},_getStyles(e){if(t.ext.export_api._color_box||(t.ext.export_api._color_box=document.createElement("DIV"),t.ext.export_api._color_box.style.cssText="position:absolute; display:none;",document.body.appendChild(t.ext.export_api._color_box)),t.ext.export_api._color_hash[e])return t.ext.export_api._color_hash[e];t.ext.export_api._color_box.className=e;const i=t.ext.export_api._getColor(t.ext.export_api._color_box,"color"),n=t.ext.export_api._getColor(t.ext.export_api._color_box,"backgroundColor");return t.ext.export_api._color_hash[e]=i+";"+n},_getMinutesWorktimeSettings(e){const i=[];return e.forEach(function(n){i.push(n.startMinute),i.push(n.endMinute)}),i},_getWorktimeSettings(){const e={hours:[0,24],minutes:null,dates:{0:!0,1:!0,2:!0,3:!0,4:!0,5:!0,6:!0}};let i;if(t.config.work_time){const n=t._working_time_helper;if(n&&n.get_calendar)i=n.get_calendar();else if(n)i={hours:n.hours,minutes:null,dates:n.dates};else if(t.config.worktimes&&t.config.worktimes.global){const a=t.config.worktimes.global;if(a.parsed){i={hours:null,minutes:t.ext.export_api._getMinutesWorktimeSettings(a.parsed.hours),dates:{}};for(const r in a.parsed.dates)Array.isArray(a.parsed.dates[r])?i.dates[r]=t.ext.export_api._getMinutesWorktimeSettings(a.parsed.dates[r]):i.dates[r]=a.parsed.dates[r]}else i={hours:a.hours,minutes:null,dates:a.dates}}else i=e}else i=e;return i},_eachTaskTimed:(e,i)=>function(n,a,r){a=a||t.config.root_id,r=r||t;const s=t.getChildren(a);if(s)for(let o=0;o<s.length;o++){const l=t._pull[s[o]];(!e||l.end_date>e)&&(!i||l.start_date<i)&&n.call(r,l),t.hasChild(l.id)&&t.eachTask(n,l.id,r)}},_originalCopyObject:t.json._copyObject,_copyObjectPlain(e){const i=t.templates.task_text(e.start_date,e.end_date,e),n=t.ext.export_api._copyObjectBase(e);return n.text=i||n.text,n},_getColor(e,i){const n=e.currentStyle?e.currentStyle[i]:getComputedStyle(e,null)[i],a=n.replace(/\s/g,"").match(/^rgba?\((\d+),(\d+),(\d+)/i);return(a&&a.length===4?("0"+parseInt(a[1],10).toString(16)).slice(-2)+("0"+parseInt(a[2],10).toString(16)).slice(-2)+("0"+parseInt(a[3],10).toString(16)).slice(-2):n).replace("#","")},_copyObjectTable(e){const i=t.date.date_to_str("%Y-%m-%dT%H:%i:%s.000Z"),n=t.ext.export_api._copyObjectColumns(e,t.ext.export_api._copyObjectPlain(e));n.start_date&&(n.start_date=i(e.start_date)),n.end_date&&(n.end_date=i(e.end_date));const a=t._day_index_by_date?t._day_index_by_date:t.columnIndexByDate;n.$start=a.call(t,e.start_date),n.$end=a.call(t,e.end_date);let r=0;const s=t.getScale().width;if(s.indexOf(0)>-1){let l=0;for(;l<n.$start;l++)s[l]||r++;for(n.$start-=r;l<n.$end;l++)s[l]||r++;n.$end-=r}n.$level=e.$level,n.$type=e.$rendered_type;const o=t.templates;return n.$text=o.task_text(e.start,e.end_date,e),n.$left=o.leftside_text?o.leftside_text(e.start,e.end_date,e):"",n.$right=o.rightside_text?o.rightside_text(e.start,e.end_date,e):"",n},_copyObjectColors(e){const i=t.ext.export_api._copyObjectTable(e),n=t.getTaskNode(e.id);if(n&&n.firstChild){let a=t.ext.export_api._getColor(t._no_progress_colors?n:n.firstChild,"backgroundColor");a==="363636"&&(a=t.ext.export_api._getColor(n,"backgroundColor")),i.$color=a}else e.color&&(i.$color=e.color);return i},_copyObjectColumns(e,i){for(let n=0;n<t.config.columns.length;n++){const a=t.config.columns[n].template;if(a){let r=a(e);r instanceof Date&&(r=t.templates.date_grid(r,e)),i["_"+n]=r}}return i},_copyObjectAll(e){const i=t.ext.export_api._copyObjectBase(e),n=["leftside_text","rightside_text","task_text","progress_text","task_class"];for(let a=0;a<n.length;a++){const r=t.templates[n[a]];r&&(i["$"+a]=r(e.start_date,e.end_date,e))}return t.ext.export_api._copyObjectColumns(e,i),i.open=e.$open,i},_serializeHtml(){const e=t.config.smart_scales,i=t.config.smart_rendering;(e||i)&&(t.config.smart_rendering=!1,t.config.smart_scales=!1,t.render());const n=t.$container.parentNode.innerHTML;return(e||i)&&(t.config.smart_scales=e,t.config.smart_rendering=i,t.render()),n},_serializeAll(){t.json._copyObject=t.ext.export_api._copyObjectAll;const e=t.ext.export_api._exportSerialize();return t.json._copyObject=t.ext.export_api._originalCopyObject,e},_serializePlain(){const e=t.templates.xml_format,i=t.templates.format_date;t.templates.xml_format=t.date.date_to_str("%Y%m%dT%H%i%s",!0),t.templates.format_date=t.date.date_to_str("%Y%m%dT%H%i%s",!0),t.json._copyObject=t.ext.export_api._copyObjectPlain;const n=t.ext.export_api._exportSerialize();return t.templates.xml_format=e,t.templates.format_date=i,t.json._copyObject=t.ext.export_api._originalCopyObject,delete n.links,n},_getRaw(){if(t._scale_helpers){const e=t._get_scales(),i=t.config.min_column_width,n=t._get_resize_options().x?Math.max(t.config.autosize_min_width,0):t.config.$task.offsetWidth,a=t.config.config.scale_height-1;return t._scale_helpers.prepareConfigs(e,i,n,a)}{const e=t.$ui.getView("timeline");if(e){let i=e.$config.width;t.config.autosize!=="x"&&t.config.autosize!=="xy"||(i=Math.max(t.config.autosize_min_width,0));const n=t.getState(),a=e._getScales(),r=t.config.min_column_width,s=t.config.scale_height-1,o=t.config.rtl;return e.$scaleHelper.prepareConfigs(a,r,i,s,n.min_date,n.max_date,o)}}},_serializeTimeline(e){t.json._copyObject=e.visual?t.ext.export_api._copyObjectColors:t.ext.export_api._copyObjectTable;const i=t.ext.export_api._exportSerialize();if(t.json._copyObject=t.ext.export_api._originalCopyObject,delete i.links,e.cellColors){const n=t.templates.timeline_cell_class||t.templates.task_cell_class;if(n){const a=t.ext.export_api._getRaw();let r=a[0].trace_x;for(let s=1;s<a.length;s++)a[s].trace_x.length>r.length&&(r=a[s].trace_x);for(let s=0;s<i.data.length;s++){i.data[s].styles=[];const o=t.getTask(i.data[s].id);for(let l=0;l<r.length;l++){const d=n(o,r[l]);d&&i.data[s].styles.push({index:l,styles:t.ext.export_api._getStyles(d)})}}}}return i},_serializeScales(e){const i=[],n=t.ext.export_api._getRaw();let a=1/0,r=0;for(let s=0;s<n.length;s++)a=Math.min(a,n[s].col_width);for(let s=0;s<n.length;s++){let o=0,l=0;const d=[];i.push(d);const c=n[s];r=Math.max(r,c.trace_x.length);const u=c.format||c.template||(c.date?t.date.date_to_str(c.date):t.config.date_scale);for(let h=0;h<c.trace_x.length;h++){const f=c.trace_x[h];l=o+Math.round(c.width[h]/a);const g={text:u(f),start:o,end:l,styles:""};if(e.cellColors){const y=c.css||t.templates.scaleCell_class;if(y){const v=y(f);v&&(g.styles=t.ext.export_api._getStyles(v))}}d.push(g),o=l}}return{width:r,height:i.length,data:i}},_serializeGrid(e){t.exportMode=!0;const i=[],n=t.config.columns;let a=0;for(let r=0;r<n.length;r++)n[r].name!=="add"&&n[r].name!=="buttons"&&(i[a]={id:n[r].template?"_"+r:n[r].name,header:n[r].label||t.locale.labels["column_"+n[r].name],width:n[r].width?Math.floor(n[r].width/4):"",tree:n[r].tree||!1},n[r].name==="duration"&&(i[a].type="number"),n[r].name!=="start_date"&&n[r].name!=="end_date"||(i[a].type="date",e&&e.rawDates&&(i[a].id=n[r].name)),a++);return t.exportMode=!1,i},_exportSerialize(){t.exportMode=!0;const e=t.templates.xml_format,i=t.templates.format_date;t.templates.xml_format=t.templates.format_date=t.date.date_to_str(t.config.date_format||t.config.xml_date);const n=t.serialize();return t.templates.xml_format=e,t.templates.format_date=i,t.exportMode=!1,n},_setLevel(e){for(let i=0;i<e.length;i++){e[i].parent==0&&(e[i]._lvl=1);for(let n=i+1;n<e.length;n++)e[i].id==e[n].parent&&(e[n]._lvl=e[i]._lvl+1)}},_clearLevel(e){for(let i=0;i<e.length;i++)delete e[i]._lvl},_clearRecLinks(e){t.ext.export_api._setLevel(e.data);const i={};for(let r=0;r<e.data.length;r++)i[e.data[r].id]=e.data[r];const n={};for(let r=0;r<e.links.length;r++){const s=e.links[r];t.isTaskExists(s.source)&&t.isTaskExists(s.target)&&i[s.source]&&i[s.target]&&(n[s.id]=s)}for(const r in n)t.ext.export_api._makeLinksSameLevel(n[r],i);const a={};for(const r in i)t.ext.export_api._clearCircDependencies(i[r],n,i,{},a,null);Object.keys(n)&&t.ext.export_api._clearLinksSameLevel(n,i);for(let r=0;r<e.links.length;r++)n[e.links[r].id]||(e.links.splice(r,1),r--);t.ext.export_api._clearLevel(e.data)},_clearCircDependencies(e,i,n,a,r,s){const o=e.$_source;if(!o)return;a[e.id]&&t.ext.export_api._onCircDependencyFind(s,i,a,r),a[e.id]=!0;const l={};for(let d=0;d<o.length;d++){if(r[o[d]])continue;const c=i[o[d]],u=n[c._target];l[u.id]&&t.ext.export_api._onCircDependencyFind(c,i,a,r),l[u.id]=!0,t.ext.export_api._clearCircDependencies(u,i,n,a,r,c)}a[e.id]=!1},_onCircDependencyFind(e,i,n,a){e&&(t.callEvent("onExportCircularDependency",[e.id,e])&&delete i[e.id],delete n[e._source],delete n[e._target],a[e.id]=!0)},_makeLinksSameLevel(e,i){let n,a;const r={target:i[e.target],source:i[e.source]};if(r.target._lvl!=r.source._lvl){r.target._lvl<r.source._lvl?(n="source",a=r.target._lvl):(n="target",a=r.source._lvl);do{const l=i[r[n].parent];if(!l)break;r[n]=l}while(r[n]._lvl<a);let s=i[r.source.parent],o=i[r.target.parent];for(;s&&o&&s.id!=o.id;)r.source=s,r.target=o,s=i[r.source.parent],o=i[r.target.parent]}e._target=r.target.id,e._source=r.source.id,r.target.$_target||(r.target.$_target=[]),r.target.$_target.push(e.id),r.source.$_source||(r.source.$_source=[]),r.source.$_source.push(e.id)},_clearLinksSameLevel(e,i){for(const n in e)delete e[n]._target,delete e[n]._source;for(const n in i)delete i[n].$_source,delete i[n].$_target},_customProjectProperties(e,i){if(i&&i.project){for(const n in i.project)t.config.$custom_data||(t.config.$custom_data={}),t.config.$custom_data[n]=typeof i.project[n]=="function"?i.project[n](t.config):i.project[n];delete i.project}},_customTaskProperties(e,i){i&&i.tasks&&(e.data.forEach(function(n){for(const a in i.tasks)n.$custom_data||(n.$custom_data={}),n.$custom_data[a]=typeof i.tasks[a]=="function"?i.tasks[a](n,t.config):i.tasks[a]}),delete i.tasks)},_exportConfig(e,i){const n=i.name||"gantt.xml";delete i.name,t.config.custom=i;const a=t.ext.export_api._getWorktimeSettings(),r=t.getSubtaskDates();if(r.start_date&&r.end_date){const l=t.templates.format_date||t.templates.xml_format;t.config.start_end={start_date:l(r.start_date),end_date:l(r.end_date)}}const s=i.auto_scheduling!==void 0&&!!i.auto_scheduling,o={callback:i.callback||null,config:t.config,data:e,manual:s,name:n,worktime:a};for(const l in i)o[l]=i[l];return o},_sendImportAjaxMSP(e){const i=e.server||t.ext.export_api._apiUrl,n=e.store||0,a=e.data,r=e.callback,s={durationUnit:e.durationUnit||void 0,projectProperties:e.projectProperties||void 0,taskProperties:e.taskProperties||void 0};a.append("type",e.type||"msproject-parse"),a.append("data",JSON.stringify(s)),n&&a.append("store",n);const o=new XMLHttpRequest;o.onreadystatechange=function(l){o.readyState===4&&o.status===0&&r&&r(null)},o.onload=function(){let l=null;if(!(o.status>400))try{l=JSON.parse(o.responseText)}catch{}r&&r(l)},o.open("POST",i,!0),o.setRequestHeader("X-Requested-With","XMLHttpRequest"),o.send(a)}},t.exportToPDF=t.ext.export_api.exportToPDF,t.exportToPNG=t.ext.export_api.exportToPNG,t.exportToICal=t.ext.export_api.exportToICal,t.exportToExcel=t.ext.export_api.exportToExcel,t.exportToJSON=t.ext.export_api.exportToJSON,t.importFromExcel=t.ext.export_api.importFromExcel,t.importFromMSProject=t.ext.export_api.importFromMSProject,t.exportToMSProject=t.ext.export_api.exportToMSProject,t.importFromPrimaveraP6=t.ext.export_api.importFromPrimaveraP6,t.exportToPrimaveraP6=t.ext.export_api.exportToPrimaveraP6,t.ext.export_api}},dn={KEY_CODES:{UP:38,DOWN:40,LEFT:37,RIGHT:39,SPACE:32,ENTER:13,DELETE:46,ESC:27,TAB:9}};class cn{constructor(e){this.addExtension=(i,n)=>{this._extensions[i]=n},this.getExtension=i=>this._extensions[i],this._extensions={};for(const i in e)this._extensions[i]=e[i]}}const un=()=>({layout:{css:"gantt_container",rows:[{cols:[{view:"grid",scrollX:"scrollHor",scrollY:"scrollVer"},{resizer:!0,width:1},{view:"timeline",scrollX:"scrollHor",scrollY:"scrollVer"},{view:"scrollbar",id:"scrollVer"}]},{view:"scrollbar",id:"scrollHor",height:20}]},links:{finish_to_start:"0",start_to_start:"1",finish_to_finish:"2",start_to_finish:"3"},types:{task:"task",project:"project",milestone:"milestone"},auto_types:!1,duration_unit:"day",work_time:!1,correct_work_time:!1,skip_off_time:!1,cascade_delete:!0,autosize:!1,autosize_min_width:0,autoscroll:!0,autoscroll_speed:30,deepcopy_on_parse:!1,show_links:!0,show_task_cells:!0,static_background:!1,static_background_cells:!0,branch_loading:!1,branch_loading_property:"$has_child",show_loading:!1,show_chart:!0,show_grid:!0,min_duration:36e5,date_format:"%d-%m-%Y %H:%i",xml_date:void 0,start_on_monday:!0,server_utc:!1,show_progress:!0,fit_tasks:!1,select_task:!0,scroll_on_click:!0,smart_rendering:!0,preserve_scroll:!0,readonly:!1,container_resize_timeout:20,deadlines:!0,date_grid:"%Y-%m-%d",drag_links:!0,drag_progress:!0,drag_resize:!0,drag_project:!1,drag_move:!0,drag_mode:{resize:"resize",progress:"progress",move:"move",ignore:"ignore"},round_dnd_dates:!0,link_wrapper_width:20,link_arrow_size:12,root_id:0,autofit:!1,columns:[{name:"text",tree:!0,width:"*",resize:!0},{name:"start_date",align:"center",resize:!0},{name:"duration",align:"center"},{name:"add",width:44}],scale_offset_minimal:!0,inherit_scale_class:!1,scales:[{unit:"day",step:1,date:"%d %M"}],time_step:60,duration_step:1,task_date:"%d %F %Y",time_picker:"%H:%i",task_attribute:"data-task-id",link_attribute:"data-link-id",layer_attribute:"data-layer",buttons_left:["gantt_save_btn","gantt_cancel_btn"],_migrate_buttons:{dhx_save_btn:"gantt_save_btn",dhx_cancel_btn:"gantt_cancel_btn",dhx_delete_btn:"gantt_delete_btn"},buttons_right:["gantt_delete_btn"],lightbox:{sections:[{name:"description",height:70,map_to:"text",type:"textarea",focus:!0},{name:"time",type:"duration",map_to:"auto"}],project_sections:[{name:"description",height:70,map_to:"text",type:"textarea",focus:!0},{name:"type",type:"typeselect",map_to:"type"},{name:"time",type:"duration",readonly:!0,map_to:"auto"}],milestone_sections:[{name:"description",height:70,map_to:"text",type:"textarea",focus:!0},{name:"type",type:"typeselect",map_to:"type"},{name:"time",type:"duration",single_date:!0,map_to:"auto"}]},drag_lightbox:!0,sort:!1,details_on_create:!0,details_on_dblclick:!0,initial_scroll:!0,task_scroll_offset:100,order_branch:!1,order_branch_free:!1,task_height:void 0,bar_height:"full",bar_height_padding:9,min_column_width:70,min_grid_column_width:70,grid_resizer_column_attribute:"data-column-index",keep_grid_width:!1,grid_resize:!1,grid_elastic_columns:!1,show_tasks_outside_timescale:!1,show_unscheduled:!0,resize_rows:!1,task_grid_row_resizer_attribute:"data-row-index",min_task_grid_row_height:30,row_height:36,readonly_property:"readonly",editable_property:"editable",calendar_property:"calendar_id",resource_calendars:{},dynamic_resource_calendars:!1,inherit_calendar:!1,type_renderers:{},open_tree_initially:!1,optimize_render:!0,prevent_default_scroll:!1,show_errors:!0,wai_aria_attributes:!0,smart_scales:!0,rtl:!1,placeholder_task:!1,horizontal_scroll_key:"shiftKey",drag_timeline:{useKey:void 0,ignore:".gantt_task_line, .gantt_task_link",render:!1},drag_multiple:!0,csp:"auto"});var it=typeof window<"u";const vt={isIE:it&&(navigator.userAgent.indexOf("MSIE")>=0||navigator.userAgent.indexOf("Trident")>=0),isIE6:it&&!XMLHttpRequest&&navigator.userAgent.indexOf("MSIE")>=0,isIE7:it&&navigator.userAgent.indexOf("MSIE 7.0")>=0&&navigator.userAgent.indexOf("Trident")<0,isIE8:it&&navigator.userAgent.indexOf("MSIE 8.0")>=0&&navigator.userAgent.indexOf("Trident")>=0,isOpera:it&&navigator.userAgent.indexOf("Opera")>=0,isChrome:it&&navigator.userAgent.indexOf("Chrome")>=0,isKHTML:it&&(navigator.userAgent.indexOf("Safari")>=0||navigator.userAgent.indexOf("Konqueror")>=0),isFF:it&&navigator.userAgent.indexOf("Firefox")>=0,isIPad:it&&navigator.userAgent.search(/iPad/gi)>=0,isEdge:it&&navigator.userAgent.indexOf("Edge")!=-1,isNode:!it||typeof navigator>"u"||!1};function Re(t){if(typeof t=="string"||typeof t=="number")return t;let e="";for(const i in t){let n="";t.hasOwnProperty(i)&&(n=typeof t[i]=="string"?encodeURIComponent(t[i]):typeof t[i]=="number"?String(t[i]):encodeURIComponent(JSON.stringify(t[i])),n=i+"="+n,e.length&&(n="&"+n),e+=n)}return e}function $t(t,e){var i={method:t};if(e.length===0)throw new Error("Arguments list of query is wrong.");if(e.length===1)return typeof e[0]=="string"?(i.url=e[0],i.async=!0):(i.url=e[0].url,i.async=e[0].async||!0,i.callback=e[0].callback,i.headers=e[0].headers),e[0].data?typeof e[0].data!="string"?i.data=Re(e[0].data):i.data=e[0].data:i.data="",i;switch(i.url=e[0],t){case"GET":case"DELETE":i.callback=e[1],i.headers=e[2];break;case"POST":case"PUT":e[1]?typeof e[1]!="string"?i.data=Re(e[1]):i.data=e[1]:i.data="",i.callback=e[2],i.headers=e[3]}return i}const He={date_to_str:(t,e,i)=>{t=t.replace(/%[a-zA-Z]/g,a=>{switch(a){case"%d":return`"+to_fixed(date.get${e?"UTC":""}Date())+"`;case"%m":return`"+to_fixed((date.get${e?"UTC":""}Month()+1))+"`;case"%j":return`"+date.get${e?"UTC":""}Date()+"`;case"%n":return`"+(date.get${e?"UTC":""}Month()+1)+"`;case"%y":return`"+to_fixed(date.get${e?"UTC":""}FullYear()%100)+"`;case"%Y":return`"+date.get${e?"UTC":""}FullYear()+"`;case"%D":return`"+locale.date.day_short[date.get${e?"UTC":""}Day()]+"`;case"%l":return`"+locale.date.day_full[date.get${e?"UTC":""}Day()]+"`;case"%M":return`"+locale.date.month_short[date.get${e?"UTC":""}Month()]+"`;case"%F":return`"+locale.date.month_full[date.get${e?"UTC":""}Month()]+"`;case"%h":return`"+to_fixed((date.get${e?"UTC":""}Hours()+11)%12+1)+"`;case"%g":return`"+((date.get${e?"UTC":""}Hours()+11)%12+1)+"`;case"%G":return`"+date.get${e?"UTC":""}Hours()+"`;case"%H":return`"+to_fixed(date.get${e?"UTC":""}Hours())+"`;case"%i":return`"+to_fixed(date.get${e?"UTC":""}Minutes())+"`;case"%a":return`"+(date.get${e?"UTC":""}Hours()>11?"pm":"am")+"`;case"%A":return`"+(date.get${e?"UTC":""}Hours()>11?"PM":"AM")+"`;case"%s":return`"+to_fixed(date.get${e?"UTC":""}Seconds())+"`;case"%W":return'"+to_fixed(getISOWeek(date))+"';case"%w":return'"+to_fixed(getWeek(date))+"';default:return a}});const n=new Function("date","to_fixed","locale","getISOWeek","getWeek",`return "${t}";`);return a=>n(a,i.date.to_fixed,i.locale,i.date.getISOWeek,i.date.getWeek)},str_to_date:(t,e,i)=>{let n="var temp=date.match(/[a-zA-Z]+|[0-9]+/g);";const a=t.match(/%[a-zA-Z]/g);for(let o=0;o<a.length;o++)switch(a[o]){case"%j":case"%d":n+=`set[2]=temp[${o}]||1;`;break;case"%n":case"%m":n+=`set[1]=(temp[${o}]||1)-1;`;break;case"%y":n+=`set[0]=temp[${o}]*1+(temp[${o}]>50?1900:2000);`;break;case"%g":case"%G":case"%h":case"%H":n+=`set[3]=temp[${o}]||0;`;break;case"%i":n+=`set[4]=temp[${o}]||0;`;break;case"%Y":n+=`set[0]=temp[${o}]||0;`;break;case"%a":case"%A":n+=`set[3]=set[3]%12+((temp[${o}]||'').toLowerCase()=='am'?0:12);`;break;case"%s":n+=`set[5]=temp[${o}]||0;`;break;case"%M":n+=`set[1]=locale.date.month_short_hash[temp[${o}]]||0;`;break;case"%F":n+=`set[1]=locale.date.month_full_hash[temp[${o}]]||0;`}let r="set[0],set[1],set[2],set[3],set[4],set[5]";e&&(r=` Date.UTC(${r})`);const s=new Function("date","locale",`var set=[0,0,1,0,0,0]; ${n} return new Date(${r});`);return o=>s(o,i.locale)}},Oe={date_to_str:(t,e,i)=>n=>t.replace(/%[a-zA-Z]/g,a=>{switch(a){case"%d":return e?i.date.to_fixed(n.getUTCDate()):i.date.to_fixed(n.getDate());case"%m":return e?i.date.to_fixed(n.getUTCMonth()+1):i.date.to_fixed(n.getMonth()+1);case"%j":return e?n.getUTCDate():n.getDate();case"%n":return e?n.getUTCMonth()+1:n.getMonth()+1;case"%y":return e?i.date.to_fixed(n.getUTCFullYear()%100):i.date.to_fixed(n.getFullYear()%100);case"%Y":return e?n.getUTCFullYear():n.getFullYear();case"%D":return e?i.locale.date.day_short[n.getUTCDay()]:i.locale.date.day_short[n.getDay()];case"%l":return e?i.locale.date.day_full[n.getUTCDay()]:i.locale.date.day_full[n.getDay()];case"%M":return e?i.locale.date.month_short[n.getUTCMonth()]:i.locale.date.month_short[n.getMonth()];case"%F":return e?i.locale.date.month_full[n.getUTCMonth()]:i.locale.date.month_full[n.getMonth()];case"%h":return e?i.date.to_fixed((n.getUTCHours()+11)%12+1):i.date.to_fixed((n.getHours()+11)%12+1);case"%g":return e?(n.getUTCHours()+11)%12+1:(n.getHours()+11)%12+1;case"%G":return e?n.getUTCHours():n.getHours();case"%H":return e?i.date.to_fixed(n.getUTCHours()):i.date.to_fixed(n.getHours());case"%i":return e?i.date.to_fixed(n.getUTCMinutes()):i.date.to_fixed(n.getMinutes());case"%a":return e?n.getUTCHours()>11?"pm":"am":n.getHours()>11?"pm":"am";case"%A":return e?n.getUTCHours()>11?"PM":"AM":n.getHours()>11?"PM":"AM";case"%s":return e?i.date.to_fixed(n.getUTCSeconds()):i.date.to_fixed(n.getSeconds());case"%W":return e?i.date.to_fixed(i.date.getUTCISOWeek(n)):i.date.to_fixed(i.date.getISOWeek(n));default:return a}}),str_to_date:(t,e,i)=>n=>{const a=[0,0,1,0,0,0],r=n.match(/[a-zA-Z]+|[0-9]+/g),s=t.match(/%[a-zA-Z]/g);for(let o=0;o<s.length;o++)switch(s[o]){case"%j":case"%d":a[2]=r[o]||1;break;case"%n":case"%m":a[1]=(r[o]||1)-1;break;case"%y":a[0]=1*r[o]+(r[o]>50?1900:2e3);break;case"%g":case"%G":case"%h":case"%H":a[3]=r[o]||0;break;case"%i":a[4]=r[o]||0;break;case"%Y":a[0]=r[o]||0;break;case"%a":case"%A":a[3]=a[3]%12+((r[o]||"").toLowerCase()==="am"?0:12);break;case"%s":a[5]=r[o]||0;break;case"%M":a[1]=i.locale.date.month_short_hash[r[o]]||0;break;case"%F":a[1]=i.locale.date.month_full_hash[r[o]]||0}return e?new Date(Date.UTC(a[0],a[1],a[2],a[3],a[4],a[5])):new Date(a[0],a[1],a[2],a[3],a[4],a[5])}};function hn(t){var e=null;function i(){var a=!1;return t.config.csp==="auto"?(e===null&&function(){try{new Function("canUseCsp = false;")}catch{e=!0}}(),a=e):a=t.config.csp,a}var n={init:function(){for(var a=t.locale,r=a.date.month_short,s=a.date.month_short_hash={},o=0;o<r.length;o++)s[r[o]]=o;for(r=a.date.month_full,s=a.date.month_full_hash={},o=0;o<r.length;o++)s[r[o]]=o},date_part:function(a){var r=new Date(a);return a.setHours(0),this.hour_start(a),a.getHours()&&(a.getDate()<r.getDate()||a.getMonth()<r.getMonth()||a.getFullYear()<r.getFullYear())&&a.setTime(a.getTime()+36e5*(24-a.getHours())),a},time_part:function(a){return(a.valueOf()/1e3-60*a.getTimezoneOffset())%86400},week_start:function(a){var r=a.getDay();return t.config.start_on_monday&&(r===0?r=6:r--),this.date_part(this.add(a,-1*r,"day"))},month_start:function(a){return a.setDate(1),this.date_part(a)},quarter_start:function(a){this.month_start(a);var r,s=a.getMonth();return r=s>=9?9:s>=6?6:s>=3?3:0,a.setMonth(r),a},year_start:function(a){return a.setMonth(0),this.month_start(a)},day_start:function(a){return this.date_part(a)},hour_start:function(a){return a.getMinutes()&&a.setMinutes(0),this.minute_start(a),a},minute_start:function(a){return a.getSeconds()&&a.setSeconds(0),a.getMilliseconds()&&a.setMilliseconds(0),a},_add_days:function(a,r,s){a.setDate(a.getDate()+r);var o=r>=0,l=!s.getHours()&&a.getHours(),d=a.getDate()<=s.getDate()||a.getMonth()<s.getMonth()||a.getFullYear()<s.getFullYear();return o&&l&&d&&a.setTime(a.getTime()+36e5*(24-a.getHours())),r>1&&l&&a.setHours(0),a},add:function(a,r,s){var o=new Date(a.valueOf());switch(s){case"day":o=this._add_days(o,r,a);break;case"week":o=this._add_days(o,7*r,a);break;case"month":o.setMonth(o.getMonth()+r);break;case"year":o.setYear(o.getFullYear()+r);break;case"hour":o.setTime(o.getTime()+60*r*60*1e3);break;case"minute":o.setTime(o.getTime()+60*r*1e3);break;default:return this["add_"+s](a,r,s)}return o},add_quarter:function(a,r){return this.add(a,3*r,"month")},to_fixed:function(a){return a<10?"0"+a:a},copy:function(a){return new Date(a.valueOf())},date_to_str:function(a,r){var s=He;return i()&&(s=Oe),s.date_to_str(a,r,t)},str_to_date:function(a,r){var s=He;return i()&&(s=Oe),s.str_to_date(a,r,t)},getISOWeek:function(a){return t.date._getWeekNumber(a,!0)},_getWeekNumber:function(a,r){if(!a)return!1;var s=a.getDay();r&&s===0&&(s=7);var o=new Date(a.valueOf());o.setDate(a.getDate()+(4-s));var l=o.getFullYear(),d=Math.round((o.getTime()-new Date(l,0,1).getTime())/864e5);return 1+Math.floor(d/7)},getWeek:function(a){return t.date._getWeekNumber(a,t.config.start_on_monday)},getUTCISOWeek:function(a){return t.date.getISOWeek(a)},convert_to_utc:function(a){return new Date(a.getUTCFullYear(),a.getUTCMonth(),a.getUTCDate(),a.getUTCHours(),a.getUTCMinutes(),a.getUTCSeconds())},parseDate:function(a,r){return a&&!a.getFullYear&&(typeof r!="function"&&(r=typeof r=="string"?r==="parse_date"||r==="xml_date"?t.defined(t.templates.xml_date)?t.templates.xml_date:t.templates.parse_date:t.defined(t.templates[r])?t.templates[r]:t.date.str_to_date(r):t.defined(t.templates.xml_date)?t.templates.xml_date:t.templates.parse_date),a=a?r(a):null),a}};return n}class _n{constructor(e){const{url:i,token:n}=e;this._url=i,this._token=n,this._mode=1,this._seed=1,this._queue=[],this.data={},this.api={},this._events={}}headers(){return{Accept:"application/json","Content-Type":"application/json","Remote-Token":this._token}}fetch(e,i){const n={credentials:"include",headers:this.headers()};return i&&(n.method="POST",n.body=i),fetch(e,n).then(a=>a.json())}load(e){return e&&(this._url=e),this.fetch(this._url).then(i=>this.parse(i))}parse(e){const{key:i,websocket:n}=e;i&&(this._token=e.key);for(const a in e.data)this.data[a]=e.data[a];for(const a in e.api){const r=this.api[a]={},s=e.api[a];for(const o in s)r[o]=this._wrapper(a+"."+o)}return n&&this.connect(),this}connect(){const e=this._socket;e&&(this._socket=null,e.onclose=function(){},e.close()),this._mode=2,this._socket=function(i,n,a,r){let s=n;s[0]==="/"&&(s=document.location.protocol+"//"+document.location.host+n),s=s.replace(/^http(s|):/,"ws$1:");const o=s.indexOf("?")!=-1?"&":"?";s=`${s}${o}token=${a}&ws=1`;const l=new WebSocket(s);return l.onclose=()=>setTimeout(()=>i.connect(),2e3),l.onmessage=d=>{const c=JSON.parse(d.data);switch(c.action){case"result":i.result(c.body,[]);break;case"event":i.fire(c.body.name,c.body.value);break;case"start":r();break;default:i.onError(c.data)}},l}(this,this._url,this._token,()=>(this._mode=3,this._send(),this._resubscribe(),this))}_wrapper(e){return(function(){const i=[].slice.call(arguments);let n=null;const a=new Promise((r,s)=>{n={data:{id:this._uid(),name:e,args:i},status:1,resolve:r,reject:s},this._queue.push(n)});return this.onCall(n,a),this._mode===3?this._send(n):setTimeout(()=>this._send(),1),a}).bind(this)}_uid(){return(this._seed++).toString()}_send(e){if(this._mode==2)return void setTimeout(()=>this._send(),100);const i=e?[e]:this._queue.filter(a=>a.status===1);if(!i.length)return;const n=i.map(a=>(a.status=2,a.data));this._mode!==3?this.fetch(this._url,JSON.stringify(n)).catch(a=>this.onError(a)).then(a=>this.result(a,n)):this._socket.send(JSON.stringify({action:"call",body:n}))}result(e,i){const n={};if(e)for(let a=0;a<e.length;a++)n[e[a].id]=e[a];else for(let a=0;a<i.length;a++)n[i[a].id]={id:i[a].id,error:"Network Error",data:null};for(let a=this._queue.length-1;a>=0;a--){const r=this._queue[a],s=n[r.data.id];s&&(this.onResponse(r,s),s.error?r.reject(s.error):r.resolve(s.data),this._queue.splice(a,1))}}on(e,i){const n=this._uid();let a=this._events[e];const r=!!a;return r||(a=this._events[e]=[]),a.push({id:n,handler:i}),r||this._mode!=3||this._socket.send(JSON.stringify({action:"subscribe",name:e})),{name:e,id:n}}_resubscribe(){if(this._mode==3)for(const e in this._events)this._socket.send(JSON.stringify({action:"subscribe",name:e}))}detach(e){if(!e){if(this._mode==3)for(const r in this._events)this._socket.send(JSON.stringify({action:"unsubscribe",key:r}));return void(this._events={})}const{id:i,name:n}=e,a=this._events[n];if(a){const r=a.filter(s=>s.id!=i);r.length?this._events[n]=r:(delete this._events[n],this._mode==3&&this._socket.send(JSON.stringify({action:"unsubscribe",name:n})))}}fire(e,i){const n=this._events[e];if(n)for(let a=0;a<n.length;a++)n[a].handler(i)}onError(e){return null}onCall(e,i){}onResponse(e,i){}}const fn=function(t,e){const i=new _n({url:t,token:e});i.fetch=function(n,a){const r={headers:this.headers()};return a&&(r.method="POST",r.body=a),fetch(n,r).then(s=>s.json())},this._ready=i.load().then(n=>this._remote=n),this.ready=function(){return this._ready},this.on=function(n,a){this.ready().then(r=>{if(typeof n=="string")r.on(n,a);else for(const s in n)r.on(s,n[s])})}};function fi(t,e){if(!e)return!0;if(t._on_timeout)return!1;var i=Math.ceil(1e3/e);return i<2||(setTimeout(function(){delete t._on_timeout},i),t._on_timeout=!0),!0}var gn=function(){var t={};return{getState:function(e){if(t[e])return t[e].method();var i={};for(var n in t)t[n].internal||N(i,t[n].method(),!0);return i},registerProvider:function(e,i,n){t[e]={method:i,internal:n}},unregisterProvider:function(e){delete t[e]}}};const pn=Promise;var tt={$create:function(t){return N(t||[],this)},$removeAt:function(t,e){t>=0&&this.splice(t,e||1)},$remove:function(t){this.$removeAt(this.$find(t))},$insertAt:function(t,e){if(e||e===0){var i=this.splice(e,this.length-e);this[e]=t,this.push.apply(this,i)}else this.push(t)},$find:function(t){for(var e=0;e<this.length;e++)if(t==this[e])return e;return-1},$each:function(t,e){for(var i=0;i<this.length;i++)t.call(e||this,this[i])},$map:function(t,e){for(var i=0;i<this.length;i++)this[i]=t.call(e||this,this[i]);return this},$filter:function(t,e){for(var i=0;i<this.length;i++)t.call(e||this,this[i])||(this.splice(i,1),i--);return this}};function Pt(t,e,i,n){return(n=e?e.config:n)&&n.placeholder_task&&i.exists(t)?i.getItem(t).type===n.types.placeholder:!1}var nt=function(t){return this.pull={},this.$initItem=t.initItem,this.visibleOrder=tt.$create(),this.fullOrder=tt.$create(),this._skip_refresh=!1,this._filterRule=null,this._searchVisibleOrder={},this._indexRangeCache={},this._getItemsCache=null,this.$config=t,ot(this),this._attachDataChange(function(){return this._indexRangeCache={},this._getItemsCache=null,!0}),this};nt.prototype={_attachDataChange:function(t){this.attachEvent("onClearAll",t),this.attachEvent("onBeforeParse",t),this.attachEvent("onBeforeUpdate",t),this.attachEvent("onBeforeDelete",t),this.attachEvent("onBeforeAdd",t),this.attachEvent("onParse",t),this.attachEvent("onBeforeFilter",t)},_parseInner:function(t){for(var e=null,i=[],n=0,a=t.length;n<a;n++)e=t[n],this.$initItem&&(this.$config.copyOnParse()&&(e=q(e)),e=this.$initItem(e)),this.callEvent("onItemLoading",[e])&&(this.pull.hasOwnProperty(e.id)||this.fullOrder.push(e.id),i.push(e),this.pull[e.id]=e);return i},parse:function(t){this.isSilent()||this.callEvent("onBeforeParse",[t]);var e=this._parseInner(t);this.isSilent()||(this.refresh(),this.callEvent("onParse",[e]))},getItem:function(t){return this.pull[t]},_updateOrder:function(t){t.call(this.visibleOrder),t.call(this.fullOrder)},updateItem:function(t,e){if(j(e)||(e=this.getItem(t)),!this.isSilent()&&this.callEvent("onBeforeUpdate",[e.id,e])===!1)return!1;N(this.pull[t],e,!0),this.isSilent()||(this.callEvent("onAfterUpdate",[e.id,e]),this.callEvent("onStoreUpdated",[e.id,e,"update"]))},_removeItemInner:function(t){this._updateOrder(function(){this.$remove(t)}),delete this.pull[t]},removeItem:function(t){var e=this.getItem(t);if(!this.isSilent()&&this.callEvent("onBeforeDelete",[e.id,e])===!1)return!1;this.callEvent("onAfterDeleteConfirmed",[e.id,e]),this._removeItemInner(t),this.isSilent()&&this.callEvent("onAfterSilentDelete",[e.id,e]),this.isSilent()||(this.filter(),this.callEvent("onAfterDelete",[e.id,e]),this.callEvent("onStoreUpdated",[e.id,e,"delete"]))},_addItemInner:function(t,e){if(this.exists(t.id))this.silent(function(){this.updateItem(t.id,t)});else{var i=this.visibleOrder,n=i.length;(!j(e)||e<0)&&(e=n),e>n&&(e=Math.min(i.length,e))}this.pull[t.id]=t,this.isSilent()||this._updateOrder(function(){this.$find(t.id)===-1&&this.$insertAt(t.id,e)}),this.filter()},isVisible:function(t){return this.visibleOrder.$find(t)>-1},getVisibleItems:function(){return this.getIndexRange()},addItem:function(t,e){return j(t.id)||(t.id=st()),this.$initItem&&(t=this.$initItem(t)),!(!this.isSilent()&&this.callEvent("onBeforeAdd",[t.id,t])===!1)&&(this._addItemInner(t,e),this.isSilent()||(this.callEvent("onAfterAdd",[t.id,t]),this.callEvent("onStoreUpdated",[t.id,t,"add"])),t.id)},_changeIdInner:function(t,e){this.pull[t]&&(this.pull[e]=this.pull[t]);var i=this._searchVisibleOrder[t];this.pull[e].id=e,this._updateOrder(function(){this[this.$find(t)]=e}),this._searchVisibleOrder[e]=i,delete this._searchVisibleOrder[t],delete this.pull[t]},changeId:function(t,e){this._changeIdInner(t,e),this.callEvent("onIdChange",[t,e])},exists:function(t){return!!this.pull[t]},_moveInner:function(t,e){var i=this.getIdByIndex(t);this._updateOrder(function(){this.$removeAt(t),this.$insertAt(i,Math.min(this.length,e))})},move:function(t,e){var i=this.getIdByIndex(t),n=this.getItem(i);this._moveInner(t,e),this.isSilent()||this.callEvent("onStoreUpdated",[n.id,n,"move"])},clearAll:function(){this.$destroyed||(this.silent(function(){this.unselect()}),this.pull={},this.visibleOrder=tt.$create(),this.fullOrder=tt.$create(),this.isSilent()||(this.callEvent("onClearAll",[]),this.refresh()))},silent:function(t,e){var i=!1;this.isSilent()&&(i=!0),this._skip_refresh=!0,t.call(e||this),i||(this._skip_refresh=!1)},isSilent:function(){return!!this._skip_refresh},arraysEqual:function(t,e){if(t.length!==e.length)return!1;for(var i=0;i<t.length;i++)if(t[i]!==e[i])return!1;return!0},refresh:function(t,e){var i,n;if(!this.isSilent()&&(t&&(i=this.getItem(t)),n=t?[t,i,"paint"]:[null,null,null],this.callEvent("onBeforeStoreUpdate",n)!==!1)){var a=this._quick_refresh&&!this._mark_recompute;if(this._mark_recompute=!1,t){if(!e&&!a){var r=this.visibleOrder;this.filter(),this.arraysEqual(r,this.visibleOrder)||(t=void 0)}}else a||this.filter();n=t?[t,i,"paint"]:[null,null,null],this.callEvent("onStoreUpdated",n)}},count:function(){return this.fullOrder.length},countVisible:function(){return this.visibleOrder.length},sort:function(t){},serialize:function(){},eachItem:function(t){for(var e=0;e<this.fullOrder.length;e++){var i=this.getItem(this.fullOrder[e]);t.call(this,i)}},find:function(t){var e=[];return this.eachItem(function(i){t(i)&&e.push(i)}),e},filter:function(t){this.isSilent()||this.callEvent("onBeforeFilter",[]),this.callEvent("onPreFilter",[]);var e=tt.$create(),i=[];this.eachItem(function(a){this.callEvent("onFilterItem",[a.id,a])&&(Pt(a.id,null,this,this._ganttConfig)?i.push(a.id):e.push(a.id))});for(var n=0;n<i.length;n++)e.push(i[n]);for(this.visibleOrder=e,this._searchVisibleOrder={},n=0;n<this.visibleOrder.length;n++)this._searchVisibleOrder[this.visibleOrder[n]]=n;this.isSilent()||this.callEvent("onFilter",[])},getIndexRange:function(t,e){var i=Math.min(e||1/0,this.countVisible()-1),n=t||0,a=n+"-"+i;if(this._indexRangeCache[a])return this._indexRangeCache[a].slice();for(var r=[],s=n;s<=i;s++)r.push(this.getItem(this.visibleOrder[s]));return this._indexRangeCache[a]=r.slice(),r},getItems:function(){if(this._getItemsCache)return this._getItemsCache.slice();var t=[];for(var e in this.pull)t.push(this.pull[e]);return this._getItemsCache=t.slice(),t},getIdByIndex:function(t){return this.visibleOrder[t]},getIndexById:function(t){var e=this._searchVisibleOrder[t];return e===void 0&&(e=-1),e},_getNullIfUndefined:function(t){return t===void 0?null:t},getFirst:function(){return this._getNullIfUndefined(this.visibleOrder[0])},getLast:function(){return this._getNullIfUndefined(this.visibleOrder[this.visibleOrder.length-1])},getNext:function(t){return this._getNullIfUndefined(this.visibleOrder[this.getIndexById(t)+1])},getPrev:function(t){return this._getNullIfUndefined(this.visibleOrder[this.getIndexById(t)-1])},destructor:function(){this.callEvent("onDestroy",[]),this.detachAllEvents(),this.$destroyed=!0,this.pull=null,this.$initItem=null,this.visibleOrder=null,this.fullOrder=null,this._skip_refresh=null,this._filterRule=null,this._searchVisibleOrder=null,this._indexRangeCache={}}};var gi=function(t){var e;nt.apply(this,[t]),this._branches={},this.pull={},this.$initItem=function(o){var l=o;t.initItem&&(l=t.initItem(l));var d=this.getItem(o.id);return d&&!lt(d.parent,l.parent)&&this.move(l.id,l.$index||-1,l.parent||this._ganttConfig.root_id),l},this.$parentProperty=t.parentProperty||"parent",typeof t.rootId!="function"?this.$getRootId=(e=t.rootId||0,function(){return e}):this.$getRootId=t.rootId,this.$openInitially=t.openInitially,this.visibleOrder=tt.$create(),this.fullOrder=tt.$create(),this._searchVisibleOrder={},this._indexRangeCache={},this._eachItemMainRangeCache=null,this._getItemsCache=null,this._skip_refresh=!1,this._ganttConfig=null,t.getConfig&&(this._ganttConfig=t.getConfig());var i={},n={},a={},r={},s=!1;return this._attachDataChange(function(){return this._indexRangeCache={},this._eachItemMainRangeCache=null,this._getItemsCache=null,!0}),this.attachEvent("onPreFilter",function(){this._indexRangeCache={},this._eachItemMainRangeCache=null,i={},n={},a={},r={},s=!1,this.eachItem(function(o){var l=this.getParent(o.id);o.$open&&a[l]!==!1?a[o.id]=!0:a[o.id]=!1,this._isSplitItem(o)&&(s=!0,i[o.id]=!0,n[o.id]=!0),s&&n[l]&&(n[o.id]=!0),a[l]||a[l]===void 0?r[o.id]=!0:r[o.id]=!1})}),this.attachEvent("onFilterItem",function(o,l){var d=!1;this._ganttConfig&&(d=this._ganttConfig.open_split_tasks);var c=r[l.id];return s&&(c&&n[l.id]&&!i[l.id]&&(c=!!d),n[l.id]&&!i[l.id]&&(l.$split_subtask=!0)),l.$expanded_branch=!!r[l.id],!!c}),this.attachEvent("onFilter",function(){i={},n={},a={},r={}}),this};function lt(t,e){return String(t)===String(e)}function W(t){return vt.isNode||!t.$root}gi.prototype=N({_buildTree:function(t){for(var e=null,i=this.$getRootId(),n=0,a=t.length;n<a;n++)e=t[n],this.setParent(e,at(this.getParent(e),i)||i);for(n=0,a=t.length;n<a;n++)e=t[n],this._add_branch(e),e.$level=this.calculateItemLevel(e),e.$local_index=this.getBranchIndex(e.id),j(e.$open)||(e.$open=j(e.open)?e.open:this.$openInitially());this._updateOrder()},_isSplitItem:function(t){return t.render=="split"&&this.hasChild(t.id)},parse:function(t){this._skip_refresh||this.callEvent("onBeforeParse",[t]);var e=this._parseInner(t);this._buildTree(e),this.filter(),this._skip_refresh||this.callEvent("onParse",[e])},_addItemInner:function(t,e){var i=this.getParent(t);j(i)||(i=this.$getRootId(),this.setParent(t,i));var n=this.getIndexById(i)+Math.min(Math.max(e,0),this.visibleOrder.length);1*n!==n&&(n=void 0),nt.prototype._addItemInner.call(this,t,n),this.setParent(t,i),t.hasOwnProperty("$rendered_parent")&&this._move_branch(t,t.$rendered_parent),this._add_branch(t,e)},_changeIdInner:function(t,e){var i=this.getChildren(t),n=this._searchVisibleOrder[t];nt.prototype._changeIdInner.call(this,t,e);var a=this.getParent(e);this._replace_branch_child(a,t,e),this._branches[t]&&(this._branches[e]=this._branches[t]);for(var r=0;r<i.length;r++){var s=this.getItem(i[r]);s[this.$parentProperty]=e,s.$rendered_parent=e}this._searchVisibleOrder[e]=n,delete this._branches[t]},_traverseBranches:function(t,e){j(e)||(e=this.$getRootId());var i=this._branches[e];if(i)for(var n=0;n<i.length;n++){var a=i[n];t.call(this,a),this._branches[a]&&this._traverseBranches(t,a)}},_updateOrder:function(t){this.fullOrder=tt.$create(),this._traverseBranches(function(e){this.fullOrder.push(e)}),t&&nt.prototype._updateOrder.call(this,t)},_removeItemInner:function(t){var e=[];this.eachItem(function(n){e.push(n)},t),e.push(this.getItem(t));for(var i=0;i<e.length;i++)this._move_branch(e[i],this.getParent(e[i]),null),nt.prototype._removeItemInner.call(this,e[i].id),this._move_branch(e[i],this.getParent(e[i]),null)},move:function(t,e,i){var n=arguments[3],a=(this._ganttConfig||{}).root_id||0;if(n=at(n,a)){if(n===t)return;i=this.getParent(n),e=this.getBranchIndex(n)}if(!lt(t,i)){j(i)||(i=this.$getRootId());var r=this.getItem(t),s=this.getParent(r.id),o=this.getChildren(i);if(e==-1&&(e=o.length+1),lt(s,i)&&this.getBranchIndex(t)==e)return;if(this.callEvent("onBeforeItemMove",[t,i,e])===!1)return!1;for(var l=[],d=0;d<o.length;d++)Pt(o[d],null,this,this._ganttConfig)&&(l.push(o[d]),o.splice(d,1),d--);this._replace_branch_child(s,t);var c=(o=this.getChildren(i))[e];(c=at(c,a))?o=o.slice(0,e).concat([t]).concat(o.slice(e)):o.push(t),l.length&&(o=o.concat(l)),lt(r.$rendered_parent,s)||lt(s,i)||(r.$rendered_parent=s),this.setParent(r,i),this._branches[i]=o;var u=this.calculateItemLevel(r)-r.$level;r.$level+=u,this.eachItem(function(h){h.$level+=u},r.id,this),this._moveInner(this.getIndexById(t),this.getIndexById(i)+e),this.callEvent("onAfterItemMove",[t,i,e]),this.refresh()}},getBranchIndex:function(t){var e=this.getChildren(this.getParent(t));let i=e.indexOf(t+"");return i==-1&&(i=e.indexOf(+t)),i},hasChild:function(t){var e=this._branches[t];return e&&e.length},getChildren:function(t){var e=this._branches[t];return e||tt.$create()},isChildOf:function(t,e){if(!this.exists(t))return!1;if(e===this.$getRootId())return!0;if(!this.hasChild(e))return!1;var i=this.getItem(t),n=this.getParent(t);if(this.getItem(e).$level>=i.$level)return!1;for(;i&&this.exists(n);){if((i=this.getItem(n))&&lt(i.id,e))return!0;n=this.getParent(i)}return!1},getSiblings:function(t){if(!this.exists(t))return tt.$create();var e=this.getParent(t);return this.getChildren(e)},getNextSibling:function(t){for(var e=this.getSiblings(t),i=0,n=e.length;i<n;i++)if(lt(e[i],t)){var a=e[i+1];return a===0&&i>0&&(a="0"),a||null}return null},getPrevSibling:function(t){for(var e=this.getSiblings(t),i=0,n=e.length;i<n;i++)if(lt(e[i],t)){var a=e[i-1];return a===0&&i>0&&(a="0"),a||null}return null},getParent:function(t){var e=null;return(e=t.id!==void 0?t:this.getItem(t))?e[this.$parentProperty]:this.$getRootId()},clearAll:function(){this._branches={},nt.prototype.clearAll.call(this)},calculateItemLevel:function(t){var e=0;return this.eachParent(function(){e++},t),e},_setParentInner:function(t,e,i){i||(t.hasOwnProperty("$rendered_parent")?this._move_branch(t,t.$rendered_parent,e):this._move_branch(t,t[this.$parentProperty],e))},setParent:function(t,e,i){this._setParentInner(t,e,i),t[this.$parentProperty]=e},_eachItemCached:function(t,e){for(var i=0,n=e.length;i<n;i++)t.call(this,e[i])},_eachItemIterate:function(t,e,i){var n=this.getChildren(e);for(n.length&&(n=n.slice().reverse());n.length;){var a=n.pop(),r=this.getItem(a);if(t.call(this,r),i&&i.push(r),this.hasChild(r.id))for(var s=this.getChildren(r.id),o=s.length-1;o>=0;o--)n.push(s[o])}},eachItem:function(t,e){var i=this.$getRootId();j(e)||(e=i);var n=at(e,i)||i,a=!1,r=!1,s=null;n===i&&(this._eachItemMainRangeCache?(a=!0,s=this._eachItemMainRangeCache):(r=!0,s=this._eachItemMainRangeCache=[])),a?this._eachItemCached(t,s):this._eachItemIterate(t,n,r?s:null)},eachParent:function(t,e){for(var i={},n=e,a=this.getParent(n);this.exists(a);){if(i[a])throw new Error("Invalid tasks tree. Cyclic reference has been detected on task "+a);i[a]=!0,n=this.getItem(a),t.call(this,n),a=this.getParent(n)}},_add_branch:function(t,e,i){var n=i===void 0?this.getParent(t):i;this.hasChild(n)||(this._branches[n]=tt.$create());var a=this.getChildren(n);a.indexOf(t.id+"")>-1||a.indexOf(+t.id)>-1||(1*e==e?a.splice(e,0,t.id):a.push(t.id),t.$rendered_parent=n)},_move_branch:function(t,e,i){this._eachItemMainRangeCache=null,this._replace_branch_child(e,t.id),this.exists(i)||lt(i,this.$getRootId())?this._add_branch(t,void 0,i):delete this._branches[t.id],t.$level=this.calculateItemLevel(t),this.eachItem(function(n){n.$level=this.calculateItemLevel(n)},t.id)},_replace_branch_child:function(t,e,i){var n=this.getChildren(t);if(n&&t!==void 0){var a=tt.$create();let r=n.indexOf(e+"");r!=-1||isNaN(+e)||(r=n.indexOf(+e)),r>-1&&(i?n.splice(r,1,i):n.splice(r,1)),a=n,this._branches[t]=a}},sort:function(t,e,i){this.exists(i)||(i=this.$getRootId()),t||(t="order");var n=typeof t=="string"?function(l,d){return l[t]==d[t]||Z(l[t])&&Z(d[t])&&l[t].valueOf()==d[t].valueOf()?0:l[t]>d[t]?1:-1}:t;if(e){var a=n;n=function(l,d){return a(d,l)}}var r=this.getChildren(i);if(r){for(var s=[],o=r.length-1;o>=0;o--)s[o]=this.getItem(r[o]);for(s.sort(n),o=0;o<s.length;o++)r[o]=s[o].id,this.sort(t,e,r[o])}},filter:function(t){for(let e in this.pull){const i=this.pull[e].$rendered_parent,n=this.getParent(this.pull[e]);lt(i,n)||this._move_branch(this.pull[e],i,n)}return nt.prototype.filter.apply(this,arguments)},open:function(t){this.exists(t)&&(this.getItem(t).$open=!0,this._skipTaskRecalculation=!0,this.callEvent("onItemOpen",[t]))},close:function(t){this.exists(t)&&(this.getItem(t).$open=!1,this._skipTaskRecalculation=!0,this.callEvent("onItemClose",[t]))},destructor:function(){nt.prototype.destructor.call(this),this._branches=null,this._indexRangeCache={},this._eachItemMainRangeCache=null}},nt.prototype);const mn=function(t,e){const i=e.getDatastore(t),n=function(o,l){const d=l.getLayers(),c=i.getItem(o);if(c&&i.isVisible(o))for(let u=0;u<d.length;u++)d[u].render_item(c)},a=function(o){const l=o.getLayers();for(let f=0;f<l.length;f++)l[f].clear();let d=null;const c={};for(let f=0;f<l.length;f++){const g=l[f];let y;if(g.get_visible_range){var u=g.get_visible_range(i);if(u.start!==void 0&&u.end!==void 0){var h=u.start+" - "+u.end;c[h]?y=c[h]:(y=i.getIndexRange(u.start,u.end),c[h]=y)}else{if(u.ids===void 0)throw new Error("Invalid range returned from 'getVisibleRange' of the layer");y=u.ids.map(function(v){return i.getItem(v)})}}else d||(d=i.getVisibleItems()),y=d;g.prepare_data&&g.prepare_data(y),l[f].render_items(y)}},r=function(o){if(o.update_items){let d=[];if(o.get_visible_range){var l=o.get_visible_range(i);if(l.start!==void 0&&l.end!==void 0&&(d=i.getIndexRange(l.start,l.end)),l.ids!==void 0){let c=l.ids.map(function(u){return i.getItem(u)});c.length>0&&(c=c.filter(u=>u!==void 0),d=d.concat(c))}if((l.start==null||l.end==null)&&l.ids==null)throw new Error("Invalid range returned from 'getVisibleRange' of the layer")}else d=i.getVisibleItems();o.prepare_data&&o.prepare_data(d,o),o.update_items(d)}};function s(o){return!!o.$services.getService("state").getState("batchUpdate").batch_update}i.attachEvent("onStoreUpdated",function(o,l,d){if(W(e))return!0;const c=e.$services.getService("layers").getDataRender(t);c&&(c.onUpdateRequest=function(u){r(u)})}),i.attachEvent("onStoreUpdated",function(o,l,d){s(e)||(o&&d!="move"&&d!="delete"?(i.callEvent("onBeforeRefreshItem",[l.id]),i.callEvent("onAfterRefreshItem",[l.id])):(i.callEvent("onBeforeRefreshAll",[]),i.callEvent("onAfterRefreshAll",[])))}),i.attachEvent("onAfterRefreshAll",function(){if(W(e))return!0;const o=e.$services.getService("layers").getDataRender(t);o&&!s(e)&&a(o)}),i.attachEvent("onAfterRefreshItem",function(o){if(W(e))return!0;const l=e.$services.getService("layers").getDataRender(t);l&&n(o,l)}),i.attachEvent("onItemOpen",function(){if(W(e))return!0;e.render()}),i.attachEvent("onItemClose",function(){if(W(e))return!0;e.render()}),i.attachEvent("onIdChange",function(o,l){if(W(e))return!0;if(i.callEvent("onBeforeIdChange",[o,l]),!s(e)&&!i.isSilent()){const d=e.$services.getService("layers").getDataRender(t);d?(function(c,u,h){for(let f=0;f<c.length;f++)c[f].change_id(u,h)}(d.getLayers(),o,l,i.getItem(l)),n(l,d)):e.render()}})};function Xt(){for(var t=this.$services.getService("datastores"),e=[],i=0;i<t.length;i++){var n=this.getDatastore(t[i]);n.$destroyed||e.push(n)}return e}const vn={create:function(){var t=N({},{createDatastore:function(e){var i=(e.type||"").toLowerCase()=="treedatastore"?gi:nt;if(e){var n=this;e.openInitially=function(){return n.config.open_tree_initially},e.copyOnParse=function(){return n.config.deepcopy_on_parse}}var a=new i(e);if(this.mixin(a,function(o){var l=null,d=o._removeItemInner;function c(u){l=null,this.callEvent("onAfterUnselect",[u])}return o._removeItemInner=function(u){return l==u&&c.call(this,u),l&&this.eachItem&&this.eachItem(function(h){h.id==l&&c.call(this,h.id)},u),d.apply(this,arguments)},o.attachEvent("onIdChange",function(u,h){o.getSelectedId()==u&&o.silent(function(){o.unselect(u),o.select(h)})}),{select:function(u){if(u){if(l==u)return l;if(!this._skip_refresh&&!this.callEvent("onBeforeSelect",[u]))return!1;this.unselect(),l=u,this._skip_refresh||(this.refresh(u),this.callEvent("onAfterSelect",[u]))}return l},getSelectedId:function(){return l},isSelected:function(u){return u==l},unselect:function(u){(u=u||l)&&(l=null,this._skip_refresh||(this.refresh(u),c.call(this,u)))}}}(a)),e.name){var r="datastore:"+e.name;a.attachEvent("onDestroy",(function(){this.$services.dropService(r);for(var o=this.$services.getService("datastores"),l=0;l<o.length;l++)if(o[l]===e.name){o.splice(l,1);break}}).bind(this)),this.$services.dropService(r),this.$services.setService(r,function(){return a});var s=this.$services.getService("datastores");s?s.indexOf(e.name)<0&&s.push(e.name):(s=[],this.$services.setService("datastores",function(){return s}),s.push(e.name)),mn(e.name,this)}return a},getDatastore:function(e){return this.$services.getService("datastore:"+e)},_getDatastores:Xt,refreshData:function(){var e;W(this)||(e=this.getScrollState()),this.callEvent("onBeforeDataRender",[]);for(var i=Xt.call(this),n=0;n<i.length;n++)i[n].refresh();this.config.preserve_scroll&&!W(this)&&(e.x||e.y)&&this.scrollTo(e.x,e.y),this.callEvent("onDataRender",[])},isChildOf:function(e,i){return this.$data.tasksStore.isChildOf(e,i)},refreshTask:function(e,i){var n=this.getTask(e),a=this;function r(){if(i===void 0||i){for(var o=0;o<n.$source.length;o++)a.refreshLink(n.$source[o]);for(o=0;o<n.$target.length;o++)a.refreshLink(n.$target[o])}}if(n&&this.isTaskVisible(e))this.$data.tasksStore.refresh(e,!!this.getState("tasksDnd").drag_id||i===!1),r();else if(this.isTaskExists(e)&&this.isTaskExists(this.getParent(e))&&!this._bulk_dnd){this.refreshTask(this.getParent(e));var s=!1;this.eachParent(function(o){(s||this.isSplitTask(o))&&(s=!0)},e),s&&r()}},refreshLink:function(e){this.$data.linksStore.refresh(e,!!this.getState("tasksDnd").drag_id)},silent:function(e){var i=this;i.$data.tasksStore.silent(function(){i.$data.linksStore.silent(function(){e()})})},clearAll:function(){for(var e=Xt.call(this),i=0;i<e.length;i++)e[i].silent(function(){e[i].clearAll()});for(i=0;i<e.length;i++)e[i].clearAll();this._update_flags(),this.userdata={},this.callEvent("onClear",[]),this.render()},_clear_data:function(){this.$data.tasksStore.clearAll(),this.$data.linksStore.clearAll(),this._update_flags(),this.userdata={}},selectTask:function(e){var i=this.$data.tasksStore;if(!this.config.select_task)return!1;if(e=at(e,this.config.root_id)){let n=this.getSelectedId();i._skipResourceRepaint=!0,i.select(e),i._skipResourceRepaint=!1,n&&i.pull[n].$split_subtask&&n!=e&&this.refreshTask(n),i.pull[e].$split_subtask&&n!=e&&this.refreshTask(e)}return i.getSelectedId()},unselectTask:function(e){var i=this.$data.tasksStore;i.unselect(e),e&&i.pull[e].$split_subtask&&this.refreshTask(e)},isSelectedTask:function(e){return this.$data.tasksStore.isSelected(e)},getSelectedId:function(){return this.$data.tasksStore.getSelectedId()}});return N(t,{getTask:function(e){e=at(e,this.config.root_id),this.assert(e,"Invalid argument for gantt.getTask");var i=this.$data.tasksStore.getItem(e);return this.assert(i,"Task not found id="+e),i},getTaskByTime:function(e,i){var n=this.$data.tasksStore.getItems(),a=[];if(e||i){e=+e||-1/0,i=+i||1/0;for(var r=0;r<n.length;r++){var s=n[r];+s.start_date<i&&+s.end_date>e&&a.push(s)}}else a=n;return a},isTaskExists:function(e){return!(!this.$data||!this.$data.tasksStore)&&this.$data.tasksStore.exists(e)},updateTask:function(e,i){j(i)||(i=this.getTask(e)),this.$data.tasksStore.updateItem(e,i),this.isTaskExists(e)&&this.refreshTask(e)},addTask:function(e,i,n){if(j(e.id)||(e.id=st()),this.isTaskExists(e.id)&&this.getTask(e.id).$index!=e.$index)return e.start_date&&typeof e.start_date=="string"&&(e.start_date=this.date.parseDate(e.start_date,"parse_date")),e.end_date&&typeof e.end_date=="string"&&(e.end_date=this.date.parseDate(e.end_date,"parse_date")),this.$data.tasksStore.updateItem(e.id,e);if(j(i)||(i=this.getParent(e)||0),this.isTaskExists(i)||(i=this.config.root_id),this.setParent(e,i),this.getState().lightbox&&this.isTaskExists(i)){var a=this.getTask(i);this.callEvent("onAfterParentExpand",[i,a])}return this.$data.tasksStore.addItem(e,n,i)},deleteTask:function(e){return e=at(e,this.config.root_id),this.$data.tasksStore.removeItem(e)},getTaskCount:function(){return this.$data.tasksStore.count()},getVisibleTaskCount:function(){return this.$data.tasksStore.countVisible()},getTaskIndex:function(e){return this.$data.tasksStore.getBranchIndex(e)},getGlobalTaskIndex:function(e){return e=at(e,this.config.root_id),this.assert(e,"Invalid argument"),this.$data.tasksStore.getIndexById(e)},eachTask:function(e,i,n){return this.$data.tasksStore.eachItem(R(e,n||this),i)},eachParent:function(e,i,n){return this.$data.tasksStore.eachParent(R(e,n||this),i)},changeTaskId:function(e,i){this.$data.tasksStore.changeId(e,i);var n=this.$data.tasksStore.getItem(i),a=[];n.$source&&(a=a.concat(n.$source)),n.$target&&(a=a.concat(n.$target));for(var r=0;r<a.length;r++){var s=this.getLink(a[r]);s.source==e&&(s.source=i),s.target==e&&(s.target=i)}},calculateTaskLevel:function(e){return this.$data.tasksStore.calculateItemLevel(e)},getNext:function(e){return this.$data.tasksStore.getNext(e)},getPrev:function(e){return this.$data.tasksStore.getPrev(e)},getParent:function(e){return this.$data.tasksStore.getParent(e)},setParent:function(e,i,n){return this.$data.tasksStore.setParent(e,i,n)},getSiblings:function(e){return this.$data.tasksStore.getSiblings(e).slice()},getNextSibling:function(e){return this.$data.tasksStore.getNextSibling(e)},getPrevSibling:function(e){return this.$data.tasksStore.getPrevSibling(e)},getTaskByIndex:function(e){var i=this.$data.tasksStore.getIdByIndex(e);return this.isTaskExists(i)?this.getTask(i):null},getChildren:function(e){return this.hasChild(e)?this.$data.tasksStore.getChildren(e).slice():[]},hasChild:function(e){return this.$data.tasksStore.hasChild(e)},open:function(e){this.$data.tasksStore.open(e)},close:function(e){this.$data.tasksStore.close(e)},moveTask:function(e,i,n){return n=at(n,this.config.root_id),this.$data.tasksStore.move.apply(this.$data.tasksStore,arguments)},sort:function(e,i,n,a){var r=!a;this.$data.tasksStore.sort(e,i,n),this.callEvent("onAfterSort",[e,i,n]),r&&this.render()}}),N(t,{getLinkCount:function(){return this.$data.linksStore.count()},getLink:function(e){return this.$data.linksStore.getItem(e)},getLinks:function(){return this.$data.linksStore.getItems()},isLinkExists:function(e){return this.$data.linksStore.exists(e)},addLink:function(e){const i=this.$data.linksStore.addItem(e);return this.$data.linksStore.isSilent()&&this.$data.linksStore.fullOrder.push(i),i},updateLink:function(e,i){j(i)||(i=this.getLink(e)),this.$data.linksStore.updateItem(e,i)},deleteLink:function(e){return this.$data.linksStore.removeItem(e)},changeLinkId:function(e,i){return this.$data.linksStore.changeId(e,i)}}),t}};function ue(t){var e=t.date,i=t.$services;return{getSum:function(n,a,r){r===void 0&&(r=n.length-1),a===void 0&&(a=0);for(var s=0,o=a;o<=r;o++)s+=n[o];return s},setSumWidth:function(n,a,r,s){var o=a.width;s===void 0&&(s=o.length-1),r===void 0&&(r=0);var l=s-r+1;if(!(r>o.length-1||l<=0||s>o.length-1)){var d=n-this.getSum(o,r,s);this.adjustSize(d,o,r,s),this.adjustSize(-d,o,s+1),a.full_width=this.getSum(o)}},splitSize:function(n,a){for(var r=[],s=0;s<a;s++)r[s]=0;return this.adjustSize(n,r),r},adjustSize:function(n,a,r,s){r||(r=0),s===void 0&&(s=a.length-1);for(var o=s-r+1,l=this.getSum(a,r,s),d=r;d<=s;d++){var c=Math.floor(n*(l?a[d]/l:1/o));l-=a[d],n-=c,o--,a[d]+=c}a[a.length-1]+=n},sortScales:function(n){function a(s,o){var l=new Date(1970,0,1);return e.add(l,o,s)-l}n.sort(function(s,o){return a(s.unit,s.step)<a(o.unit,o.step)?1:a(s.unit,s.step)>a(o.unit,o.step)?-1:0});for(var r=0;r<n.length;r++)n[r].index=r},_isLegacyMode:function(n){var a=n||t.config;return a.scale_unit||a.date_scale||a.subscales},_prepareScaleObject:function(n){var a=n.format;return a||(a=n.template||n.date||"%d %M"),typeof a=="string"&&(a=t.date.date_to_str(a)),{unit:n.unit||"day",step:n.step||1,format:a,css:n.css}},primaryScale:function(n){var a,r=i.getService("templateLoader"),s=this._isLegacyMode(n),o=n||t.config;if(s)r.initTemplate("date_scale",void 0,void 0,o,t.config.templates),a={unit:t.config.scale_unit,step:t.config.step,template:t.templates.date_scale,date:t.config.date_scale,css:t.templates.scale_cell_class};else{var l=o.scales[0];a={unit:l.unit,step:l.step,template:l.template,format:l.format,date:l.date,css:l.css||t.templates.scale_cell_class}}return this._prepareScaleObject(a)},getSubScales:function(n){var a,r=this._isLegacyMode(n),s=n||t.config;if(r){let o="https://docs.dhtmlx.com/gantt/migrating.html#:~:text=%3D%20false%3B-,Time%20scale%20settings,-Configuration%20of%20time";t.env.isFF&&(o="https://docs.dhtmlx.com/gantt/migrating.html#6162"),console.warn(`You are using the obsolete scale configuration.
It will stop working in the future versions.
Please migrate the configuration to the newer version:
${o}`),a=s.subscales||[]}else a=s.scales.slice(1);return a.map((function(o){return this._prepareScaleObject(o)}).bind(this))},prepareConfigs:function(n,a,r,s,o,l,d){for(var c=this.splitSize(s,n.length),u=r,h=[],f=n.length-1;f>=0;f--){var g=f==n.length-1,y=this.initScaleConfig(n[f],o,l);g&&this.processIgnores(y),this.initColSizes(y,a,u,c[f]),this.limitVisibleRange(y),g&&(u=y.full_width),h.unshift(y)}for(f=0;f<h.length-1;f++)this.alineScaleColumns(h[h.length-1],h[f]);for(f=0;f<h.length;f++)d&&this.reverseScale(h[f]),this.setPosSettings(h[f]);return h},reverseScale:function(n){n.width=n.width.reverse(),n.trace_x=n.trace_x.reverse();var a=n.trace_indexes;n.trace_indexes={},n.trace_index_transition={},n.rtl=!0;for(var r=0;r<n.trace_x.length;r++)n.trace_indexes[n.trace_x[r].valueOf()]=r,n.trace_index_transition[a[n.trace_x[r].valueOf()]]=r;return n},setPosSettings:function(n){for(var a=0,r=n.trace_x.length;a<r;a++)n.left.push((n.width[a-1]||0)+(n.left[a-1]||0))},_ignore_time_config:function(n,a){if(t.config.skip_off_time){for(var r=!0,s=n,o=0;o<a.step;o++)o&&(s=e.add(n,o,a.unit)),r=r&&!this.isWorkTime(s,a.unit);return r}return!1},processIgnores:function(n){n.ignore_x={},n.display_count=n.count},initColSizes:function(n,a,r,s){var o=r;n.height=s;var l=n.display_count===void 0?n.count:n.display_count;l||(l=1),n.col_width=Math.floor(o/l),a&&n.col_width<a&&(n.col_width=a,o=n.col_width*l),n.width=[];for(var d=n.ignore_x||{},c=0;c<n.trace_x.length;c++)if(d[n.trace_x[c].valueOf()]||n.display_count==n.count)n.width[c]=0;else{var u=1;n.unit=="month"&&(u=Math.round((e.add(n.trace_x[c],n.step,n.unit)-n.trace_x[c])/864e5)),n.width[c]=u}this.adjustSize(o-this.getSum(n.width),n.width),n.full_width=this.getSum(n.width)},initScaleConfig:function(n,a,r){var s=N({count:0,col_width:0,full_width:0,height:0,width:[],left:[],trace_x:[],trace_indexes:{},min_date:new Date(a),max_date:new Date(r)},n);return this.eachColumn(n.unit,n.step,a,r,function(o){s.count++,s.trace_x.push(new Date(o)),s.trace_indexes[o.valueOf()]=s.trace_x.length-1}),s.trace_x_ascending=s.trace_x.slice(),s},iterateScales:function(n,a,r,s,o){for(var l=a.trace_x,d=n.trace_x,c=r||0,u=s||d.length-1,h=0,f=1;f<l.length;f++){var g=n.trace_indexes[+l[f]];g!==void 0&&g<=u&&(o&&o.apply(this,[h,f,c,g]),c=g,h=f)}},alineScaleColumns:function(n,a,r,s){this.iterateScales(n,a,r,s,function(o,l,d,c){var u=this.getSum(n.width,d,c-1);this.getSum(a.width,o,l-1)!=u&&this.setSumWidth(u,a,o,l-1)})},eachColumn:function(n,a,r,s,o){var l=new Date(r),d=new Date(s);e[n+"_start"]&&(l=e[n+"_start"](l));var c=new Date(l);for(+c>=+d&&(d=e.add(c,a,n));+c<+d;){o.call(this,new Date(c));var u=c.getTimezoneOffset();c=e.add(c,a,n),c=t._correct_dst_change(c,u,a,n),e[n+"_start"]&&(c=e[n+"_start"](c))}},limitVisibleRange:function(n){var a=n.trace_x,r=n.width.length-1,s=0;if(+a[0]<+n.min_date&&r!=0){var o=Math.floor(n.width[0]*((a[1]-n.min_date)/(a[1]-a[0])));s+=n.width[0]-o,n.width[0]=o,a[0]=new Date(n.min_date)}var l=a.length-1,d=a[l],c=e.add(d,n.step,n.unit);if(+c>+n.max_date&&l>0&&(o=n.width[l]-Math.floor(n.width[l]*((c-n.max_date)/(c-d))),s+=n.width[l]-o,n.width[l]=o),s){for(var u=this.getSum(n.width),h=0,f=0;f<n.width.length;f++){var g=Math.floor(s*(n.width[f]/u));n.width[f]+=g,h+=g}this.adjustSize(s-h,n.width)}}}}function kn(t){var e=function(c){var u=new ue(c).primaryScale(),h=u.unit,f=u.step;if(c.config.scale_offset_minimal){var g=new ue(c),y=[g.primaryScale()].concat(g.getSubScales());g.sortScales(y),h=y[y.length-1].unit,f=y[y.length-1].step||1}return{unit:h,step:f}}(t),i=e.unit,n=e.step,a=function(c,u){var h={start_date:null,end_date:null};if(u.config.start_date&&u.config.end_date){h.start_date=u.date[c+"_start"](new Date(u.config.start_date));var f=new Date(u.config.end_date),g=u.date[c+"_start"](new Date(f));f=+f!=+g?u.date.add(g,1,c):g,h.end_date=f}return h}(i,t);if(!a.start_date||!a.end_date){for(var r=!0,s=t.getTaskByTime(),o=0;o<s.length;o++)if(s[o].type!==t.config.types.project){r=!1;break}if(s.length&&r){var l=s[0].start_date,d=t.date.add(l,1,t.config.duration_unit);a={start_date:new Date(l),end_date:new Date(d)}}else a=t.getSubtaskDates();a.start_date&&a.end_date||(a={start_date:new Date,end_date:new Date}),t.eachTask(function(c){t.config.deadlines&&c.deadline&&Zt(a,c.deadline,c.deadline),c.constraint_date&&c.constraint_type&&t.config.constraint_types&&c.constraint_type!==t.config.constraint_types.ASAP&&c.constraint_type!==t.config.constraint_types.ALAP&&Zt(a,c.constraint_date,c.constraint_date),t.config.baselines&&c.baselines&&c.baselines.forEach(function(u){Zt(a,u.start_date,u.end_date)})}),a.start_date=t.date[i+"_start"](a.start_date),a.start_date=t.calculateEndDate({start_date:t.date[i+"_start"](a.start_date),duration:-1,unit:i,step:n}),a.end_date=t.date[i+"_start"](a.end_date),a.end_date=t.calculateEndDate({start_date:a.end_date,duration:2,unit:i,step:n})}t._min_date=a.start_date,t._max_date=a.end_date}function Zt(t,e,i){e<t.start_date&&(t.start_date=new Date(e)),i>t.end_date&&(t.end_date=new Date(i))}function he(t){kn(t),function(e){if(e.config.fit_tasks){var i=+e._min_date,n=+e._max_date;if(+e._min_date!=i||+e._max_date!=n)return e.render(),e.callEvent("onScaleAdjusted",[]),!0}}(t)}function Be(t,e,i){for(var n=0;n<e.length;n++)t.isLinkExists(e[n])&&(i[e[n]]=t.getLink(e[n]))}function ze(t,e,i){Be(t,e.$source,i),Be(t,e.$target,i)}const _e={getSubtreeLinks:function(t,e){var i={};return t.isTaskExists(e)&&ze(t,t.getTask(e),i),t.eachTask(function(n){ze(t,n,i)},e),i},getSubtreeTasks:function(t,e){var i={};return t.eachTask(function(n){i[n.id]=n},e),i}};class yn{constructor(e,i){this.$gantt=e,this.$dp=i,this._dataProcessorHandlers=[]}attach(){const e=this.$dp,i=this.$gantt,n={},a=o=>this.clientSideDelete(o,e,i);this._dataProcessorHandlers.push(i.attachEvent("onAfterTaskAdd",function(o,l){i.isTaskExists(o)&&(e.setGanttMode("tasks"),e.setUpdated(o,!0,"inserted"))})),this._dataProcessorHandlers.push(i.attachEvent("onAfterTaskUpdate",function(o,l){i.isTaskExists(o)&&(e.setGanttMode("tasks"),e.setUpdated(o,!0),i._sendTaskOrder&&i._sendTaskOrder(o,l))})),this._dataProcessorHandlers.push(i.attachEvent("onBeforeTaskDelete",function(o,l){return i.config.cascade_delete&&(n[o]={tasks:_e.getSubtreeTasks(i,o),links:_e.getSubtreeLinks(i,o)}),!e.deleteAfterConfirmation||(e.setGanttMode("tasks"),e.setUpdated(o,!0,"deleted"),!1)})),this._dataProcessorHandlers.push(i.attachEvent("onAfterTaskDelete",function(o,l){e.setGanttMode("tasks");const d=!a(o),c=i.config.cascade_delete&&n[o];if(d||c){if(c){const u=e.updateMode;e.setUpdateMode("off");const h=n[o];for(const f in h.tasks)a(f)||(e.storeItem(h.tasks[f]),e.setUpdated(f,!0,"deleted"));e.setGanttMode("links");for(const f in h.links)a(f)||(e.storeItem(h.links[f]),e.setUpdated(f,!0,"deleted"));n[o]=null,u!=="off"&&e.sendAllData(),e.setGanttMode("tasks"),e.setUpdateMode(u)}d&&(e.storeItem(l),e.deleteAfterConfirmation||e.setUpdated(o,!0,"deleted")),e.updateMode==="off"||e._tSend||e.sendAllData()}})),this._dataProcessorHandlers.push(i.attachEvent("onAfterLinkUpdate",function(o,l){i.isLinkExists(o)&&(e.setGanttMode("links"),e.setUpdated(o,!0))})),this._dataProcessorHandlers.push(i.attachEvent("onAfterLinkAdd",function(o,l){i.isLinkExists(o)&&(e.setGanttMode("links"),e.setUpdated(o,!0,"inserted"))})),this._dataProcessorHandlers.push(i.attachEvent("onAfterLinkDelete",function(o,l){e.setGanttMode("links"),!a(o)&&(e.storeItem(l),e.setUpdated(o,!0,"deleted"))})),this._dataProcessorHandlers.push(i.attachEvent("onRowDragEnd",function(o,l){i._sendTaskOrder(o,i.getTask(o))}));let r=null,s=null;this._dataProcessorHandlers.push(i.attachEvent("onTaskIdChange",function(o,l){if(!e._waitMode)return;const d=i.getChildren(l);if(d.length){r=r||{};for(let u=0;u<d.length;u++){const h=this.getTask(d[u]);r[h.id]=h}}const c=function(u){let h=[];return u.$source&&(h=h.concat(u.$source)),u.$target&&(h=h.concat(u.$target)),h}(this.getTask(l));if(c.length){s=s||{};for(let u=0;u<c.length;u++){const h=this.getLink(c[u]);s[h.id]=h}}})),e.attachEvent("onAfterUpdateFinish",function(){(r||s)&&(i.batchUpdate(function(){for(const o in r)i.updateTask(r[o].id);for(const o in s)i.updateLink(s[o].id);r=null,s=null}),r?i._dp.setGanttMode("tasks"):i._dp.setGanttMode("links"))}),e.attachEvent("onBeforeDataSending",function(){if(this._tMode==="CUSTOM")return!0;let o=this._serverProcessor;if(this._tMode==="REST-JSON"||this._tMode==="REST"){const l=this._ganttMode;o=o.substring(0,o.indexOf("?")>-1?o.indexOf("?"):o.length),this.serverProcessor=o+(o.slice(-1)==="/"?"":"/")+l}else{const l=this._ganttMode+"s";this.serverProcessor=o+i.ajax.urlSeparator(o)+"gantt_mode="+l}return!0}),e.attachEvent("insertCallback",function(o,l,d,c){const u=o.data||i.xml._xmlNodeToJSON(o.firstChild),h={add:i.addTask,isExist:i.isTaskExists};c==="links"&&(h.add=i.addLink,h.isExist=i.isLinkExists),h.isExist.call(i,l)||(u.id=l,h.add.call(i,u))}),e.attachEvent("updateCallback",function(o,l){const d=o.data||i.xml._xmlNodeToJSON(o.firstChild);if(!i.isTaskExists(l))return;const c=i.getTask(l);for(const u in d){let h=d[u];switch(u){case"id":continue;case"start_date":case"end_date":h=i.defined(i.templates.xml_date)?i.templates.xml_date(h):i.templates.parse_date(h);break;case"duration":c.end_date=i.calculateEndDate({start_date:c.start_date,duration:h,task:c})}c[u]=h}i.updateTask(l),i.refreshData()}),e.attachEvent("deleteCallback",function(o,l,d,c){const u={delete:i.deleteTask,isExist:i.isTaskExists};c==="links"?(u.delete=i.deleteLink,u.isExist=i.isLinkExists):c==="assignment"&&(u.delete=function(h){i.$data.assignmentsStore.remove(h)},u.isExist=function(h){return i.$data.assignmentsStore.exists(h)}),u.isExist.call(i,l)&&u.delete.call(i,l)}),this.handleResourceCRUD(e,i),this.handleResourceAssignmentCRUD(e,i),this.handleBaselineCRUD(e,i)}clientSideDelete(e,i,n){const a=i.updatedRows.slice();let r=!1;n.getUserData(e,"!nativeeditor_status",i._ganttMode)==="true_deleted"&&(r=!0,i.setUpdated(e,!1));for(let s=0;s<a.length&&!i._in_progress[e];s++)a[s]===e&&(n.getUserData(e,"!nativeeditor_status",i._ganttMode)==="inserted"&&(r=!0),i.setUpdated(e,!1));return r}handleResourceAssignmentCRUD(e,i){if(!i.config.resources||i.config.resources.dataprocessor_assignments!==!0)return;const n=i.getDatastore(i.config.resource_assignment_store),a={},r={};function s(o){const l=o.id;n.exists(l)&&(e.setGanttMode("assignment"),e.setUpdated(l,!0,"inserted")),delete r[l]}i.attachEvent("onBeforeTaskAdd",function(o,l){return a[o]=!0,!0}),i.attachEvent("onTaskIdChange",function(o,l){delete a[o]}),n.attachEvent("onAfterAdd",(o,l)=>{a[l.task_id]?function(d){r[d.id]=d,a[d.task_id]=!0}(l):s(l)}),n.attachEvent("onAfterUpdate",(o,l)=>{n.exists(o)&&(r[o]?s(l):(e.setGanttMode("assignment"),e.setUpdated(o,!0)))}),n.attachEvent("onAfterDelete",(o,l)=>{e.setGanttMode("assignment"),!this.clientSideDelete(o,e,i)&&(e.storeItem(l),e.setUpdated(o,!0,"deleted"))})}handleResourceCRUD(e,i){if(!i.config.resources||i.config.resources.dataprocessor_resources!==!0)return;const n=i.getDatastore(i.config.resource_store);n.attachEvent("onAfterAdd",(a,r)=>{(function(s){const o=s.id;n.exists(o)&&(e.setGanttMode("resource"),e.setUpdated(o,!0,"inserted"))})(r)}),n.attachEvent("onAfterUpdate",(a,r)=>{n.exists(a)&&(e.setGanttMode("resource"),e.setUpdated(a,!0))}),n.attachEvent("onAfterDelete",(a,r)=>{e.setGanttMode("resource"),!this.clientSideDelete(a,e,i)&&(e.storeItem(r),e.setUpdated(a,!0,"deleted"))})}handleBaselineCRUD(e,i){if(!i.config.baselines||i.config.baselines.dataprocessor_baselines!==!0)return;const n=i.getDatastore(i.config.baselines.datastore);n.attachEvent("onAfterAdd",(a,r)=>{(function(s){const o=s.id;n.exists(o)&&(e.setGanttMode("baseline"),e.setUpdated(o,!0,"inserted"))})(r)}),n.attachEvent("onAfterUpdate",(a,r)=>{n.exists(a)&&(e.setGanttMode("baseline"),e.setUpdated(a,!0))}),n.attachEvent("onAfterDelete",(a,r)=>{e.setGanttMode("baseline"),!this.clientSideDelete(a,e,i)&&(e.storeItem(r),e.setUpdated(a,!0,"deleted"))})}detach(){yt(this._dataProcessorHandlers,e=>{this.$gantt.detachEvent(e)}),this._dataProcessorHandlers=[]}}const fe=class{constructor(){this.clear=()=>{this._storage={}},this.storeItem=e=>{this._storage[e.id]=q(e)},this.getStoredItem=e=>this._storage[e]||null,this._storage={}}};fe.create=()=>new fe;let je=fe,We=class{constructor(t){this.serverProcessor=t,this.action_param="!nativeeditor_status",this.updatedRows=[],this.autoUpdate=!0,this.updateMode="cell",this._headers=null,this._payload=null,this._postDelim="_",this._routerParametersFormat="parameters",this._waitMode=0,this._in_progress={},this._storage=je.create(),this._invalid={},this.messages=[],this.styles={updated:"font-weight:bold;",inserted:"font-weight:bold;",deleted:"text-decoration : line-through;",invalid:"background-color:FFE0E0;",invalid_cell:"border-bottom:2px solid red;",error:"color:red;",clear:"font-weight:normal;text-decoration:none;"},this.enableUTFencoding(!0),ot(this)}setTransactionMode(t,e){typeof t=="object"?(this._tMode=t.mode||this._tMode,j(t.headers)&&(this._headers=t.headers),j(t.payload)&&(this._payload=t.payload),this._tSend=!!e):(this._tMode=t,this._tSend=e),this._tMode==="REST"&&(this._tSend=!1),this._tMode==="JSON"||this._tMode==="REST-JSON"?(this._tSend=!1,this._serializeAsJson=!0,this._headers=this._headers||{},this._headers["Content-Type"]="application/json"):this._headers&&!this._headers["Content-Type"]&&(this._headers["Content-Type"]="application/x-www-form-urlencoded"),this._tMode==="CUSTOM"&&(this._tSend=!1,this._router=t.router)}escape(t){return this._utf?encodeURIComponent(t):escape(t)}enableUTFencoding(t){this._utf=!!t}getSyncState(){return!this.updatedRows.length}setUpdateMode(t,e){this.autoUpdate=t==="cell",this.updateMode=t,this.dnd=e}ignore(t,e){this._silent_mode=!0,t.call(e||dt),this._silent_mode=!1}setUpdated(t,e,i){if(this._silent_mode)return;const n=this.findRow(t);i=i||"updated";const a=this.$gantt.getUserData(t,this.action_param,this._ganttMode);a&&i==="updated"&&(i=a),e?(this.set_invalid(t,!1),this.updatedRows[n]=t,this.$gantt.setUserData(t,this.action_param,i,this._ganttMode),this._in_progress[t]&&(this._in_progress[t]="wait")):this.is_invalid(t)||(this.updatedRows.splice(n,1),this.$gantt.setUserData(t,this.action_param,"",this._ganttMode)),this.markRow(t,e,i),e&&this.autoUpdate&&this.sendData(t)}markRow(t,e,i){let n="";const a=this.is_invalid(t);if(a&&(n=this.styles[a],e=!0),this.callEvent("onRowMark",[t,e,i,a])&&(n=this.styles[e?i:"clear"]+" "+n,this.$gantt[this._methods[0]](t,n),a&&a.details)){n+=this.styles[a+"_cell"];for(let r=0;r<a.details.length;r++)a.details[r]&&this.$gantt[this._methods[1]](t,r,n)}}getActionByState(t){return t==="inserted"?"create":t==="updated"?"update":t==="deleted"?"delete":"update"}getState(t){return this.$gantt.getUserData(t,this.action_param,this._ganttMode)}is_invalid(t){return this._invalid[t]}set_invalid(t,e,i){i&&(e={value:e,details:i,toString:function(){return this.value.toString()}}),this._invalid[t]=e}checkBeforeUpdate(t){return!0}sendData(t){if(this.$gantt.editStop&&this.$gantt.editStop(),t===void 0||this._tSend){const e=[];if(this.modes&&["task","link","assignment","baseline"].forEach(i=>{this.modes[i]&&this.modes[i].updatedRows.length&&e.push(i)}),e.length){for(let i=0;i<e.length;i++)this.setGanttMode(e[i]),this.sendAllData();return}return this.sendAllData()}return!this._in_progress[t]&&(this.messages=[],!(!this.checkBeforeUpdate(t)&&this.callEvent("onValidationError",[t,this.messages]))&&void this._beforeSendData(this._getRowData(t),t))}serialize(t,e){if(this._serializeAsJson)return this._serializeAsJSON(t);if(typeof t=="string")return t;if(e!==void 0)return this.serialize_one(t,"");{const i=[],n=[];for(const a in t)t.hasOwnProperty(a)&&(i.push(this.serialize_one(t[a],a+this._postDelim)),n.push(a));return i.push("ids="+this.escape(n.join(","))),this.$gantt.security_key&&i.push("dhx_security="+this.$gantt.security_key),i.join("&")}}serialize_one(t,e){if(typeof t=="string")return t;const i=[];let n="";for(const a in t)if(t.hasOwnProperty(a)){if((a==="id"||a==this.action_param)&&this._tMode==="REST")continue;n=typeof t[a]=="string"||typeof t[a]=="number"?String(t[a]):JSON.stringify(t[a]),i.push(this.escape((e||"")+a)+"="+this.escape(n))}return i.join("&")}sendAllData(){if(!this.updatedRows.length)return;this.messages=[];let t=!0;if(this._forEachUpdatedRow(function(e){t=t&&this.checkBeforeUpdate(e)}),!t&&!this.callEvent("onValidationError",["",this.messages]))return!1;this._tSend?this._sendData(this._getAllData()):this._forEachUpdatedRow(function(e){if(!this._in_progress[e]){if(this.is_invalid(e))return;this._beforeSendData(this._getRowData(e),e)}})}findRow(t){let e=0;for(e=0;e<this.updatedRows.length&&t!=this.updatedRows[e];e++);return e}defineAction(t,e){this._uActions||(this._uActions={}),this._uActions[t]=e}afterUpdateCallback(t,e,i,n,a){if(!this.$gantt)return;this.setGanttMode(a);const r=t,s=i!=="error"&&i!=="invalid";if(s||this.set_invalid(t,i),this._uActions&&this._uActions[i]&&!this._uActions[i](n))return delete this._in_progress[r];this._in_progress[r]!=="wait"&&this.setUpdated(t,!1);const o=t;switch(i){case"inserted":case"insert":e!=t&&(this.setUpdated(t,!1),this.$gantt[this._methods[2]](t,e),t=e);break;case"delete":case"deleted":if(this.deleteAfterConfirmation&&this._ganttMode==="task"){if(this._ganttMode==="task"&&this.$gantt.isTaskExists(t)){this.$gantt.setUserData(t,this.action_param,"true_deleted",this._ganttMode);const l=this.$gantt.getTask(t);this.$gantt.silent(()=>{this.$gantt.deleteTask(t)}),this.$gantt.callEvent("onAfterTaskDelete",[t,l]),this.$gantt.render(),delete this._in_progress[r]}return this.callEvent("onAfterUpdate",[t,i,e,n])}return this.$gantt.setUserData(t,this.action_param,"true_deleted",this._ganttMode),this.$gantt[this._methods[3]](t),delete this._in_progress[r],this.callEvent("onAfterUpdate",[t,i,e,n])}this._in_progress[r]!=="wait"?(s&&this.$gantt.setUserData(t,this.action_param,"",this._ganttMode),delete this._in_progress[r]):(delete this._in_progress[r],this.setUpdated(e,!0,this.$gantt.getUserData(t,this.action_param,this._ganttMode))),this.callEvent("onAfterUpdate",[o,i,e,n])}afterUpdate(t,e,i){let n;n=arguments.length===3?arguments[1]:arguments[4];let a=this.getGanttMode();const r=n.filePath||n.url;a=this._tMode!=="REST"&&this._tMode!=="REST-JSON"?r.indexOf("gantt_mode=links")!==-1?"link":r.indexOf("gantt_mode=assignments")!==-1?"assignment":r.indexOf("gantt_mode=baselines")!==-1?"baseline":"task":r.indexOf("/link")>=0?"link":r.indexOf("/assignment")>=0?"assignment":r.indexOf("/baseline")>=0?"baseline":"task",this.setGanttMode(a);const s=this.$gantt.ajax;let o;try{o=JSON.parse(e.xmlDoc.responseText)}catch{e.xmlDoc.responseText.length||(o={})}const l=u=>{const h=o.action||this.getState(u)||"updated",f=o.sid||u[0],g=o.tid||u[0];t.afterUpdateCallback(f,g,h,o,a)};if(o)return Array.isArray(i)&&i.length>1?i.forEach(u=>l(u)):l(i),t.finalizeUpdate(),void this.setGanttMode(a);const d=s.xmltop("data",e.xmlDoc);if(!d)return this.cleanUpdate(i);const c=s.xpath("//data/action",d);if(!c.length)return this.cleanUpdate(i);for(let u=0;u<c.length;u++){const h=c[u],f=h.getAttribute("type"),g=h.getAttribute("sid"),y=h.getAttribute("tid");t.afterUpdateCallback(g,y,f,h,a)}t.finalizeUpdate()}cleanUpdate(t){if(t)for(let e=0;e<t.length;e++)delete this._in_progress[t[e]]}finalizeUpdate(){this._waitMode&&this._waitMode--,this.callEvent("onAfterUpdateFinish",[]),this.updatedRows.length||this.callEvent("onFullSync",[])}init(t){if(this._initialized)return;this.$gantt=t,this.$gantt._dp_init&&this.$gantt._dp_init(this),this._setDefaultTransactionMode(),this.styles={updated:"gantt_updated",order:"gantt_updated",inserted:"gantt_inserted",deleted:"gantt_deleted",delete_confirmation:"gantt_deleted",invalid:"gantt_invalid",error:"gantt_error",clear:""},this._methods=["_row_style","setCellTextStyle","_change_id","_delete_task"],function(i,n){i.getUserData=function(a,r,s){return this.userdata||(this.userdata={}),this.userdata[s]=this.userdata[s]||{},this.userdata[s][a]&&this.userdata[s][a][r]?this.userdata[s][a][r]:""},i.setUserData=function(a,r,s,o){this.userdata||(this.userdata={}),this.userdata[o]=this.userdata[o]||{},this.userdata[o][a]=this.userdata[o][a]||{},this.userdata[o][a][r]=s},i._change_id=function(a,r){switch(this._dp._ganttMode){case"task":this.changeTaskId(a,r);break;case"link":this.changeLinkId(a,r);break;case"assignment":this.$data.assignmentsStore.changeId(a,r);break;case"resource":this.$data.resourcesStore.changeId(a,r);break;case"baseline":this.$data.baselineStore.changeId(a,r);break;default:throw new Error(`Invalid mode of the dataProcessor after database id is received: ${this._dp._ganttMode}, new id: ${r}`)}},i._row_style=function(a,r){this._dp._ganttMode==="task"&&i.isTaskExists(a)&&(i.getTask(a).$dataprocessor_class=r,i.refreshTask(a))},i._delete_task=function(a,r){},i._sendTaskOrder=function(a,r){r.$drop_target&&(this._dp.setGanttMode("task"),this.getTask(a).target=r.$drop_target,this._dp.setUpdated(a,!0,"order"),delete this.getTask(a).$drop_target)},i.setDp=function(){this._dp=n},i.setDp()}(this.$gantt,this);const e=new yn(this.$gantt,this);e.attach(),this.attachEvent("onDestroy",function(){delete this.setGanttMode,delete this._getRowData,delete this.$gantt._dp,delete this.$gantt._change_id,delete this.$gantt._row_style,delete this.$gantt._delete_task,delete this.$gantt._sendTaskOrder,delete this.$gantt,e.detach()}),this.$gantt.callEvent("onDataProcessorReady",[this]),this._initialized=!0}setOnAfterUpdate(t){this.attachEvent("onAfterUpdate",t)}setOnBeforeUpdateHandler(t){this.attachEvent("onBeforeDataSending",t)}setAutoUpdate(t,e){t=t||2e3,this._user=e||new Date().valueOf(),this._needUpdate=!1,this._updateBusy=!1,this.attachEvent("onAfterUpdate",this.afterAutoUpdate),this.attachEvent("onFullSync",this.fullSync),setInterval(()=>{this.loadUpdate()},t)}afterAutoUpdate(t,e,i,n){return e!=="collision"||(this._needUpdate=!0,!1)}fullSync(){return this._needUpdate&&(this._needUpdate=!1,this.loadUpdate()),!0}getUpdates(t,e){const i=this.$gantt.ajax;if(this._updateBusy)return!1;this._updateBusy=!0,i.get(t,e)}loadUpdate(){const t=this.$gantt.ajax,e=this.$gantt.getUserData(0,"version",this._ganttMode);let i=this.serverProcessor+t.urlSeparator(this.serverProcessor)+["dhx_user="+this._user,"dhx_version="+e].join("&");i=i.replace("editing=true&",""),this.getUpdates(i,n=>{const a=t.xpath("//userdata",n);this.$gantt.setUserData(0,"version",this._getXmlNodeValue(a[0]),this._ganttMode);const r=t.xpath("//update",n);if(r.length){this._silent_mode=!0;for(let s=0;s<r.length;s++){const o=r[s].getAttribute("status"),l=r[s].getAttribute("id"),d=r[s].getAttribute("parent");switch(o){case"inserted":this.callEvent("insertCallback",[r[s],l,d]);break;case"updated":this.callEvent("updateCallback",[r[s],l,d]);break;case"deleted":this.callEvent("deleteCallback",[r[s],l,d])}}this._silent_mode=!1}this._updateBusy=!1})}destructor(){this.callEvent("onDestroy",[]),this.detachAllEvents(),this.updatedRows=[],this._in_progress={},this._invalid={},this._storage.clear(),this._storage=null,this._headers=null,this._payload=null,delete this._initialized}setGanttMode(t){t==="tasks"?t="task":t==="links"&&(t="link");const e=this.modes||{},i=this.getGanttMode();i&&(e[i]={_in_progress:this._in_progress,_invalid:this._invalid,_storage:this._storage,updatedRows:this.updatedRows});let n=e[t];n||(n=e[t]={_in_progress:{},_invalid:{},_storage:je.create(),updatedRows:[]}),this._in_progress=n._in_progress,this._invalid=n._invalid,this._storage=n._storage,this.updatedRows=n.updatedRows,this.modes=e,this._ganttMode=t}getGanttMode(){return this._ganttMode}storeItem(t){this._storage.storeItem(t)}url(t){this.serverProcessor=this._serverProcessor=t}_beforeSendData(t,e){if(!this.callEvent("onBeforeUpdate",[e,this.getState(e),t]))return!1;this._sendData(t,e)}_serializeAsJSON(t){if(typeof t=="string")return t;const e=q(t);return this._tMode==="REST-JSON"&&(delete e.id,delete e[this.action_param]),JSON.stringify(e)}_applyPayload(t){const e=this.$gantt.ajax;if(this._payload)for(const i in this._payload)t=t+e.urlSeparator(t)+this.escape(i)+"="+this.escape(this._payload[i]);return t}_cleanupArgumentsBeforeSend(t){let e;if(t[this.action_param]===void 0){e={};for(const i in t)e[i]=this._cleanupArgumentsBeforeSend(t[i])}else e=this._cleanupItemBeforeSend(t);return e}_cleanupItemBeforeSend(t){let e=null;return t&&(t[this.action_param]==="deleted"?(e={},e.id=t.id,e[this.action_param]=t[this.action_param]):e=t),e}_sendData(t,e){if(!t)return;if(!this.callEvent("onBeforeDataSending",e?[e,this.getState(e),t]:[null,null,t]))return!1;e&&(this._in_progress[e]=new Date().valueOf());const i=this.$gantt.ajax;if(this._tMode==="CUSTOM"){const l=this.getState(e),d=this.getActionByState(l),c=this.getGanttMode(),u=f=>{let g=l||"updated",y=e,v=e;f&&(g=f.action||l,y=f.sid||y,v=f.id||f.tid||v),this.afterUpdateCallback(y,v,g,f,c)};let h;if(this._router instanceof Function)if(this._routerParametersFormat==="object"){const f={entity:c,action:d,data:t,id:e};h=this._router(f)}else h=this._router(c,d,t,e);else if(this._router[c]instanceof Function)h=this._router[c](d,t,e);else{const f="Incorrect configuration of gantt.createDataProcessor",g=`
You need to either add missing properties to the dataProcessor router object or to use a router function.
See https://docs.dhtmlx.com/gantt/desktop__server_side.html#customrouting and https://docs.dhtmlx.com/gantt/api__gantt_createdataprocessor.html for details.`;if(!this._router[c])throw new Error(`${f}: router for the **${c}** entity is not defined. ${g}`);switch(l){case"inserted":if(!this._router[c].create)throw new Error(`${f}: **create** action for the **${c}** entity is not defined. ${g}`);h=this._router[c].create(t);break;case"deleted":if(!this._router[c].delete)throw new Error(`${f}: **delete** action for the **${c}** entity is not defined. ${g}`);h=this._router[c].delete(e);break;default:if(!this._router[c].update)throw new Error(`${f}: **update**" action for the **${c}** entity is not defined. ${g}`);h=this._router[c].update(t,e)}}if(h){if(!h.then&&h.id===void 0&&h.tid===void 0&&h.action===void 0)throw new Error("Incorrect router return value. A Promise or a response object is expected");h.then?h.then(u).catch(f=>{f&&f.action?u(f):u({action:"error",value:f})}):u(h)}else u(null);return}let n;n={callback:l=>{const d=[];if(e)d.push(e);else if(t)for(const c in t)d.push(c);return this.afterUpdate(this,l,d)},headers:this._headers};const a="dhx_version="+this.$gantt.getUserData(0,"version",this._ganttMode),r=this.serverProcessor+(this._user?i.urlSeparator(this.serverProcessor)+["dhx_user="+this._user,a].join("&"):"");let s,o=this._applyPayload(r);switch(this._tMode){case"GET":s=this._cleanupArgumentsBeforeSend(t),n.url=o+i.urlSeparator(o)+this.serialize(s,e),n.method="GET";break;case"POST":s=this._cleanupArgumentsBeforeSend(t),n.url=o,n.method="POST",n.data=this.serialize(s,e);break;case"JSON":s={};const l=this._cleanupItemBeforeSend(t);for(const d in l)d!==this.action_param&&d!=="id"&&d!=="gr_id"&&(s[d]=l[d]);n.url=o,n.method="POST",n.data=JSON.stringify({id:e,action:t[this.action_param],data:s});break;case"REST":case"REST-JSON":switch(o=r.replace(/(&|\?)editing=true/,""),s="",this.getState(e)){case"inserted":n.method="POST",n.data=this.serialize(t,e);break;case"deleted":n.method="DELETE",o=o+(o.slice(-1)==="/"?"":"/")+e;break;default:n.method="PUT",n.data=this.serialize(t,e),o=o+(o.slice(-1)==="/"?"":"/")+e}n.url=this._applyPayload(o)}return this._waitMode++,i.query(n)}_forEachUpdatedRow(t){const e=this.updatedRows.slice();for(let i=0;i<e.length;i++){const n=e[i];this.$gantt.getUserData(n,this.action_param,this._ganttMode)&&t.call(this,n)}}_setDefaultTransactionMode(){this.serverProcessor&&(this.setTransactionMode("POST",!0),this.serverProcessor+=(this.serverProcessor.indexOf("?")!==-1?"&":"?")+"editing=true",this._serverProcessor=this.serverProcessor)}_getXmlNodeValue(t){return t.firstChild?t.firstChild.nodeValue:""}_getAllData(){const t={};let e=!1;return this._forEachUpdatedRow(function(i){if(this._in_progress[i]||this.is_invalid(i))return;const n=this._getRowData(i);this.callEvent("onBeforeUpdate",[i,this.getState(i),n])&&(t[i]=n,e=!0,this._in_progress[i]=new Date().valueOf())}),e?t:null}_prepareDate(t){return this.$gantt.defined(this.$gantt.templates.xml_format)?this.$gantt.templates.xml_format(t):this.$gantt.templates.format_date(t)}_prepareArray(t,e){return e.push(t),t.map(i=>Z(i)?this._prepareDate(i):Array.isArray(i)&&!zt(e,i)?this._prepareArray(i,e):i&&typeof i=="object"&&!zt(e,i)?this._prepareObject(i,e):i)}_prepareObject(t,e){const i={};e.push(t);for(const n in t){if(n.substr(0,1)==="$")continue;const a=t[n];Z(a)?i[n]=this._prepareDate(a):a===null?i[n]="":Array.isArray(a)&&!zt(e,a)?i[n]=this._prepareArray(a,e):a&&typeof a=="object"&&!zt(e,a)?i[n]=this._prepareObject(a,e):i[n]=a}return i}_prepareDataItem(t){const e=this._prepareObject(t,[]);return e[this.action_param]=this.$gantt.getUserData(t.id,this.action_param,this._ganttMode),e}getStoredItem(t){return this._storage.getStoredItem(t)}_getRowData(t){let e;const i=this.$gantt;return this.getGanttMode()==="task"?i.isTaskExists(t)&&(e=this.$gantt.getTask(t)):this.getGanttMode()==="assignment"?this.$gantt.$data.assignmentsStore.exists(t)&&(e=this.$gantt.$data.assignmentsStore.getItem(t)):this.getGanttMode()==="baseline"?this.$gantt.$data.baselineStore.exists(t)&&(e=this.$gantt.$data.baselineStore.getItem(t)):i.isLinkExists(t)&&(e=this.$gantt.getLink(t)),e||(e=this.getStoredItem(t)),e||(e={id:t}),this._prepareDataItem(e)}};const Fe={DEPRECATED_api:function(t){return new We(t)},createDataProcessor:function(t){let e,i,n;t instanceof Function?e=t:t.hasOwnProperty("router")?e=t.router:t.hasOwnProperty("assignment")||t.hasOwnProperty("baseline")||t.hasOwnProperty("link")||t.hasOwnProperty("task")?e=t:t.hasOwnProperty("headers")&&(n=t.headers),i=e?"CUSTOM":t.mode||"REST-JSON";const a=new We(t.url);return a.init(this),a.setTransactionMode({mode:i,router:e,headers:n},t.batchUpdate),t.deleteAfterConfirmation&&(a.deleteAfterConfirmation=t.deleteAfterConfirmation),a}};function bn(t){var e={},i=!1;function n(l,d){d=typeof d=="function"?d:function(){},e[l]||(e[l]=this[l],this[l]=d)}function a(l){e[l]&&(this[l]=e[l],e[l]=null)}function r(l){for(var d in l)n.call(this,d,l[d])}function s(){for(var l in e)a.call(this,l)}function o(l){try{l()}catch(d){dt.console.error(d)}}return t.$services.getService("state").registerProvider("batchUpdate",function(){return{batch_update:i}},!1),function(l,d){if(i)o(l);else{var c,u=this._dp&&this._dp.updateMode!="off";u&&(c=this._dp.updateMode,this._dp.setUpdateMode("off"));var h={},f={render:!0,refreshData:!0,refreshTask:!0,refreshLink:!0,resetProjectDates:function(y){h[y.id]=y}};for(var g in r.call(this,f),i=!0,this.callEvent("onBeforeBatchUpdate",[]),o(l),this.callEvent("onAfterBatchUpdate",[]),s.call(this),h)this.resetProjectDates(h[g]);i=!1,d||this.render(),u&&(this._dp.setUpdateMode(c),this._dp.setGanttMode("task"),this._dp.sendData(),this._dp.setGanttMode("link"),this._dp.sendData())}}}function xn(t){t.batchUpdate=bn(t)}var $n=function(t){return{_needRecalc:!0,reset:function(){this._needRecalc=!0},_isRecalcNeeded:function(){return!this._isGroupSort()&&this._needRecalc},_isGroupSort:function(){return!!t.getState().group_mode},_getWBSCode:function(e){return e?(this._isRecalcNeeded()&&this._calcWBS(),e.$virtual?"":this._isGroupSort()?e.$wbs||"":(e.$wbs||(this.reset(),this._calcWBS()),e.$wbs)):""},_setWBSCode:function(e,i){e.$wbs=i},getWBSCode:function(e){return this._getWBSCode(e)},getByWBSCode:function(e){for(var i=e.split("."),n=t.config.root_id,a=0;a<i.length;a++){var r=t.getChildren(n),s=1*i[a]-1;if(!t.isTaskExists(r[s]))return null;n=r[s]}return t.isTaskExists(n)?t.getTask(n):null},_calcWBS:function(){if(this._isRecalcNeeded()){var e=!0;t.eachTask(function(i){if(e)return e=!1,void this._setWBSCode(i,"1");var n=t.getPrevSibling(i.id);if(n!==null){var a=t.getTask(n).$wbs;a&&((a=a.split("."))[a.length-1]++,this._setWBSCode(i,a.join(".")))}else{var r=t.getParent(i.id);this._setWBSCode(i,t.getTask(r).$wbs+".1")}},t.config.root_id,this),this._needRecalc=!1}}}};function wn(t){var e=$n(t);function i(){return e.reset(),!0}t.getWBSCode=function(n){return e.getWBSCode(n)},t.getTaskByWBSCode=function(n){return e.getByWBSCode(n)},t.attachEvent("onAfterTaskMove",i),t.attachEvent("onBeforeParse",i),t.attachEvent("onAfterTaskDelete",i),t.attachEvent("onAfterTaskAdd",i),t.attachEvent("onAfterSort",i)}function Sn(t){var e={},i=!1;t.$data.tasksStore.attachEvent("onStoreUpdated",function(){e={},i=!1}),t.attachEvent("onBeforeGanttRender",function(){e={}});var n=String(Math.random());function a(l){return l===null?n+String(l):String(l)}function r(l,d,c){return Array.isArray(l)?l.map(function(u){return a(u)}).join("_")+`_${d}_${c}`:a(l)+`_${d}_${c}`}function s(l,d,c){var u,h=r(d,l,JSON.stringify(c)),f={};return yt(d,function(g){f[a(g)]=!0}),e[h]?u=e[h]:(u=e[h]=[],t.eachTask(function(g){if(c){if(!c[t.getTaskType(g)])return}else if(g.type==t.config.types.project)return;l in g&&yt(ce(g[l])?g[l]:[g[l]],function(y){var v=y&&y.resource_id?y.resource_id:y;if(f[a(v)])u.push(g);else if(!i){var b=r(y,l);e[b]||(e[b]=[]),e[b].push(g)}})}),i=!0),u}function o(l,d,c){var u=t.config.resource_property,h=[];if(t.getDatastore("task").exists(d)){var f=t.getTask(d);h=f[u]||[]}Array.isArray(h)||(h=[h]);for(var g=0;g<h.length;g++)h[g].resource_id==l&&c.push({task_id:f.id,resource_id:h[g].resource_id,value:h[g].value})}return{getTaskBy:function(l,d,c){return typeof l=="function"?(u=l,h=[],t.eachTask(function(f){u(f)&&h.push(f)}),h):ce(d)?s(l,d,c):s(l,[d],c);var u,h},getResourceAssignments:function(l,d){var c=[],u=t.config.resource_property;return d!==void 0?o(l,d,c):t.getTaskBy(u,l).forEach(function(h){o(l,h.id,c)}),c}}}function Tn(t){var e=Sn(t);t.ext.resources=function(a){const r={renderEditableLabel:function(s,o,l,d,c){const u=a.config.readonly?"":"contenteditable";if(s<l.end_date&&o>l.start_date){for(let h=0;h<c.length;h++){const f=c[h];return"<div "+u+" data-assignment-cell data-assignment-id='"+f.id+"' data-row-id='"+l.id+"' data-task='"+l.$task_id+"' data-start-date='"+a.templates.format_date(s)+"' data-end-date='"+a.templates.format_date(o)+"'>"+f.value+"</div>"}return"<div "+u+" data-assignment-cell data-empty  data-row-id='"+l.id+"' data-resource-id='"+l.$resource_id+"' data-task='"+l.$task_id+"' data-start-date='"+a.templates.format_date(s)+"''  data-end-date='"+a.templates.format_date(o)+"'>-</div>"}return""},renderSummaryLabel:function(s,o,l,d,c){let u=c.reduce(function(h,f){return h+Number(f.value)},0);return u%1&&(u=Math.round(10*u)/10),u?"<div>"+u+"</div>":""},editableResourceCellTemplate:function(s,o,l,d,c){return l.$role==="task"?r.renderEditableLabel(s,o,l,d,c):r.renderSummaryLabel(s,o,l,d,c)},editableResourceCellClass:function(s,o,l,d,c){const u=[];u.push("resource_marker"),l.$role==="task"?u.push("task_cell"):u.push("resource_cell");const h=c.reduce(function(g,y){return g+Number(y.value)},0);let f=Number(l.capacity);return isNaN(f)&&(f=8),h<=f?u.push("workday_ok"):u.push("workday_over"),u.join(" ")},getSummaryResourceAssignments:function(s){let o;const l=a.getDatastore(a.config.resource_store),d=l.getItem(s);return d.$role==="task"?o=a.getResourceAssignments(d.$resource_id,d.$task_id):(o=a.getResourceAssignments(s),l.eachItem&&l.eachItem(function(c){c.$role!=="task"&&(o=o.concat(a.getResourceAssignments(c.id)))},s)),o},initEditableDiagram:function(){a.config.resource_render_empty_cells=!0,function(){let s=null;function o(){return s&&cancelAnimationFrame(s),s=requestAnimationFrame(function(){a.$container&&Array.prototype.slice.call(a.$container.querySelectorAll(".resourceTimeline_cell [data-assignment-cell]")).forEach(function(l){l.contentEditable=!0})}),!0}a.attachEvent("onGanttReady",function(){a.getDatastore(a.config.resource_assignment_store).attachEvent("onStoreUpdated",o),a.getDatastore(a.config.resource_store).attachEvent("onStoreUpdated",o)},{once:!0}),a.attachEvent("onGanttLayoutReady",function(){a.$layout.getCellsByType("viewCell").forEach(function(l){l.$config&&l.$config.view==="resourceTimeline"&&l.$content&&l.$content.attachEvent("onScroll",o)})})}(),a.attachEvent("onGanttReady",function(){let s=!1;a.event(a.$container,"keypress",function(o){var l=o.target.closest(".resourceTimeline_cell [data-assignment-cell]");l&&(o.keyCode!==13&&o.keyCode!==27||l.blur())}),a.event(a.$container,"focusout",function(o){if(!s){s=!0,setTimeout(function(){s=!1},300);var l=o.target.closest(".resourceTimeline_cell [data-assignment-cell]");if(l){var d=(l.innerText||"").trim();d=="-"&&(d="0");var c=Number(d),u=l.getAttribute("data-row-id"),h=l.getAttribute("data-assignment-id"),f=l.getAttribute("data-task"),g=l.getAttribute("data-resource-id"),y=a.templates.parse_date(l.getAttribute("data-start-date")),v=a.templates.parse_date(l.getAttribute("data-end-date")),b=a.getDatastore(a.config.resource_assignment_store);if(isNaN(c))a.getDatastore(a.config.resource_store).refresh(u);else{var _=a.getTask(f);if(a.plugins().undo&&a.ext.undo.saveState(f,"task"),h){if(c===(p=b.getItem(h)).value)return;if(p.start_date.valueOf()===y.valueOf()&&p.end_date.valueOf()===v.valueOf())p.value=c,c?b.updateItem(p.id):b.removeItem(p.id);else{if(p.end_date.valueOf()>v.valueOf()){var m=a.copy(p);m.id=a.uid(),m.start_date=v,m.duration=a.calculateDuration({start_date:m.start_date,end_date:m.end_date,task:_}),m.delay=a.calculateDuration({start_date:_.start_date,end_date:m.start_date,task:_}),m.mode=p.mode||"default",m.duration!==0&&b.addItem(m)}p.start_date.valueOf()<y.valueOf()?(p.end_date=y,p.duration=a.calculateDuration({start_date:p.start_date,end_date:p.end_date,task:_}),p.mode="fixedDuration",p.duration===0?b.removeItem(p.id):b.updateItem(p.id)):b.removeItem(p.id),c&&b.addItem({task_id:p.task_id,resource_id:p.resource_id,value:c,start_date:y,end_date:v,duration:a.calculateDuration({start_date:y,end_date:v,task:_}),delay:a.calculateDuration({start_date:_.start_date,end_date:y,task:_}),mode:"fixedDuration"})}a.updateTaskAssignments(_.id),a.updateTask(_.id)}else if(c){var p={task_id:f,resource_id:g,value:c,start_date:y,end_date:v,duration:a.calculateDuration({start_date:y,end_date:v,task:_}),delay:a.calculateDuration({start_date:_.start_date,end_date:y,task:_}),mode:"fixedDuration"};b.addItem(p),a.updateTaskAssignments(_.id),a.updateTask(_.id)}}}}})},{once:!0})}};return r}(t),t.config.resources={dataprocessor_assignments:!1,dataprocessor_resources:!1,editable_resource_diagram:!1,resource_store:{type:"treeDataStore",fetchTasks:!1,initItem:function(a){return a.parent=a.parent||t.config.root_id,a[t.config.resource_property]=a.parent,a.open=!0,a}},lightbox_resources:function(a){const r=[],s=t.getDatastore(t.config.resource_store);return a.forEach(function(o){if(!s.hasChild(o.id)){const l=t.copy(o);l.key=o.id,l.label=o.text,r.push(l)}}),r}},t.attachEvent("onBeforeGanttReady",function(){if(t.getDatastore(t.config.resource_store))return;const a=t.config.resources?t.config.resources.resource_store:void 0;let r=a?a.fetchTasks:void 0;t.config.resources&&t.config.resources.editable_resource_diagram&&(r=!0);let s=function(l){return l.parent=l.parent||t.config.root_id,l[t.config.resource_property]=l.parent,l.open=!0,l};a&&a.initItem&&(s=a.initItem);const o=a&&a.type?a.type:"treeDatastore";t.$resourcesStore=t.createDatastore({name:t.config.resource_store,type:o,fetchTasks:r!==void 0&&r,initItem:s}),t.$data.resourcesStore=t.$resourcesStore,t.$resourcesStore.attachEvent("onParse",function(){let l,d=function(c){const u=[];return c.forEach(function(h){const f=t.copy(h);f.key=h.id,f.label=h.text,u.push(f)}),u};t.config.resources&&t.config.resources.lightbox_resources&&(d=t.config.resources.lightbox_resources),t.config.resources&&t.config.resources.editable_resource_diagram?l=d(t.$resourcesStore.getItems().filter(c=>{let u=t.getResourceAssignments(c.id);if(!t.$resourcesStore.hasChild(c.id)||u&&u.length)return!c.$resource_id||!c.$task_id})):l=d(t.$resourcesStore.getItems()),t.updateCollection("resourceOptions",l)})}),t.getTaskBy=e.getTaskBy,t.getResourceAssignments=e.getResourceAssignments,t.config.resource_property="owner_id",t.config.resource_store="resource",t.config.resource_render_empty_cells=!1,t.templates.histogram_cell_class=function(a,r,s,o,l){},t.templates.histogram_cell_label=function(a,r,s,o,l){return o.length+"/3"},t.templates.histogram_cell_allocated=function(a,r,s,o,l){return o.length/3},t.templates.histogram_cell_capacity=function(a,r,s,o,l){return 0};const i=function(a,r,s,o,l){return o.length<=1?"gantt_resource_marker_ok":"gantt_resource_marker_overtime"},n=function(a,r,s,o,l){return 8*o.length};t.templates.resource_cell_value=n,t.templates.resource_cell_class=i,t.attachEvent("onBeforeGanttReady",function(){t.config.resources&&t.config.resources.editable_resource_diagram&&(t.config.resource_render_empty_cells=!0,t.templates.resource_cell_value===n&&(t.templates.resource_cell_value=t.ext.resources.editableResourceCellTemplate),t.templates.resource_cell_class===i&&(t.templates.resource_cell_class=t.ext.resources.editableResourceCellClass),t.ext.resources.initEditableDiagram(t))})}function En(t){var e="$resourceAssignments";t.config.resource_assignment_store="resourceAssignments",t.config.process_resource_assignments=!0;var i={auto:"auto",singleValue:"singleValue",valueArray:"valueArray",resourceValueArray:"resourceValueArray",assignmentsArray:"assignmentsArray"},n=i.auto,a={fixedDates:"fixedDates",fixedDuration:"fixedDuration",default:"default"};function r(g,y){g.start_date?g.start_date=t.date.parseDate(g.start_date,"parse_date"):g.start_date=null,g.end_date?g.end_date=t.date.parseDate(g.end_date,"parse_date"):g.end_date=null;var v=Number(g.delay),b=!1;if(isNaN(v)?(g.delay=0,b=!0):g.delay=v,t.defined(g.value)||(g.value=null),!g.task_id||!g.resource_id)return!1;if(g.mode=g.mode||a.default,g.mode===a.fixedDuration&&(isNaN(Number(g.duration))&&(y=y||t.getTask(g.task_id),g.duration=t.calculateDuration({start_date:g.start_date,end_date:g.end_date,id:y})),b&&(y=y||t.getTask(g.task_id),g.delay=t.calculateDuration({start_date:y.start_date,end_date:g.start_date,id:y}))),g.mode!==a.fixedDates&&(y||t.isTaskExists(g.task_id))){var _=o(g,y=y||t.getTask(g.task_id));g.start_date=_.start_date,g.end_date=_.end_date,g.duration=_.duration}}var s=t.createDatastore({name:t.config.resource_assignment_store,initItem:function(g){return g.id||(g.id=t.uid()),r(g),g}});function o(g,y){if(g.mode===a.fixedDates)return{start_date:g.start_date,end_date:g.end_date,duration:g.duration};var v,b,_=g.delay?t.calculateEndDate({start_date:y.start_date,duration:g.delay,task:y}):new Date(y.start_date);return g.mode===a.fixedDuration?(v=t.calculateEndDate({start_date:_,duration:g.duration,task:y}),b=g.duration):(v=new Date(y.end_date),b=y.duration-g.delay),{start_date:_,end_date:v,duration:b}}function l(g){const y=t.config.resource_property;let v=g[y];const b=[];let _=n===i.auto;if(t.defined(v)&&v){Array.isArray(v)||(v=[v],_&&(n=i.singleValue,_=!1));const m={};v.forEach(function(p){p.resource_id||(p={resource_id:p},_&&(n=i.valueArray,_=!1)),_&&(p.id&&p.resource_id?(n=i.assignmentsArray,_=!1):(n=i.resourceValueArray,_=!1));let k,$=a.default;p.mode||(p.start_date&&p.end_date||p.start_date&&p.duration)&&($=a.fixedDuration),k=p.id||!p.$id||m[p.$id]?p.id&&!m[p.id]?p.id:t.uid():p.$id,m[k]=!0;const w={id:k,start_date:p.start_date,duration:p.duration,end_date:p.end_date,delay:p.delay,task_id:g.id,resource_id:p.resource_id,value:p.value,mode:p.mode||$};Object.keys(p).forEach(x=>{x!="$id"&&(w[x]=p[x])}),w.start_date&&w.start_date.getMonth&&w.end_date&&w.end_date.getMonth&&typeof w.duration=="number"||r(w,g),b.push(w)})}return b}function d(g){if(t.isTaskExists(g)){var y=t.getTask(g);c(y,t.getTaskAssignments(y.id))}}function c(g,y){y.sort(function(v,b){return v.start_date&&b.start_date&&v.start_date.valueOf()!=b.start_date.valueOf()?v.start_date-b.start_date:0}),n==i.assignmentsArray?g[t.config.resource_property]=y:n==i.resourceValueArray&&(g[t.config.resource_property]=y.map(function(v){return{$id:v.id,start_date:v.start_date,duration:v.duration,end_date:v.end_date,delay:v.delay,resource_id:v.resource_id,value:v.value,mode:v.mode}})),g[e]=y}function u(g){var y=l(g);return y.forEach(function(v){v.id=v.id||t.uid()}),y}function h(g,y){var v=function(b,_){var m={inBoth:[],inTaskNotInStore:[],inStoreNotInTask:[]};if(n==i.singleValue){var p=b[0],k=p?p.resource_id:null,$=!1;_.forEach(function(T){T.resource_id!=k?m.inStoreNotInTask.push(T):T.resource_id==k&&(m.inBoth.push({store:T,task:p}),$=!0)}),!$&&p&&m.inTaskNotInStore.push(p)}else if(n==i.valueArray){var w={},x={},S={};b.forEach(function(T){w[T.resource_id]=T}),_.forEach(function(T){x[T.resource_id]=T}),b.concat(_).forEach(function(T){if(!S[T.resource_id]){S[T.resource_id]=!0;var E=w[T.resource_id],C=x[T.resource_id];E&&C?m.inBoth.push({store:C,task:E}):E&&!C?m.inTaskNotInStore.push(E):!E&&C&&m.inStoreNotInTask.push(C)}})}else n!=i.assignmentsArray&&n!=i.resourceValueArray||(w={},x={},S={},b.forEach(function(T){w[T.id||T.$id]=T}),_.forEach(function(T){x[T.id]=T}),b.concat(_).forEach(function(T){var E=T.id||T.$id;if(!S[E]){S[E]=!0;var C=w[E],D=x[E];C&&D?m.inBoth.push({store:D,task:C}):C&&!D?m.inTaskNotInStore.push(C):!C&&D&&m.inStoreNotInTask.push(D)}}));return m}(l(g),y);v.inStoreNotInTask.forEach(function(b){s.removeItem(b.id)}),v.inTaskNotInStore.forEach(function(b){s.addItem(b)}),v.inBoth.forEach(function(b){if(function(m,p){var k={id:!0};for(var $ in m)if(!k[$]&&String(m[$])!==String(p[$]))return!0;return!1}(b.task,b.store))(function(m,p){var k={id:!0};for(var $ in m)k[$]||(p[$]=m[$])})(b.task,b.store),s.updateItem(b.store.id);else if(b.task.start_date&&b.task.end_date&&b.task.mode!==a.fixedDates){var _=o(b.store,g);b.store.start_date.valueOf()==_.start_date.valueOf()&&b.store.end_date.valueOf()==_.end_date.valueOf()||(b.store.start_date=_.start_date,b.store.end_date=_.end_date,b.store.duration=_.duration,s.updateItem(b.store.id))}}),d(g.id)}function f(g){var y=g[e]||s.find(function(v){return v.task_id==g.id});h(g,y)}t.$data.assignmentsStore=s,t.attachEvent("onGanttReady",function(){if(t.config.process_resource_assignments){t.attachEvent("onParse",function(){t.silent(function(){s.clearAll();var k=[];t.eachTask(function($){if($.type!==t.config.types.project){var w=u($);c($,w),w.forEach(function(x){k.push(x)})}}),s.parse(k)})});var g=!1,y=!1,v={},b=!1;t.attachEvent("onBeforeBatchUpdate",function(){g=!0}),t.attachEvent("onAfterBatchUpdate",function(){if(y){var k={};for(var $ in v)k[$]=t.getTaskAssignments(v[$].id);for(var $ in t.config.process_resource_assignments&&n==="resourceValueArray"&&(p=null),v)h(v[$],k[$])}y=!1,g=!1,v={}}),t.attachEvent("onTaskCreated",function(k){var $=u(k);return s.parse($),c(k,$),!0}),t.attachEvent("onAfterTaskUpdate",function(k,$){g?(y=!0,v[k]=$):$.unscheduled||f($)}),t.attachEvent("onAfterTaskAdd",function(k,$){g?(y=!0,v[k]=$):f($)}),t.attachEvent("onRowDragEnd",function(k){f(t.getTask(k))}),t.$data.tasksStore.attachEvent("onAfterDeleteConfirmed",function(k,$){var w,x=[k];t.eachTask(function(S){x.push(S.id)},k),w={},x.forEach(function(S){w[S]=!0}),s.find(function(S){return w[S.task_id]}).forEach(function(S){s.removeItem(S.id)})}),t.$data.tasksStore.attachEvent("onClearAll",function(){return _=null,m=null,p=null,s.clearAll(),!0}),t.attachEvent("onTaskIdChange",function(k,$){s.find(function(w){return w.task_id==k}).forEach(function(w){w.task_id=$,s.updateItem(w.id)}),d($)}),t.attachEvent("onBeforeUndo",function(k){return b=!0,!0}),t.attachEvent("onAfterUndo",function(k){b=!0});var _=null,m=null,p=null;s.attachEvent("onStoreUpdated",function(){return g&&!b||(_=null,m=null,p=null),!0}),t.getResourceAssignments=function(k,$){var w=t.defined($)&&$!==null;return _===null&&(_={},m={},s.eachItem(function(x){_[x.resource_id]||(_[x.resource_id]=[]),_[x.resource_id].push(x);var S=x.resource_id+"-"+x.task_id;m[S]||(m[S]=[]),m[S].push(x)})),w?(m[k+"-"+$]||[]).slice():(_[k]||[]).slice()},t.getTaskAssignments=function(k){if(p===null){var $=[];p={},s.eachItem(function(w){p[w.task_id]||(p[w.task_id]=[]),p[w.task_id].push(w),w.task_id==k&&$.push(w)})}return(p[k]||[]).slice()},t.getTaskResources=function(k){const $=t.getDatastore("resource"),w=t.getTaskAssignments(k),x={};w.forEach(function(T){x[T.resource_id]||(x[T.resource_id]=T.resource_id)});const S=[];for(const T in x){const E=$.getItem(x[T]);E&&S.push(E)}return S},t.updateTaskAssignments=d}},{once:!0})}function Cn(t){function e(o){return function(){return!t.config.placeholder_task||o.apply(this,arguments)}}function i(){var o=t.getTaskBy("type",t.config.types.placeholder);if(!o.length||!t.isTaskExists(o[0].id)){var l={unscheduled:!0,type:t.config.types.placeholder,duration:0,text:t.locale.labels.new_task};if(t.callEvent("onTaskCreated",[l])===!1)return;t.addTask(l)}}function n(o){var l=t.getTask(o);l.type==t.config.types.placeholder&&(l.start_date&&l.end_date&&l.unscheduled&&(l.unscheduled=!1),t.batchUpdate(function(){var d=t.copy(l);t.silent(function(){t.deleteTask(l.id)}),delete d["!nativeeditor_status"],d.type=t.config.types.task,d.id=t.uid(),t.addTask(d)}))}t.config.types.placeholder="placeholder",t.attachEvent("onDataProcessorReady",e(function(o){o&&!o._silencedPlaceholder&&(o._silencedPlaceholder=!0,o.attachEvent("onBeforeUpdate",e(function(l,d,c){return c.type!=t.config.types.placeholder||(o.setUpdated(l,!1),!1)})))}));var a=!1;function r(o){return!!(t.config.types.placeholder&&t.isTaskExists(o)&&t.getTask(o).type==t.config.types.placeholder)}function s(o){return!(!r(o.source)&&!r(o.target))}t.attachEvent("onGanttReady",function(){a||(a=!0,t.attachEvent("onAfterTaskUpdate",e(n)),t.attachEvent("onAfterTaskAdd",e(function(o,l){l.type!=t.config.types.placeholder&&(t.getTaskBy("type",t.config.types.placeholder).forEach(function(d){t.silent(function(){t.isTaskExists(d.id)&&t.deleteTask(d.id)})}),i())})),t.attachEvent("onParse",e(i)))}),t.attachEvent("onLinkValidation",function(o){return!s(o)}),t.attachEvent("onBeforeLinkAdd",function(o,l){return!s(l)}),t.attachEvent("onBeforeUndoStack",function(o){for(var l=0;l<o.commands.length;l++){var d=o.commands[l];d.entity==="task"&&d.value.type===t.config.types.placeholder&&(o.commands.splice(l,1),l--)}return!0})}function Dn(t){function e(c){return function(){return!t.config.auto_types||t.getTaskType(t.config.types.project)!=t.config.types.project||c.apply(this,arguments)}}function i(c,u){var h=t.getTask(c),f=r(h);f!==!1&&t.getTaskType(h)!==f&&(u.$needsUpdate=!0,u[h.id]={task:h,type:f})}function n(c){if(!t.getState().group_mode){var u=function(h,f){return i(h,f=f||{}),t.eachParent(function(g){i(g.id,f)},h),f}(c);u.$needsUpdate&&t.batchUpdate(function(){(function(h){for(var f in h)if(h[f]&&h[f].task){var g=h[f].task;g.type=h[f].type,t.updateTask(g.id)}})(u)})}}var a;function r(c){var u=t.config.types,h=t.hasChild(c.id),f=t.getTaskType(c.type);return h&&f===u.task?u.project:!h&&f===u.project&&u.task}var s,o,l=!0;function d(c){c!=t.config.root_id&&t.isTaskExists(c)&&n(c)}t.attachEvent("onParse",e(function(){l=!1,t.getState().group_mode||(t.batchUpdate(function(){t.eachTask(function(c){var u=r(c);u!==!1&&function(h,f){t.getState().group_mode||(h.type=f,t.updateTask(h.id))}(c,u)})}),l=!0)})),t.attachEvent("onAfterTaskAdd",e(function(c){l&&n(c)})),t.attachEvent("onAfterTaskUpdate",e(function(c){l&&n(c)})),t.attachEvent("onBeforeTaskDelete",e(function(c,u){return a=t.getParent(c),!0})),t.attachEvent("onAfterTaskDelete",e(function(c,u){d(a)})),t.attachEvent("onRowDragStart",e(function(c,u,h){return s=t.getParent(c),!0})),t.attachEvent("onRowDragEnd",e(function(c,u){d(s),n(c)})),t.attachEvent("onBeforeTaskMove",e(function(c,u,h){return o=t.getParent(c),!0})),t.attachEvent("onAfterTaskMove",e(function(c,u,h){document.querySelector(".gantt_drag_marker")||(d(o),n(c))}))}const ge=class{constructor(){this.canParse=e=>!isNaN(this.parse(e)),this.format=e=>String(e),this.parse=e=>parseInt(e,10)}};ge.create=(t=null)=>new ge;let pe=ge;const me=class{constructor(e){this.format=i=>this._getWBSCode(i.source),this.canParse=i=>this._linkReg.test(i),this.parse=i=>{if(!this.canParse(i))return null;const n=this._linkReg.exec(i)[0].trim();return{id:void 0,source:this._findSource(n)||null,target:null,type:this._gantt.config.links.finish_to_start,lag:0}},this._getWBSCode=i=>{const n=this._gantt.getTask(i);return this._gantt.getWBSCode(n)},this._findSource=i=>{const n=new RegExp("^[0-9.]+","i");if(n.exec(i)){const a=n.exec(i)[0],r=this._gantt.getTaskByWBSCode(a);if(r)return r.id}return null},this._linkReg=/^[0-9\.]+/,this._gantt=e}};me.create=(t=null,e)=>new me(e);let An=me;function In(t){t.ext.formatters={durationFormatter:function(e){return e||(e={}),e.store||(e.store=t.config.duration_unit),e.enter||(e.enter=t.config.duration_unit),pe.create(e,t)},linkFormatter:function(e){return An.create(e,t)}}}function Mn(t){t.ext=t.ext||{},t.config.show_empty_state=!1,t.ext.emptyStateElement=t.ext.emptyStateElement||{isEnabled:()=>t.config.show_empty_state===!0,isGanttEmpty:()=>!t.getTaskByTime().length,renderContent(e){const i=`<div class='gantt_empty_state'><div class='gantt_empty_state_image'></div>${`<div class='gantt_empty_state_text'>
    <div class='gantt_empty_state_text_link' data-empty-state-create-task>${t.locale.labels.empty_state_text_link}</div>
    <div class='gantt_empty_state_text_description'>${t.locale.labels.empty_state_text_description}</div>
    </div>`}</div>`;e.innerHTML=i},clickEvents:[],attachAddTaskEvent(){const e=t.attachEvent("onEmptyClick",function(i){t.utils.dom.closest(i.target,"[data-empty-state-create-task]")&&t.createTask({id:t.uid(),text:"New Task"})});this.clickEvents.push(e)},detachAddTaskEvents(){this.clickEvents.forEach(function(e){t.detachEvent(e)}),this.clickEvents=[]},getContainer(){if(t.$container){const e=t.utils.dom;if(t.$container.contains(t.$grid_data))return e.closest(t.$grid_data,".gantt_layout_content");if(t.$container.contains(t.$task_data))return e.closest(t.$task_data,".gantt_layout_content")}return null},getNode(){const e=this.getContainer();return e?e.querySelector(".gantt_empty_state_wrapper"):null},show(){const e=this.getContainer();if(!e&&this.isGanttEmpty())return null;const i=document.createElement("div");i.className="gantt_empty_state_wrapper",i.style.marginTop=t.config.scale_height-e.offsetHeight+"px";const n=t.$container.querySelectorAll(".gantt_empty_state_wrapper");Array.prototype.forEach.call(n,function(a){a.parentNode.removeChild(a)}),this.detachAddTaskEvents(),this.attachAddTaskEvent(),e.appendChild(i),this.renderContent(i)},hide(){const e=this.getNode();if(!e)return!1;e.parentNode.removeChild(e)},init(){}},t.attachEvent("onDataRender",function(){const e=t.ext.emptyStateElement;e.isEnabled()&&e.isGanttEmpty()?e.show():e.hide()})}const pi=function(t,e){const i=e.baselines&&e.baselines.length,n=t.config.baselines.render_mode=="separateRow"||t.config.baselines.render_mode=="individualRow";if(i&&n)return!0},Nn=function(t,e){let i=!1;return t.eachTask(function(n){i||(i=pi(t,n))},e),i},wt=function(t){return t.render&&t.render=="split"&&!t.$open},Ln=function(t,e,i,n){let a=e.$task_data.scrollHeight,r=!1,s=!1;return t.eachParent(function(o){if(wt(o)){s=!0;const l=e.getItemPosition(o).rowHeight;l<a&&(a=l,r=!0)}},i.id),{maxHeight:a,shrinkHeight:r,splitChild:s}};function Pn(t){t.config.baselines={datastore:"baselines",render_mode:!1,dataprocessor_baselines:!1,row_height:16,bar_height:8};const e=t.createDatastore({name:t.config.baselines.datastore,initItem:function(a){return a.id||(a.id=t.uid()),function(r){if(!r.task_id||!r.start_date&&!r.end_date)return!1;r.start_date?r.start_date=t.date.parseDate(r.start_date,"parse_date"):r.start_date=null,r.end_date?r.end_date=t.date.parseDate(r.end_date,"parse_date"):r.end_date=null,r.duration=r.duration||1,r.start_date&&!r.end_date?r.end_date=t.calculateEndDate(r.start_date,r.duration):r.end_date&&!r.start_date&&(r.start_date=t.calculateEndDate(r.end_date,-r.duration))}(a),a}});function i(a){let r=0;t.adjustTaskHeightForBaselines(a),t.eachTask(function(s){let o=s.row_height||t.config.row_height;r=r||o,o>r&&(r=o)},a.id),a.row_height<r&&(a.row_height=r)}function n(a){t.eachParent(function(r){if(wt(r)){const s=r.row_height||t.getLayoutView("timeline").getBarHeight(r.id);let o=a.row_height;t.getChildren(r.id).forEach(function(l){const d=t.getTask(l);if(d.id==a.id)return;const c=d.row_height||t.getLayoutView("timeline").getBarHeight(d.id);o=o||c,c>o&&(o=c)}),r.row_height=o,r.bar_height=r.bar_height||s}},a.id)}t.$data.baselineStore=e,t.adjustTaskHeightForBaselines=function(a){let r,s,o=a.baselines&&a.baselines.length||0;const l=t.config.baselines.row_height,d=t.getLayoutView("timeline");if(d&&t.config.show_chart)switch(t.config.baselines.render_mode){case"taskRow":a.row_height=a.bar_height+4;break;case"separateRow":r=d.getBarHeight(a.id),o?(a.bar_height=a.bar_height||r,a.bar_height>r&&(r=a.bar_height),a.row_height=r+l):a.bar_height&&(a.row_height=a.bar_height+4),n(a);break;case"individualRow":r=d.getBarHeight(a.id),o?(a.bar_height=a.bar_height||r,a.bar_height>r&&(r=a.bar_height),s=l*o,a.row_height=r+s+2):a.bar_height&&(a.row_height=a.bar_height+4),n(a)}},t.attachEvent("onGanttReady",function(){t.config.baselines&&(t.attachEvent("onParse",function(){e.eachItem(function(a){const r=a.task_id;if(t.isTaskExists(r)){const s=t.getTask(r);s.baselines=s.baselines||[];let o=!0;for(let l=0;l<s.baselines.length;l++){let d=s.baselines[l];if(d.id==a.id){o=!1,t.mixin(d,a,!0);break}}o&&s.baselines.push(a),W(t)||(wt(s)?i(s):t.adjustTaskHeightForBaselines(s))}})}),t.attachEvent("onBeforeTaskUpdate",function(a,r){return function(s){let o=!1;const l={},d=s.baselines||[],c=t.getTaskBaselines(s.id);d.length!=c.length&&(o=!0),d.forEach(function(u){l[u.id]=!0;const h=e.getItem(u.id);if(h){const f=+h.start_date!=+u.start_date,g=+h.end_date!=+u.end_date;(f||g)&&e.updateItem(u.id,u)}else e.addItem(u)}),c.forEach(function(u){l[u.id]||e.removeItem(u.id)}),o&&(wt(s)?i(s):t.adjustTaskHeightForBaselines(s),t.render())}(r),!0}),t.attachEvent("onAfterUndo",function(a){if((t.config.baselines.render_mode=="separateRow"||t.config.baselines.render_mode=="individualRow")&&a){let r=!1;a.commands.forEach(function(s){if(s.entity=="task"){const o=s.value.id;if(t.isTaskExists(o)){const l=t.getTask(o);if(l.parent&&t.isTaskExists(l.parent)){const d=t.getTask(l.parent);wt(d)&&(i(d),r=!0)}}}}),r&&t.render()}}),t.attachEvent("onAfterTaskDelete",function(a,r){if(pi&&r.parent&&t.isTaskExists(r.parent)){const s=t.getTask(r.parent);wt(s)&&i(s)}e.eachItem(function(s){t.isTaskExists(s.task_id)||e.removeItem(s.id)})}),t.getTaskBaselines=function(a){const r=[];return e.eachItem(function(s){s.task_id==a&&r.push(s)}),r},t.$data.baselineStore.attachEvent("onClearAll",function(){return t.eachTask(function(a){a.baselines&&delete a.baselines}),!0}),t.$data.tasksStore.attachEvent("onClearAll",function(){return e.clearAll(),!0}),t.attachEvent("onTaskIdChange",function(a,r){e.find(function(s){return s.task_id==a}).forEach(function(s){s.task_id=r,e.updateItem(s.id)})}))},{once:!0})}function Rn(t){function e(i){throw t.assert(!1,"Can't parse data: incorrect value of gantt.parse or gantt.load method. Actual argument value: "+JSON.stringify(i)),new Error("Invalid argument for gantt.parse or gantt.load. An object or a JSON string of format https://docs.dhtmlx.com/gantt/desktop__supported_data_formats.html#json is expected. Actual argument value: "+JSON.stringify(i))}t.load=function(){throw new Error("gantt.load() method is not available in the node.js, use gantt.parse() instead")},t.parse=function(i,n){this.on_load({xmlDoc:{responseText:i}},n)},t.serialize=function(i){return this[i=i||"json"].serialize()},t.on_load=function(i,n){if(i.xmlDoc&&i.xmlDoc.status===404)this.assert(!1,"Failed to load the data from <a href='"+i.xmlDoc.responseURL+"' target='_blank'>"+i.xmlDoc.responseURL+"</a>, server returns 404");else if(!t.$destroyed){this.callEvent("onBeforeParse",[]),n||(n="json"),this.assert(this[n],"Invalid data type:'"+n+"'");var a=i.xmlDoc.responseText,r=this[n].parse(a,i);this._process_loading(r)}},t._process_loading=function(i){i.collections&&this._load_collections(i.collections),i.resources&&this.$data.resourcesStore&&this.$data.resourcesStore.parse(i.resources),t.config.baselines&&i.baselines&&this.$data.baselineStore&&this.$data.baselineStore.parse(i.baselines);const n=i.data||i.tasks;i.assignments&&function(r,s){const o={};s.forEach(l=>{o[l.task_id]||(o[l.task_id]=[]),o[l.task_id].push(l)}),r.forEach(l=>{l[t.config.resource_property]=o[l.id]||[]})}(n,i.assignments),this.$data.tasksStore.parse(n);var a=i.links||(i.collections&&i.collections.links?i.collections.links:[]);this.$data.linksStore.parse(a),this.callEvent("onParse",[]),this.render()},t._load_collections=function(i){var n=!1;for(var a in i)if(i.hasOwnProperty(a)){n=!0;var r=i[a];this.serverList[a]=this.serverList[a]||[];var s=this.serverList[a];if(!s)continue;s.splice(0,s.length);for(var o=0;o<r.length;o++){var l=r[o],d=this.copy(l);for(var c in d.key=d.value,l)if(l.hasOwnProperty(c)){if(c=="value"||c=="label")continue;d[c]=l[c]}s.push(d)}}n&&this.callEvent("onOptionsLoad",[])},t.attachEvent("onBeforeTaskDisplay",function(i,n){return!n.$ignore}),t.json={parse:function(i){if(i||e(i),typeof i=="string")if(typeof JSON!=null)try{i=JSON.parse(i)}catch{e(i)}else t.assert(!1,"JSON is not supported");return i.data||i.tasks||e(i),i.dhx_security&&(t.security_key=i.dhx_security),i},serializeTask:function(i){return this._copyObject(i)},serializeLink:function(i){return this._copyLink(i)},_copyLink:function(i){var n={};for(var a in i)n[a]=i[a];return n},_copyObject:function(i){var n={};for(var a in i)a.charAt(0)!="$"&&(n[a]=i[a],Z(n[a])&&(n[a]=t.defined(t.templates.xml_format)?t.templates.xml_format(n[a]):t.templates.format_date(n[a])));return n},serialize:function(){var i=[],n=[];let a=[];t.eachTask(function(o){t.resetProjectDates(o),i.push(this.serializeTask(o))},t.config.root_id,this);for(var r=t.getLinks(),s=0;s<r.length;s++)n.push(this.serializeLink(r[s]));return t.getDatastore("baselines").eachItem(function(o){const l=t.json.serializeTask(o);a.push(l)}),{data:i,links:n,baselines:a}}},t.xml={_xmlNodeToJSON:function(i,n){for(var a={},r=0;r<i.attributes.length;r++)a[i.attributes[r].name]=i.attributes[r].value;if(!n){for(r=0;r<i.childNodes.length;r++){var s=i.childNodes[r];s.nodeType==1&&(a[s.tagName]=s.firstChild?s.firstChild.nodeValue:"")}a.text||(a.text=i.firstChild?i.firstChild.nodeValue:"")}return a},_getCollections:function(i){for(var n={},a=t.ajax.xpath("//coll_options",i),r=0;r<a.length;r++)for(var s=n[a[r].getAttribute("for")]=[],o=t.ajax.xpath(".//item",a[r]),l=0;l<o.length;l++){for(var d=o[l].attributes,c={key:o[l].getAttribute("value"),label:o[l].getAttribute("label")},u=0;u<d.length;u++){var h=d[u];h.nodeName!="value"&&h.nodeName!="label"&&(c[h.nodeName]=h.nodeValue)}s.push(c)}return n},_getXML:function(i,n,a){a=a||"data",n.getXMLTopNode||(n=t.ajax.parse(n));var r=t.ajax.xmltop(a,n.xmlDoc);r&&r.tagName==a||function(o){throw t.assert(!1,"Can't parse data: incorrect value of gantt.parse or gantt.load method. Actual argument value: "+JSON.stringify(o)),new Error("Invalid argument for gantt.parse or gantt.load. An XML of format https://docs.dhtmlx.com/gantt/desktop__supported_data_formats.html#xmldhtmlxgantt20 is expected. Actual argument value: "+JSON.stringify(o))}(i);var s=r.getAttribute("dhx_security");return s&&(t.security_key=s),r},parse:function(i,n){n=this._getXML(i,n);for(var a={},r=a.data=[],s=t.ajax.xpath("//task",n),o=0;o<s.length;o++)r[o]=this._xmlNodeToJSON(s[o]);return a.collections=this._getCollections(n),a},_copyLink:function(i){return"<item id='"+i.id+"' source='"+i.source+"' target='"+i.target+"' type='"+i.type+"' />"},_copyObject:function(i){return"<task id='"+i.id+"' parent='"+(i.parent||"")+"' start_date='"+i.start_date+"' duration='"+i.duration+"' open='"+!!i.open+"' progress='"+i.progress+"' end_date='"+i.end_date+"'><![CDATA["+i.text+"]]></task>"},serialize:function(){for(var i=[],n=[],a=t.json.serialize(),r=0,s=a.data.length;r<s;r++)i.push(this._copyObject(a.data[r]));for(r=0,s=a.links.length;r<s;r++)n.push(this._copyLink(a.links[r]));return"<data>"+i.join("")+"<coll_options for='links'>"+n.join("")+"</coll_options></data>"}},t.oldxml={parse:function(i,n){n=t.xml._getXML(i,n,"projects");for(var a={collections:{links:[]}},r=a.data=[],s=t.ajax.xpath("//task",n),o=0;o<s.length;o++){r[o]=t.xml._xmlNodeToJSON(s[o]);var l=s[o].parentNode;l.tagName=="project"?r[o].parent="project-"+l.getAttribute("id"):r[o].parent=l.parentNode.getAttribute("id")}for(s=t.ajax.xpath("//project",n),o=0;o<s.length;o++)(d=t.xml._xmlNodeToJSON(s[o],!0)).id="project-"+d.id,r.push(d);for(o=0;o<r.length;o++){var d;(d=r[o]).start_date=d.startdate||d.est,d.end_date=d.enddate,d.text=d.name,d.duration=d.duration/8,d.open=1,d.duration||d.end_date||(d.duration=1),d.predecessortasks&&a.collections.links.push({target:d.id,source:d.predecessortasks,type:t.config.links.finish_to_start})}return a},serialize:function(){t.message("Serialization to 'old XML' is not implemented")}},t.serverList=function(i,n){return n?this.serverList[i]=n.slice(0):this.serverList[i]||(this.serverList[i]=[]),this.serverList[i]}}function Qt(t,e,i,n,a){return this.date=t,this.unit=e,this.task=i,this.id=n,this.calendar=a,this}function te(t,e,i,n,a,r){return this.date=t,this.dir=e,this.unit=i,this.task=n,this.id=a,this.calendar=r,this}function ee(t,e,i,n,a,r,s){return this.start_date=t,this.duration=e,this.unit=i,this.step=n,this.task=a,this.id=r,this.calendar=s,this}function Hn(t,e,i,n){return this.start_date=t,this.end_date=e,this.task=i,this.calendar=n,this.unit=null,this.step=null,this}var mi=function(t){return{getWorkHoursArguments:function(){var e=arguments[0];if(!xt((e=Z(e)?{date:e}:N({},e)).date))throw t.assert(!1,"Invalid date argument for getWorkHours method"),new Error("Invalid date argument for getWorkHours method");return e},setWorkTimeArguments:function(){return arguments[0]},unsetWorkTimeArguments:function(){return arguments[0]},isWorkTimeArguments:function(){var e,i=arguments[0];if(i instanceof Qt)return i;if((e=i.date?new Qt(i.date,i.unit,i.task,null,i.calendar):new Qt(arguments[0],arguments[1],arguments[2],null,arguments[3])).unit=e.unit||t.config.duration_unit,!xt(e.date))throw t.assert(!1,"Invalid date argument for isWorkTime method"),new Error("Invalid date argument for isWorkTime method");return e},getClosestWorkTimeArguments:function(e){var i,n=arguments[0];if(n instanceof te)return n;if(i=Z(n)?new te(n):new te(n.date,n.dir,n.unit,n.task,null,n.calendar),n.id&&(i.task=n),i.dir=n.dir||"any",i.unit=n.unit||t.config.duration_unit,!xt(i.date))throw t.assert(!1,"Invalid date argument for getClosestWorkTime method"),new Error("Invalid date argument for getClosestWorkTime method");return i},_getStartEndConfig:function(e){var i,n=Hn;if(e instanceof n)return e;if(Z(e)?i=new n(arguments[0],arguments[1],arguments[2],arguments[3]):(i=new n(e.start_date,e.end_date,e.task),e.id!==null&&e.id!==void 0&&(i.task=e)),i.unit=i.unit||t.config.duration_unit,i.step=i.step||t.config.duration_step,i.start_date=i.start_date||i.start||i.date,!xt(i.start_date))throw t.assert(!1,"Invalid start_date argument for getDuration method"),new Error("Invalid start_date argument for getDuration method");if(!xt(i.end_date))throw t.assert(!1,"Invalid end_date argument for getDuration method"),new Error("Invalid end_date argument for getDuration method");return i},getDurationArguments:function(e,i,n,a){return this._getStartEndConfig.apply(this,arguments)},hasDurationArguments:function(e,i,n,a){return this._getStartEndConfig.apply(this,arguments)},calculateEndDateArguments:function(e,i,n,a){var r,s=arguments[0];if(s instanceof ee)return s;if(r=Z(s)?new ee(arguments[0],arguments[1],arguments[2],void 0,arguments[3],void 0,arguments[4]):new ee(s.start_date,s.duration,s.unit,s.step,s.task,null,s.calendar),s.id!==null&&s.id!==void 0&&(r.task=s,r.unit=null,r.step=null),r.unit=r.unit||t.config.duration_unit,r.step=r.step||t.config.duration_step,!xt(r.start_date))throw t.assert(!1,"Invalid start_date argument for calculateEndDate method"),new Error("Invalid start_date argument for calculateEndDate method");return r}}};function vi(){}vi.prototype={_getIntervals:function(t){for(var e=[],i=0;i<t.length;i+=2)e.push({start:t[i],end:t[i+1]});return e},_toHoursArray:function(t){var e=[];function i(a){var r,s=Math.floor(a/3600),o=a-60*s*60,l=Math.floor(o/60);return s+":"+((r=String(l)).length<2&&(r="0"+r),r)}for(var n=0;n<t.length;n++)e.push(i(t[n].start)+"-"+i(t[n].end));return e},_intersectHourRanges:function(t,e){var i=[],n=t.length>e.length?t:e,a=t===n?e:t;n=n.slice(),a=a.slice(),i=[];for(var r=0;r<n.length;r++)for(var s=n[r],o=0;o<a.length;o++){var l=a[o];l.start<s.end&&l.end>s.start&&(i.push({start:Math.max(s.start,l.start),end:Math.min(s.end,l.end)}),s.end>l.end&&(a.splice(o,1),o--,r--))}return i},_mergeAdjacentIntervals:function(t){var e=t.slice();e.sort(function(r,s){return r.start-s.start});for(var i=e[0],n=1;n<e.length;n++){var a=e[n];a.start<=i.end?(a.end>i.end&&(i.end=a.end),e.splice(n,1),n--):i=a}return e},_mergeHoursConfig:function(t,e){return this._mergeAdjacentIntervals(this._intersectHourRanges(t,e))},merge:function(t,e){var i=q(t.getConfig().parsed),n=q(e.getConfig().parsed),a={hours:this._toHoursArray(this._mergeHoursConfig(i.hours,n.hours)),dates:{},customWeeks:{}};const r=(o,l)=>{for(let d in o.dates){const c=o.dates[d];+d>1e3&&(a.dates[d]=!1);for(const u in l.dates){const h=l.dates[u];if(u==d&&(a.dates[d]=!(!c||!h)),Array.isArray(c)){const f=Array.isArray(h)?h:l.hours;a.dates[d]=this._toHoursArray(this._mergeHoursConfig(c,f))}}}};if(r(i,n),r(n,i),i.customWeeks)for(var s in i.customWeeks)a.customWeeks[s]=i.customWeeks[s];if(n.customWeeks)for(var s in n.customWeeks)a.customWeeks[s]=n.customWeeks[s];return a}};class On{constructor(){this.clear()}getItem(e,i,n){if(this._cache.has(e)){const a=this._cache.get(e)[n.getFullYear()];if(a&&a.has(i))return a.get(i)}return-1}setItem(e,i,n,a){if(!e||!i)return;const r=this._cache,s=a.getFullYear();let o;r.has(e)?o=r.get(e):(o=[],r.set(e,o));let l=o[s];l||(l=o[s]=new Map),l.set(i,n)}clear(){this._cache=new Map}}class Bn{constructor(){this.clear()}getItem(e,i,n){const a=this._cache;if(a&&a[e]){const r=a[e];if(r===void 0)return-1;const s=r[n.getFullYear()];if(s&&s[i]!==void 0)return s[i]}return-1}setItem(e,i,n,a){if(!e||!i)return;const r=this._cache;if(!r)return;r[e]||(r[e]=[]);const s=r[e],o=a.getFullYear();let l=s[o];l||(l=s[o]={}),l[i]=n}clear(){this._cache={}}}class zn{constructor(e){this.getMinutesPerWeek=i=>{const n=i.valueOf();if(this._weekCache.has(n))return this._weekCache.get(n);const a=this._calendar,r=this._calendar.$gantt;let s=0,o=r.date.week_start(new Date(i));for(let l=0;l<7;l++)s+=60*a.getHoursPerDay(o),o=r.date.add(o,1,"day");return this._weekCache.set(n,s),s},this.getMinutesPerMonth=i=>{const n=i.valueOf();if(this._monthCache.has(n))return this._monthCache.get(n);const a=this._calendar,r=this._calendar.$gantt;let s=0,o=r.date.week_start(new Date(i));const l=r.date.add(o,1,"month").valueOf();for(;o.valueOf()<l;)s+=60*a.getHoursPerDay(o),o=r.date.add(o,1,"day");return this._monthCache.set(n,s),s},this.clear=()=>{this._weekCache=new Map,this._monthCache=new Map},this.clear(),this._calendar=e}}class jn{constructor(){this.clear()}_getCacheObject(e,i,n){const a=this._cache;a[i]||(a[i]=[]);let r=a[i];r||(r=a[i]={});let s=r[n];s||(s=r[n]={});const o=e.getFullYear();let l=s[o];return l||(l=s[o]={durations:{},endDates:{}}),l}_endDateCacheKey(e,i){return String(e)+"-"+String(i)}_durationCacheKey(e,i){return String(e)+"-"+String(i)}getEndDate(e,i,n,a,r){const s=this._getCacheObject(e,n,a),o=e.valueOf(),l=this._endDateCacheKey(o,i);let d;if(s.endDates[l]===void 0){const c=r(),u=c.valueOf();s.endDates[l]=u,s.durations[this._durationCacheKey(o,u)]=i,d=c}else d=new Date(s.endDates[l]);return d}getDuration(e,i,n,a,r){const s=this._getCacheObject(e,n,a),o=e.valueOf(),l=i.valueOf(),d=this._durationCacheKey(o,l);let c;if(s.durations[d]===void 0){const u=r();s.durations[d]=u.valueOf(),c=u}else c=s.durations[d];return c}clear(){this._cache={}}}function ve(t,e){this.argumentsHelper=e,this.$gantt=t,this._workingUnitsCache=typeof Map<"u"?new On:new Bn,this._largeUnitsCache=new zn(this),this._dateDurationCache=new jn,this._worktime=null,this._cached_timestamps={},this._cached_timestamps_count=0}ve.prototype={units:["year","month","week","day","hour","minute"],_clearCaches:function(){this._workingUnitsCache.clear(),this._largeUnitsCache.clear(),this._dateDurationCache.clear()},_getUnitOrder:function(t){for(var e=0,i=this.units.length;e<i;e++)if(this.units[e]==t)return e},_resetTimestampCache:function(){this._cached_timestamps={},this._cached_timestamps_count=0},_timestamp:function(t){this._cached_timestamps_count>1e6&&this._resetTimestampCache();var e=null;if(t.day||t.day===0)e=t.day;else if(t.date){var i=String(t.date.valueOf());this._cached_timestamps[i]?e=this._cached_timestamps[i]:(e=Date.UTC(t.date.getFullYear(),t.date.getMonth(),t.date.getDate()),this._cached_timestamps[i]=e,this._cached_timestamps_count++)}return e},_checkIfWorkingUnit:function(t,e){if(!this["_is_work_"+e]){const i=this.$gantt.date[`${e}_start`](new Date(t)),n=this.$gantt.date.add(i,1,e);return this.hasDuration(i,n)}return this["_is_work_"+e](t)},_is_work_day:function(t){var e=this._getWorkHours(t);return!!Array.isArray(e)&&e.length>0},_is_work_hour:function(t){for(var e=this._getWorkHours(t),i=t.getHours(),n=0;n<e.length;n++)if(i>=e[n].startHour&&i<e[n].endHour)return!0;return!1},_getTimeOfDayStamp:function(t,e){var i=t.getHours();return t.getHours()||t.getMinutes()||!e||(i=24),60*i*60+60*t.getMinutes()},_is_work_minute:function(t){for(var e=this._getWorkHours(t),i=this._getTimeOfDayStamp(t),n=0;n<e.length;n++)if(i>=e[n].start&&i<e[n].end)return!0;return!1},_nextDate:function(t,e,i){return this.$gantt.date.add(t,i,e)},_getWorkUnitsBetweenGeneric:function(t,e,i,n){var a=this.$gantt.date,r=new Date(t),s=new Date(e);n=n||1;var o,l,d=0,c=null,u=!1;(o=a[i+"_start"](new Date(r))).valueOf()!=r.valueOf()&&(u=!0);var h=!1;(l=a[i+"_start"](new Date(e))).valueOf()!=e.valueOf()&&(h=!0);for(var f=!1;r.valueOf()<s.valueOf();){if(f=(c=this._nextDate(r,i,n)).valueOf()>s.valueOf(),this._isWorkTime(r,i))(u||h&&f)&&(o=a[i+"_start"](new Date(r)),l=a.add(o,n,i)),u?(u=!1,c=this._nextDate(o,i,n),d+=(l.valueOf()-r.valueOf())/(l.valueOf()-o.valueOf())):h&&f?(h=!1,d+=(s.valueOf()-r.valueOf())/(l.valueOf()-o.valueOf())):d++;else{var g=this._getUnitOrder(i),y=this.units[g-1];y&&!this._isWorkTime(r,y)&&(c=this._getClosestWorkTimeFuture(r,y))}r=c}return d},_getMinutesPerHour:function(t){var e=this._getTimeOfDayStamp(t),i=this._getTimeOfDayStamp(this._nextDate(t,"hour",1));i===0&&(i=86400);for(var n=this._getWorkHours(t),a=0;a<n.length;a++){var r=n[a];if(e>=r.start&&i<=r.end)return 60;if(e<r.end&&i>r.start)return(Math.min(i,r.end)-Math.max(e,r.start))/60}return 0},_getMinutesPerDay:function(t){var e=this._getWorkHours(t),i=0;return e.forEach(function(n){i+=n.durationMinutes}),i},getHoursPerDay:function(t){var e=this._getWorkHours(t),i=0;return e.forEach(function(n){i+=n.durationHours}),i},_getWorkUnitsForRange:function(t,e,i,n){var a,r=0,s=new Date(t),o=new Date(e);for(a=R(i=="minute"?this._getMinutesPerDay:this.getHoursPerDay,this);s.valueOf()<o.valueOf();)if(o-s>27648e5&&s.getDate()===0){var l=this._largeUnitsCache.getMinutesPerMonth(s);i=="hour"&&(l/=60),r+=l,s=this.$gantt.date.add(s,1,"month")}else{if(o-s>13824e5){var d=this.$gantt.date.week_start(new Date(s));if(s.valueOf()===d.valueOf()){l=this._largeUnitsCache.getMinutesPerWeek(s),i=="hour"&&(l/=60),r+=l,s=this.$gantt.date.add(s,7,"day");continue}}r+=a(s),s=this._nextDate(s,"day",1)}return r/n},_getMinutesBetweenSingleDay:function(t,e){for(var i=this._getIntervalTimestamp(t,e),n=this._getWorkHours(t),a=0,r=0;r<n.length;r++){var s=n[r];if(i.end>=s.start&&i.start<=s.end){var o=Math.max(s.start,i.start),l=Math.min(s.end,i.end);a+=(l-o)/60,i.start=l}}return Math.floor(a)},_getMinutesBetween:function(t,e,i,n){var a=new Date(t),r=new Date(e);n=n||1;var s=new Date(a),o=this.$gantt.date.add(this.$gantt.date.day_start(new Date(a)),1,"day");if(r.valueOf()<=o.valueOf())return this._getMinutesBetweenSingleDay(t,e);var l=this.$gantt.date.day_start(new Date(r)),d=r,c=this._getMinutesBetweenSingleDay(s,o),u=this._getMinutesBetweenSingleDay(l,d);return c+this._getWorkUnitsForRange(o,l,i,n)+u},_getHoursBetween:function(t,e,i,n){var a=new Date(t),r=new Date(e);n=n||1;var s=new Date(a),o=this.$gantt.date.add(this.$gantt.date.day_start(new Date(a)),1,"day");if(r.valueOf()<=o.valueOf())return Math.round(this._getMinutesBetweenSingleDay(t,e)/60);var l=this.$gantt.date.day_start(new Date(r)),d=r,c=this._getMinutesBetweenSingleDay(s,o,i,n)/60,u=this._getMinutesBetweenSingleDay(l,d,i,n)/60,h=c+this._getWorkUnitsForRange(o,l,i,n)+u;return Math.round(h)},getConfig:function(){return this._worktime},_setConfig:function(t){this._worktime=t,this._parseSettings(),this._clearCaches()},_parseSettings:function(){var t=this.getConfig();for(var e in t.parsed={dates:{},hours:null,haveCustomWeeks:!1,customWeeks:{},customWeeksRangeStart:null,customWeeksRangeEnd:null,customWeeksBoundaries:[]},t.parsed.hours=this._parseHours(t.hours),t.dates)t.parsed.dates[e]=this._parseHours(t.dates[e]);if(t.customWeeks){var i=null,n=null;for(var e in t.customWeeks){var a=t.customWeeks[e];if(a.from&&a.to){var r=a.from,s=a.to;(!i||i>r.valueOf())&&(i=r.valueOf()),(!n||n<s.valueOf())&&(n=s.valueOf()),t.parsed.customWeeksBoundaries.push({from:r.valueOf(),fromReadable:new Date(r),to:s.valueOf(),toReadable:new Date(s),name:e}),t.parsed.haveCustomWeeks=!0;var o=t.parsed.customWeeks[e]={from:a.from,to:a.to,hours:this._parseHours(a.hours),dates:{}};for(var l in a.dates)o.dates[l]=this._parseHours(a.dates[l])}}t.parsed.customWeeksRangeStart=i,t.parsed.customWeeksRangeEnd=n}},_tryChangeCalendarSettings:function(t){var e=JSON.stringify(this.getConfig());return t(),!!this.hasWorkTime()||(this._setConfig(JSON.parse(e)),this._clearCaches(),!1)},_arraysEqual:function(t,e){if(t===e)return!0;if(!t||!e||t.length!=e.length)return!1;for(var i=0;i<t.length;++i)if(t[i]!==e[i])return!1;return!0},_compareSettings:function(t,e){if(!this._arraysEqual(t.hours,e.hours))return!1;var i=Object.keys(t.dates),n=Object.keys(e.dates);if(i.sort(),n.sort(),!this._arraysEqual(i,n))return!1;for(var a=0;a<i.length;a++){var r=i[a],s=t.dates[r],o=t.dates[r];if(s!==o&&!(Array.isArray(s)&&Array.isArray(o)&&this._arraysEqual(s,o)))return!1}return!0},equals:function(t){if(!(t instanceof ve))return!1;var e=this.getConfig(),i=t.getConfig();if(!this._compareSettings(e,i))return!1;if(e.parsed.haveCustomWeeks&&i.parsed.haveCustomWeeks){if(e.parsed.customWeeksBoundaries.length!=i.parsed.customWeeksBoundaries.length)return!1;for(var n in e.parsed.customWeeks){var a=e.parsed.customWeeks[n],r=i.parsed.customWeeks[n];if(!r||!this._compareSettings(a,r))return!1}}else if(e.parse.haveCustomWeeks!==i.parsed.haveCustomWeeks)return!1;return!0},getWorkHours:function(){var t=this.argumentsHelper.getWorkHoursArguments.apply(this.argumentsHelper,arguments);return this._getWorkHours(t.date,!1)},_getWorkHours:function(t,e){var i=this.getConfig();if(e!==!1&&(i=i.parsed),!t)return i.hours;var n=this._timestamp({date:t});if(i.haveCustomWeeks&&i.customWeeksRangeStart<=n&&i.customWeeksRangeEnd>n){for(var a=0;a<i.customWeeksBoundaries.length;a++)if(i.customWeeksBoundaries[a].from<=n&&i.customWeeksBoundaries[a].to>n){i=i.customWeeks[i.customWeeksBoundaries[a].name];break}}var r=!0;return i.dates[n]!==void 0?r=i.dates[n]:i.dates[t.getDay()]!==void 0&&(r=i.dates[t.getDay()]),r===!0?i.hours:r||[]},_getIntervalTimestamp:function(t,e){var i={start:0,end:0};i.start=60*t.getHours()*60+60*t.getMinutes()+t.getSeconds();var n=e.getHours();return!n&&!e.getMinutes()&&!e.getSeconds()&&t.valueOf()<e.valueOf()&&(n=24),i.end=60*n*60+60*e.getMinutes()+e.getSeconds(),i},_parseHours:function(t){if(Array.isArray(t)){var e=[];t.forEach(function(o){typeof o=="number"?e.push(60*o*60):typeof o=="string"&&o.split("-").map(function(l){return l.trim()}).forEach(function(l){var d=l.split(":").map(function(u){return u.trim()}),c=parseInt(60*d[0]*60);d[1]&&(c+=parseInt(60*d[1])),d[2]&&(c+=parseInt(d[2])),e.push(c)})});for(var i=[],n=0;n<e.length;n+=2){var a=e[n],r=e[n+1],s=r-a;i.push({start:a,end:r,startHour:Math.floor(a/3600),startMinute:Math.floor(a/60),endHour:Math.ceil(r/3600),endMinute:Math.ceil(r/60),durationSeconds:s,durationMinutes:s/60,durationHours:s/3600})}return i}return t},setWorkTime:function(t){return this._tryChangeCalendarSettings(R(function(){var e=t.hours===void 0||t.hours,i=this._timestamp(t),n=this.getConfig();if(i!==null?n.dates[i]=e:t.customWeeks||(n.hours=e),t.customWeeks){if(n.customWeeks||(n.customWeeks={}),typeof t.customWeeks=="string")i!==null?n.customWeeks[t.customWeeks].dates[i]=e:t.customWeeks||(n.customWeeks[t.customWeeks].hours=e);else if(typeof t.customWeeks=="object"&&Function.prototype.toString.call(t.customWeeks.constructor)==="function Object() { [native code] }")for(var a in t.customWeeks)n.customWeeks[a]=t.customWeeks[a]}this._parseSettings(),this._clearCaches()},this))},unsetWorkTime:function(t){return this._tryChangeCalendarSettings(R(function(){if(t){var e=this._timestamp(t);e!==null&&delete this.getConfig().dates[e]}else this.reset_calendar();this._parseSettings(),this._clearCaches()},this))},_isWorkTime:function(t,e){var i,n=-1;return i=String(t.valueOf()),(n=this._workingUnitsCache.getItem(e,i,t))==-1&&(n=this._checkIfWorkingUnit(t,e),this._workingUnitsCache.setItem(e,i,n,t)),n},isWorkTime:function(){var t=this.argumentsHelper.isWorkTimeArguments.apply(this.argumentsHelper,arguments);return this._isWorkTime(t.date,t.unit)},calculateDuration:function(){var t=this.argumentsHelper.getDurationArguments.apply(this.argumentsHelper,arguments);if(!t.unit)return!1;var e=this;return this._dateDurationCache.getDuration(t.start_date,t.end_date,t.unit,t.step,function(){return e._calculateDuration(t.start_date,t.end_date,t.unit,t.step)})},_calculateDuration:function(t,e,i,n){var a=0,r=1;if(t.valueOf()>e.valueOf()){var s=e;e=t,t=s,r=-1}return a=i=="hour"&&n==1?this._getHoursBetween(t,e,i,n):i=="minute"&&n==1?this._getMinutesBetween(t,e,i,n):this._getWorkUnitsBetweenGeneric(t,e,i,n),r*Math.round(a)},hasDuration:function(){var t=this.argumentsHelper.getDurationArguments.apply(this.argumentsHelper,arguments),e=t.start_date,i=t.end_date,n=t.unit,a=t.step;if(!n)return!1;var r=new Date(e),s=new Date(i);for(a=a||1;r.valueOf()<s.valueOf();){if(this._isWorkTime(r,n))return!0;r=this._nextDate(r,n,a)}return!1},calculateEndDate:function(){var t=this.argumentsHelper.calculateEndDateArguments.apply(this.argumentsHelper,arguments),e=t.start_date,i=t.duration,n=t.unit,a=t.step;if(!n)return!1;var r=t.duration>=0?1:-1;i=Math.abs(1*i);var s=this;return this._dateDurationCache.getEndDate(e,i,n,a*r,function(){return s._calculateEndDate(e,i,n,a*r)})},_calculateEndDate:function(t,e,i,n){return!!i&&(n==1&&i=="minute"?this._calculateMinuteEndDate(t,e,n):n==-1&&i=="minute"?this._subtractMinuteDate(t,e,n):n==1&&i=="hour"?this._calculateHourEndDate(t,e,n):this._addInterval(t,e,i,n,null).end)},_addInterval:function(t,e,i,n,a){for(var r=0,s=t,o=!1;r<e&&(!a||!a(s));){var l=this._nextDate(s,i,n);i=="day"&&(o=o||!s.getHours()&&l.getHours())&&(l.setHours(0),l.getHours()||(o=!1));var d=new Date(l.valueOf()+1);n>0&&(d=new Date(l.valueOf()-1)),this._isWorkTime(d,i)&&!o&&r++,s=l}return{end:s,start:t,added:r}},_addHoursUntilDayEnd:function(t,e){for(var i=this.$gantt.date.add(this.$gantt.date.day_start(new Date(t)),1,"day"),n=0,a=e,r=this._getIntervalTimestamp(t,i),s=this._getWorkHours(t),o=0;o<s.length&&n<e;o++){var l=s[o];if(r.end>=l.start&&r.start<=l.end){var d=Math.max(l.start,r.start),c=Math.min(l.end,r.end),u=(c-d)/3600;u>a&&(u=a,c=d+60*a*60);var h=Math.round((c-d)/3600);n+=h,a-=h,r.start=c}}var f=i;return n===e&&(f=new Date(t.getFullYear(),t.getMonth(),t.getDate(),0,0,r.start)),{added:n,end:f}},_calculateHourEndDate:function(t,e,i){var n=new Date(t),a=0;i=i||1,e=Math.abs(1*e);var r=this._addHoursUntilDayEnd(n,e);if(a=r.added,n=r.end,d=e-a){for(var s=n;a<e;){var o=this._nextDate(s,"day",i);o.setHours(0),o.setMinutes(0),o.setSeconds(0);var l=0;if(a+(l=i>0?this.getHoursPerDay(new Date(o.valueOf()-1)):this.getHoursPerDay(new Date(o.valueOf()+1)))>=e)break;a+=l,s=o}n=s}if(a<e){var d=e-a;n=(r=this._addHoursUntilDayEnd(n,d)).end}return n},_addMinutesUntilHourEnd:function(t,e){if(t.getMinutes()===0)return{added:0,end:new Date(t)};for(var i=this.$gantt.date.add(this.$gantt.date.hour_start(new Date(t)),1,"hour"),n=0,a=e,r=this._getIntervalTimestamp(t,i),s=this._getWorkHours(t),o=0;o<s.length&&n<e;o++){var l=s[o];if(r.end>=l.start&&r.start<=l.end){var d=Math.max(l.start,r.start),c=Math.min(l.end,r.end),u=(c-d)/60;u>a&&(u=a,c=d+60*a);var h=Math.round((c-d)/60);a-=h,n+=h,r.start=c}}var f=i;return n===e&&(f=new Date(t.getFullYear(),t.getMonth(),t.getDate(),0,0,r.start)),{added:n,end:f}},_subtractMinutesUntilHourStart:function(t,e){for(var i=this.$gantt.date.hour_start(new Date(t)),n=0,a=e,r=60*i.getHours()*60+60*i.getMinutes()+i.getSeconds(),s=60*t.getHours()*60+60*t.getMinutes()+t.getSeconds(),o=this._getWorkHours(t),l=o.length-1;l>=0&&n<e;l--){var d=o[l];if(s>d.start&&r<=d.end){var c=Math.min(s,d.end),u=Math.max(r,d.start),h=(c-u)/60;h>a&&(h=a,u=c-60*a);var f=Math.abs(Math.round((c-u)/60));a-=f,n+=f,s=u}}var g=i;return n===e&&(g=new Date(t.getFullYear(),t.getMonth(),t.getDate(),0,0,s)),{added:n,end:g}},_subtractMinuteDate:function(t,e,i){var n=this.getClosestWorkTime({date:t,dir:"past",unit:"minute"}),a=0;i=i||-1,e=Math.abs(1*e),e=Math.round(e);const r=this._isMinutePrecision(n);let s=this._subtractMinutesUntilHourStart(n,e);a+=s.added,n=s.end;for(var o=0,l=[],d=0;a<e;){var c=this.$gantt.date.day_start(new Date(n)),u=!1;n.valueOf()===c.valueOf()&&(c=this.$gantt.date.add(c,-1,"day"),u=!0);var h=new Date(c.getFullYear(),c.getMonth(),c.getDate(),23,59,59,999).valueOf();h!==o&&(l=this._getWorkHours(c),d=this._getMinutesPerDay(c),o=h);var f=e-a,g=this._getTimeOfDayStamp(n,u);if(l.length&&d)if(l[l.length-1].end<=g&&f>d)a+=d,n=this.$gantt.date.add(n,-1,"day");else{for(var y=!1,v=null,b=null,_=l.length-1;_>=0;_--)if(l[_].start<g-1&&l[_].end>=g-1){y=!0,v=l[_],b=l[_-1];break}if(y)if(g===v.end&&f>=v.durationMinutes)a+=v.durationMinutes,n=this.$gantt.date.add(n,-v.durationMinutes,"minute");else if(!r&&f<=g/60-v.startMinute)a+=f,n=this.$gantt.date.add(n,-f,"minute");else if(r)f<=g/60-v.startMinute?(a+=f,n=this.$gantt.date.add(n,-f,"minute")):(a+=g/60-v.startMinute,n=b?new Date(n.getFullYear(),n.getMonth(),n.getDate(),0,0,b.end):this.$gantt.date.day_start(n));else{var m=this._getMinutesPerHour(n);m<=f?(a+=m,n=this._nextDate(n,"hour",i)):(s=this._subtractMinutesUntilHourStart(n,f),a+=s.added,n=s.end)}else if(n.getHours()===0&&n.getMinutes()===0&&n.getSeconds()===0){if((p=this._getClosestWorkTimePast(n,"hour")).valueOf()===n.valueOf()){var p=this.$gantt.date.add(n,-1,"day"),k=this._getWorkHours(p);if(k.length){var $=k[k.length-1];p.setSeconds($.durationSeconds)}}n=p}else n=this._getClosestWorkTimePast(new Date(n-1),"hour")}else n=this.$gantt.date.add(n,-1,"day")}if(a<e){var w=e-a;s=this._subtractMinutesUntilHourStart(n,w),a+=s.added,n=s.end}return n},_calculateMinuteEndDate:function(t,e,i){var n=new Date(t),a=0;i=i||1,e=Math.abs(1*e),e=Math.round(e);var r=this._addMinutesUntilHourEnd(n,e);a+=r.added,n=r.end;for(var s=0,o=[],l=0,d=this._isMinutePrecision(n);a<e;){var c=this.$gantt.date.day_start(new Date(n)).valueOf();c!==s&&(o=this._getWorkHours(n),l=this._getMinutesPerDay(n),s=c);var u=e-a,h=this._getTimeOfDayStamp(n);if(o.length&&l)if(o[0].start>=h&&u>=l){if(a+=l,u==l){n=new Date(n.getFullYear(),n.getMonth(),n.getDate(),0,0,o[o.length-1].end);break}n=this.$gantt.date.add(n,1,"day"),n=this.$gantt.date.day_start(n)}else{for(var f=!1,g=null,y=0;y<o.length;y++)if(o[y].start<=h&&o[y].end>h){f=!0,g=o[y];break}if(f)if(h===g.start&&u>=g.durationMinutes)a+=g.durationMinutes,n=this.$gantt.date.add(n,g.durationMinutes,"minute");else if(u<=g.endMinute-h/60)a+=u,n=this.$gantt.date.add(n,u,"minute");else{var v=this._getMinutesPerHour(n);v<=u?(a+=v,n=d?this.$gantt.date.add(n,v,"minute"):this._nextDate(n,"hour",i)):(a+=(r=this._addMinutesUntilHourEnd(n,u)).added,n=r.end)}else n=this._getClosestWorkTimeFuture(n,"hour")}else n=this.$gantt.date.add(this.$gantt.date.day_start(n),1,"day")}if(a<e){var b=e-a;a+=(r=this._addMinutesUntilHourEnd(n,b)).added,n=r.end}return n},getClosestWorkTime:function(){var t=this.argumentsHelper.getClosestWorkTimeArguments.apply(this.argumentsHelper,arguments);return this._getClosestWorkTime(t.date,t.unit,t.dir)},_getClosestWorkTime:function(t,e,i){var n=new Date(t);if(this._isWorkTime(n,e))return n;if(n=this.$gantt.date[e+"_start"](n),i!="any"&&i)n=i=="past"?this._getClosestWorkTimePast(n,e):this._getClosestWorkTimeFuture(n,e);else{var a=this._getClosestWorkTimeFuture(n,e),r=this._getClosestWorkTimePast(n,e);n=Math.abs(a-t)<=Math.abs(t-r)?a:r}return n},_getClosestWorkTimeFuture:function(t,e){return this._getClosestWorkTimeGeneric(t,e,1)},_getClosestWorkTimePast:function(t,e){var i=this._getClosestWorkTimeGeneric(t,e,-1);return this.$gantt.date.add(i,1,e)},_findClosestTimeInDay:function(t,e,i){var n=new Date(t),a=null,r=!1;this._getWorkHours(n).length||(n=this._getClosestWorkTime(n,"day",e<0?"past":"future"),e<0&&(n=new Date(n.valueOf()-1),r=!0),i=this._getWorkHours(n));var s=this._getTimeOfDayStamp(n);if(r&&(s=this._getTimeOfDayStamp(new Date(n.valueOf()+1),r)),e>0){for(var o=0;o<i.length;o++)if(i[o].start>=s){a=new Date(n.getFullYear(),n.getMonth(),n.getDate(),0,0,i[o].start);break}}else for(o=i.length-1;o>=0;o--){if(i[o].end<=s){a=new Date(n.getFullYear(),n.getMonth(),n.getDate(),0,0,i[o].end);break}if(i[o].end>s&&i[o].start<=s){a=new Date(n.getFullYear(),n.getMonth(),n.getDate(),0,0,s);break}}return a},_getClosestWorkMinute:function(t,e,i){var n=new Date(t),a=this._getWorkHours(n),r=this._findClosestTimeInDay(n,i,a);return r||(i>0?(n=this.calculateEndDate(n,i,e),n=this.$gantt.date.day_start(n)):(n=this.calculateEndDate(n,i,"day"),n=this.$gantt.date.day_start(n),n=this.$gantt.date.add(n,1,"day"),n=new Date(n.valueOf()-1)),a=this._getWorkHours(n),r=this._findClosestTimeInDay(n,i,a)),i<0&&(r=this.$gantt.date.add(r,-1,e)),r},_getClosestWorkTimeGeneric:function(t,e,i){if(e==="hour"||e==="minute")return this._getClosestWorkMinute(t,e,i);for(var n=this._getUnitOrder(e),a=this.units[n-1],r=t,s=0;!this._isWorkTime(r,e)&&(!a||this._isWorkTime(r,a)||(r=i>0?this._getClosestWorkTimeFuture(r,a):this._getClosestWorkTimePast(r,a),!this._isWorkTime(r,e)));){if(++s>3e3)return this.$gantt.assert(!1,"Invalid working time check"),!1;var o=r.getTimezoneOffset();r=this.$gantt.date.add(r,i,e),r=this.$gantt._correct_dst_change(r,o,i,e),this.$gantt.date[e+"_start"]&&(r=this.$gantt.date[e+"_start"](r))}return r},hasWorkTime:function(){var t=this.getConfig(),e=t.dates;for(var i in t.dates);var n=this._checkWorkHours(t.hours),a=!1;return[0,1,2,3,4,5,6].forEach((function(r){if(!a){var s=e[r];s===!0?a=n:Array.isArray(s)&&(a=this._checkWorkHours(s))}}).bind(this)),a},_checkWorkHours:function(t){if(t.length===0)return!1;for(var e=!1,i=0;i<t.length;i+=2)t[i]!==t[i+1]&&(e=!0);return e},_isMinutePrecision:function(t){let e=!1;return this._getWorkHours(t).forEach(function(i){(i.startMinute%60||i.endMinute%60)&&(e=!0)}),e}};const Mt={isLegacyResourceCalendarFormat:function(t){if(!t)return!1;for(var e in t)if(t[e]&&typeof t[e]=="object")return!0;return!1},getResourceProperty:function(t){var e=t.resource_calendars,i=t.resource_property;if(this.isLegacyResourceCalendarFormat(e))for(var n in t){i=n;break}return i},getCalendarIdFromLegacyConfig:function(t,e){if(e)for(var i in e){var n=e[i];if(t[i]){var a=n[t[i]];if(a)return a}}return null}},Wn=(jt={},{getCalendarIdFromMultipleResources:function(t,e){var i=function(a){return a.map(function(r){return r&&r.resource_id?r.resource_id:r}).sort().join("-")}(t);if(t.length){if(t.length===1)return e.getResourceCalendar(i).id;if(jt[i])return jt[i].id;var n=function(a,r){return r.mergeCalendars(a.map(function(s){var o=s&&s.resource_id?s.resource_id:s;return r.getResourceCalendar(o)}))}(t,e);return jt[i]=n,e.addCalendar(n)}return null}});var jt;function ki(t){this.$gantt=t,this._calendars={},this._legacyConfig=void 0,this.$gantt.attachEvent("onGanttReady",(function(){this.$gantt.config.resource_calendars&&(this._isLegacyConfig=Mt.isLegacyResourceCalendarFormat(this.$gantt.config.resource_calendars))}).bind(this)),this.$gantt.attachEvent("onBeforeGanttReady",(function(){this.createDefaultCalendars()}).bind(this)),this.$gantt.attachEvent("onBeforeGanttRender",(function(){this.createDefaultCalendars()}).bind(this))}function ke(t,e){this.argumentsHelper=e,this.$gantt=t}function yi(t){this.$gantt=t.$gantt,this.argumentsHelper=mi(this.$gantt),this.calendarManager=t,this.$disabledCalendar=new ke(this.$gantt,this.argumentsHelper)}ki.prototype={_calendars:{},_convertWorkTimeSettings:function(t){var e=t.days;if(e&&!t.dates){t.dates=t.dates||{};for(var i=0;i<e.length;i++)t.dates[i]=e[i],e[i]instanceof Array||(t.dates[i]=!!e[i])}return delete t.days,t},mergeCalendars:function(){var t=[],e=arguments;if(Array.isArray(e[0]))t=e[0].slice();else for(var i=0;i<arguments.length;i++)t.push(arguments[i]);var n,a=new vi;return t.forEach((function(r){n=n?this._createCalendarFromConfig(a.merge(n,r)):r}).bind(this)),this.createCalendar(n)},_createCalendarFromConfig:function(t){var e=new ve(this.$gantt,mi(this.$gantt));e.id=String(st());var i=this._convertWorkTimeSettings(t);if(i.customWeeks)for(var n in i.customWeeks)i.customWeeks[n]=this._convertWorkTimeSettings(i.customWeeks[n]);return e._setConfig(i),e},createCalendar:function(t){var e;return t||(t={}),N(e=t.getConfig?q(t.getConfig()):t.worktime?q(t.worktime):q(t),q(this.defaults.fulltime.worktime)),this._createCalendarFromConfig(e)},getCalendar:function(t){t=t||"global";var e=this._calendars[t];return e||(this.createDefaultCalendars(),e=this._calendars[t]),e},getCalendars:function(){var t=[];for(var e in this._calendars)t.push(this.getCalendar(e));return t},_getOwnCalendar:function(t){var e=this.$gantt.config;if(t[e.calendar_property])return this.getCalendar(t[e.calendar_property]);if(e.resource_calendars){var i;if(i=this._legacyConfig===!1?e.resource_property:Mt.getResourceProperty(e),Array.isArray(t[i]))e.dynamic_resource_calendars?n=Wn.getCalendarIdFromMultipleResources(t[i],this):a=this.getResourceCalendar(t[i]);else if(this._legacyConfig===void 0&&(this._legacyConfig=Mt.isLegacyResourceCalendarFormat(e.resource_calendars)),this._legacyConfig)var n=Mt.getCalendarIdFromLegacyConfig(t,e.resource_calendars);else if(i&&t[i]&&e.resource_calendars[t[i]])var a=this.getResourceCalendar(t[i]);if(n&&(a=this.getCalendar(n)),a)return a}return null},getResourceCalendar:function(t){if(t==null)return this.getCalendar();var e=null;e=typeof t=="number"||typeof t=="string"?t:t.id||t.key;var i=this.$gantt.config,n=i.resource_calendars,a=null;if(Array.isArray(t)&&t.length===1&&(e=typeof t[0]=="object"?t[0].resource_id:t[0]),n){if(this._legacyConfig===void 0&&(this._legacyConfig=Mt.isLegacyResourceCalendarFormat(i.resource_calendars)),this._legacyConfig){for(var r in n)if(n[r][e]){a=n[r][e];break}}else a=n[e];if(a)return this.getCalendar(a)}return this.getCalendar()},getTaskCalendar:function(t){var e,i=this.$gantt;if(t==null)return this.getCalendar();if(!(e=typeof t!="number"&&typeof t!="string"||!i.isTaskExists(t)?t:i.getTask(t)))return this.getCalendar();var n=this._getOwnCalendar(e),a=!!i.getState().group_mode;if(!n&&i.config.inherit_calendar&&i.isTaskExists(e.parent)){for(var r=e;i.isTaskExists(r.parent)&&(r=i.getTask(r.parent),!i.isSummaryTask(r)||!(n=this._getOwnCalendar(r))););a&&!n&&t.$effective_calendar&&(n=this.getCalendar(t.$effective_calendar))}return n||this.getCalendar()},addCalendar:function(t){if(!this.isCalendar(t)){var e=t.id;(t=this.createCalendar(t)).id=e}if(t._tryChangeCalendarSettings(function(){})){var i=this.$gantt.config;return t.id=t.id||st(),this._calendars[t.id]=t,i.worktimes||(i.worktimes={}),i.worktimes[t.id]=t.getConfig(),t.id}return this.$gantt.callEvent("onCalendarError",[{message:"Invalid calendar settings, no worktime available"},t]),null},deleteCalendar:function(t){var e=this.$gantt.config;return!!t&&!!this._calendars[t]&&(delete this._calendars[t],e.worktimes&&e.worktimes[t]&&delete e.worktimes[t],!0)},restoreConfigCalendars:function(t){for(var e in t)if(!this._calendars[e]){var i=t[e],n=this.createCalendar(i);n.id=e,this.addCalendar(n)}},defaults:{global:{id:"global",worktime:{hours:[8,12,13,17],days:[0,1,1,1,1,1,0]}},fulltime:{id:"fulltime",worktime:{hours:[0,24],days:[1,1,1,1,1,1,1]}}},createDefaultCalendars:function(){var t=this.$gantt.config;this.restoreConfigCalendars(this.defaults),this.restoreConfigCalendars(t.worktimes)},isCalendar:function(t){return[t.isWorkTime,t.setWorkTime,t.getWorkHours,t.unsetWorkTime,t.getClosestWorkTime,t.calculateDuration,t.hasDuration,t.calculateEndDate].every(function(e){return e instanceof Function})}},ke.prototype={getWorkHours:function(){return[0,24]},setWorkTime:function(){return!0},unsetWorkTime:function(){return!0},isWorkTime:function(){return!0},getClosestWorkTime:function(t){return this.argumentsHelper.getClosestWorkTimeArguments.apply(this.argumentsHelper,arguments).date},calculateDuration:function(){var t=this.argumentsHelper.getDurationArguments.apply(this.argumentsHelper,arguments),e=t.start_date,i=t.end_date,n=t.unit,a=t.step;return this._calculateDuration(e,i,n,a)},_calculateDuration:function(t,e,i,n){var a=this.$gantt.date,r={week:6048e5,day:864e5,hour:36e5,minute:6e4},s=0;if(r[i])s=Math.round((e-t)/(n*r[i]));else{for(var o=new Date(t),l=new Date(e);o.valueOf()<l.valueOf();)s+=1,o=a.add(o,n,i);o.valueOf()!=e.valueOf()&&(s+=(l-o)/(a.add(o,n,i)-o))}return Math.round(s)},hasDuration:function(){var t=this.argumentsHelper.getDurationArguments.apply(this.argumentsHelper,arguments),e=t.start_date,i=t.end_date;return!!t.unit&&(e=new Date(e),i=new Date(i),e.valueOf()<i.valueOf())},hasWorkTime:function(){return!0},equals:function(t){return t instanceof ke},calculateEndDate:function(){var t=this.argumentsHelper.calculateEndDateArguments.apply(this.argumentsHelper,arguments),e=t.start_date,i=t.duration,n=t.unit,a=t.step;return this.$gantt.date.add(e,a*i,n)}},yi.prototype={_getCalendar:function(t){var e;if(this.$gantt.config.work_time){var i=this.calendarManager;t.task?e=i.getTaskCalendar(t.task):t.id?e=i.getTaskCalendar(t):t.calendar&&(e=t.calendar),e||(e=i.getTaskCalendar())}else e=this.$disabledCalendar;return e},getWorkHours:function(t){return t=this.argumentsHelper.getWorkHoursArguments.apply(this.argumentsHelper,arguments),this._getCalendar(t).getWorkHours(t.date)},setWorkTime:function(t,e){return t=this.argumentsHelper.setWorkTimeArguments.apply(this.argumentsHelper,arguments),e||(e=this.calendarManager.getCalendar()),e.setWorkTime(t)},unsetWorkTime:function(t,e){return t=this.argumentsHelper.unsetWorkTimeArguments.apply(this.argumentsHelper,arguments),e||(e=this.calendarManager.getCalendar()),e.unsetWorkTime(t)},isWorkTime:function(t,e,i,n){var a=this.argumentsHelper.isWorkTimeArguments.apply(this.argumentsHelper,arguments);return(n=this._getCalendar(a)).isWorkTime(a)},getClosestWorkTime:function(t){return t=this.argumentsHelper.getClosestWorkTimeArguments.apply(this.argumentsHelper,arguments),this._getCalendar(t).getClosestWorkTime(t)},calculateDuration:function(){var t=this.argumentsHelper.getDurationArguments.apply(this.argumentsHelper,arguments);return this._getCalendar(t).calculateDuration(t)},hasDuration:function(){var t=this.argumentsHelper.hasDurationArguments.apply(this.argumentsHelper,arguments);return this._getCalendar(t).hasDuration(t)},calculateEndDate:function(t){return t=this.argumentsHelper.calculateEndDateArguments.apply(this.argumentsHelper,arguments),this._getCalendar(t).calculateEndDate(t)}};const Fn={create:function(t,e){return{getWorkHours:function(i){return e.getWorkHours(i)},setWorkTime:function(i){return e.setWorkTime(i)},unsetWorkTime:function(i){e.unsetWorkTime(i)},isWorkTime:function(i,n,a){return e.isWorkTime(i,n,a)},getClosestWorkTime:function(i){return e.getClosestWorkTime(i)},calculateDuration:function(i,n,a){return e.calculateDuration(i,n,a)},_hasDuration:function(i,n,a){return e.hasDuration(i,n,a)},calculateEndDate:function(i,n,a,r){return e.calculateEndDate(i,n,a,r)},mergeCalendars:R(t.mergeCalendars,t),createCalendar:R(t.createCalendar,t),addCalendar:R(t.addCalendar,t),getCalendar:R(t.getCalendar,t),getCalendars:R(t.getCalendars,t),getResourceCalendar:R(t.getResourceCalendar,t),getTaskCalendar:R(t.getTaskCalendar,t),deleteCalendar:R(t.deleteCalendar,t)}}};function Vn(t){t.isUnscheduledTask=function(s){return t.assert(s&&s instanceof Object,"Invalid argument <b>task</b>="+s+" of gantt.isUnscheduledTask. Task object was expected"),!!s.unscheduled||!s.start_date},t._isAllowedUnscheduledTask=function(s){return!(!s.unscheduled||!t.config.show_unscheduled)},t._isTaskInTimelineLimits=function(s){var o=s.start_date?s.start_date.valueOf():null,l=s.end_date?s.end_date.valueOf():null;return!!(o&&l&&o<=this._max_date.valueOf()&&l>=this._min_date.valueOf())},t.isTaskVisible=function(s){if(!this.isTaskExists(s))return!1;var o=this.getTask(s);return!(!this._isAllowedUnscheduledTask(o)&&!this._isTaskInTimelineLimits(o))&&this.getGlobalTaskIndex(s)>=0},t._getProjectEnd=function(){if(t.config.project_end)return t.config.project_end;var s=t.getTaskByTime();return(s=s.sort(function(o,l){return+o.end_date>+l.end_date?1:-1})).length?s[s.length-1].end_date:null},t._getProjectStart=function(){if(t.config.project_start)return t.config.project_start;if(t.config.start_date)return t.config.start_date;if(t.getState().min_date)return t.getState().min_date;var s=t.getTaskByTime();return(s=s.sort(function(o,l){return+o.start_date>+l.start_date?1:-1})).length?s[0].start_date:null};var e=function(s,o){var l=!!(o&&o!=t.config.root_id&&t.isTaskExists(o))&&t.getTask(o),d=null;if(l)if(t.config.schedule_from_end)d=t.calculateEndDate({start_date:l.end_date,duration:-t.config.duration_step,task:s});else{if(!l.start_date)return e(l,t.getParent(l));d=l.start_date}else if(t.config.schedule_from_end)d=t.calculateEndDate({start_date:t._getProjectEnd(),duration:-t.config.duration_step,task:s});else{const c=t.getTaskByIndex(0),u=t.config.start_date||t.getState().min_date;d=c?c.start_date?c.start_date:c.end_date?t.calculateEndDate({start_date:c.end_date,duration:-t.config.duration_step,task:s}):u:u}return t.assert(d,"Invalid dates"),new Date(d)};t._set_default_task_timing=function(s){s.start_date=s.start_date||e(s,t.getParent(s)),s.duration=s.duration||t.config.duration_step,s.end_date=s.end_date||t.calculateEndDate(s)},t.createTask=function(s,o,l){if(s=s||{},t.defined(s.id)||(s.id=t.uid()),s.start_date||(s.start_date=e(s,o)),s.text===void 0&&(s.text=t.locale.labels.new_task),s.duration===void 0&&(s.duration=1),this.isTaskExists(o)){this.setParent(s,o,!0);var d=this.getTask(o);d.$open=!0,this.config.details_on_create||this.callEvent("onAfterParentExpand",[o,d])}return this.callEvent("onTaskCreated",[s])?(this.config.details_on_create?(t.isTaskExists(s.id)?t.getTask(s.id).$index!=s.$index&&(s.start_date&&typeof s.start_date=="string"&&(s.start_date=this.date.parseDate(s.start_date,"parse_date")),s.end_date&&typeof s.end_date=="string"&&(s.end_date=this.date.parseDate(s.end_date,"parse_date")),this.$data.tasksStore.updateItem(s.id,s)):(s.$new=!0,this.silent(function(){t.$data.tasksStore.addItem(s,l)})),this.selectTask(s.id),this.refreshData(),this.showLightbox(s.id)):this.addTask(s,o,l)&&(this.showTask(s.id),this.selectTask(s.id)),s.id):null},t._update_flags=function(s,o){var l=t.$data.tasksStore;s===void 0?(this._lightbox_id=null,l.silent(function(){l.unselect()}),this.getSelectedTasks&&this._multiselect.reset(),this._tasks_dnd&&this._tasks_dnd.drag&&(this._tasks_dnd.drag.id=null)):(this._lightbox_id==s&&(this._lightbox_id=o),l.getSelectedId()==s&&l.silent(function(){l.unselect(s),l.select(o)}),this._tasks_dnd&&this._tasks_dnd.drag&&this._tasks_dnd.drag.id==s&&(this._tasks_dnd.drag.id=o))};var i=function(s,o){var l=t.getTaskType(s.type),d={type:l,$no_start:!1,$no_end:!1,scheduled_summary:!1};return l===t.config.types.project&&s.auto_scheduling===!1&&(d.scheduled_summary=!0),o||l!=s.$rendered_type?(l==t.config.types.project?d.$no_end=d.$no_start=!0:l!=t.config.types.milestone&&(d.$no_end=!(s.end_date||s.duration),d.$no_start=!s.start_date,t._isAllowedUnscheduledTask(s)&&(d.$no_end=d.$no_start=!1)),d):(d.$no_start=s.$no_start,d.$no_end=s.$no_end,d)};function n(s){s.$effective_calendar=t.getTaskCalendar(s).id,s.start_date=t.getClosestWorkTime({dir:"future",date:s.start_date,unit:t.config.duration_unit,task:s}),s.end_date=t.calculateEndDate(s)}function a(s,o,l,d){const c={start:"start_date",end:"end_date"},u={start:"$auto_start_date",end:"$auto_end_date"};let h;h=s.type===t.config.types.project&&s.auto_scheduling===!1?u:c,o.$no_start&&(s[h.start]=l?new Date(l):e(s,this.getParent(s))),o.$no_end&&(s[h.end]=d?new Date(d):this.calculateEndDate({start_date:s[h.start],duration:this.config.duration_step,task:s})),(o.$no_start||o.$no_end)&&this._init_task_timing(s)}function r(s){var o=null,l=null,d=s!==void 0?s:t.config.root_id,c=[];return t.eachTask(function(u){const h=t.getTaskType(u.type)==t.config.types.project&&u.auto_scheduling===!1;t.getTaskType(u.type)==t.config.types.project&&!h||t.isUnscheduledTask(u)||(u.rollup&&c.push(u.id),!u.start_date||u.$no_start&&!h||o&&!(o>u.start_date.valueOf())||(o=u.start_date.valueOf()),!u.end_date||u.$no_end&&!h||l&&!(l<u.end_date.valueOf())||(l=u.end_date.valueOf()))},d),{start_date:o?new Date(o):null,end_date:l?new Date(l):null,rollup:c}}t._init_task_timing=function(s){var o=i(s,!0),l=s.$rendered_type!=o.type,d=o.type;l&&(s.$no_start=o.$no_start,s.$no_end=o.$no_end,s.$rendered_type=o.type),l&&d!=this.config.types.milestone&&d==this.config.types.project&&(this._set_default_task_timing(s),s.$calculate_duration=!1),d==this.config.types.milestone&&(s.end_date=s.start_date),s.start_date&&s.end_date&&s.$calculate_duration!==!1&&(s.duration=this.calculateDuration(s)),s.$calculate_duration||(s.$calculate_duration=!0),s.end_date||(s.end_date=s.start_date),s.duration=s.duration||0,this.config.min_duration===0&&s.duration===0&&(s.$no_end=!1);var c=this.getTaskCalendar(s);s.$effective_calendar&&s.$effective_calendar!==c.id&&(n(s),this.config.inherit_calendar&&this.isSummaryTask(s)&&this.eachTask(function(u){n(u)},s.id)),s.$effective_calendar=c.id},t.isSummaryTask=function(s){t.assert(s&&s instanceof Object,"Invalid argument <b>task</b>="+s+" of gantt.isSummaryTask. Task object was expected");var o=i(s);return!(!o.$no_end&&!o.$no_start)},t.resetProjectDates=function(s){var o=i(s);if(o.$no_end||o.$no_start){var l=r(s.id);a.call(this,s,o,l.start_date,l.end_date),s.$rollup=l.rollup}},t.getSubtaskDuration=function(s){var o=0,l=s!==void 0?s:t.config.root_id;return this.eachTask(function(d){this.getTaskType(d.type)==t.config.types.project||this.isUnscheduledTask(d)||(o+=d.duration)},l),o},t.getSubtaskDates=function(s){var o=r(s);return{start_date:o.start_date,end_date:o.end_date}},t._update_parents=function(s,o,l){if(s){var d=this.getTask(s);d.rollup&&(l=!0);var c=this.getParent(d),u=i(d),h=!0;if(l||d.start_date&&d.end_date&&(u.$no_start||u.$no_end)){const y=d.$auto_start_date?"$auto_start_date":"start_date",v=d.$auto_end_date?"$auto_end_date":"end_date";var f=d[y].valueOf(),g=d[v].valueOf();t.resetProjectDates(d),l||f!=d[y].valueOf()||g!=d[v].valueOf()||(h=!1),h&&!o&&this.refreshTask(d.id,!0),u.scheduled_summary&&(h=!0)}h&&c&&this.isTaskExists(c)&&this._update_parents(c,o,l)}},t.roundDate=function(s){var o=t.getScale();Z(s)&&(s={date:s,unit:o?o.unit:t.config.duration_unit,step:o?o.step:t.config.duration_step});var l,d,c,u=s.date,h=s.step,f=s.unit;if(!o)return u;if(f==o.unit&&h==o.step&&+u>=+o.min_date&&+u<=+o.max_date)c=Math.floor(t.columnIndexByDate(u)),o.trace_x[c]||(c-=1,o.rtl&&(c=0)),d=new Date(o.trace_x[c]),l=t.date.add(d,h,f);else{for(c=Math.floor(t.columnIndexByDate(u)),l=t.date[f+"_start"](new Date(o.min_date)),o.trace_x[c]&&(l=t.date[f+"_start"](o.trace_x[c]));+l<+u;){var g=(l=t.date[f+"_start"](t.date.add(l,h,f))).getTimezoneOffset();l=t._correct_dst_change(l,g,l,f),t.date[f+"_start"]&&(l=t.date[f+"_start"](l))}d=t.date.add(l,-1*h,f)}return s.dir&&s.dir=="future"?l:s.dir&&s.dir=="past"||Math.abs(u-d)<Math.abs(l-u)?d:l},t.correctTaskWorkTime=function(s){t.config.work_time&&t.config.correct_work_time&&(this.isWorkTime(s.start_date,void 0,s)?this.isWorkTime(new Date(+s.end_date-1),void 0,s)||(s.end_date=this.calculateEndDate(s)):(s.start_date=this.getClosestWorkTime({date:s.start_date,dir:"future",task:s}),s.end_date=this.calculateEndDate(s)))},t.attachEvent("onBeforeTaskUpdate",function(s,o){return t._init_task_timing(o),!0}),t.attachEvent("onBeforeTaskAdd",function(s,o){return t._init_task_timing(o),!0}),t.attachEvent("onAfterTaskMove",function(s,o,l){return t._init_task_timing(t.getTask(s)),!0})}function Ve(t,e){var i,n=t.config.container_resize_timeout||20;let a=Ue(t);if(t.config.container_resize_method=="timeout")l();else try{t.event(e,"resize",function(){if(t.$scrollbarRepaint)t.$scrollbarRepaint=null;else{let d=Ue(t);if(a.x==d.x&&a.y==d.y)return;a=d,r()}})}catch{l()}function r(){clearTimeout(i),i=setTimeout(function(){t.$destroyed||t.render()},n)}var s=t.$root.offsetHeight,o=t.$root.offsetWidth;function l(){t.$root.offsetHeight==s&&t.$root.offsetWidth==o||r(),s=t.$root.offsetHeight,o=t.$root.offsetWidth,setTimeout(l,n)}}function Ue(t){return{x:t.$root.offsetWidth,y:t.$root.offsetHeight}}function Un(t){t.assert=function(r){return function(s,o){s||r.config.show_errors&&r.callEvent("onError",[o])!==!1&&(r.message?r.message({type:"error",text:o,expire:-1}):console.log(o))}}(t);var e="Invalid value of the first argument of `gantt.init`. Supported values: HTMLElement, String (element id).This error means that either invalid object is passed into `gantt.init` or that the element with the specified ID doesn't exist on the page when `gantt.init` is called.";function i(r){if(!r||typeof r=="string"&&document.getElementById(r)||function(s){try{s.cloneNode(!1)}catch{return!1}return!0}(r))return!0;throw t.assert(!1,e),new Error(e)}t.init=function(r,s,o){t.env.isNode?r=null:i(r),s&&o&&(this.config.start_date=this._min_date=new Date(s),this.config.end_date=this._max_date=new Date(o)),this.date.init(),this.init=function(l){t.env.isNode?l=null:i(l),this.$container&&this.$container.parentNode&&(this.$container.parentNode.removeChild(this.$container),this.$container=null),this.$layout&&this.$layout.clear(),this._reinit(l)},this._reinit(r)},t._quickRefresh=function(r){for(var s=this._getDatastores.call(this),o=0;o<s.length;o++)s[o]._quick_refresh=!0;for(r(),o=0;o<s.length;o++)s[o]._quick_refresh=!1};var n=(function(){this._clearTaskLayers&&this._clearTaskLayers(),this._clearLinkLayers&&this._clearLinkLayers(),this.$layout&&(this.$layout.destructor(),this.$layout=null,this.$ui.reset())}).bind(t),a=(function(){W(t)||(this.$root.innerHTML="",this.$root.gantt=this,he(this),this.config.layout.id="main",this.$layout=this.$ui.createView("layout",this.$root,this.config.layout),this.$layout.attachEvent("onBeforeResize",function(){for(var r=t.$services.getService("datastores"),s=0;s<r.length;s++)t.getDatastore(r[s]).filter(),t.$data.tasksStore._skipTaskRecalculation?t.$data.tasksStore._skipTaskRecalculation!="lightbox"&&(t.$data.tasksStore._skipTaskRecalculation=!1):t.getDatastore(r[s]).callEvent("onBeforeRefreshAll",[])}),this.$layout.attachEvent("onResize",function(){t._quickRefresh(function(){t.refreshData()})}),this.callEvent("onGanttLayoutReady",[]),this.$layout.render(),this.$container=this.$layout.$container.firstChild,function(r){window.getComputedStyle(r.$root).getPropertyValue("position")=="static"&&(r.$root.style.position="relative");var s=document.createElement("iframe");s.className="gantt_container_resize_watcher",s.tabIndex=-1,r.config.wai_aria_attributes&&(s.setAttribute("role","none"),s.setAttribute("aria-hidden",!0)),(window.Sfdc||window.$A||window.Aura)&&(r.config.container_resize_method="timeout"),r.$root.appendChild(s),s.contentWindow?Ve(r,s.contentWindow):(r.$root.removeChild(s),Ve(r,window))}(this))}).bind(t);t.resetLayout=function(){n(),a(),this.render()},t._reinit=function(r){this.callEvent("onBeforeGanttReady",[]),this._update_flags(),this.$services.getService("templateLoader").initTemplates(this),n(),this.$root=null,r&&(this.$root=$e(r),a(),this.$mouseEvents.reset(this.$root),function(s){s.$container&&!s.config.autosize&&s.$root.offsetHeight<50&&console.warn(`The Gantt container has a small height, so you cannot see its content. If it is not intended, you need to set the 'height' style rule to the container:
https://docs.dhtmlx.com/gantt/faq.html#theganttchartisntrenderedcorrectly`)}(t)),this.callEvent("onTemplatesReady",[]),this.callEvent("onGanttReady",[]),this.render()},t.$click={buttons:{edit:function(r){t.isReadonly(t.getTask(r))||t.showLightbox(r)},delete:function(r){var s=t.getTask(r);if(!t.isReadonly(s)){var o=t.locale.labels.confirm_deleting,l=t.locale.labels.confirm_deleting_title;t._simple_confirm(o,l,function(){t.isTaskExists(r)&&(s.$new?(t.$data.tasksStore._skipTaskRecalculation="lightbox",t.silent(function(){t.deleteTask(r,!0)}),t.$data.tasksStore._skipTaskRecalculation=!1,t.refreshData()):(t.$data.tasksStore._skipTaskRecalculation=!0,t.deleteTask(r))),t.hideLightbox()})}}}},t.render=function(){var r;if(this.callEvent("onBeforeGanttRender",[]),!W(t)){!this.config.sort&&this._sort&&(this._sort=void 0),this.$root&&(this.config.rtl?(this.$root.classList.add("gantt_rtl"),this.$root.firstChild.classList.add("gantt_rtl")):(this.$root.classList.remove("gantt_rtl"),this.$root.firstChild.classList.remove("gantt_rtl")));var s=this.getScrollState(),o=s?s.x:0;this._getHorizontalScrollbar()&&(o=this._getHorizontalScrollbar().$config.codeScrollLeft||o||0),r=null,o&&(r=t.dateFromPos(o+this.config.task_scroll_offset))}if(he(this),W(t))t.refreshData();else{this.$layout.$config.autosize=this.config.autosize;var l=this.config.preserve_scroll;if(this.config.preserve_scroll=!1,this.$layout.resize(),this.config.preserve_scroll=l,this.config.preserve_scroll&&s){if(o||s.y){var d=t.getScrollState();if(+r!=+t.dateFromPos(d.x)||d.y!=s.y){o=null;var c=null;r&&(o=Math.max(t.posFromDate(r)-t.config.task_scroll_offset,0)),s.y&&(c=s.y),t.scrollTo(o,c)}}this.$layout.getScrollbarsInfo().forEach(u=>{const h=t.$ui.getView(u.id),f=t.utils.dom.isChildOf(h.$view,t.$container);u.boundViews.forEach(g=>{const y=t.$ui.getView(g);u.y&&u.y!=s.y&&y&&!f&&y.scrollTo(void 0,0)})})}}this.callEvent("onGanttRender",[])},t.setSizes=t.render,t.getTaskRowNode=function(r){for(var s=this.$grid_data.childNodes,o=this.config.task_attribute,l=0;l<s.length;l++)if(s[l].getAttribute&&s[l].getAttribute(o)==r)return s[l];return null},t.changeLightboxType=function(r){if(this.getLightboxType()==r)return!0;t._silent_redraw_lightbox(r)},t._get_link_type=function(r,s){var o=null;return r&&s?o=t.config.links.start_to_start:!r&&s?o=t.config.links.finish_to_start:r||s?r&&!s&&(o=t.config.links.start_to_finish):o=t.config.links.finish_to_finish,o},t.isLinkAllowed=function(r,s,o,l){var d=null;if(!(d=typeof r=="object"?r:{source:r,target:s,type:this._get_link_type(o,l)})||!(d.source&&d.target&&d.type)||d.source==d.target)return!1;var c=!0;return this.checkEvent("onLinkValidation")&&(c=this.callEvent("onLinkValidation",[d])),c},t._correct_dst_change=function(r,s,o,l){var d=Vt(l)*o;if(d>3600&&d<86400){var c=r.getTimezoneOffset()-s;c&&(r=t.date.add(r,c,"minute"))}return r},t.isSplitTask=function(r){return t.assert(r&&r instanceof Object,"Invalid argument <b>task</b>="+r+" of gantt.isSplitTask. Task object was expected"),this.$data.tasksStore._isSplitItem(r)},t._is_icon_open_click=function(r){if(!r)return!1;var s=r.target||r.srcElement;if(!s||!s.className)return!1;var o=X(s);return o.indexOf("gantt_tree_icon")!==-1&&(o.indexOf("gantt_close")!==-1||o.indexOf("gantt_open")!==-1)}}const qn={date:{month_full:["كانون الثاني","شباط","آذار","نيسان","أيار","حزيران","تموز","آب","أيلول","تشرين الأول","تشرين الثاني","كانون الأول"],month_short:["يناير","فبراير","مارس","أبريل","مايو","يونيو","يوليو","أغسطس","سبتمبر","أكتوبر","نوفمبر","ديسمبر"],day_full:["الأحد","الأثنين","ألثلاثاء","الأربعاء","ألحميس","ألجمعة","السبت"],day_short:["احد","اثنين","ثلاثاء","اربعاء","خميس","جمعة","سبت"]},labels:{new_task:"مهمة جديد",icon_save:"اخزن",icon_cancel:"الغاء",icon_details:"تفاصيل",icon_edit:"تحرير",icon_delete:"حذف",confirm_closing:"التغييرات سوف تضيع, هل انت متأكد؟",confirm_deleting:"الحدث سيتم حذفها نهائيا ، هل أنت متأكد؟",section_description:"الوصف",section_time:"الفترة الزمنية",section_type:"Type",section_deadline:"Deadline",section_baselines:"Baselines",column_wbs:"WBS",column_text:"Task name",column_start_date:"Start time",column_duration:"Duration",column_add:"",link:"Link",confirm_link_deleting:"will be deleted",link_start:" (start)",link_end:" (end)",type_task:"Task",type_project:"Project",type_milestone:"Milestone",minutes:"Minutes",hours:"Hours",days:"Days",weeks:"Week",months:"Months",years:"Years",message_ok:"OK",message_cancel:"الغاء",section_constraint:"Constraint",constraint_type:"Constraint type",constraint_date:"Constraint date",asap:"As Soon As Possible",alap:"As Late As Possible",snet:"Start No Earlier Than",snlt:"Start No Later Than",fnet:"Finish No Earlier Than",fnlt:"Finish No Later Than",mso:"Must Start On",mfo:"Must Finish On",resources_filter_placeholder:"type to filter",resources_filter_label:"hide empty",empty_state_text_link:"Click here",empty_state_text_description:"to create your first task",baselines_section_placeholder:"Start adding a new baseline",baselines_add_button:"Add Baseline",baselines_remove_button:"Remove",baselines_remove_all_button:"Remove All",deadline_enable_button:"Set",deadline_disable_button:"Remove"}},Gn={date:{month_full:["Студзень","Люты","Сакавік","Красавік","Maй","Чэрвень","Ліпень","Жнівень","Верасень","Кастрычнік","Лістапад","Снежань"],month_short:["Студз","Лют","Сак","Крас","Maй","Чэр","Ліп","Жнів","Вер","Каст","Ліст","Снеж"],day_full:["Нядзеля","Панядзелак","Аўторак","Серада","Чацвер","Пятніца","Субота"],day_short:["Нд","Пн","Аўт","Ср","Чцв","Пт","Сб"]},labels:{new_task:"Новае заданне",icon_save:"Захаваць",icon_cancel:"Адмяніць",icon_details:"Дэталі",icon_edit:"Змяніць",icon_delete:"Выдаліць",confirm_closing:"",confirm_deleting:"Падзея будзе выдалена незваротна, працягнуць?",section_description:"Апісанне",section_time:"Перыяд часу",section_type:"Тып",section_deadline:"Deadline",section_baselines:"Baselines",column_wbs:"ІСР",column_text:"Задача",column_start_date:"Пачатак",column_duration:"Працяг",column_add:"",link:"Сувязь",confirm_link_deleting:"будзе выдалена",link_start:"(пачатак)",link_end:"(канец)",type_task:"Task",type_project:"Project",type_milestone:"Milestone",minutes:"Хвiлiна",hours:"Гадзiна",days:"Дзень",weeks:"Тыдзень",months:"Месяц",years:"Год",message_ok:"OK",message_cancel:"Адмяніць",section_constraint:"Constraint",constraint_type:"Constraint type",constraint_date:"Constraint date",asap:"As Soon As Possible",alap:"As Late As Possible",snet:"Start No Earlier Than",snlt:"Start No Later Than",fnet:"Finish No Earlier Than",fnlt:"Finish No Later Than",mso:"Must Start On",mfo:"Must Finish On",resources_filter_placeholder:"type to filter",resources_filter_label:"hide empty",empty_state_text_link:"Click here",empty_state_text_description:"to create your first task",baselines_section_placeholder:"Start adding a new baseline",baselines_add_button:"Add Baseline",baselines_remove_button:"Remove",baselines_remove_all_button:"Remove All",deadline_enable_button:"Set",deadline_disable_button:"Remove"}},Yn={date:{month_full:["Gener","Febrer","Març","Abril","Maig","Juny","Juliol","Agost","Setembre","Octubre","Novembre","Desembre"],month_short:["Gen","Feb","Mar","Abr","Mai","Jun","Jul","Ago","Set","Oct","Nov","Des"],day_full:["Diumenge","Dilluns","Dimarts","Dimecres","Dijous","Divendres","Dissabte"],day_short:["Dg","Dl","Dm","Dc","Dj","Dv","Ds"]},labels:{new_task:"Nova tasca",icon_save:"Guardar",icon_cancel:"Cancel·lar",icon_details:"Detalls",icon_edit:"Editar",icon_delete:"Esborrar",confirm_closing:"",confirm_deleting:"L'esdeveniment s'esborrarà definitivament, continuar ?",section_description:"Descripció",section_time:"Periode de temps",section_type:"Type",section_deadline:"Deadline",section_baselines:"Baselines",column_wbs:"WBS",column_text:"Task name",column_start_date:"Start time",column_duration:"Duration",column_add:"",link:"Link",confirm_link_deleting:"will be deleted",link_start:" (start)",link_end:" (end)",type_task:"Task",type_project:"Project",type_milestone:"Milestone",minutes:"Minutes",hours:"Hours",days:"Days",weeks:"Week",months:"Months",years:"Years",message_ok:"OK",message_cancel:"Cancel·lar",section_constraint:"Constraint",constraint_type:"Constraint type",constraint_date:"Constraint date",asap:"As Soon As Possible",alap:"As Late As Possible",snet:"Start No Earlier Than",snlt:"Start No Later Than",fnet:"Finish No Earlier Than",fnlt:"Finish No Later Than",mso:"Must Start On",mfo:"Must Finish On",resources_filter_placeholder:"type to filter",resources_filter_label:"hide empty",empty_state_text_link:"Click here",empty_state_text_description:"to create your first task",baselines_section_placeholder:"Start adding a new baseline",baselines_add_button:"Add Baseline",baselines_remove_button:"Remove",baselines_remove_all_button:"Remove All",deadline_enable_button:"Set",deadline_disable_button:"Remove"}},Jn={date:{month_full:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],month_short:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],day_full:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"],day_short:["日","一","二","三","四","五","六"]},labels:{new_task:"新任務",icon_save:"保存",icon_cancel:"关闭",icon_details:"详细",icon_edit:"编辑",icon_delete:"删除",confirm_closing:"请确认是否撤销修改!",confirm_deleting:"是否删除日程?",section_description:"描述",section_time:"时间范围",section_type:"类型",section_deadline:"Deadline",section_baselines:"Baselines",column_wbs:"工作分解结构",column_text:"任务名",column_start_date:"开始时间",column_duration:"持续时间",column_add:"",link:"关联",confirm_link_deleting:"将被删除",link_start:" (开始)",link_end:" (结束)",type_task:"任务",type_project:"项目",type_milestone:"里程碑",minutes:"分钟",hours:"小时",days:"天",weeks:"周",months:"月",years:"年",message_ok:"OK",message_cancel:"关闭",section_constraint:"Constraint",constraint_type:"Constraint type",constraint_date:"Constraint date",asap:"As Soon As Possible",alap:"As Late As Possible",snet:"Start No Earlier Than",snlt:"Start No Later Than",fnet:"Finish No Earlier Than",fnlt:"Finish No Later Than",mso:"Must Start On",mfo:"Must Finish On",resources_filter_placeholder:"type to filter",resources_filter_label:"hide empty",empty_state_text_link:"Click here",empty_state_text_description:"to create your first task",baselines_section_placeholder:"Start adding a new baseline",baselines_add_button:"Add Baseline",baselines_remove_button:"Remove",baselines_remove_all_button:"Remove All",deadline_enable_button:"Set",deadline_disable_button:"Remove"}},Kn={date:{month_full:["Leden","Únor","Březen","Duben","Květen","Červen","Červenec","Srpen","Září","Říjen","Listopad","Prosinec"],month_short:["Led","Ún","Bře","Dub","Kvě","Čer","Čec","Srp","Září","Říj","List","Pro"],day_full:["Neděle","Pondělí","Úterý","Středa","Čtvrtek","Pátek","Sobota"],day_short:["Ne","Po","Út","St","Čt","Pá","So"]},labels:{new_task:"Nová práce",icon_save:"Uložit",icon_cancel:"Zpět",icon_details:"Detail",icon_edit:"Edituj",icon_delete:"Smazat",confirm_closing:"",confirm_deleting:"Událost bude trvale smazána, opravdu?",section_description:"Poznámky",section_time:"Doba platnosti",section_type:"Type",section_deadline:"Deadline",section_baselines:"Baselines",column_wbs:"WBS",column_text:"Task name",column_start_date:"Start time",column_duration:"Duration",column_add:"",link:"Link",confirm_link_deleting:"will be deleted",link_start:" (start)",link_end:" (end)",type_task:"Task",type_project:"Project",type_milestone:"Milestone",minutes:"Minutes",hours:"Hours",days:"Days",weeks:"Week",months:"Months",years:"Years",message_ok:"OK",message_cancel:"Zpět",section_constraint:"Constraint",constraint_type:"Constraint type",constraint_date:"Constraint date",asap:"As Soon As Possible",alap:"As Late As Possible",snet:"Start No Earlier Than",snlt:"Start No Later Than",fnet:"Finish No Earlier Than",fnlt:"Finish No Later Than",mso:"Must Start On",mfo:"Must Finish On",resources_filter_placeholder:"type to filter",resources_filter_label:"hide empty",empty_state_text_link:"Click here",empty_state_text_description:"to create your first task",baselines_section_placeholder:"Start adding a new baseline",baselines_add_button:"Add Baseline",baselines_remove_button:"Remove",baselines_remove_all_button:"Remove All",deadline_enable_button:"Set",deadline_disable_button:"Remove"}},Xn={date:{month_full:["Januar","Februar","Marts","April","Maj","Juni","Juli","August","September","Oktober","November","December"],month_short:["Jan","Feb","Mar","Apr","Maj","Jun","Jul","Aug","Sep","Okt","Nov","Dec"],day_full:["Søndag","Mandag","Tirsdag","Onsdag","Torsdag","Fredag","Lørdag"],day_short:["Søn","Man","Tir","Ons","Tor","Fre","Lør"]},labels:{new_task:"Ny opgave",icon_save:"Gem",icon_cancel:"Fortryd",icon_details:"Detaljer",icon_edit:"Tilret",icon_delete:"Slet",confirm_closing:"Dine rettelser vil gå tabt.. Er dy sikker?",confirm_deleting:"Bigivenheden vil blive slettet permanent. Er du sikker?",section_description:"Beskrivelse",section_time:"Tidsperiode",section_type:"Type",section_deadline:"Deadline",section_baselines:"Baselines",column_wbs:"WBS",column_text:"Task name",column_start_date:"Start time",column_duration:"Duration",column_add:"",link:"Link",confirm_link_deleting:"will be deleted",link_start:" (start)",link_end:" (end)",type_task:"Task",type_project:"Project",type_milestone:"Milestone",minutes:"Minutes",hours:"Hours",days:"Days",weeks:"Week",months:"Months",years:"Years",message_ok:"OK",message_cancel:"Fortryd",section_constraint:"Constraint",constraint_type:"Constraint type",constraint_date:"Constraint date",asap:"As Soon As Possible",alap:"As Late As Possible",snet:"Start No Earlier Than",snlt:"Start No Later Than",fnet:"Finish No Earlier Than",fnlt:"Finish No Later Than",mso:"Must Start On",mfo:"Must Finish On",resources_filter_placeholder:"type to filter",resources_filter_label:"hide empty",empty_state_text_link:"Click here",empty_state_text_description:"to create your first task",baselines_section_placeholder:"Start adding a new baseline",baselines_add_button:"Add Baseline",baselines_remove_button:"Remove",baselines_remove_all_button:"Remove All",deadline_enable_button:"Set",deadline_disable_button:"Remove"}},Zn={date:{month_full:[" Januar"," Februar"," März "," April"," Mai"," Juni"," Juli"," August"," September "," Oktober"," November "," Dezember"],month_short:["Jan","Feb","Mär","Apr","Mai","Jun","Jul","Aug","Sep","Okt","Nov","Dez"],day_full:["Sonntag","Montag","Dienstag"," Mittwoch"," Donnerstag","Freitag","Samstag"],day_short:["So","Mo","Di","Mi","Do","Fr","Sa"]},labels:{new_task:"Neue Aufgabe",icon_save:"Speichern",icon_cancel:"Abbrechen",icon_details:"Details",icon_edit:"Ändern",icon_delete:"Löschen",confirm_closing:"",confirm_deleting:"Der Eintrag wird gelöscht",section_description:"Beschreibung",section_time:"Zeitspanne",section_type:"Type",section_deadline:"Deadline",section_baselines:"Baselines",column_wbs:"PSP",column_text:"Task-Namen",column_start_date:"Startzeit",column_duration:"Dauer",column_add:"",link:"Link",confirm_link_deleting:"werden gelöscht",link_start:"(starten)",link_end:"(ende)",type_task:"Task",type_project:"Project",type_milestone:"Milestone",minutes:"Minuten",hours:"Stunden",days:"Tage",weeks:"Wochen",months:"Monate",years:"Jahre",message_ok:"OK",message_cancel:"Abbrechen",section_constraint:"Regel",constraint_type:"Regel",constraint_date:"Regel - Datum",asap:"So bald wie möglich",alap:"So spät wie möglich",snet:"Beginn nicht vor",snlt:"Beginn nicht später als",fnet:"Fertigstellung nicht vor",fnlt:"Fertigstellung nicht später als",mso:"Muss beginnen am",mfo:"Muss fertig sein am",resources_filter_placeholder:"type to filter",resources_filter_label:"hide empty",empty_state_text_link:"Click here",empty_state_text_description:"to create your first task",baselines_section_placeholder:"Start adding a new baseline",baselines_add_button:"Add Baseline",baselines_remove_button:"Remove",baselines_remove_all_button:"Remove All",deadline_enable_button:"Set",deadline_disable_button:"Remove"}},Qn={date:{month_full:["Ιανουάριος","Φεβρουάριος","Μάρτιος","Απρίλιος","Μάϊος","Ιούνιος","Ιούλιος","Αύγουστος","Σεπτέμβριος","Οκτώβριος","Νοέμβριος","Δεκέμβριος"],month_short:["ΙΑΝ","ΦΕΒ","ΜΑΡ","ΑΠΡ","ΜΑΙ","ΙΟΥΝ","ΙΟΥΛ","ΑΥΓ","ΣΕΠ","ΟΚΤ","ΝΟΕ","ΔΕΚ"],day_full:["Κυριακή","Δευτέρα","Τρίτη","Τετάρτη","Πέμπτη","Παρασκευή","Κυριακή"],day_short:["ΚΥ","ΔΕ","ΤΡ","ΤΕ","ΠΕ","ΠΑ","ΣΑ"]},labels:{new_task:"Νέα εργασία",icon_save:"Αποθήκευση",icon_cancel:"Άκυρο",icon_details:"Λεπτομέρειες",icon_edit:"Επεξεργασία",icon_delete:"Διαγραφή",confirm_closing:"",confirm_deleting:"Το έργο θα διαγραφεί οριστικά. Θέλετε να συνεχίσετε;",section_description:"Περιγραφή",section_time:"Χρονική περίοδος",section_type:"Type",section_deadline:"Deadline",section_baselines:"Baselines",column_wbs:"WBS",column_text:"Task name",column_start_date:"Start time",column_duration:"Duration",column_add:"",link:"Link",confirm_link_deleting:"will be deleted",link_start:" (start)",link_end:" (end)",type_task:"Task",type_project:"Project",type_milestone:"Milestone",minutes:"Minutes",hours:"Hours",days:"Days",weeks:"Week",months:"Months",years:"Years",message_ok:"OK",message_cancel:"Άκυρο",section_constraint:"Constraint",constraint_type:"Constraint type",constraint_date:"Constraint date",asap:"As Soon As Possible",alap:"As Late As Possible",snet:"Start No Earlier Than",snlt:"Start No Later Than",fnet:"Finish No Earlier Than",fnlt:"Finish No Later Than",mso:"Must Start On",mfo:"Must Finish On",resources_filter_placeholder:"type to filter",resources_filter_label:"hide empty",empty_state_text_link:"Click here",empty_state_text_description:"to create your first task",baselines_section_placeholder:"Start adding a new baseline",baselines_add_button:"Add Baseline",baselines_remove_button:"Remove",baselines_remove_all_button:"Remove All",deadline_enable_button:"Set",deadline_disable_button:"Remove"}},ta={date:{month_full:["January","February","March","April","May","June","July","August","September","October","November","December"],month_short:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],day_full:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],day_short:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},labels:{new_task:"New task",icon_save:"Save",icon_cancel:"Cancel",icon_details:"Details",icon_edit:"Edit",icon_delete:"Delete",confirm_closing:"",confirm_deleting:"Task will be deleted permanently, are you sure?",section_description:"Description",section_time:"Time period",section_type:"Type",section_deadline:"Deadline",section_baselines:"Baselines",column_wbs:"WBS",column_text:"Task name",column_start_date:"Start time",column_duration:"Duration",column_add:"",link:"Link",confirm_link_deleting:"will be deleted",link_start:" (start)",link_end:" (end)",type_task:"Task",type_project:"Project",type_milestone:"Milestone",minutes:"Minutes",hours:"Hours",days:"Days",weeks:"Week",months:"Months",years:"Years",message_ok:"OK",message_cancel:"Cancel",section_constraint:"Constraint",constraint_type:"Constraint type",constraint_date:"Constraint date",asap:"As Soon As Possible",alap:"As Late As Possible",snet:"Start No Earlier Than",snlt:"Start No Later Than",fnet:"Finish No Earlier Than",fnlt:"Finish No Later Than",mso:"Must Start On",mfo:"Must Finish On",resources_filter_placeholder:"type to filter",resources_filter_label:"hide empty",empty_state_text_link:"Click here",empty_state_text_description:"to create your first task",baselines_section_placeholder:"Start adding a new baseline",baselines_add_button:"Add Baseline",baselines_remove_button:"Remove",baselines_remove_all_button:"Remove All",deadline_enable_button:"Set",deadline_disable_button:"Remove"}},ea={date:{month_full:["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],month_short:["Ene","Feb","Mar","Abr","May","Jun","Jul","Ago","Sep","Oct","Nov","Dic"],day_full:["Domingo","Lunes","Martes","Miércoles","Jueves","Viernes","Sábado"],day_short:["Dom","Lun","Mar","Mié","Jue","Vie","Sáb"]},labels:{new_task:"Nueva tarea",icon_save:"Guardar",icon_cancel:"Cancelar",icon_details:"Detalles",icon_edit:"Editar",icon_delete:"Eliminar",confirm_closing:"",confirm_deleting:"El evento se borrará definitivamente, ¿continuar?",section_description:"Descripción",section_time:"Período",section_type:"Tipo",section_deadline:"Deadline",section_baselines:"Baselines",column_wbs:"EDT",column_text:"Tarea",column_start_date:"Inicio",column_duration:"Duración",column_add:"",link:"Enlace",confirm_link_deleting:"será borrada",link_start:" (inicio)",link_end:" (fin)",type_task:"Tarea",type_project:"Proyecto",type_milestone:"Hito",minutes:"Minutos",hours:"Horas",days:"Días",weeks:"Semanas",months:"Meses",years:"Años",message_ok:"OK",message_cancel:"Cancelar",section_constraint:"Constraint",constraint_type:"Constraint type",constraint_date:"Constraint date",asap:"As Soon As Possible",alap:"As Late As Possible",snet:"Start No Earlier Than",snlt:"Start No Later Than",fnet:"Finish No Earlier Than",fnlt:"Finish No Later Than",mso:"Must Start On",mfo:"Must Finish On",resources_filter_placeholder:"type to filter",resources_filter_label:"hide empty",empty_state_text_link:"Click here",empty_state_text_description:"to create your first task",baselines_section_placeholder:"Start adding a new baseline",baselines_add_button:"Add Baseline",baselines_remove_button:"Remove",baselines_remove_all_button:"Remove All",deadline_enable_button:"Set",deadline_disable_button:"Remove"}},ia={date:{month_full:["ژانویه","فوریه","مارس","آوریل","مه","ژوئن","ژوئیه","اوت","سپتامبر","اکتبر","نوامبر","دسامبر"],month_short:["1","2","3","4","5","6","7","8","9","10","11","12"],day_full:["يکشنبه","دوشنبه","سه‌شنبه","چهارشنبه","پنجشنبه","جمعه","شنبه"],day_short:["ی","د","س","چ","پ","ج","ش"]},labels:{new_task:"وظیفه جدید",icon_save:"ذخیره",icon_cancel:"لغو",icon_details:"جزییات",icon_edit:"ویرایش",icon_delete:"حذف",confirm_closing:"تغییرات شما ازدست خواهد رفت، آیا مطمئن هستید؟",confirm_deleting:"این مورد برای همیشه حذف خواهد شد، آیا مطمئن هستید؟",section_description:"توضیحات",section_time:"مدت زمان",section_type:"نوع",section_deadline:"Deadline",section_baselines:"Baselines",column_wbs:"WBS",column_text:"عنوان",column_start_date:"زمان شروع",column_duration:"مدت",column_add:"",link:"ارتباط",confirm_link_deleting:"حذف خواهد شد",link_start:" (آغاز)",link_end:" (پایان)",type_task:"وظیفه",type_project:"پروژه",type_milestone:"نگارش",minutes:"دقایق",hours:"ساعات",days:"روزها",weeks:"هفته",months:"ماه‌ها",years:"سال‌ها",message_ok:"تایید",message_cancel:"لغو",section_constraint:"Constraint",constraint_type:"Constraint type",constraint_date:"Constraint date",asap:"As Soon As Possible",alap:"As Late As Possible",snet:"Start No Earlier Than",snlt:"Start No Later Than",fnet:"Finish No Earlier Than",fnlt:"Finish No Later Than",mso:"Must Start On",mfo:"Must Finish On",resources_filter_placeholder:"type to filter",resources_filter_label:"hide empty",empty_state_text_link:"Click here",empty_state_text_description:"to create your first task",baselines_section_placeholder:"Start adding a new baseline",baselines_add_button:"Add Baseline",baselines_remove_button:"Remove",baselines_remove_all_button:"Remove All",deadline_enable_button:"Set",deadline_disable_button:"Remove"}},na={date:{month_full:["Tammikuu","Helmikuu","Maaliskuu","Huhtikuu","Toukokuu","Kes&auml;kuu","Hein&auml;kuu","Elokuu","Syyskuu","Lokakuu","Marraskuu","Joulukuu"],month_short:["Tam","Hel","Maa","Huh","Tou","Kes","Hei","Elo","Syy","Lok","Mar","Jou"],day_full:["Sunnuntai","Maanantai","Tiistai","Keskiviikko","Torstai","Perjantai","Lauantai"],day_short:["Su","Ma","Ti","Ke","To","Pe","La"]},labels:{new_task:"Uusi tehtävä",icon_save:"Tallenna",icon_cancel:"Peru",icon_details:"Tiedot",icon_edit:"Muokkaa",icon_delete:"Poista",confirm_closing:"",confirm_deleting:"Haluatko varmasti poistaa tapahtuman?",section_description:"Kuvaus",section_time:"Aikajakso",section_type:"Type",section_deadline:"Deadline",section_baselines:"Baselines",column_wbs:"WBS",column_text:"Task name",column_start_date:"Start time",column_duration:"Duration",column_add:"",link:"Link",confirm_link_deleting:"will be deleted",link_start:" (start)",link_end:" (end)",type_task:"Task",type_project:"Project",type_milestone:"Milestone",minutes:"Minutes",hours:"Hours",days:"Days",weeks:"Week",months:"Months",years:"Years",message_ok:"OK",message_cancel:"Peru",section_constraint:"Constraint",constraint_type:"Constraint type",constraint_date:"Constraint date",asap:"As Soon As Possible",alap:"As Late As Possible",snet:"Start No Earlier Than",snlt:"Start No Later Than",fnet:"Finish No Earlier Than",fnlt:"Finish No Later Than",mso:"Must Start On",mfo:"Must Finish On",resources_filter_placeholder:"type to filter",resources_filter_label:"hide empty",empty_state_text_link:"Click here",empty_state_text_description:"to create your first task",baselines_section_placeholder:"Start adding a new baseline",baselines_add_button:"Add Baseline",baselines_remove_button:"Remove",baselines_remove_all_button:"Remove All",deadline_enable_button:"Set",deadline_disable_button:"Remove"}},aa={date:{month_full:["Janvier","Février","Mars","Avril","Mai","Juin","Juillet","Août","Septembre","Octobre","Novembre","Décembre"],month_short:["Jan","Fév","Mar","Avr","Mai","Juin","Juil","Aoû","Sep","Oct","Nov","Déc"],day_full:["Dimanche","Lundi","Mardi","Mercredi","Jeudi","Vendredi","Samedi"],day_short:["Dim","Lun","Mar","Mer","Jeu","Ven","Sam"]},labels:{new_task:"Nouvelle tâche",icon_save:"Enregistrer",icon_cancel:"Annuler",icon_details:"Détails",icon_edit:"Modifier",icon_delete:"Effacer",confirm_closing:"",confirm_deleting:"L'événement sera effacé sans appel, êtes-vous sûr ?",section_description:"Description",section_time:"Période",section_type:"Type",section_deadline:"Deadline",section_baselines:"Baselines",column_wbs:"OTP",column_text:"Nom de la tâche",column_start_date:"Date initiale",column_duration:"Durée",column_add:"",link:"Le lien",confirm_link_deleting:"sera supprimé",link_start:"(début)",link_end:"(fin)",type_task:"Task",type_project:"Project",type_milestone:"Milestone",minutes:"Minutes",hours:"Heures",days:"Jours",weeks:"Semaines",months:"Mois",years:"Années",message_ok:"OK",message_cancel:"Annuler",section_constraint:"Constraint",constraint_type:"Constraint type",constraint_date:"Constraint date",asap:"As Soon As Possible",alap:"As Late As Possible",snet:"Start No Earlier Than",snlt:"Start No Later Than",fnet:"Finish No Earlier Than",fnlt:"Finish No Later Than",mso:"Must Start On",mfo:"Must Finish On",resources_filter_placeholder:"type to filter",resources_filter_label:"hide empty",empty_state_text_link:"Click here",empty_state_text_description:"to create your first task",baselines_section_placeholder:"Start adding a new baseline",baselines_add_button:"Add Baseline",baselines_remove_button:"Remove",baselines_remove_all_button:"Remove All",deadline_enable_button:"Set",deadline_disable_button:"Remove"}},ra={date:{month_full:["ינואר","פברואר","מרץ","אפריל","מאי","יוני","יולי","אוגוסט","ספטמבר","אוקטובר","נובמבר","דצמבר"],month_short:["ינו","פבר","מרץ","אפר","מאי","יונ","יול","אוג","ספט","אוק","נוב","דצמ"],day_full:["ראשון","שני","שלישי","רביעי","חמישי","שישי","שבת"],day_short:["א","ב","ג","ד","ה","ו","ש"]},labels:{new_task:"משימה חדש",icon_save:"שמור",icon_cancel:"בטל",icon_details:"פרטים",icon_edit:"ערוך",icon_delete:"מחק",confirm_closing:"",confirm_deleting:"ארוע ימחק סופית.להמשיך?",section_description:"הסבר",section_time:"תקופה",section_type:"Type",section_deadline:"Deadline",section_baselines:"Baselines",column_wbs:"WBS",column_text:"Task name",column_start_date:"Start time",column_duration:"Duration",column_add:"",link:"Link",confirm_link_deleting:"will be deleted",link_start:" (start)",link_end:" (end)",type_task:"Task",type_project:"Project",type_milestone:"Milestone",minutes:"Minutes",hours:"Hours",days:"Days",weeks:"Week",months:"Months",years:"Years",message_ok:"OK",message_cancel:"בטל",section_constraint:"Constraint",constraint_type:"Constraint type",constraint_date:"Constraint date",asap:"As Soon As Possible",alap:"As Late As Possible",snet:"Start No Earlier Than",snlt:"Start No Later Than",fnet:"Finish No Earlier Than",fnlt:"Finish No Later Than",mso:"Must Start On",mfo:"Must Finish On",resources_filter_placeholder:"type to filter",resources_filter_label:"hide empty",empty_state_text_link:"Click here",empty_state_text_description:"to create your first task",baselines_section_placeholder:"Start adding a new baseline",baselines_add_button:"Add Baseline",baselines_remove_button:"Remove",baselines_remove_all_button:"Remove All",deadline_enable_button:"Set",deadline_disable_button:"Remove"}},sa={date:{month_full:["Siječanj","Veljača","Ožujak","Travanj","Svibanj","Lipanj","Srpanj","Kolovoz","Rujan","Listopad","Studeni","Prosinac"],month_short:["Sij","Velj","Ožu","Tra","Svi","Lip","Srp","Kol","Ruj","Lis","Stu","Pro"],day_full:["Nedjelja","Ponedjeljak","Utorak","Srijeda","Četvrtak","Petak","Subota"],day_short:["Ned","Pon","Uto","Sri","Čet","Pet","Sub"]},labels:{new_task:"Novi Zadatak",icon_save:"Spremi",icon_cancel:"Odustani",icon_details:"Detalji",icon_edit:"Izmjeni",icon_delete:"Obriši",confirm_closing:"",confirm_deleting:"Zadatak će biti trajno izbrisan, jeste li sigurni?",section_description:"Opis",section_time:"Vremenski Period",section_type:"Tip",section_deadline:"Deadline",section_baselines:"Baselines",column_wbs:"WBS",column_text:"Naziv Zadatka",column_start_date:"Početno Vrijeme",column_duration:"Trajanje",column_add:"",link:"Poveznica",confirm_link_deleting:"će biti izbrisan",link_start:" (početak)",link_end:" (kraj)",type_task:"Zadatak",type_project:"Projekt",type_milestone:"Milestone",minutes:"Minute",hours:"Sati",days:"Dani",weeks:"Tjedni",months:"Mjeseci",years:"Godine",message_ok:"OK",message_cancel:"Odustani",section_constraint:"Constraint",constraint_type:"Constraint type",constraint_date:"Constraint date",asap:"As Soon As Possible",alap:"As Late As Possible",snet:"Start No Earlier Than",snlt:"Start No Later Than",fnet:"Finish No Earlier Than",fnlt:"Finish No Later Than",mso:"Must Start On",mfo:"Must Finish On",resources_filter_placeholder:"type to filter",resources_filter_label:"hide empty",empty_state_text_link:"Click here",empty_state_text_description:"to create your first task",baselines_section_placeholder:"Start adding a new baseline",baselines_add_button:"Add Baseline",baselines_remove_button:"Remove",baselines_remove_all_button:"Remove All",deadline_enable_button:"Set",deadline_disable_button:"Remove"}},oa={date:{month_full:["Január","Február","Március","Április","Május","Június","Július","Augusztus","Szeptember","Október","November","December"],month_short:["Jan","Feb","Már","Ápr","Máj","Jún","Júl","Aug","Sep","Okt","Nov","Dec"],day_full:["Vasárnap","Hétfõ","Kedd","Szerda","Csütörtök","Péntek","szombat"],day_short:["Va","Hé","Ke","Sze","Csü","Pé","Szo"]},labels:{new_task:"Új feladat",icon_save:"Mentés",icon_cancel:"Mégse",icon_details:"Részletek",icon_edit:"Szerkesztés",icon_delete:"Törlés",confirm_closing:"",confirm_deleting:"Az esemény törölve lesz, biztosan folytatja?",section_description:"Leírás",section_time:"Idõszak",section_type:"Type",section_deadline:"Deadline",section_baselines:"Baselines",column_wbs:"WBS",column_text:"Task name",column_start_date:"Start time",column_duration:"Duration",column_add:"",link:"Link",confirm_link_deleting:"will be deleted",link_start:" (start)",link_end:" (end)",type_task:"Task",type_project:"Project",type_milestone:"Milestone",minutes:"Minutes",hours:"Hours",days:"Days",weeks:"Week",months:"Months",years:"Years",message_ok:"OK",message_cancel:"Mégse",section_constraint:"Constraint",constraint_type:"Constraint type",constraint_date:"Constraint date",asap:"As Soon As Possible",alap:"As Late As Possible",snet:"Start No Earlier Than",snlt:"Start No Later Than",fnet:"Finish No Earlier Than",fnlt:"Finish No Later Than",mso:"Must Start On",mfo:"Must Finish On",resources_filter_placeholder:"type to filter",resources_filter_label:"hide empty",empty_state_text_link:"Click here",empty_state_text_description:"to create your first task",baselines_section_placeholder:"Start adding a new baseline",baselines_add_button:"Add Baseline",baselines_remove_button:"Remove",baselines_remove_all_button:"Remove All",deadline_enable_button:"Set",deadline_disable_button:"Remove"}},la={date:{month_full:["Januari","Februari","Maret","April","Mei","Juni","Juli","Agustus","September","Oktober","November","Desember"],month_short:["Jan","Feb","Mar","Apr","Mei","Jun","Jul","Ags","Sep","Okt","Nov","Des"],day_full:["Minggu","Senin","Selasa","Rabu","Kamis","Jumat","Sabtu"],day_short:["Ming","Sen","Sel","Rab","Kam","Jum","Sab"]},labels:{new_task:"Tugas baru",icon_save:"Simpan",icon_cancel:"Batal",icon_details:"Detail",icon_edit:"Edit",icon_delete:"Hapus",confirm_closing:"",confirm_deleting:"Acara akan dihapus",section_description:"Keterangan",section_time:"Periode",section_type:"Type",section_deadline:"Deadline",section_baselines:"Baselines",column_wbs:"WBS",column_text:"Task name",column_start_date:"Start time",column_duration:"Duration",column_add:"",link:"Link",confirm_link_deleting:"will be deleted",link_start:" (start)",link_end:" (end)",type_task:"Task",type_project:"Project",type_milestone:"Milestone",minutes:"Minutes",hours:"Hours",days:"Days",weeks:"Week",months:"Months",years:"Years",message_ok:"OK",message_cancel:"Batal",section_constraint:"Constraint",constraint_type:"Constraint type",constraint_date:"Constraint date",asap:"As Soon As Possible",alap:"As Late As Possible",snet:"Start No Earlier Than",snlt:"Start No Later Than",fnet:"Finish No Earlier Than",fnlt:"Finish No Later Than",mso:"Must Start On",mfo:"Must Finish On",resources_filter_placeholder:"type to filter",resources_filter_label:"hide empty",empty_state_text_link:"Click here",empty_state_text_description:"to create your first task",baselines_section_placeholder:"Start adding a new baseline",baselines_add_button:"Add Baseline",baselines_remove_button:"Remove",baselines_remove_all_button:"Remove All",deadline_enable_button:"Set",deadline_disable_button:"Remove"}},da={date:{month_full:["Gennaio","Febbraio","Marzo","Aprile","Maggio","Giugno","Luglio","Agosto","Settembre","Ottobre","Novembre","Dicembre"],month_short:["Gen","Feb","Mar","Apr","Mag","Giu","Lug","Ago","Set","Ott","Nov","Dic"],day_full:["Domenica","Lunedì","Martedì","Mercoledì","Giovedì","Venerdì","Sabato"],day_short:["Dom","Lun","Mar","Mer","Gio","Ven","Sab"]},labels:{new_task:"Nuovo compito",icon_save:"Salva",icon_cancel:"Chiudi",icon_details:"Dettagli",icon_edit:"Modifica",icon_delete:"Elimina",confirm_closing:"",confirm_deleting:"Sei sicuro di confermare l'eliminazione?",section_description:"Descrizione",section_time:"Periodo di tempo",section_type:"Tipo",section_deadline:"Deadline",section_baselines:"Baselines",column_wbs:"WBS",column_text:"Nome Attività",column_start_date:"Inizio",column_duration:"Durata",column_add:"",link:"Link",confirm_link_deleting:"sarà eliminato",link_start:" (inizio)",link_end:" (fine)",type_task:"Task",type_project:"Project",type_milestone:"Milestone",minutes:"Minuti",hours:"Ore",days:"Giorni",weeks:"Settimane",months:"Mesi",years:"Anni",message_ok:"OK",message_cancel:"Chiudi",section_constraint:"Constraint",constraint_type:"Constraint type",constraint_date:"Constraint date",asap:"As Soon As Possible",alap:"As Late As Possible",snet:"Start No Earlier Than",snlt:"Start No Later Than",fnet:"Finish No Earlier Than",fnlt:"Finish No Later Than",mso:"Must Start On",mfo:"Must Finish On",resources_filter_placeholder:"type to filter",resources_filter_label:"hide empty",empty_state_text_link:"Click here",empty_state_text_description:"to create your first task",baselines_section_placeholder:"Start adding a new baseline",baselines_add_button:"Add Baseline",baselines_remove_button:"Remove",baselines_remove_all_button:"Remove All",deadline_enable_button:"Set",deadline_disable_button:"Remove"}},ca={date:{month_full:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],month_short:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],day_full:["日曜日","月曜日","火曜日","水曜日","木曜日","金曜日","土曜日"],day_short:["日","月","火","水","木","金","土"]},labels:{new_task:"新しい仕事",icon_save:"保存",icon_cancel:"キャンセル",icon_details:"詳細",icon_edit:"編集",icon_delete:"削除",confirm_closing:"",confirm_deleting:"イベント完全に削除されます、宜しいですか？",section_description:"デスクリプション",section_time:"期間",section_type:"Type",section_deadline:"Deadline",section_baselines:"Baselines",column_wbs:"WBS",column_text:"Task name",column_start_date:"Start time",column_duration:"Duration",column_add:"",link:"Link",confirm_link_deleting:"will be deleted",link_start:" (start)",link_end:" (end)",type_task:"Task",type_project:"Project",type_milestone:"Milestone",minutes:"Minutes",hours:"Hours",days:"Days",weeks:"Week",months:"Months",years:"Years",message_ok:"OK",message_cancel:"キャンセル",section_constraint:"Constraint",constraint_type:"Constraint type",constraint_date:"Constraint date",asap:"As Soon As Possible",alap:"As Late As Possible",snet:"Start No Earlier Than",snlt:"Start No Later Than",fnet:"Finish No Earlier Than",fnlt:"Finish No Later Than",mso:"Must Start On",mfo:"Must Finish On",resources_filter_placeholder:"type to filter",resources_filter_label:"hide empty",empty_state_text_link:"Click here",empty_state_text_description:"to create your first task",baselines_section_placeholder:"Start adding a new baseline",baselines_add_button:"Add Baseline",baselines_remove_button:"Remove",baselines_remove_all_button:"Remove All",deadline_enable_button:"Set",deadline_disable_button:"Remove"}},ua={date:{month_full:["1월","2월","3월","4월","5월","6월","7월","8월","9월","10월","11월","12월"],month_short:["1월","2월","3월","4월","5월","6월","7월","8월","9월","10월","11월","12월"],day_full:["일요일","월요일","화요일","수요일","목요일","금요일","토요일"],day_short:["일","월","화","수","목","금","토"]},labels:{new_task:"이름없는 작업",icon_save:"저장",icon_cancel:"취소",icon_details:"세부 사항",icon_edit:"수정",icon_delete:"삭제",confirm_closing:"",confirm_deleting:"작업을 삭제하시겠습니까?",section_description:"설명",section_time:"기간",section_type:"Type",section_deadline:"Deadline",section_baselines:"Baselines",column_wbs:"WBS",column_text:"작업명",column_start_date:"시작일",column_duration:"기간",column_add:"",link:"전제",confirm_link_deleting:"삭제 하시겠습니까?",link_start:" (start)",link_end:" (end)",type_task:"작업",type_project:"프로젝트",type_milestone:"마일스톤",minutes:"분",hours:"시간",days:"일",weeks:"주",months:"달",years:"년",message_ok:"OK",message_cancel:"취소",section_constraint:"Constraint",constraint_type:"Constraint type",constraint_date:"Constraint date",asap:"As Soon As Possible",alap:"As Late As Possible",snet:"Start No Earlier Than",snlt:"Start No Later Than",fnet:"Finish No Earlier Than",fnlt:"Finish No Later Than",mso:"Must Start On",mfo:"Must Finish On",resources_filter_placeholder:"type to filter",resources_filter_label:"hide empty",empty_state_text_link:"Click here",empty_state_text_description:"to create your first task",baselines_section_placeholder:"Start adding a new baseline",baselines_add_button:"Add Baseline",baselines_remove_button:"Remove",baselines_remove_all_button:"Remove All",deadline_enable_button:"Set",deadline_disable_button:"Remove"}};class ha{constructor(e){this.addLocale=(i,n)=>{this._locales[i]=n},this.getLocale=i=>this._locales[i],this._locales={};for(const i in e)this._locales[i]=e[i]}}const _a={date:{month_full:["Januar","Februar","Mars","April","Mai","Juni","Juli","August","September","Oktober","November","Desember"],month_short:["Jan","Feb","Mar","Apr","Mai","Jun","Jul","Aug","Sep","Okt","Nov","Des"],day_full:["Søndag","Mandag","Tirsdag","Onsdag","Torsdag","Fredag","Lørdag"],day_short:["Søn","Mon","Tir","Ons","Tor","Fre","Lør"]},labels:{new_task:"Ny oppgave",icon_save:"Lagre",icon_cancel:"Avbryt",icon_details:"Detaljer",icon_edit:"Rediger",icon_delete:"Slett",confirm_closing:"",confirm_deleting:"Hendelsen vil bli slettet permanent. Er du sikker?",section_description:"Beskrivelse",section_time:"Tidsperiode",section_type:"Type",section_deadline:"Deadline",section_baselines:"Baselines",column_wbs:"WBS",column_text:"Task name",column_start_date:"Start time",column_duration:"Duration",column_add:"",link:"Link",confirm_link_deleting:"will be deleted",link_start:" (start)",link_end:" (end)",type_task:"Task",type_project:"Project",type_milestone:"Milestone",minutes:"Minutes",hours:"Hours",days:"Days",weeks:"Week",months:"Months",years:"Years",message_ok:"OK",message_cancel:"Avbryt",section_constraint:"Constraint",constraint_type:"Constraint type",constraint_date:"Constraint date",asap:"As Soon As Possible",alap:"As Late As Possible",snet:"Start No Earlier Than",snlt:"Start No Later Than",fnet:"Finish No Earlier Than",fnlt:"Finish No Later Than",mso:"Must Start On",mfo:"Must Finish On",resources_filter_placeholder:"type to filter",resources_filter_label:"hide empty",empty_state_text_link:"Click here",empty_state_text_description:"to create your first task",baselines_section_placeholder:"Start adding a new baseline",baselines_add_button:"Add Baseline",baselines_remove_button:"Remove",baselines_remove_all_button:"Remove All",deadline_enable_button:"Set",deadline_disable_button:"Remove"}},fa={date:{month_full:["Januari","Februari","Maart","April","Mei","Juni","Juli","Augustus","September","Oktober","November","December"],month_short:["Jan","Feb","mrt","Apr","Mei","Jun","Jul","Aug","Sep","Okt","Nov","Dec"],day_full:["Zondag","Maandag","Dinsdag","Woensdag","Donderdag","Vrijdag","Zaterdag"],day_short:["Zo","Ma","Di","Wo","Do","Vr","Za"]},labels:{new_task:"Nieuwe taak",icon_save:"Opslaan",icon_cancel:"Annuleren",icon_details:"Details",icon_edit:"Bewerken",icon_delete:"Verwijderen",confirm_closing:"",confirm_deleting:"Item zal permanent worden verwijderd, doorgaan?",section_description:"Beschrijving",section_time:"Tijd periode",section_type:"Type",section_deadline:"Deadline",section_baselines:"Baselines",column_wbs:"WBS",column_text:"Taak omschrijving",column_start_date:"Startdatum",column_duration:"Duur",column_add:"",link:"Koppeling",confirm_link_deleting:"zal worden verwijderd",link_start:" (start)",link_end:" (eind)",type_task:"Task",type_project:"Project",type_milestone:"Milestone",minutes:"minuten",hours:"uren",days:"dagen",weeks:"weken",months:"maanden",years:"jaren",message_ok:"OK",message_cancel:"Annuleren",section_constraint:"Constraint",constraint_type:"Constraint type",constraint_date:"Constraint date",asap:"As Soon As Possible",alap:"As Late As Possible",snet:"Start No Earlier Than",snlt:"Start No Later Than",fnet:"Finish No Earlier Than",fnlt:"Finish No Later Than",mso:"Must Start On",mfo:"Must Finish On",resources_filter_placeholder:"type to filter",resources_filter_label:"hide empty",empty_state_text_link:"Click here",empty_state_text_description:"to create your first task",baselines_section_placeholder:"Start adding a new baseline",baselines_add_button:"Add Baseline",baselines_remove_button:"Remove",baselines_remove_all_button:"Remove All",deadline_enable_button:"Set",deadline_disable_button:"Remove"}},ga={date:{month_full:["Januar","Februar","Mars","April","Mai","Juni","Juli","August","September","Oktober","November","Desember"],month_short:["Jan","Feb","Mar","Apr","Mai","Jun","Jul","Aug","Sep","Okt","Nov","Des"],day_full:["Søndag","Mandag","Tirsdag","Onsdag","Torsdag","Fredag","Lørdag"],day_short:["Søn","Man","Tir","Ons","Tor","Fre","Lør"]},labels:{new_task:"Ny oppgave",icon_save:"Lagre",icon_cancel:"Avbryt",icon_details:"Detaljer",icon_edit:"Endre",icon_delete:"Slett",confirm_closing:"Endringer blir ikke lagret, er du sikker?",confirm_deleting:"Oppføringen vil bli slettet, er du sikker?",section_description:"Beskrivelse",section_time:"Tidsperiode",section_type:"Type",section_deadline:"Deadline",section_baselines:"Baselines",column_wbs:"WBS",column_text:"Task name",column_start_date:"Start time",column_duration:"Duration",column_add:"",link:"Link",confirm_link_deleting:"will be deleted",link_start:" (start)",link_end:" (end)",type_task:"Task",type_project:"Project",type_milestone:"Milestone",minutes:"Minutes",hours:"Hours",days:"Days",weeks:"Week",months:"Months",years:"Years",message_ok:"OK",message_cancel:"Avbryt",section_constraint:"Constraint",constraint_type:"Constraint type",constraint_date:"Constraint date",asap:"As Soon As Possible",alap:"As Late As Possible",snet:"Start No Earlier Than",snlt:"Start No Later Than",fnet:"Finish No Earlier Than",fnlt:"Finish No Later Than",mso:"Must Start On",mfo:"Must Finish On",resources_filter_placeholder:"type to filter",resources_filter_label:"hide empty",empty_state_text_link:"Click here",empty_state_text_description:"to create your first task",baselines_section_placeholder:"Start adding a new baseline",baselines_add_button:"Add Baseline",baselines_remove_button:"Remove",baselines_remove_all_button:"Remove All",deadline_enable_button:"Set",deadline_disable_button:"Remove"}},pa={date:{month_full:["Styczeń","Luty","Marzec","Kwiecień","Maj","Czerwiec","Lipiec","Sierpień","Wrzesień","Październik","Listopad","Grudzień"],month_short:["Sty","Lut","Mar","Kwi","Maj","Cze","Lip","Sie","Wrz","Paź","Lis","Gru"],day_full:["Niedziela","Poniedziałek","Wtorek","Środa","Czwartek","Piątek","Sobota"],day_short:["Nie","Pon","Wto","Śro","Czw","Pią","Sob"]},labels:{new_task:"Nowe zadanie",icon_save:"Zapisz",icon_cancel:"Anuluj",icon_details:"Szczegóły",icon_edit:"Edytuj",icon_delete:"Usuń",confirm_closing:"",confirm_deleting:"Zdarzenie zostanie usunięte na zawsze, kontynuować?",section_description:"Opis",section_time:"Okres czasu",section_type:"Typ",section_deadline:"Deadline",section_baselines:"Baselines",column_wbs:"WBS",column_text:"Nazwa zadania",column_start_date:"Początek",column_duration:"Czas trwania",column_add:"",link:"Link",confirm_link_deleting:"zostanie usunięty",link_start:" (początek)",link_end:" (koniec)",type_task:"Zadanie",type_project:"Projekt",type_milestone:"Milestone",minutes:"Minuty",hours:"Godziny",days:"Dni",weeks:"Tydzień",months:"Miesiące",years:"Lata",message_ok:"OK",message_cancel:"Anuluj",section_constraint:"Constraint",constraint_type:"Constraint type",constraint_date:"Constraint date",asap:"As Soon As Possible",alap:"As Late As Possible",snet:"Start No Earlier Than",snlt:"Start No Later Than",fnet:"Finish No Earlier Than",fnlt:"Finish No Later Than",mso:"Must Start On",mfo:"Must Finish On",resources_filter_placeholder:"type to filter",resources_filter_label:"hide empty",empty_state_text_link:"Click here",empty_state_text_description:"to create your first task",baselines_section_placeholder:"Start adding a new baseline",baselines_add_button:"Add Baseline",baselines_remove_button:"Remove",baselines_remove_all_button:"Remove All",deadline_enable_button:"Set",deadline_disable_button:"Remove"}},ma={date:{month_full:["Janeiro","Fevereiro","Março","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],month_short:["Jan","Fev","Mar","Abr","Mai","Jun","Jul","Ago","Set","Out","Nov","Dez"],day_full:["Domingo","Segunda","Terça","Quarta","Quinta","Sexta","Sábado"],day_short:["Dom","Seg","Ter","Qua","Qui","Sex","Sab"]},labels:{new_task:"Nova tarefa",icon_save:"Salvar",icon_cancel:"Cancelar",icon_details:"Detalhes",icon_edit:"Editar",icon_delete:"Excluir",confirm_closing:"",confirm_deleting:"As tarefas serão excluidas permanentemente, confirme?",section_description:"Descrição",section_time:"Período",section_type:"Tipo",section_deadline:"Deadline",section_baselines:"Baselines",column_wbs:"EAP",column_text:"Nome tarefa",column_start_date:"Data início",column_duration:"Duração",column_add:"",link:"Link",confirm_link_deleting:"Será excluído!",link_start:" (início)",link_end:" (fim)",type_task:"Task",type_project:"Projeto",type_milestone:"Marco",minutes:"Minutos",hours:"Horas",days:"Dias",weeks:"Semanas",months:"Meses",years:"Anos",message_ok:"OK",message_cancel:"Cancelar",section_constraint:"Restrição",constraint_type:"Tipo Restrição",constraint_date:"Data restrição",asap:"Mais breve possível",alap:"Mais tarde possível",snet:"Não começar antes de",snlt:"Não começar depois de",fnet:"Não terminar antes de",fnlt:"Não terminar depois de",mso:"Precisa começar em",mfo:"Precisa terminar em",resources_filter_placeholder:"Tipo de filtros",resources_filter_label:"Ocultar vazios",empty_state_text_link:"Click here",empty_state_text_description:"to create your first task",baselines_section_placeholder:"Start adding a new baseline",baselines_add_button:"Add Baseline",baselines_remove_button:"Remove",baselines_remove_all_button:"Remove All",deadline_enable_button:"Set",deadline_disable_button:"Remove"}},va={date:{month_full:["Ianuarie","Februarie","Martie","Aprilie","Mai","Iunie","Iulie","August","Septembrie","Octombrie","November","December"],month_short:["Ian","Feb","Mar","Apr","Mai","Iun","Iul","Aug","Sep","Oct","Nov","Dec"],day_full:["Duminica","Luni","Marti","Miercuri","Joi","Vineri","Sambata"],day_short:["Du","Lu","Ma","Mi","Jo","Vi","Sa"]},labels:{new_task:"Sarcina noua",icon_save:"Salveaza",icon_cancel:"Anuleaza",icon_details:"Detalii",icon_edit:"Editeaza",icon_delete:"Sterge",confirm_closing:"Schimbarile nu vor fi salvate, esti sigur?",confirm_deleting:"Evenimentul va fi sters permanent, esti sigur?",section_description:"Descriere",section_time:"Interval",section_type:"Type",section_deadline:"Deadline",section_baselines:"Baselines",column_wbs:"WBS",column_text:"Task name",column_start_date:"Start time",column_duration:"Duration",column_add:"",link:"Link",confirm_link_deleting:"will be deleted",link_start:" (start)",link_end:" (end)",type_task:"Task",type_project:"Project",type_milestone:"Milestone",minutes:"Minutes",hours:"Hours",days:"Days",weeks:"Week",months:"Months",years:"Years",message_ok:"OK",message_cancel:"Anuleaza",section_constraint:"Constraint",constraint_type:"Constraint type",constraint_date:"Constraint date",asap:"As Soon As Possible",alap:"As Late As Possible",snet:"Start No Earlier Than",snlt:"Start No Later Than",fnet:"Finish No Earlier Than",fnlt:"Finish No Later Than",mso:"Must Start On",mfo:"Must Finish On",resources_filter_placeholder:"type to filter",resources_filter_label:"hide empty",empty_state_text_link:"Click here",empty_state_text_description:"to create your first task",baselines_section_placeholder:"Start adding a new baseline",baselines_add_button:"Add Baseline",baselines_remove_button:"Remove",baselines_remove_all_button:"Remove All",deadline_enable_button:"Set",deadline_disable_button:"Remove"}},ka={date:{month_full:["Январь","Февраль","Март","Апрель","Maй","Июнь","Июль","Август","Сентябрь","Oктябрь","Ноябрь","Декабрь"],month_short:["Янв","Фев","Maр","Aпр","Maй","Июн","Июл","Aвг","Сен","Окт","Ноя","Дек"],day_full:["Воскресенье","Понедельник","Вторник","Среда","Четверг","Пятница","Суббота"],day_short:["Вс","Пн","Вт","Ср","Чт","Пт","Сб"]},labels:{new_task:"Новое задание",icon_save:"Сохранить",icon_cancel:"Отменить",icon_details:"Детали",icon_edit:"Изменить",icon_delete:"Удалить",confirm_closing:"",confirm_deleting:"Событие будет удалено безвозвратно, продолжить?",section_description:"Описание",section_time:"Период времени",section_type:"Тип",section_deadline:"Deadline",section_baselines:"Baselines",column_wbs:"ИСР",column_text:"Задача",column_start_date:"Начало",column_duration:"Длительность",column_add:"",link:"Связь",confirm_link_deleting:"будет удалена",link_start:" (начало)",link_end:" (конец)",type_task:"Task",type_project:"Project",type_milestone:"Milestone",minutes:"Минута",hours:"Час",days:"День",weeks:"Неделя",months:"Месяц",years:"Год",message_ok:"OK",message_cancel:"Отменить",section_constraint:"Constraint",constraint_type:"Constraint type",constraint_date:"Constraint date",asap:"As Soon As Possible",alap:"As Late As Possible",snet:"Start No Earlier Than",snlt:"Start No Later Than",fnet:"Finish No Earlier Than",fnlt:"Finish No Later Than",mso:"Must Start On",mfo:"Must Finish On",resources_filter_placeholder:"начните вводить слово для фильтрации",resources_filter_label:"спрятать не установленные",empty_state_text_link:"Click here",empty_state_text_description:"to create your first task",baselines_section_placeholder:"Start adding a new baseline",baselines_add_button:"Add Baseline",baselines_remove_button:"Remove",baselines_remove_all_button:"Remove All",deadline_enable_button:"Set",deadline_disable_button:"Remove"}},ya={date:{month_full:["Januar","Februar","Marec","April","Maj","Junij","Julij","Avgust","September","Oktober","November","December"],month_short:["Jan","Feb","Mar","Apr","Maj","Jun","Jul","Aug","Sep","Okt","Nov","Dec"],day_full:["Nedelja","Ponedeljek","Torek","Sreda","Četrtek","Petek","Sobota"],day_short:["Ned","Pon","Tor","Sre","Čet","Pet","Sob"]},labels:{new_task:"Nova naloga",icon_save:"Shrani",icon_cancel:"Prekliči",icon_details:"Podrobnosti",icon_edit:"Uredi",icon_delete:"Izbriši",confirm_closing:"",confirm_deleting:"Dogodek bo izbrisan. Želite nadaljevati?",section_description:"Opis",section_time:"Časovni okvir",section_type:"Type",section_deadline:"Deadline",section_baselines:"Baselines",column_wbs:"WBS",column_text:"Task name",column_start_date:"Start time",column_duration:"Duration",column_add:"",link:"Link",confirm_link_deleting:"will be deleted",link_start:" (start)",link_end:" (end)",type_task:"Task",type_project:"Project",type_milestone:"Milestone",minutes:"Minutes",hours:"Hours",days:"Days",weeks:"Week",months:"Months",years:"Years",message_ok:"OK",message_cancel:"Prekliči",section_constraint:"Constraint",constraint_type:"Constraint type",constraint_date:"Constraint date",asap:"As Soon As Possible",alap:"As Late As Possible",snet:"Start No Earlier Than",snlt:"Start No Later Than",fnet:"Finish No Earlier Than",fnlt:"Finish No Later Than",mso:"Must Start On",mfo:"Must Finish On",resources_filter_placeholder:"type to filter",resources_filter_label:"hide empty",empty_state_text_link:"Click here",empty_state_text_description:"to create your first task",baselines_section_placeholder:"Start adding a new baseline",baselines_add_button:"Add Baseline",baselines_remove_button:"Remove",baselines_remove_all_button:"Remove All",deadline_enable_button:"Set",deadline_disable_button:"Remove"}},ba={date:{month_full:["Január","Február","Marec","Apríl","Máj","Jún","Júl","August","September","Október","November","December"],month_short:["Jan","Feb","Mar","Apr","Máj","Jún","Júl","Aug","Sept","Okt","Nov","Dec"],day_full:["Nedeľa","Pondelok","Utorok","Streda","Štvrtok","Piatok","Sobota"],day_short:["Ne","Po","Ut","St","Št","Pi","So"]},labels:{new_task:"Nová úloha",icon_save:"Uložiť",icon_cancel:"Späť",icon_details:"Detail",icon_edit:"Edituj",icon_delete:"Zmazať",confirm_closing:"Vaše zmeny nebudú uložené. Skutočne?",confirm_deleting:"Udalosť bude natrvalo vymazaná. Skutočne?",section_description:"Poznámky",section_time:"Doba platnosti",section_type:"Type",section_deadline:"Deadline",section_baselines:"Baselines",column_wbs:"WBS",column_text:"Task name",column_start_date:"Start time",column_duration:"Duration",column_add:"",link:"Link",confirm_link_deleting:"will be deleted",link_start:" (start)",link_end:" (end)",type_task:"Task",type_project:"Project",type_milestone:"Milestone",minutes:"Minutes",hours:"Hours",days:"Days",weeks:"Week",months:"Months",years:"Years",message_ok:"OK",message_cancel:"Späť",section_constraint:"Constraint",constraint_type:"Constraint type",constraint_date:"Constraint date",asap:"As Soon As Possible",alap:"As Late As Possible",snet:"Start No Earlier Than",snlt:"Start No Later Than",fnet:"Finish No Earlier Than",fnlt:"Finish No Later Than",mso:"Must Start On",mfo:"Must Finish On",resources_filter_placeholder:"type to filter",resources_filter_label:"hide empty",empty_state_text_link:"Click here",empty_state_text_description:"to create your first task",baselines_section_placeholder:"Start adding a new baseline",baselines_add_button:"Add Baseline",baselines_remove_button:"Remove",baselines_remove_all_button:"Remove All",deadline_enable_button:"Set",deadline_disable_button:"Remove"}},xa={date:{month_full:["Januari","Februari","Mars","April","Maj","Juni","Juli","Augusti","September","Oktober","November","December"],month_short:["Jan","Feb","Mar","Apr","Maj","Jun","Jul","Aug","Sep","Okt","Nov","Dec"],day_full:["Söndag","Måndag","Tisdag","Onsdag","Torsdag","Fredag","Lördag"],day_short:["Sön","Mån","Tis","Ons","Tor","Fre","Lör"]},labels:{new_task:"Ny uppgift",icon_save:"Spara",icon_cancel:"Avbryt",icon_details:"Detajer",icon_edit:"Ändra",icon_delete:"Ta bort",confirm_closing:"",confirm_deleting:"Är du säker på att du vill ta bort händelsen permanent?",section_description:"Beskrivning",section_time:"Tid",section_type:"Typ",section_deadline:"Deadline",section_baselines:"Baselines",column_wbs:"WBS",column_text:"Uppgiftsnamn",column_start_date:"Starttid",column_duration:"Varaktighet",column_add:"",link:"Länk",confirm_link_deleting:"kommer tas bort",link_start:" (start)",link_end:" (slut)",type_task:"Uppgift",type_project:"Projekt",type_milestone:"Milstolpe",minutes:"Minuter",hours:"Timmar",days:"Dagar",weeks:"Veckor",months:"Månader",years:"År",message_ok:"OK",message_cancel:"Avbryt",section_constraint:"Constraint",constraint_type:"Constraint type",constraint_date:"Constraint date",asap:"As Soon As Possible",alap:"As Late As Possible",snet:"Start No Earlier Than",snlt:"Start No Later Than",fnet:"Finish No Earlier Than",fnlt:"Finish No Later Than",mso:"Must Start On",mfo:"Must Finish On",resources_filter_placeholder:"type to filter",resources_filter_label:"hide empty",empty_state_text_link:"Click here",empty_state_text_description:"to create your first task",baselines_section_placeholder:"Start adding a new baseline",baselines_add_button:"Add Baseline",baselines_remove_button:"Remove",baselines_remove_all_button:"Remove All",deadline_enable_button:"Set",deadline_disable_button:"Remove"}},$a={date:{month_full:["Ocak","Şubat","Mart","Nisan","Mayıs","Haziran","Temmuz","Ağustos","Eylül","Ekim","Kasım","Aralık"],month_short:["Oca","Şub","Mar","Nis","May","Haz","Tem","Ağu","Eyl","Eki","Kas","Ara"],day_full:["Pazar","Pazartesi","Salı","Çarşamba","Perşembe","Cuma","Cumartesi"],day_short:["Paz","Pzt","Sal","Çar","Per","Cum","Cmt"]},labels:{new_task:"Yeni görev",icon_save:"Kaydet",icon_cancel:"İptal",icon_details:"Detaylar",icon_edit:"Düzenle",icon_delete:"Sil",confirm_closing:"",confirm_deleting:"Görev silinecek, emin misiniz?",section_description:"Açıklama",section_time:"Zaman Aralığı",section_type:"Tip",section_deadline:"Deadline",section_baselines:"Baselines",column_wbs:"WBS",column_text:"Görev Adı",column_start_date:"Başlangıç",column_duration:"Süre",column_add:"",link:"Bağlantı",confirm_link_deleting:"silinecek",link_start:" (başlangıç)",link_end:" (bitiş)",type_task:"Görev",type_project:"Proje",type_milestone:"Kilometretaşı",minutes:"Dakika",hours:"Saat",days:"Gün",weeks:"Hafta",months:"Ay",years:"Yıl",message_ok:"OK",message_cancel:"Ýptal",section_constraint:"Constraint",constraint_type:"Constraint type",constraint_date:"Constraint date",asap:"As Soon As Possible",alap:"As Late As Possible",snet:"Start No Earlier Than",snlt:"Start No Later Than",fnet:"Finish No Earlier Than",fnlt:"Finish No Later Than",mso:"Must Start On",mfo:"Must Finish On",resources_filter_placeholder:"type to filter",resources_filter_label:"hide empty",empty_state_text_link:"Click here",empty_state_text_description:"to create your first task",baselines_section_placeholder:"Start adding a new baseline",baselines_add_button:"Add Baseline",baselines_remove_button:"Remove",baselines_remove_all_button:"Remove All",deadline_enable_button:"Set",deadline_disable_button:"Remove"}},wa={date:{month_full:["Січень","Лютий","Березень","Квітень","Травень","Червень","Липень","Серпень","Вересень","Жовтень","Листопад","Грудень"],month_short:["Січ","Лют","Бер","Кві","Тра","Чер","Лип","Сер","Вер","Жов","Лис","Гру"],day_full:["Неділя","Понеділок","Вівторок","Середа","Четвер","П'ятниця","Субота"],day_short:["Нед","Пон","Вів","Сер","Чет","Птн","Суб"]},labels:{new_task:"Нове завдання",icon_save:"Зберегти",icon_cancel:"Відміна",icon_details:"Деталі",icon_edit:"Редагувати",icon_delete:"Вилучити",confirm_closing:"",confirm_deleting:"Подія вилучиться назавжди. Ви впевнені?",section_description:"Опис",section_time:"Часовий проміжок",section_type:"Тип",section_deadline:"Deadline",section_baselines:"Baselines",column_wbs:"WBS",column_text:"Task name",column_start_date:"Start time",column_duration:"Duration",column_add:"",link:"Link",confirm_link_deleting:"will be deleted",link_start:" (start)",link_end:" (end)",type_task:"Task",type_project:"Project",type_milestone:"Milestone",minutes:"Minutes",hours:"Hours",days:"Days",weeks:"Week",months:"Months",years:"Years",message_ok:"OK",message_cancel:"Відміна",section_constraint:"Constraint",constraint_type:"Constraint type",constraint_date:"Constraint date",asap:"As Soon As Possible",alap:"As Late As Possible",snet:"Start No Earlier Than",snlt:"Start No Later Than",fnet:"Finish No Earlier Than",fnlt:"Finish No Later Than",mso:"Must Start On",mfo:"Must Finish On",resources_filter_placeholder:"type to filter",resources_filter_label:"hide empty",empty_state_text_link:"Click here",empty_state_text_description:"to create your first task",baselines_section_placeholder:"Start adding a new baseline",baselines_add_button:"Add Baseline",baselines_remove_button:"Remove",baselines_remove_all_button:"Remove All",deadline_enable_button:"Set",deadline_disable_button:"Remove"}};function Sa(){this.constants=dn,this.version="9.0.6",this.license="gpl",this.templates={},this.ext={},this.keys={edit_save:this.constants.KEY_CODES.ENTER,edit_cancel:this.constants.KEY_CODES.ESC}}function Ta(t){var e=new Sa,i=new cn(t),n={};e.plugins=function(l){for(var d in l)if(l[d]&&!n[d]){var c=i.getExtension(d);c&&(c(e),n[d]=!0)}return n},e.$services=function(){var l={};return{services:{},setService:function(d,c){l[d]=c},getService:function(d){return l[d]?l[d]():null},dropService:function(d){l[d]&&delete l[d]},destructor:function(){for(var d in l)if(l[d]){var c=l[d];c&&c.destructor&&c.destructor()}l=null}}}(),e.config=un(),e.ajax=function(l){return{cache:!0,method:"get",parse:function(d){return typeof d!="string"?d:(d=d.replace(/^[\s]+/,""),typeof DOMParser>"u"||vt.isIE?dt.ActiveXObject!==void 0&&((c=new dt.ActiveXObject("Microsoft.XMLDOM")).async="false",c.loadXML(d)):c=new DOMParser().parseFromString(d,"text/xml"),c);var c},xmltop:function(d,c,u){if(c.status===void 0||c.status<400){var h=c.responseXML?c.responseXML||c:this.parse(c.responseText||c);if(h&&h.documentElement!==null&&!h.getElementsByTagName("parsererror").length)return h.getElementsByTagName(d)[0]}return u!==-1&&l.callEvent("onLoadXMLError",["Incorrect XML",arguments[1],u]),document.createElement("DIV")},xpath:function(d,c){if(c.nodeName||(c=c.responseXML||c),vt.isIE)return c.selectNodes(d)||[];for(var u,h=[],f=(c.ownerDocument||c).evaluate(d,c,null,XPathResult.ANY_TYPE,null);u=f.iterateNext();)h.push(u);return h},query:function(d){return this._call(d.method||"GET",d.url,d.data||"",d.async||!0,d.callback,d.headers)},get:function(d,c,u){var h=$t("GET",arguments);return this.query(h)},getSync:function(d,c){var u=$t("GET",arguments);return u.async=!1,this.query(u)},put:function(d,c,u,h){var f=$t("PUT",arguments);return this.query(f)},del:function(d,c,u){var h=$t("DELETE",arguments);return this.query(h)},post:function(d,c,u,h){arguments.length==1?c="":arguments.length==2&&typeof c=="function"&&(u=c,c="");var f=$t("POST",arguments);return this.query(f)},postSync:function(d,c,u){c=c===null?"":String(c);var h=$t("POST",arguments);return h.async=!1,this.query(h)},_call:function(d,c,u,h,f,g){return new l.Promise(function(y,v){var b=typeof XMLHttpRequest!==void 0?new XMLHttpRequest:new dt.ActiveXObject("Microsoft.XMLHTTP"),_=navigator.userAgent.match(/AppleWebKit/)!==null&&navigator.userAgent.match(/Qt/)!==null&&navigator.userAgent.match(/Safari/)!==null;h&&(b.onreadystatechange=function(){if(b.readyState==4||_&&b.readyState==3){if((b.status!=200||b.responseText==="")&&!l.callEvent("onAjaxError",[b]))return;setTimeout(function(){typeof f=="function"&&f.apply(dt,[{xmlDoc:b,filePath:c}]),y(b),typeof f=="function"&&(f=null,b=null)},0)}});var m=!this||!this.cache;if(d=="GET"&&m&&(c+=(c.indexOf("?")>=0?"&":"?")+"dhxr"+new Date().getTime()+"=1"),b.open(d,c,h),g)for(var p in g)b.setRequestHeader(p,g[p]);else d.toUpperCase()=="POST"||d=="PUT"||d=="DELETE"?b.setRequestHeader("Content-Type","application/x-www-form-urlencoded"):d=="GET"&&(u=null);if(b.setRequestHeader("X-Requested-With","XMLHttpRequest"),b.send(u),!h)return{xmlDoc:b,filePath:c}})},urlSeparator:function(d){return d.indexOf("?")!=-1?"&":"?"}}}(e),e.date=hn(e),e.RemoteEvents=fn;var a=function(l){function d(u){return{target:u.target||u.srcElement,pageX:u.pageX,pageY:u.pageY,clientX:u.clientX,clientY:u.clientY,metaKey:u.metaKey,shiftKey:u.shiftKey,ctrlKey:u.ctrlKey,altKey:u.altKey}}function c(u,h){this._obj=u,this._settings=h||{},ot(this);var f=this.getInputMethods();this._drag_start_timer=null,l.attachEvent("onGanttScroll",R(function(v,b){this.clearDragTimer()},this));for(var g={passive:!1},y=0;y<f.length;y++)R(function(v){l.event(u,v.down,R(function(_){v.accessor(_)&&(_.button!==void 0&&_.button!==0||(h.preventDefault&&h.selector&&ct(_.target,h.selector)&&_.preventDefault(),l.config.touch&&_.timeStamp&&_.timeStamp-0<300||(this._settings.original_target=d(_),this._settings.original_element_sizes={...rt(_,li(u)),width:_.target.offsetWidth,height:_.target.offsetHeight},l.config.touch?(this.clearDragTimer(),this._drag_start_timer=setTimeout(R(function(){l.getState().lightbox||this.dragStart(u,_,v)},this),l.config.touch_drag)):this.dragStart(u,_,v))))},this),g);var b=document.body;l.event(b,v.up,R(function(_){v.accessor(_)&&this.clearDragTimer()},this),g)},this)(f[y])}return c.prototype={traceDragEvents:function(u,h){var f=R(function(m){return this.dragMove(u,m,h.accessor)},this);R(function(m){return this.dragScroll(u,m)},this);var g=R(function(m){if(!this.config.started||!j(this.config.updates_per_second)||fi(this,this.config.updates_per_second)){var p=f(m);if(p)try{m&&m.preventDefault&&m.cancelable&&m.preventDefault()}catch{}return p}},this),y=kt(l.$root),v=this.config.mousemoveContainer||kt(l.$root),b={passive:!1},_=R(function(m){return l.eventRemove(v,h.move,g),l.eventRemove(y,h.up,_,b),this.dragEnd(u)},this);l.event(v,h.move,g,b),l.event(y,h.up,_,b)},checkPositionChange:function(u){var h=u.x-this.config.pos.x,f=u.y-this.config.pos.y;return Math.sqrt(Math.pow(Math.abs(h),2)+Math.pow(Math.abs(f),2))>this.config.sensitivity},initDnDMarker:function(){var u=this.config.marker=document.createElement("div");u.className="gantt_drag_marker",u.innerHTML="",document.body.appendChild(u)},backupEventTarget:function(u,h){if(l.config.touch){var f=h(u),g=f.target||f.srcElement,y=g.cloneNode(!0);this.config.original_target=d(f),this.config.original_target.target=y,this.config.backup_element=g,g.parentNode.appendChild(y),g.style.display="none",(this.config.mousemoveContainer||document.body).appendChild(g)}},getInputMethods:function(){var u=[];if(u.push({move:"mousemove",down:"mousedown",up:"mouseup",accessor:function(f){return f}}),l.config.touch){var h=!0;try{document.createEvent("TouchEvent")}catch{h=!1}h?u.push({move:"touchmove",down:"touchstart",up:"touchend",accessor:function(f){return f.touches&&f.touches.length>1?null:f.touches[0]?{target:document.elementFromPoint(f.touches[0].clientX,f.touches[0].clientY),pageX:f.touches[0].pageX,pageY:f.touches[0].pageY,clientX:f.touches[0].clientX,clientY:f.touches[0].clientY}:f}}):dt.navigator.pointerEnabled?u.push({move:"pointermove",down:"pointerdown",up:"pointerup",accessor:function(f){return f.pointerType=="mouse"?null:f}}):dt.navigator.msPointerEnabled&&u.push({move:"MSPointerMove",down:"MSPointerDown",up:"MSPointerUp",accessor:function(f){return f.pointerType==f.MSPOINTER_TYPE_MOUSE?null:f}})}return u},clearDragTimer:function(){this._drag_start_timer&&(clearTimeout(this._drag_start_timer),this._drag_start_timer=null)},dragStart:function(u,h,f){this.config&&this.config.started||(this.config={obj:u,marker:null,started:!1,pos:this.getPosition(h),sensitivity:4},this._settings&&N(this.config,this._settings,!0),this.traceDragEvents(u,f),l._prevent_touch_scroll=!0,document.body.classList.add("gantt_noselect"),l.config.touch&&this.dragMove(u,h,f.accessor))},dragMove:function(u,h,f){var g=f(h);if(!g)return!1;if(!this.config.marker&&!this.config.started){var y=this.getPosition(g);if(l.config.touch||this.checkPositionChange(y)){if(this.config.started=!0,this.config.ignore=!1,l._touch_drag=!0,this.callEvent("onBeforeDragStart",[u,this.config.original_target])===!1)return this.config.ignore=!0,!1;this.backupEventTarget(h,f),this.initDnDMarker(),l._touch_feedback(),this.callEvent("onAfterDragStart",[u,this.config.original_target])}else this.config.ignore=!0}return this.config.ignore?!1:h.targetTouches&&!g.target?void 0:(g.pos=this.getPosition(g),this.config.marker.style.left=g.pos.x+"px",this.config.marker.style.top=g.pos.y+"px",this.callEvent("onDragMove",[u,g]),!0)},dragEnd:function(u){var h=this.config.backup_element;h&&h.parentNode&&h.parentNode.removeChild(h),l._prevent_touch_scroll=!1,this.config.marker&&(this.config.marker.parentNode.removeChild(this.config.marker),this.config.marker=null,this.callEvent("onDragEnd",[])),this.config.started=!1,l._touch_drag=!1,document.body.classList.remove("gantt_noselect")},getPosition:function(u){var h=0,f=0;return u.pageX||u.pageY?(h=u.pageX,f=u.pageY):(u.clientX||u.clientY)&&(h=u.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,f=u.clientY+document.body.scrollTop+document.documentElement.scrollTop),{x:h,y:f}}},c}(e);e.$services.setService("dnd",function(){return a});var r=function(l){var d={};function c(u,h,f){f=f||u;var g=l.config,y=l.templates;l.config[u]&&d[f]!=g[u]&&(h&&y[f]||(y[f]=l.date.date_to_str(g[u]),d[f]=g[u]))}return{initTemplates:function(){var u=l.date,h=u.date_to_str,f=l.config,g=h(f.xml_date||f.date_format,f.server_utc),y=u.str_to_date(f.xml_date||f.date_format,f.server_utc);c("date_scale",!0,void 0,l.config,l.templates),c("date_grid",!0,"grid_date_format",l.config,l.templates),c("task_date",!0,void 0,l.config,l.templates),l.mixin(l.templates,{xml_format:void 0,format_date:g,xml_date:void 0,parse_date:y,progress_text:function(v,b,_){return""},grid_header_class:function(v,b){return""},task_text:function(v,b,_){return _.text},task_class:function(v,b,_){return""},task_end_date:function(v){return l.templates.task_date(v)},grid_row_class:function(v,b,_){return""},task_row_class:function(v,b,_){return""},timeline_cell_class:function(v,b){return""},timeline_cell_content:function(v,b){return""},scale_cell_class:function(v){return""},scale_row_class:function(v){return""},grid_indent:function(v){return"<div class='gantt_tree_indent'></div>"},grid_folder:function(v){return"<div class='gantt_tree_icon gantt_folder_"+(v.$open?"open":"closed")+"'></div>"},grid_file:function(v){return"<div class='gantt_tree_icon gantt_file'></div>"},grid_open:function(v){return"<div class='gantt_tree_icon gantt_"+(v.$open?"close":"open")+"'></div>"},grid_blank:function(v){return"<div class='gantt_tree_icon gantt_blank'></div>"},date_grid:function(v,b,_){return b&&l.isUnscheduledTask(b)&&l.config.show_unscheduled?l.templates.task_unscheduled_time(b):l.templates.grid_date_format(v,_)},task_time:function(v,b,_){return l.isUnscheduledTask(_)&&l.config.show_unscheduled?l.templates.task_unscheduled_time(_):l.templates.task_date(v)+" - "+l.templates.task_end_date(b)},task_unscheduled_time:function(v){return""},time_picker:h(f.time_picker),link_class:function(v){return""},link_description:function(v){var b=l.getTask(v.source),_=l.getTask(v.target);return"<b>"+b.text+"</b> &ndash;  <b>"+_.text+"</b>"},drag_link:function(v,b,_,m){v=l.getTask(v);var p=l.locale.labels,k="<b>"+v.text+"</b> "+(b?p.link_start:p.link_end)+"<br/>";return _&&(k+="<b> "+(_=l.getTask(_)).text+"</b> "+(m?p.link_start:p.link_end)+"<br/>"),k},drag_link_class:function(v,b,_,m){var p="";return v&&_&&(p=" "+(l.isLinkAllowed(v,_,b,m)?"gantt_link_allow":"gantt_link_deny")),"gantt_link_tooltip"+p},tooltip_date_format:u.date_to_str("%Y-%m-%d"),tooltip_text:function(v,b,_){return`<div>Task: ${_.text}</div>
				<div>Start date: ${l.templates.tooltip_date_format(v)}</div>
				<div>End date: ${l.templates.tooltip_date_format(b)}</div>`},baseline_text:function(v,b,_){return""}})},initTemplate:c}}(e);e.$services.setService("templateLoader",function(){return r}),ot(e);var s=new gn;s.registerProvider("global",function(){var l={min_date:e._min_date,max_date:e._max_date,selected_task:null};return e.$data&&e.$data.tasksStore&&(l.selected_task=e.$data.tasksStore.getSelectedId()),l}),e.getState=s.getState,e.$services.setService("state",function(){return s}),N(e,nn),e.Promise=pn,e.env=vt,function(l){var d=vn.create();N(l,d);var c,u=l.createDatastore({name:"task",type:"treeDatastore",rootId:function(){return l.config.root_id},initItem:R(function(_){this.defined(_.id)||(_.id=this.uid()),_.start_date&&(_.start_date=l.date.parseDate(_.start_date,"parse_date")),_.end_date&&(_.end_date=l.date.parseDate(_.end_date,"parse_date"));var m=null;(_.duration||_.duration===0)&&(_.duration=m=1*_.duration),m&&(_.start_date&&!_.end_date?_.end_date=this.calculateEndDate(_):!_.start_date&&_.end_date&&(_.start_date=this.calculateEndDate({start_date:_.end_date,duration:-_.duration,task:_}))),l.config.deadlines!==!1&&_.deadline&&(_.deadline=l.date.parseDate(_.deadline,"parse_date")),_.progress=Number(_.progress)||0,this._isAllowedUnscheduledTask(_)&&this._set_default_task_timing(_),this._init_task_timing(_),_.start_date&&_.end_date&&this.correctTaskWorkTime(_),_.$source=[],_.$target=[];var p=this.$data.tasksStore.getItem(_.id);return p&&!j(_.open)&&(_.$open=p.$open),_.parent===void 0&&(_.parent=this.config.root_id),_.open&&(_.$open=!0),_},l),getConfig:function(){return l.config}}),h=l.createDatastore({name:"link",initItem:R(function(_){return this.defined(_.id)||(_.id=this.uid()),_},l)});function f(_){var m=l.isTaskVisible(_);if(!m&&l.isTaskExists(_)){var p=l.getParent(_);l.isTaskExists(p)&&l.isTaskVisible(p)&&(p=l.getTask(p),l.isSplitTask(p)&&(m=!0))}return m}function g(_){if(l.isTaskExists(_.source)){var m=l.getTask(_.source);m.$source=m.$source||[],m.$source.push(_.id)}if(l.isTaskExists(_.target)){var p=l.getTask(_.target);p.$target=p.$target||[],p.$target.push(_.id)}}function y(_){if(l.isTaskExists(_.source)){for(var m=l.getTask(_.source),p=0;p<m.$source.length;p++)if(m.$source[p]==_.id){m.$source.splice(p,1);break}}if(l.isTaskExists(_.target)){var k=l.getTask(_.target);for(p=0;p<k.$target.length;p++)if(k.$target[p]==_.id){k.$target.splice(p,1);break}}}function v(){for(var _=null,m=l.$data.tasksStore.getItems(),p=0,k=m.length;p<k;p++)(_=m[p]).$source=[],_.$target=[];var $=l.$data.linksStore.getItems();for(p=0,k=$.length;p<k;p++)g($[p])}function b(_){var m=_.source,p=_.target;for(var k in _.events)(function($,w){m.attachEvent($,function(){return p.callEvent(w,Array.prototype.slice.call(arguments))},w)})(k,_.events[k])}l.attachEvent("onDestroy",function(){u.destructor(),h.destructor()}),l.attachEvent("onLinkValidation",function(_){if(l.isLinkExists(_.id)||_.id==="predecessor_generated")return!0;for(var m=l.getTask(_.source).$source,p=0;p<m.length;p++){var k=l.getLink(m[p]),$=_.source==k.source,w=_.target==k.target,x=_.type==k.type;if($&&w&&x)return!1}return!0}),u.attachEvent("onBeforeRefreshAll",function(){if(!u._skipTaskRecalculation)for(var _=u.getVisibleItems(),m=0;m<_.length;m++){var p=_[m];p.$index=m,p.$local_index=l.getTaskIndex(p.id),l.resetProjectDates(p)}}),u.attachEvent("onFilterItem",function(_,m){if(l.config.show_tasks_outside_timescale)return!0;var p=null,k=null;if(l.config.start_date&&l.config.end_date){if(l._isAllowedUnscheduledTask(m))return!0;if(p=l.config.start_date.valueOf(),k=l.config.end_date.valueOf(),+m.start_date>k||+m.end_date<+p)return!1}return!0}),u.attachEvent("onIdChange",function(_,m){l._update_flags(_,m);var p=l.getTask(m);u.isSilent()||(p.$split_subtask||p.rollup)&&l.eachParent(function(k){l.refreshTask(k.id)},m)}),u.attachEvent("onAfterUpdate",function(_){if(l._update_parents(_),l.getState("batchUpdate").batch_update)return!0;var m=u.getItem(_);m.$source||(m.$source=[]);for(var p=0;p<m.$source.length;p++)h.refresh(m.$source[p]);for(m.$target||(m.$target=[]),p=0;p<m.$target.length;p++)h.refresh(m.$target[p])}),u.attachEvent("onBeforeItemMove",function(_,m,p){return!Pt(_,l,u)||(console.log("The placeholder task cannot be moved to another position."),!1)}),u.attachEvent("onAfterItemMove",function(_,m,p){var k=l.getTask(_);this.getNextSibling(_)!==null?k.$drop_target=this.getNextSibling(_):this.getPrevSibling(_)!==null?k.$drop_target="next:"+this.getPrevSibling(_):k.$drop_target="next:null"}),u.attachEvent("onStoreUpdated",function(_,m,p){if(p=="delete"&&l._update_flags(_,null),!l.$services.getService("state").getState("batchUpdate").batch_update){if(l.config.fit_tasks&&p!=="paint"){var k=l.getState();he(l);var $=l.getState();if(+k.min_date!=+$.min_date||+k.max_date!=+$.max_date)return l.render(),l.callEvent("onScaleAdjusted",[]),!0}p=="add"||p=="move"||p=="delete"?l.$layout&&(this.$config.name!="task"||p!="add"&&p!="delete"||this._skipTaskRecalculation!="lightbox"&&(this._skipTaskRecalculation=!0),l.$layout.resize()):_||h.refresh()}}),h.attachEvent("onAfterAdd",function(_,m){g(m)}),h.attachEvent("onAfterUpdate",function(_,m){v()}),h.attachEvent("onAfterDelete",function(_,m){y(m)}),h.attachEvent("onAfterSilentDelete",function(_,m){y(m)}),h.attachEvent("onBeforeIdChange",function(_,m){y(l.mixin({id:_},l.$data.linksStore.getItem(m))),g(l.$data.linksStore.getItem(m))}),h.attachEvent("onFilterItem",function(_,m){if(!l.config.show_links)return!1;var p=f(m.source),k=f(m.target);return!(!p||!k||l._isAllowedUnscheduledTask(l.getTask(m.source))||l._isAllowedUnscheduledTask(l.getTask(m.target)))&&l.callEvent("onBeforeLinkDisplay",[_,m])}),c={},l.attachEvent("onBeforeTaskDelete",function(_,m){return c[_]=_e.getSubtreeLinks(l,_),!0}),l.attachEvent("onAfterTaskDelete",function(_,m){c[_]&&l.$data.linksStore.silent(function(){for(var p in c[_])l.isLinkExists(p)&&l.$data.linksStore.removeItem(p),y(c[_][p]);c[_]=null})}),l.attachEvent("onAfterLinkDelete",function(_,m){l.isTaskExists(m.source)&&l.refreshTask(m.source),l.isTaskExists(m.target)&&l.refreshTask(m.target)}),l.attachEvent("onParse",v),b({source:h,target:l,events:{onItemLoading:"onLinkLoading",onBeforeAdd:"onBeforeLinkAdd",onAfterAdd:"onAfterLinkAdd",onBeforeUpdate:"onBeforeLinkUpdate",onAfterUpdate:"onAfterLinkUpdate",onBeforeDelete:"onBeforeLinkDelete",onAfterDelete:"onAfterLinkDelete",onIdChange:"onLinkIdChange"}}),b({source:u,target:l,events:{onItemLoading:"onTaskLoading",onBeforeAdd:"onBeforeTaskAdd",onAfterAdd:"onAfterTaskAdd",onBeforeUpdate:"onBeforeTaskUpdate",onAfterUpdate:"onAfterTaskUpdate",onBeforeDelete:"onBeforeTaskDelete",onAfterDelete:"onAfterTaskDelete",onIdChange:"onTaskIdChange",onBeforeItemMove:"onBeforeTaskMove",onAfterItemMove:"onAfterTaskMove",onFilterItem:"onBeforeTaskDisplay",onItemOpen:"onTaskOpened",onItemClose:"onTaskClosed",onBeforeSelect:"onBeforeTaskSelected",onAfterSelect:"onTaskSelected",onAfterUnselect:"onTaskUnselected"}}),l.$data={tasksStore:u,linksStore:h}}(e),e.dataProcessor=Fe.DEPRECATED_api,e.createDataProcessor=Fe.createDataProcessor,function(l){l.ext||(l.ext={});for(var d=[xn,wn,Tn,En,Cn,Dn,In,Mn,Pn],c=0;c<d.length;c++)d[c]&&d[c](l)}(e),function(l){l.getGridColumn=function(d){for(var c=l.config.columns,u=0;u<c.length;u++)if(c[u].name==d)return c[u];return null},l.getGridColumns=function(){return l.config.columns.slice()}}(e),function(l){l.isReadonly=function(d){return typeof d!="number"&&typeof d!="string"||!l.isTaskExists(d)||(d=l.getTask(d)),(!d||!d[this.config.editable_property])&&(d&&d[this.config.readonly_property]||this.config.readonly)}}(e),Rn(e),function(l){var d=new ki(l),c=new yi(d);N(l,Fn.create(d,c))}(e),Vn(e),function(l){l.getTaskType=function(d){return"task"}}(e),function(l){function d(){return l._cached_functions.update_if_changed(l),l._cached_functions.active||l._cached_functions.activate(),!0}l._cached_functions={cache:{},mode:!1,critical_path_mode:!1,wrap_methods:function(u,h){if(h._prefetch_originals)for(var f in h._prefetch_originals)h[f]=h._prefetch_originals[f];for(h._prefetch_originals={},f=0;f<u.length;f++)this.prefetch(u[f],h)},prefetch:function(u,h){var f=h[u];if(f){var g=this;h._prefetch_originals[u]=f,h[u]=function(){for(var y=new Array(arguments.length),v=0,b=arguments.length;v<b;v++)y[v]=arguments[v];if(g.active){var _=g.get_arguments_hash(Array.prototype.slice.call(y));g.cache[u]||(g.cache[u]={});var m=g.cache[u];if(g.has_cached_value(m,_))return g.get_cached_value(m,_);var p=f.apply(this,y);return g.cache_value(m,_,p),p}return f.apply(this,y)}}return f},cache_value:function(u,h,f){this.is_date(f)&&(f=new Date(f)),u[h]=f},has_cached_value:function(u,h){return u.hasOwnProperty(h)},get_cached_value:function(u,h){var f=u[h];return this.is_date(f)&&(f=new Date(f)),f},is_date:function(u){return u&&u.getUTCDate},get_arguments_hash:function(u){for(var h=[],f=0;f<u.length;f++)h.push(this.stringify_argument(u[f]));return"("+h.join(";")+")"},stringify_argument:function(u){return(u.id?u.id:this.is_date(u)?u.valueOf():u)+""},activate:function(){this.clear(),this.active=!0},deactivate:function(){this.clear(),this.active=!1},clear:function(){this.cache={}},setup:function(u){var h=[],f=["_isProjectEnd","_getProjectEnd","_getSlack"];this.mode=="auto"?u.config.highlight_critical_path&&(h=f):this.mode===!0&&(h=f),this.wrap_methods(h,u)},update_if_changed:function(u){(this.critical_path_mode!=u.config.highlight_critical_path||this.mode!==u.config.optimize_render)&&(this.critical_path_mode=u.config.highlight_critical_path,this.mode=u.config.optimize_render,this.setup(u))}},l.attachEvent("onBeforeGanttRender",d),l.attachEvent("onBeforeDataRender",d),l.attachEvent("onBeforeSmartRender",function(){d()}),l.attachEvent("onBeforeParse",d),l.attachEvent("onDataRender",function(){l._cached_functions.deactivate()});var c=null;l.attachEvent("onSmartRender",function(){c&&clearTimeout(c),c=setTimeout(function(){l._cached_functions.deactivate()},1e3)}),l.attachEvent("onBeforeGanttReady",function(){return l._cached_functions.update_if_changed(l),!0})}(e),Un(e),function(l){l.destructor=function(){for(var d in this.clearAll(),this.callEvent("onDestroy",[]),this.$root&&delete this.$root.gantt,this._eventRemoveAll&&this._eventRemoveAll(),this.$layout&&this.$layout.destructor(),this.resetLightbox&&this.resetLightbox(),this.ext.inlineEditors&&this.ext.inlineEditors.destructor(),this._dp&&this._dp.destructor&&this._dp.destructor(),this.$services.destructor(),this.detachAllEvents(),this)d.indexOf("$")===0&&delete this[d];this.$destroyed=!0}}(e);var o=new ha({en:ta,ar:qn,be:Gn,ca:Yn,cn:Jn,cs:Kn,da:Xn,de:Zn,el:Qn,es:ea,fa:ia,fi:na,fr:aa,he:ra,hr:sa,hu:oa,id:la,it:da,jp:ca,kr:ua,nb:_a,nl:fa,no:ga,pl:pa,pt:ma,ro:va,ru:ka,si:ya,sk:ba,sv:xa,tr:$a,ua:wa});return e.i18n={addLocale:o.addLocale,setLocale:function(l){if(typeof l=="string"){var d=o.getLocale(l);d||(d=o.getLocale("en")),e.locale=d}else if(l)if(e.locale)for(var c in l)l[c]&&typeof l[c]=="object"?(e.locale[c]||(e.locale[c]={}),e.mixin(e.locale[c],l[c],!0)):e.locale[c]=l[c];else e.locale=l;const u=e.locale.labels;u.gantt_save_btn=u.gantt_save_btn||u.icon_save,u.gantt_cancel_btn=u.gantt_cancel_btn||u.icon_cancel,u.gantt_delete_btn=u.gantt_delete_btn||u.icon_delete},getLocale:o.getLocale},e.i18n.setLocale("en"),e}function Ea(t){var e="data-dhxbox",i=null;function n(_,m){var p=_.callback;y.hide(_.box),i=_.box=null,p&&p(m)}function a(_){if(i){var m=_.which||_.keyCode,p=!1;if(v.keyboard){if(m==13||m==32){var k=_.target||_.srcElement;X(k).indexOf("gantt_popup_button")>-1&&k.click?k.click():(n(i,!0),p=!0)}m==27&&(n(i,!1),p=!0)}return p?(_.preventDefault&&_.preventDefault(),!(_.cancelBubble=!0)):void 0}}var r=kt(t.$root)||document;function s(_){s.cover||(s.cover=document.createElement("div"),s.cover.onkeydown=a,s.cover.className="dhx_modal_cover",document.body.appendChild(s.cover)),s.cover.style.display=_?"inline-block":"none"}function o(_,m,p){return"<div "+t._waiAria.messageButtonAttrString(_)+" class='gantt_popup_button "+("gantt_"+m.toLowerCase().replace(/ /g,"_")+"_button")+"' data-result='"+p+"' result='"+p+"' ><div>"+_+"</div></div>"}function l(){for(var _=[].slice.apply(arguments,[0]),m=0;m<_.length;m++)if(_[m])return _[m]}function d(_,m,p){var k=_.tagName?_:function(x,S,T){var E=document.createElement("div"),C=st();t._waiAria.messageModalAttr(E,C),E.className=" gantt_modal_box gantt-"+x.type,E.setAttribute(e,1);var D="";if(x.width&&(E.style.width=x.width),x.height&&(E.style.height=x.height),x.title&&(D+='<div class="gantt_popup_title">'+x.title+"</div>"),D+='<div class="gantt_popup_text" id="'+C+'"><span>'+(x.content?"":x.text)+'</span></div><div  class="gantt_popup_controls">',S&&(D+=o(l(x.ok,t.locale.labels.message_ok,"OK"),"ok",!0)),T&&(D+=o(l(x.cancel,t.locale.labels.message_cancel,"Cancel"),"cancel",!1)),x.buttons)for(var A=0;A<x.buttons.length;A++){var I=x.buttons[A];D+=typeof I=="object"?o(I.label,I.css||"gantt_"+I.label.toLowerCase()+"_button",I.value||A):o(I,I,A)}if(D+="</div>",E.innerHTML=D,x.content){var M=x.content;typeof M=="string"&&(M=document.getElementById(M)),M.style.display=="none"&&(M.style.display=""),E.childNodes[x.title?1:0].appendChild(M)}return E.onclick=function(L){var P=L.target||L.srcElement;if(P.className||(P=P.parentNode),ct(P,".gantt_popup_button")){var H=P.getAttribute("data-result");n(x,H=H=="true"||H!="false"&&H)}},x.box=E,(S||T)&&(i=x),E}(_,m,p);_.hidden||s(!0),document.body.appendChild(k);var $=Math.abs(Math.floor(((window.innerWidth||document.documentElement.offsetWidth)-k.offsetWidth)/2)),w=Math.abs(Math.floor(((window.innerHeight||document.documentElement.offsetHeight)-k.offsetHeight)/2));return _.position=="top"?k.style.top="-3px":k.style.top=w+"px",k.style.left=$+"px",k.onkeydown=a,y.focus(k),_.hidden&&y.hide(k),t.callEvent("onMessagePopup",[k]),k}function c(_){return d(_,!0,!1)}function u(_){return d(_,!0,!0)}function h(_){return d(_)}function f(_,m,p){return typeof _!="object"&&(typeof m=="function"&&(p=m,m=""),_={text:_,type:m,callback:p}),_}function g(_,m,p,k){return typeof _!="object"&&(_={text:_,type:m,expire:p,id:k}),_.id=_.id||st(),_.expire=_.expire||v.expire,_}t.event(r,"keydown",a,!0);var y=function(){var _=f.apply(this,arguments);return _.type=_.type||"alert",h(_)};y.hide=function(_){for(;_&&_.getAttribute&&!_.getAttribute(e);)_=_.parentNode;_&&(_.parentNode.removeChild(_),s(!1),t.callEvent("onAfterMessagePopup",[_]))},y.focus=function(_){setTimeout(function(){var m=xe(_);m.length&&m[0].focus&&m[0].focus()},1)};var v=function(_,m,p,k){switch((_=g.apply(this,arguments)).type=_.type||"info",_.type.split("-")[0]){case"alert":return c(_);case"confirm":return u(_);case"modalbox":return h(_);default:return function($){v.area||(v.area=document.createElement("div"),v.area.className="gantt_message_area",v.area.style[v.position]="5px",document.body.appendChild(v.area)),v.hide($.id);var w=document.createElement("div");return w.innerHTML="<div>"+$.text+"</div>",w.className="gantt-info gantt-"+$.type,w.onclick=function(){v.hide($.id),$=null},t._waiAria.messageInfoAttr(w),v.position=="bottom"&&v.area.firstChild?v.area.insertBefore(w,v.area.firstChild):v.area.appendChild(w),$.expire>0&&(v.timers[$.id]=window.setTimeout(function(){v&&v.hide($.id)},$.expire)),v.pull[$.id]=w,w=null,$.id}(_)}};v.seed=new Date().valueOf(),v.uid=st,v.expire=4e3,v.keyboard=!0,v.position="top",v.pull={},v.timers={},v.hideAll=function(){for(var _ in v.pull)v.hide(_)},v.hide=function(_){var m=v.pull[_];m&&m.parentNode&&(window.setTimeout(function(){m.parentNode.removeChild(m),m=null},2e3),m.className+=" hidden",v.timers[_]&&window.clearTimeout(v.timers[_]),delete v.pull[_])};var b=[];return t.attachEvent("onMessagePopup",function(_){b.push(_)}),t.attachEvent("onAfterMessagePopup",function(_){for(var m=0;m<b.length;m++)b[m]===_&&(b.splice(m,1),m--)}),t.attachEvent("onDestroy",function(){s.cover&&s.cover.parentNode&&s.cover.parentNode.removeChild(s.cover);for(var _=0;_<b.length;_++)b[_].parentNode&&b[_].parentNode.removeChild(b[_]);b=null,v.area&&v.area.parentNode&&v.area.parentNode.removeChild(v.area),v=null}),{alert:function(){var _=f.apply(this,arguments);return _.type=_.type||"confirm",c(_)},confirm:function(){var _=f.apply(this,arguments);return _.type=_.type||"alert",u(_)},message:v,modalbox:y}}function qe(t,e){var i=this.$config[t];return i?(i.$extendedConfig||(i.$extendedConfig=!0,Object.setPrototypeOf(i,e)),i):e}function Ca(t,e){var i,n,a;N(t,(i=e,{$getConfig:function(){return n||(n=i?i.$getConfig():this.$gantt.config),this.$config.config?qe.call(this,"config",n):n},$getTemplates:function(){return a||(a=i?i.$getTemplates():this.$gantt.templates),this.$config.templates?qe.call(this,"templates",a):a}}))}const Da=function(t){var e={},i={};function n(a,r,s,o){var l=e[a];if(!l||!l.create)return!1;a!="resizer"||s.mode||(o.$config.cols?s.mode="x":s.mode="y"),a!="viewcell"||s.view!="scrollbar"||s.scroll||(o.$config.cols?s.scroll="y":s.scroll="x"),(s=q(s)).id||i[s.view]||(s.id=s.view),s.id&&!s.css&&(s.css=s.id+"_cell");var d=new l.create(r,s,this,t);return l.configure&&l.configure(d),Ca(d,o),d.$id||(d.$id=s.id||t.uid()),d.$parent||typeof r!="object"||(d.$parent=r),d.$config||(d.$config=s),i[d.$id]&&(d.$id=t.uid()),i[d.$id]=d,d}return{initUI:function(a,r){var s="cell";return a.view?s="viewcell":a.resizer?s="resizer":a.rows||a.cols?s="layout":a.views&&(s="multiview"),n.call(this,s,null,a,r)},reset:function(){i={}},registerView:function(a,r,s){e[a]={create:r,configure:s}},createView:n,getView:function(a){return i[a]}}};var Aa=function(t){return function(e){var i={click:{},doubleclick:{},contextMenu:{}};function n(h,f,g,y){i[h][f]||(i[h][f]=[]),i[h][f].push({handler:g,root:y})}function a(h){h=h||window.event;var f=e.locate(h),g=s(h,i.click),y=!0;if(f!==null?y=!e.checkEvent("onTaskClick")||e.callEvent("onTaskClick",[f,h]):e.callEvent("onEmptyClick",[h]),y){if(!o(g,h,f))return;switch(h.target.nodeName){case"SELECT":case"INPUT":return}f&&e.getTask(f)&&!e._multiselect&&e.config.select_task&&e.selectTask(f)}}function r(h){var f=(h=h||window.event).target||h.srcElement,g=e.locate(f),y=e.locate(f,e.config.link_attribute),v=!e.checkEvent("onContextMenu")||e.callEvent("onContextMenu",[g,y,h]);return v||(h.preventDefault?h.preventDefault():h.returnValue=!1),v}function s(h,f){for(var g=h.target||h.srcElement,y=[];g;){var v=t.getClassName(g);if(v){v=v.split(" ");for(var b=0;b<v.length;b++)if(v[b]&&f[v[b]])for(var _=f[v[b]],m=0;m<_.length;m++)_[m].root&&!t.isChildOf(g,_[m].root)||y.push(_[m].handler)}g=g.parentNode}return y}function o(h,f,g){for(var y=!0,v=0;v<h.length;v++){var b=h[v].call(e,f,g,f.target||f.srcElement);y=y&&!(b!==void 0&&b!==!0)}return y}function l(h){h=h||window.event;var f=e.locate(h),g=s(h,i.doubleclick),y=!e.checkEvent("onTaskDblClick")||f===null||e.callEvent("onTaskDblClick",[f,h]);if(y){if(!o(g,h,f))return;f!==null&&e.getTask(f)&&y&&e.config.details_on_dblclick&&!e.isReadonly(f)&&e.showLightbox(f)}}function d(h){if(e.checkEvent("onMouseMove")){var f=e.locate(h);e._last_move_event=h,e.callEvent("onMouseMove",[f,h])}}var c=e._createDomEventScope();function u(h){c.detachAll(),h&&(c.attach(h,"click",a),c.attach(h,"dblclick",l),c.attach(h,"mousemove",d),c.attach(h,"contextmenu",r))}return{reset:u,global:function(h,f,g){n(h,f,g,null)},delegate:n,detach:function(h,f,g,y){if(i[h]&&i[h][f]){for(var v=i[h],b=v[f],_=0;_<b.length;_++)b[_].root==y&&(b.splice(_,1),_--);b.length||delete v[f]}},callHandler:function(h,f,g,y){var v=i[h][f];if(v)for(var b=0;b<v.length;b++)(g||v[b].root)&&v[b].root!==g||v[b].handler.apply(this,y)},onDoubleClick:l,onMouseMove:d,onContextMenu:r,onClick:a,destructor:function(){u(),i=null,c=null}}}}(ci);const Ia={init:Aa};function Ge(t,e,i){return!!e&&!(e.left>t.x_end||e.left+e.width<t.x)&&!(e.top>t.y_end||e.top+e.height<t.y)}function Lt(t){return t.config.smart_rendering&&t._smart_render}function Yt(t,e,i){return{top:e.getItemTop(t.id),height:e.getItemHeight(t.id),left:0,right:1/0}}function pt(t,e,i,n,a){var r=e.getItemIndexByTopPosition(a.y)||0,s=e.getItemIndexByTopPosition(a.y_end)||n.count(),o=Math.max(0,r-1),l=Math.min(n.count(),s+1);const d=[];if(t.config.keyboard_navigation&&t.getSelectedId()&&t.getTask(t.getSelectedId()).$expanded_branch&&d.push(t.getSelectedId()),t.$ui.getView("grid")&&t.ext.inlineEditors&&t.ext.inlineEditors.getState().id){let c=t.ext.inlineEditors.getState().id;n.exists(c)&&d.push(c)}return{start:o,end:l,ids:d}}var Ma=function(t){var e=function(i){var n={},a={};function r(o){var l=null;return typeof o.view=="string"?l=i.$ui.getView(o.view):o.view&&(l=o.view),l}function s(o,l,d){if(a[o])return a[o];l.renderer||i.assert(!1,"Invalid renderer call");var c=null,u=null,h=null,f=null,g=null;typeof l.renderer=="function"?(c=l.renderer,h=Yt):(c=l.renderer.render,u=l.renderer.update,f=l.renderer.onrender,l.renderer.isInViewPort?g=l.renderer.isInViewPort:h=l.renderer.getRectangle,h||h===null||(h=Yt));var y=l.filter;return d&&d.setAttribute(i.config.layer_attribute,!0),a[o]={render_item:function(v,b,_,m,p){if(b=b||d,!y||y(v)){var k=m||r(l),$=p||(k?k.$getConfig():null),w=_;!w&&$&&$.smart_rendering&&(w=k.getViewPort());var x=null;!Lt(i)&&(h||g)&&w?(g?g(v,w,k,$,i):Ge(w,h(v,k,$,i)))&&(x=c.call(i,v,k,$,w)):x=c.call(i,v,k,$,w),this.append(v,x,b);var S=b.nodeType==11;f&&!S&&x&&f.call(i,v,x,k)}else this.remove_item(v.id)},clear:function(v){this.rendered=n[o]={},l.append||this.clear_container(v)},clear_container:function(v){(v=v||d)&&(v.innerHTML="")},get_visible_range:function(v){var b,_,m=r(l),p=m?m.$getConfig():null;return p&&p.smart_rendering&&(b=m.getViewPort()),m&&b&&(typeof l.renderer=="function"?_=pt(i,m,0,v,b):l.renderer&&l.renderer.getVisibleRange&&(_=l.renderer.getVisibleRange(i,m,p,v,b))),_||(_={start:0,end:v.count()}),_},prepare_data:function(v){if(l.renderer&&l.renderer.prepareData)return l.renderer.prepareData(v,i,l)},render_items:function(v,b){b=b||d;var _=document.createDocumentFragment();this.clear(b);var m=null,p=r(l),k=p?p.$getConfig():null;k&&k.smart_rendering&&(m=p.getViewPort());for(var $=0,w=v.length;$<w;$++)this.render_item(v[$],_,m,p,k);b.appendChild(_,b);var x={};v.forEach(function(E){x[E.id]=E});var S={};if(f){var T={};for(var $ in this.rendered)S[$]||(T[$]=this.rendered[$],f.call(i,x[$],this.rendered[$],p))}},update_items:function(v,b){var _=r(l),m=_?_.$getConfig():null;if(_&&_.$getConfig().smart_rendering&&!Lt(i)&&this.rendered&&(h||g)){b=b||d;var p=document.createDocumentFragment(),k=null;_&&(k=_.getViewPort());var $={};v.forEach(function(I){$[I.id]=I});var w={},x={};for(var S in this.rendered)x[S]=!0,w[S]=!0;for(var T={},E=(S=0,v.length);S<E;S++){var C=v[S],D=this.rendered[C.id];x[C.id]=!1,D&&D.parentNode?(g?g(C,k,_,m,i):Ge(k,h(C,_,m,i)))?(u&&u.call(i,C,D,_,m,k),this.restore(C,p)):x[C.id]=!0:(T[v[S].id]=!0,this.render_item(v[S],p,k,_,m))}for(var S in x)x[S]&&this.hide(S);if(p.childNodes.length&&b.appendChild(p,b),f){var A={};for(var S in this.rendered)w[S]&&!T[S]||(A[S]=this.rendered[S],f.call(i,$[S],this.rendered[S],_))}}},append:function(v,b,_){this.rendered&&(b?(this.rendered[v.id]&&this.rendered[v.id].parentNode?this.replace_item(v.id,b):_.appendChild(b),this.rendered[v.id]=b):this.rendered[v.id]&&this.remove_item(v.id))},replace_item:function(v,b){var _=this.rendered[v];_&&_.parentNode&&_.parentNode.replaceChild(b,_),this.rendered[v]=b},remove_item:function(v){this.hide(v),delete this.rendered[v]},hide:function(v){var b=this.rendered[v];b&&b.parentNode&&b.parentNode.removeChild(b)},restore:function(v,b){var _=this.rendered[v.id];_?_.parentNode||this.append(v,_,b||d):this.render_item(v,b||d)},change_id:function(v,b){this.rendered[b]=this.rendered[v],delete this.rendered[v]},rendered:n[o],node:d,destructor:function(){this.clear(),delete a[o],delete n[o]}},a[o]}return{getRenderer:s,clearRenderers:function(){for(var o in a)s(o).destructor()}}}(t);return{createGroup:function(i,n,a,r){var s={tempCollection:[],renderers:{},container:i,filters:[],getLayers:function(){this._add();var o=[];for(var l in this.renderers)o.push(this.renderers[l]);return o},getLayer:function(o){return this.renderers[o]},_add:function(o){o&&(o.id=o.id||st(),this.tempCollection.push(o));for(var l=this.container(),d=this.tempCollection,c=0;c<d.length;c++)if(o=d[c],this.container()||o&&o.container&&G(o.container,document.body)){var u=o.container,h=o.id,f=o.topmost;if(!u.parentNode)if(f)l.appendChild(u);else{var g=n?n():l.firstChild;g&&g.parentNode==l?l.insertBefore(u,g):l.appendChild(u)}this.renderers[h]=e.getRenderer(h,o,u),r&&r(o,t),this.tempCollection.splice(c,1),c--}},addLayer:function(o){if(o){typeof o=="function"&&(o={renderer:o}),o.filter===void 0?o.filter=Ye(a||[]):o.filter instanceof Array&&(o.filter.push(a),o.filter=Ye(o.filter)),o.container||(o.container=document.createElement("div"));var l=this;o.requestUpdate=function(){t.config.smart_rendering&&!Lt(t)&&l.renderers[o.id]&&l.onUpdateRequest(l.renderers[o.id])}}return this._add(o),o?o.id:void 0},onUpdateRequest:function(o){},eachLayer:function(o){for(var l in this.renderers)o(this.renderers[l])},removeLayer:function(o){this.renderers[o]&&(this.renderers[o].destructor(),delete this.renderers[o])},clear:function(){for(var o in this.renderers)this.renderers[o].destructor();this.renderers={}}};return t.attachEvent("onDestroy",function(){s.clear(),s=null}),s}}};function Ye(t){return t instanceof Array||(t=Array.prototype.slice.call(arguments,0)),function(e){for(var i=!0,n=0,a=t.length;n<a;n++){var r=t[n];r&&(i=i&&r(e.id,e)!==!1)}return i}}function Je(t,e,i){if(!t.start_date||!t.end_date)return null;var n=e.posFromDate(t.start_date),a=e.posFromDate(t.end_date),r=Math.min(n,a)-200,s=Math.max(n,a)+200;return{top:e.getItemTop(t.id),height:e.getItemHeight(t.id),left:r,width:s-r}}function bi(){var t=[],e=!1;function i(){t=[],e=!1}function n(r,s,o){s.$getConfig(),r.getVisibleItems().forEach(function(l){var d=function(c,u,h,f){if(!f.isTaskExists(c.source)||!f.isTaskExists(c.target))return null;var g=Je(f.getTask(c.source),u),y=Je(f.getTask(c.target),u);if(!g||!y)return null;var v=100,b=Math.min(g.left,y.left)-v,_=Math.max(g.left+g.width,y.left+y.width)+v,m=Math.min(g.top,y.top)-v,p=Math.max(g.top+g.height,y.top+y.height)+v;return{top:m,height:p-m,bottom:p,left:b,width:_-b,right:_}}(l,s,0,o);d&&t.push({id:l.id,rec:d})}),t.sort(function(l,d){return l.rec.right<d.rec.right?-1:1}),e=!0}var a=!1;return function(r,s,o,l,d){(function(g){a||(a=!0,g.attachEvent("onPreFilter",i),g.attachEvent("onStoreUpdated",i),g.attachEvent("onClearAll",i),g.attachEvent("onBeforeStoreUpdate",i))})(l),e||n(l,s,r);for(var c=[],u=0;u<t.length;u++){var h=t[u],f=h.rec;f.right<d.x||f.left<d.x_end&&f.right>d.x&&f.top<d.y_end&&f.bottom>d.y&&c.push(h.id)}return{ids:c}}}function xi(t,e,i,n,a){var r=i.$gantt.getTask(t.source),s=i.$gantt.getTask(t.target),o=i.getItemTop(r.id),l=i.getItemHeight(r.id),d=i.getItemTop(s.id),c=i.getItemHeight(s.id);if(e.y>o+l&&e.y>d+c||e.y_end<d&&e.y_end<o)return!1;var u=100,h=i.posFromDate(r.start_date),f=i.posFromDate(r.end_date),g=i.posFromDate(s.start_date),y=i.posFromDate(s.end_date);if(h>f){var v=f;f=h,h=v}return g>y&&(v=y,y=g,g=v),h+=-100,f+=u,g+=-100,y+=u,!(e.x>f&&e.x>y)&&!(e.x_end<h&&e.x_end<g)}function Na(t,e){if(t.view){var i=t.view;typeof i=="string"&&(i=e.$ui.getView(i)),i&&i.attachEvent&&i.attachEvent("onScroll",function(){e.$services.getService("state").getState("batchUpdate").batch_update||i.$config.$skipSmartRenderOnScroll||t.requestUpdate&&t.requestUpdate()})}}var Rt=function(){function t(e,i,n,a){e&&(this.$container=$e(e),this.$parent=e),this.$config=N(i,{headerHeight:33}),this.$gantt=a,this.$domEvents=a._createDomEventScope(),this.$id=i.id||"c"+st(),this.$name="cell",this.$factory=n,ot(this)}return t.prototype.destructor=function(){this.$parent=this.$container=this.$view=null,this.$gantt.$services.getService("mouseEvents").detach("click","gantt_header_arrow",this._headerClickHandler),this.$domEvents.detachAll(),this.callEvent("onDestroy",[]),this.detachAllEvents()},t.prototype.cell=function(e){return null},t.prototype.scrollTo=function(e,i){var n=this.$view;this.$config.html&&(n=this.$view.firstChild),1*e==e&&(n.scrollLeft=e),1*i==i&&(n.scrollTop=i)},t.prototype.clear=function(){this.getNode().innerHTML="",this.getNode().className="gantt_layout_content",this.getNode().style.padding="0"},t.prototype.resize=function(e){if(this.$parent)return this.$parent.resize(e);e===!1&&(this.$preResize=!0);var i=this.$container,n=i.offsetWidth,a=i.offsetHeight,r=this.getSize();i===document.body&&(n=document.body.offsetWidth,a=document.body.offsetHeight),n<r.minWidth&&(n=r.minWidth),n>r.maxWidth&&(n=r.maxWidth),a<r.minHeight&&(a=r.minHeight),a>r.maxHeight&&(a=r.maxHeight),this.setSize(n,a),this.$preResize,this.$preResize=!1},t.prototype.hide=function(){this._hide(!0),this.resize()},t.prototype.show=function(e){this._hide(!1),e&&this.$parent&&this.$parent.show(),this.resize()},t.prototype._hide=function(e){if(e===!0&&this.$view.parentNode)this.$view.parentNode.removeChild(this.$view);else if(e===!1&&!this.$view.parentNode){var i=this.$parent.cellIndex(this.$id);this.$parent.moveView(this,i)}this.$config.hidden=e},t.prototype.$toHTML=function(e,i){e===void 0&&(e=""),i=[i||"",this.$config.css||""].join(" ");var n=this.$config,a="";return n.raw?e=typeof n.raw=="string"?n.raw:"":(e||(e="<div class='gantt_layout_content' "+(i?" class='"+i+"' ":"")+" >"+(n.html||"")+"</div>"),n.header&&(a="<div class='gantt_layout_header'>"+(n.canCollapse?"<div class='gantt_layout_header_arrow'></div>":"")+"<div class='gantt_layout_header_content'>"+n.header+"</div></div>")),"<div class='gantt_layout_cell "+i+"' data-cell-id='"+this.$id+"'>"+a+e+"</div>"},t.prototype.$fill=function(e,i){this.$view=e,this.$parent=i,this.init()},t.prototype.getNode=function(){return this.$view.querySelector("gantt_layout_cell")||this.$view},t.prototype.init=function(){var e=this;this._headerClickHandler=function(i){et(i,"data-cell-id")==e.$id&&e.toggle()},this.$gantt.$services.getService("mouseEvents").delegate("click","gantt_header_arrow",this._headerClickHandler),this.callEvent("onReady",[])},t.prototype.toggle=function(){this.$config.collapsed=!this.$config.collapsed,this.resize()},t.prototype.getSize=function(){var e={height:this.$config.height||0,width:this.$config.width||0,gravity:this.$config.gravity||1,minHeight:this.$config.minHeight||0,minWidth:this.$config.minWidth||0,maxHeight:this.$config.maxHeight||1e11,maxWidth:this.$config.maxWidth||1e11};if(this.$config.collapsed){var i=this.$config.mode==="x";e[i?"width":"height"]=e[i?"maxWidth":"maxHeight"]=this.$config.headerHeight}return e},t.prototype.getContentSize=function(){var e=this.$lastSize.contentX;e!==1*e&&(e=this.$lastSize.width);var i=this.$lastSize.contentY;return i!==1*i&&(i=this.$lastSize.height),{width:e,height:i}},t.prototype._getBorderSizes=function(){var e={top:0,right:0,bottom:0,left:0,horizontal:0,vertical:0};return this._currentBorders&&(this._currentBorders[this._borders.left]&&(e.left=1,e.horizontal++),this._currentBorders[this._borders.right]&&(e.right=1,e.horizontal++),this._currentBorders[this._borders.top]&&(e.top=1,e.vertical++),this._currentBorders[this._borders.bottom]&&(e.bottom=1,e.vertical++)),e},t.prototype.setSize=function(e,i){this.$view.style.width=e+"px",this.$view.style.height=i+"px";var n=this._getBorderSizes(),a=i-n.vertical,r=e-n.horizontal;this.$lastSize={x:e,y:i,contentX:r,contentY:a},this.$config.header?this._sizeHeader():this._sizeContent()},t.prototype._borders={left:"gantt_layout_cell_border_left",right:"gantt_layout_cell_border_right",top:"gantt_layout_cell_border_top",bottom:"gantt_layout_cell_border_bottom"},t.prototype._setBorders=function(e,i){i||(i=this);var n=i.$view;for(var a in this._borders)Gt(n,this._borders[a]);typeof e=="string"&&(e=[e]);var r={};for(a=0;a<e.length;a++)St(n,e[a]),r[e[a]]=!0;i._currentBorders=r},t.prototype._sizeContent=function(){var e=this.$view.childNodes[0];e&&e.className=="gantt_layout_content"&&(e.style.height=this.$lastSize.contentY+"px")},t.prototype._sizeHeader=function(){var e=this.$lastSize;e.contentY-=this.$config.headerHeight;var i=this.$view.childNodes[0],n=this.$view.childNodes[1],a=this.$config.mode==="x";if(this.$config.collapsed)if(n.style.display="none",a){i.className="gantt_layout_header collapsed_x",i.style.width=e.y+"px";var r=Math.floor(e.y/2-e.x/2);i.style.transform="rotate(90deg) translate("+r+"px, "+r+"px)",n.style.display="none"}else i.className="gantt_layout_header collapsed_y";else i.className=a?"gantt_layout_header":"gantt_layout_header vertical",i.style.width="auto",i.style.transform="",n.style.display="",n.style.height=e.contentY+"px";i.style.height=this.$config.headerHeight+"px"},t}();function z(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var $i=function(t){function e(i,n,a){var r=t.apply(this,arguments)||this;return i&&(r.$root=!0),r._parseConfig(n),r.$name="layout",r}return z(e,t),e.prototype.destructor=function(){this.$container&&this.$view&&ri(this.$view);for(var i=0;i<this.$cells.length;i++)this.$cells[i].destructor();this.$cells=[],t.prototype.destructor.call(this)},e.prototype._resizeScrollbars=function(i,n){var a=!1,r=[],s=[];const o=[];function l(g){g.$parent.show(),a=!0,r.push(g)}function d(g){g.$parent.hide(),a=!0,s.push(g)}for(var c,u=0;u<n.length;u++)i[(c=n[u]).$config.scroll]?d(c):c.shouldHide()?o.push(c):c.shouldShow()?l(c):c.isVisible()?r.push(c):s.push(c);var h={};for(u=0;u<r.length;u++)r[u].$config.group&&(h[r[u].$config.group]=!0);for(o.forEach(function(g){g.$config.group&&h[g.$config.group]||d(g)}),u=0;u<s.length;u++)if((c=s[u]).$config.group&&h[c.$config.group]){l(c);for(var f=0;f<r.length;f++)if(r[f]==c){this.$gantt.$scrollbarRepaint=!0;break}}return a},e.prototype.getScrollbarsInfo=function(){const i=this.getCellsByType("scroller"),n=[];return i.forEach(a=>{let r={};const{visible:s,direction:o,size:l,scrollSize:d,position:c}=a.getScrollState();let u=a._getLinkedViews().map(h=>h.$config.id);r.id=a.$id,r.visible=s,r.boundViews=u,o==="x"?(r.x=l,r.x_inner=d,r.x_pos=c||0):(r.y=l,r.y_inner=d,r.y_pos=c||0),n.push(r)}),n},e.prototype._syncCellSizes=function(i,n){if(i){var a={};return this._eachChild(function(r){r.$config.group&&r.$name!="scrollbar"&&r.$name!="resizer"&&(a[r.$config.group]||(a[r.$config.group]=[]),a[r.$config.group].push(r))}),a[i]&&this._syncGroupSize(a[i],n),a[i]}},e.prototype._syncGroupSize=function(i,n){if(i.length)for(var a=i[0].$parent._xLayout?"width":"height",r=i[0].$parent.getNextSibling(i[0].$id)?1:-1,s=n.value,o=n.isGravity,l=0;l<i.length;l++){var d=i[l].getSize(),c=r>0?i[l].$parent.getNextSibling(i[l].$id):i[l].$parent.getPrevSibling(i[l].$id);c.$name=="resizer"&&(c=r>0?c.$parent.getNextSibling(c.$id):c.$parent.getPrevSibling(c.$id));var u=c.getSize();if(o)i[l].$config.gravity=s;else if(c[a]){var h=d.gravity+u.gravity,f=d[a]+u[a],g=h/f;i[l].$config.gravity=g*s,c.$config[a]=f-s,c.$config.gravity=h-g*s}else i[l].$config[a]=s;var y=this.$gantt.$ui.getView("grid");!y||i[l].$content!==y||y.$config.scrollable||o||(this.$gantt.config.grid_width=s)}},e.prototype.resize=function(i){var n=!1;if(this.$root&&!this._resizeInProgress&&(this.callEvent("onBeforeResize",[]),n=!0,this._resizeInProgress=!0),t.prototype.resize.call(this,!0),t.prototype.resize.call(this,!1),n){var a=[];a=(a=(a=a.concat(this.getCellsByType("viewCell"))).concat(this.getCellsByType("viewLayout"))).concat(this.getCellsByType("hostCell"));for(var r=this.getCellsByType("scroller"),s=0;s<a.length;s++)a[s].$config.hidden||a[s].setContentSize();var o=this._getAutosizeMode(this.$config.autosize),l=this._resizeScrollbars(o,r);if(this.$config.autosize&&(this.autosize(this.$config.autosize),a.forEach(function(d){const c=d.$parent,u=c.getContentSize(o);o.x&&(c.$config.$originalWidthStored||(c.$config.$originalWidthStored=!0,c.$config.$originalWidth=c.$config.width),c.$config.width=u.width),o.y&&(c.$config.$originalHeightStored||(c.$config.$originalHeightStored=!0,c.$config.$originalHeight=c.$config.height),c.$config.height=u.height)}),l=!0),l)for(this.resize(),s=0;s<a.length;s++)a[s].$config.hidden||a[s].setContentSize();this.callEvent("onResize",[])}n&&(this._resizeInProgress=!1)},e.prototype._eachChild=function(i,n){if(i(n=n||this),n.$cells)for(var a=0;a<n.$cells.length;a++)this._eachChild(i,n.$cells[a])},e.prototype.isChild=function(i){var n=!1;return this._eachChild(function(a){a!==i&&a.$content!==i||(n=!0)}),n},e.prototype.getCellsByType=function(i){var n=[];if(i===this.$name&&n.push(this),this.$content&&this.$content.$name==i&&n.push(this.$content),this.$cells)for(var a=0;a<this.$cells.length;a++){var r=e.prototype.getCellsByType.call(this.$cells[a],i);r.length&&n.push.apply(n,r)}return n},e.prototype.getNextSibling=function(i){var n=this.cellIndex(i);return n>=0&&this.$cells[n+1]?this.$cells[n+1]:null},e.prototype.getPrevSibling=function(i){var n=this.cellIndex(i);return n>=0&&this.$cells[n-1]?this.$cells[n-1]:null},e.prototype.cell=function(i){for(var n=0;n<this.$cells.length;n++){var a=this.$cells[n];if(a.$id===i)return a;var r=a.cell(i);if(r)return r}},e.prototype.cellIndex=function(i){for(var n=0;n<this.$cells.length;n++)if(this.$cells[n].$id===i)return n;return-1},e.prototype.moveView=function(i,n){if(this.$cells[n]!==i)return window.alert("Not implemented");n+=this.$config.header?1:0;var a=this.$view;n>=a.childNodes.length?a.appendChild(i.$view):a.insertBefore(i.$view,a.childNodes[n])},e.prototype._parseConfig=function(i){this.$cells=[],this._xLayout=!i.rows;for(var n=i.rows||i.cols||i.views,a=0;a<n.length;a++){var r=n[a];r.mode=this._xLayout?"x":"y";var s=this.$factory.initUI(r,this);s?(s.$parent=this,this.$cells.push(s)):(n.splice(a,1),a--)}},e.prototype.getCells=function(){return this.$cells},e.prototype.render=function(){var i=ai(this.$container,this.$toHTML());this.$fill(i,null),this.callEvent("onReady",[]),this.resize(),this.render=this.resize},e.prototype.$fill=function(i,n){this.$view=i,this.$parent=n;for(var a=si(i,"gantt_layout_cell"),r=a.length-1;r>=0;r--){var s=this.$cells[r];s.$fill(a[r],this),s.$config.hidden&&s.$view.parentNode.removeChild(s.$view)}},e.prototype.$toHTML=function(){for(var i=this._xLayout?"x":"y",n=[],a=0;a<this.$cells.length;a++)n.push(this.$cells[a].$toHTML());return t.prototype.$toHTML.call(this,n.join(""),(this.$root?"gantt_layout_root ":"")+"gantt_layout gantt_layout_"+i)},e.prototype.getContentSize=function(i){for(var n,a,r,s=0,o=0,l=0;l<this.$cells.length;l++)(a=this.$cells[l]).$config.hidden||(n=a.getContentSize(i),a.$config.view==="scrollbar"&&i[a.$config.scroll]&&(n.height=0,n.width=0),a.$config.resizer&&(this._xLayout?n.height=0:n.width=0),r=a._getBorderSizes(),this._xLayout?(s+=n.width+r.horizontal,o=Math.max(o,n.height+r.vertical)):(s=Math.max(s,n.width+r.horizontal),o+=n.height+r.vertical));return{width:s+=(r=this._getBorderSizes()).horizontal,height:o+=r.vertical}},e.prototype._cleanElSize=function(i){return 1*(i||"").toString().replace("px","")||0},e.prototype._getBoxStyles=function(i){var n=null,a=["width","height","paddingTop","paddingBottom","paddingLeft","paddingRight","borderLeftWidth","borderRightWidth","borderTopWidth","borderBottomWidth"],r={boxSizing:(n=window.getComputedStyle?window.getComputedStyle(i,null):{width:i.clientWidth,height:i.clientHeight}).boxSizing=="border-box"};n.MozBoxSizing&&(r.boxSizing=n.MozBoxSizing=="border-box");for(var s=0;s<a.length;s++)r[a[s]]=n[a[s]]?this._cleanElSize(n[a[s]]):0;var o={horPaddings:r.paddingLeft+r.paddingRight+r.borderLeftWidth+r.borderRightWidth,vertPaddings:r.paddingTop+r.paddingBottom+r.borderTopWidth+r.borderBottomWidth,borderBox:r.boxSizing,innerWidth:r.width,innerHeight:r.height,outerWidth:r.width,outerHeight:r.height};return o.borderBox?(o.innerWidth-=o.horPaddings,o.innerHeight-=o.vertPaddings):(o.outerWidth+=o.horPaddings,o.outerHeight+=o.vertPaddings),o},e.prototype._getAutosizeMode=function(i){var n={x:!1,y:!1};return i==="xy"?n.x=n.y=!0:i==="y"||i===!0?n.y=!0:i==="x"&&(n.x=!0),n},e.prototype.autosize=function(i){var n=this._getAutosizeMode(i),a=this._getBoxStyles(this.$container),r=this.getContentSize(i),s=this.$container;n.x&&(a.borderBox&&(r.width+=a.horPaddings),s.style.width=r.width+"px"),n.y&&(a.borderBox&&(r.height+=a.vertPaddings),s.style.height=r.height+"px")},e.prototype.getSize=function(){this._sizes=[];for(var i=0,n=0,a=1e11,r=0,s=1e11,o=0,l=0;l<this.$cells.length;l++){var d=this._sizes[l]=this.$cells[l].getSize();this.$cells[l].$config.hidden||(this._xLayout?(!d.width&&d.minWidth?i+=d.minWidth:i+=d.width,a+=d.maxWidth,n+=d.minWidth,r=Math.max(r,d.height),s=Math.min(s,d.maxHeight),o=Math.max(o,d.minHeight)):(!d.height&&d.minHeight?r+=d.minHeight:r+=d.height,s+=d.maxHeight,o+=d.minHeight,i=Math.max(i,d.width),a=Math.min(a,d.maxWidth),n=Math.max(n,d.minWidth)))}var c=t.prototype.getSize.call(this);return c.maxWidth>=1e5&&(c.maxWidth=a),c.maxHeight>=1e5&&(c.maxHeight=s),c.minWidth=c.minWidth!=c.minWidth?0:c.minWidth,c.minHeight=c.minHeight!=c.minHeight?0:c.minHeight,this._xLayout?(c.minWidth+=this.$config.margin*this.$cells.length||0,c.minWidth+=2*this.$config.padding||0,c.minHeight+=2*this.$config.padding||0):(c.minHeight+=this.$config.margin*this.$cells.length||0,c.minHeight+=2*this.$config.padding||0),c},e.prototype._calcFreeSpace=function(i,n,a){var r=a?n.minWidth:n.minHeight,s=n.maxWidth,o=i;return o?(o>s&&(o=s),o<r&&(o=r),this._free-=o):((o=Math.floor(this._free/this._gravity*n.gravity))>s&&(o=s,this._free-=o,this._gravity-=n.gravity),o<r&&(o=r,this._free-=o,this._gravity-=n.gravity)),o},e.prototype._calcSize=function(i,n,a){var r=i,s=a?n.minWidth:n.minHeight,o=a?n.maxWidth:n.maxHeight;return r||(r=Math.floor(this._free/this._gravity*n.gravity)),r>o&&(r=o),r<s&&(r=s),r},e.prototype._configureBorders=function(){this.$root&&this._setBorders([this._borders.left,this._borders.top,this._borders.right,this._borders.bottom],this);for(var i=this._xLayout?this._borders.right:this._borders.bottom,n=this.$cells,a=n.length-1,r=a;r>=0;r--)if(!n[r].$config.hidden){a=r;break}for(r=0;r<n.length;r++)if(!n[r].$config.hidden){var s=r>=a,o="";!s&&n[r+1]&&n[r+1].$config.view=="scrollbar"&&(this._xLayout?s=!0:o="gantt_layout_cell_border_transparent"),this._setBorders(s?[]:[i,o],n[r])}},e.prototype._updateCellVisibility=function(){for(var i=this._visibleCells||{},n=!this._visibleCells,a={},r=null,s=[],o=0;o<this._sizes.length;o++)(r=this.$cells[o]).$config.hide_empty&&s.push(r),!n&&r.$config.hidden&&i[r.$id]?r._hide(!0):r.$config.hidden||i[r.$id]||r._hide(!1),r.$config.hidden||(a[r.$id]=!0);for(this._visibleCells=a,o=0;o<s.length;o++){var l=(r=s[o]).$cells,d=!0;l.forEach(function(c){c.$config.hidden||c.$config.resizer||(d=!1)}),r.$config.hidden=d}},e.prototype.setSize=function(i,n){this._configureBorders(),t.prototype.setSize.call(this,i,n),n=this.$lastSize.contentY,i=this.$lastSize.contentX;var a,r,s=this.$config.padding||0;this.$view.style.padding=s+"px",this._gravity=0,this._free=this._xLayout?i:n,this._free-=2*s,this._updateCellVisibility();for(var o=0;o<this._sizes.length;o++)if(!(a=this.$cells[o]).$config.hidden){var l=this.$config.margin||0;a.$name!="resizer"||l||(l=-1);var d=a.$view,c=this._xLayout?"marginRight":"marginBottom";o!==this.$cells.length-1&&(d.style[c]=l+"px",this._free-=l),r=this._sizes[o],this._xLayout?r.width||(this._gravity+=r.gravity):r.height||(this._gravity+=r.gravity)}for(o=0;o<this._sizes.length;o++)if(!(a=this.$cells[o]).$config.hidden){var u=(r=this._sizes[o]).width,h=r.height;this._xLayout?this._calcFreeSpace(u,r,!0):this._calcFreeSpace(h,r,!1)}for(o=0;o<this.$cells.length;o++)if(!(a=this.$cells[o]).$config.hidden){r=this._sizes[o];var f=void 0,g=void 0;this._xLayout?(f=this._calcSize(r.width,r,!0),g=n-2*s):(f=i-2*s,g=this._calcSize(r.height,r,!1)),a.setSize(f,g)}},e}(Rt),La=function(t){function e(i,n,a){for(var r=t.apply(this,arguments)||this,s=0;s<r.$cells.length;s++)r.$cells[s].$config.hidden=s!==0;return r.$cell=r.$cells[0],r.$name="viewLayout",r}return z(e,t),e.prototype.cell=function(i){var n=t.prototype.cell.call(this,i);return n.$view||this.$fill(null,this),n},e.prototype.moveView=function(i){var n=this.$view;this.$cell&&(this.$cell.$config.hidden=!0,n.removeChild(this.$cell.$view)),this.$cell=i,n.appendChild(i.$view)},e.prototype.setSize=function(i,n){Rt.prototype.setSize.call(this,i,n)},e.prototype.setContentSize=function(){var i=this.$lastSize;this.$cell.setSize(i.contentX,i.contentY)},e.prototype.getSize=function(){var i=t.prototype.getSize.call(this);if(this.$cell){var n=this.$cell.getSize();if(this.$config.byMaxSize)for(var a=0;a<this.$cells.length;a++){var r=this.$cells[a].getSize();for(var s in n)n[s]=Math.max(n[s],r[s])}for(var o in i)i[o]=i[o]||n[o];i.gravity=Math.max(i.gravity,n.gravity)}return i},e}($i),Pa=function(t){function e(i,n,a){var r=t.apply(this,arguments)||this;if(n.view){n.id&&(this.$id=st());var s=q(n);if(delete s.config,delete s.templates,this.$content=this.$factory.createView(n.view,this,s,this),!this.$content)return!1}return r.$name="viewCell",r}return z(e,t),e.prototype.destructor=function(){this.clear(),t.prototype.destructor.call(this)},e.prototype.clear=function(){if(this.$initialized=!1,this.$content){var i=this.$content.unload||this.$content.destructor;i&&i.call(this.$content)}t.prototype.clear.call(this)},e.prototype.scrollTo=function(i,n){this.$content&&this.$content.scrollTo?this.$content.scrollTo(i,n):t.prototype.scrollTo.call(this,i,n)},e.prototype._setContentSize=function(i,n){var a=this._getBorderSizes();if(typeof i=="number"){var r=i+a.horizontal;this.$config.width=r}if(typeof n=="number"){var s=n+a.vertical;this.$config.height=s}},e.prototype.setSize=function(i,n){if(t.prototype.setSize.call(this,i,n),!this.$preResize&&this.$content&&!this.$initialized){this.$initialized=!0;var a=this.$view.childNodes[0],r=this.$view.childNodes[1];r||(r=a),this.$content.init(r)}},e.prototype.setContentSize=function(){!this.$preResize&&this.$content&&this.$initialized&&this.$content.setSize(this.$lastSize.contentX,this.$lastSize.contentY)},e.prototype.getContentSize=function(){var i=t.prototype.getContentSize.call(this);if(this.$content&&this.$initialized){var n=this.$content.getSize();i.width=n.contentX===void 0?n.width:n.contentX,i.height=n.contentY===void 0?n.height:n.contentY}var a=this._getBorderSizes();return i.width+=a.horizontal,i.height+=a.vertical,i},e}(Rt),Ra=function(t){var e=["altKey","shiftKey","metaKey"];function i(a,r,s,o){var l=t.apply(this,arguments)||this;this.$config=N(r,{scroll:"x"}),l._scrollHorizontalHandler=R(l._scrollHorizontalHandler,l),l._scrollVerticalHandler=R(l._scrollVerticalHandler,l),l._outerScrollVerticalHandler=R(l._outerScrollVerticalHandler,l),l._outerScrollHorizontalHandler=R(l._outerScrollHorizontalHandler,l),l._mouseWheelHandler=R(l._mouseWheelHandler,l),this.$config.hidden=!0;var d=o.config.scroll_size;return o.env.isIE&&(d+=1),this._isHorizontal()?(l.$config.height=d,l.$parent.$config.height=d):(l.$config.width=d,l.$parent.$config.width=d),this.$config.scrollPosition=0,l.$name="scroller",l}function n(a,r){if(r.push(a),a.$cells)for(var s=0;s<a.$cells.length;s++)n(a.$cells[s],r)}return z(i,t),i.prototype.init=function(a){a.innerHTML=this.$toHTML(),this.$view=a.firstChild,this.$view||this.init(),this._isVertical()?this._initVertical():this._initHorizontal(),this._initMouseWheel(),this._initLinkedViews()},i.prototype.$toHTML=function(){return"<div class='gantt_layout_cell "+(this._isHorizontal()?"gantt_hor_scroll":"gantt_ver_scroll")+"'><div style='"+(this._isHorizontal()?"width:2000px":"height:2000px")+"'></div></div>"},i.prototype._getRootParent=function(){for(var a=this.$parent;a&&a.$parent;)a=a.$parent;if(a)return a},i.prototype._eachView=function(){var a=[];return n(this._getRootParent(),a),a},i.prototype._getLinkedViews=function(){for(var a=this._eachView(),r=[],s=0;s<a.length;s++)a[s].$config&&(this._isVertical()&&a[s].$config.scrollY==this.$id||this._isHorizontal()&&a[s].$config.scrollX==this.$id)&&r.push(a[s]);return r},i.prototype._initHorizontal=function(){this.$scroll_hor=this.$view,this.$domEvents.attach(this.$view,"scroll",this._scrollHorizontalHandler)},i.prototype._initLinkedViews=function(){for(var a=this._getLinkedViews(),r=this._isVertical()?"gantt_layout_outer_scroll gantt_layout_outer_scroll_vertical":"gantt_layout_outer_scroll gantt_layout_outer_scroll_horizontal",s=0;s<a.length;s++)St(a[s].$view||a[s].getNode(),r)},i.prototype._initVertical=function(){this.$scroll_ver=this.$view,this.$domEvents.attach(this.$view,"scroll",this._scrollVerticalHandler)},i.prototype._updateLinkedViews=function(){},i.prototype._initMouseWheel=function(){vt.isFF?this.$domEvents.attach(this._getRootParent().$view,"wheel",this._mouseWheelHandler,{passive:!1}):this.$domEvents.attach(this._getRootParent().$view,"mousewheel",this._mouseWheelHandler,{passive:!1})},i.prototype.scrollHorizontally=function(a){if(!this._scrolling){this._scrolling=!0,this.$scroll_hor.scrollLeft=a,this.$config.codeScrollLeft=a,a=this.$scroll_hor.scrollLeft;for(var r=this._getLinkedViews(),s=0;s<r.length;s++)r[s].scrollTo&&r[s].scrollTo(a,void 0);var o=this.$config.scrollPosition;this.$config.scrollPosition=a,this.callEvent("onScroll",[o,a,this.$config.scroll]),this._scrolling=!1}},i.prototype.scrollVertically=function(a){if(!this._scrolling){this._scrolling=!0,this.$scroll_ver.scrollTop=a,a=this.$scroll_ver.scrollTop;for(var r=this._getLinkedViews(),s=0;s<r.length;s++)r[s].scrollTo&&r[s].scrollTo(void 0,a);var o=this.$config.scrollPosition;this.$config.scrollPosition=a,this.callEvent("onScroll",[o,a,this.$config.scroll]),this._scrolling=!1}},i.prototype._isVertical=function(){return this.$config.scroll=="y"},i.prototype._isHorizontal=function(){return this.$config.scroll=="x"},i.prototype._scrollHorizontalHandler=function(a){if(!this._isVertical()&&!this._scrolling){if(new Date-(this._wheel_time||0)<100)return!0;var r=this.$scroll_hor.scrollLeft;this.scrollHorizontally(r),this._oldLeft=this.$scroll_hor.scrollLeft}},i.prototype._outerScrollHorizontalHandler=function(a){this._isVertical()},i.prototype.show=function(){this.$parent.show()},i.prototype.hide=function(){this.$parent.hide()},i.prototype._getScrollSize=function(){for(var a,r=0,s=0,o=this._isHorizontal(),l=this._getLinkedViews(),d=o?"scrollWidth":"scrollHeight",c=o?"contentX":"contentY",u=o?"x":"y",h=this._getScrollOffset(),f=0;f<l.length;f++)if((a=l[f])&&a.$content&&a.$content.getSize&&!a.$config.hidden){var g,y=a.$content.getSize();if(g=y.hasOwnProperty(d)?y[d]:y[c],h)y[c]>y[u]&&y[c]>r&&g>y[u]-h+2&&(r=g+(o?0:2),s=y[u]);else{var v=Math.max(y[c]-g,0);(g+=v)>Math.max(y[u]-v,0)&&g>r&&(r=g,s=y[u])}}return{outerScroll:s,innerScroll:r}},i.prototype.scroll=function(a){this._isHorizontal()?this.scrollHorizontally(a):this.scrollVertically(a)},i.prototype.getScrollState=function(){return{visible:this.isVisible(),direction:this.$config.scroll,size:this.$config.outerSize,scrollSize:this.$config.scrollSize||0,position:this.$config.scrollPosition||0}},i.prototype.setSize=function(a,r){t.prototype.setSize.apply(this,arguments);var s=this._getScrollSize(),o=(this._isVertical()?r:a)-this._getScrollOffset()+(this._isHorizontal()?1:0);s.innerScroll&&o>s.outerScroll&&(s.innerScroll+=o-s.outerScroll),this.$config.scrollSize=s.innerScroll,this.$config.width=a,this.$config.height=r,this._setScrollSize(s.innerScroll)},i.prototype.isVisible=function(){return!(!this.$parent||!this.$parent.$view.parentNode)},i.prototype.shouldShow=function(){var a=this._getScrollSize();return!(!a.innerScroll&&this.$parent&&this.$parent.$view.parentNode)&&!(!a.innerScroll||this.$parent&&this.$parent.$view.parentNode)},i.prototype.shouldHide=function(){return!(this._getScrollSize().innerScroll||!this.$parent||!this.$parent.$view.parentNode)},i.prototype.toggleVisibility=function(){this.shouldHide()?this.hide():this.shouldShow()&&this.show()},i.prototype._getScaleOffset=function(a){var r=0;return!a||a.$config.view!="timeline"&&a.$config.view!="grid"||(r=a.$content.$getConfig().scale_height),r},i.prototype._getScrollOffset=function(){var a=0;if(this._isVertical()){var r=this.$parent.$parent;a=Math.max(this._getScaleOffset(r.getPrevSibling(this.$parent.$id)),this._getScaleOffset(r.getNextSibling(this.$parent.$id)))}else for(var s=this._getLinkedViews(),o=0;o<s.length;o++){var l=s[o].$parent.$cells,d=l[l.length-1];if(d&&d.$config.view=="scrollbar"&&d.$config.hidden===!1){a=d.$config.width;break}}return a||0},i.prototype._setScrollSize=function(a){var r=this._isHorizontal()?"width":"height",s=this._isHorizontal()?this.$scroll_hor:this.$scroll_ver,o=this._getScrollOffset(),l=s.firstChild;o?this._isVertical()?(this.$config.outerSize=this.$config.height-o+3,s.style.height=this.$config.outerSize+"px",s.style.top=o-1+"px",St(s,this.$parent._borders.top),St(s.parentNode,"gantt_task_vscroll")):(this.$config.outerSize=this.$config.width-o+1,s.style.width=this.$config.outerSize+"px"):(s.style.top="auto",Gt(s,this.$parent._borders.top),Gt(s.parentNode,"gantt_task_vscroll"),this.$config.outerSize=this.$config.height),l.style[r]=a+"px"},i.prototype._scrollVerticalHandler=function(a){if(!this._scrollHorizontalHandler()&&!this._scrolling){var r=this.$scroll_ver.scrollTop;r!=this._oldTop&&(this.scrollVertically(r),this._oldTop=this.$scroll_ver.scrollTop)}},i.prototype._outerScrollVerticalHandler=function(a){this._scrollHorizontalHandler()},i.prototype._checkWheelTarget=function(a){for(var r=this._getLinkedViews().concat(this),s=0;s<r.length;s++)if(G(a,r[s].$view))return!0;return!1},i.prototype._mouseWheelHandler=function(a){var r=a.target||a.srcElement;if(this._checkWheelTarget(r)){this._wheel_time=new Date;var s={},o={x:1,y:1},l=this.$gantt.config.wheel_scroll_sensitivity;typeof l=="number"&&l?o={x:l,y:l}:{}.toString.apply(l)=="[object Object]"&&(o={x:l.x,y:l.y});var d=vt.isFF,c=d?a.deltaX:a.wheelDeltaX,u=d?a.deltaY:a.wheelDelta,h=-20;d&&(h=a.deltaMode!==0?-40:-10);var f=d?c*h*o.x:2*c*o.x,g=d?u*h*o.y:u*o.y,y=this.$gantt.config.horizontal_scroll_key;if(y!==!1&&e.indexOf(y)>=0&&(!a[y]||a.deltaX||a.wheelDeltaX||(f=2*g,g=0)),f&&Math.abs(f)>Math.abs(g)){if(this._isVertical())return;if(s.x||!this.$scroll_hor||!this.$scroll_hor.offsetWidth)return!0;var v=f/-40,b=this._oldLeft,_=b+30*v;if(this.scrollHorizontally(_),this.$scroll_hor.scrollLeft=_,b==this.$scroll_hor.scrollLeft)return!0;this._oldLeft=this.$scroll_hor.scrollLeft}else{if(this._isHorizontal())return;if(s.y||!this.$scroll_ver||!this.$scroll_ver.offsetHeight)return!0;v=g/-40,g===void 0&&(v=a.detail);var m=this._oldTop,p=this.$scroll_ver.scrollTop+30*v;if(this.scrollVertically(p),this.$scroll_ver.scrollTop=p,m==this.$scroll_ver.scrollTop)return!0;this._oldTop=this.$scroll_ver.scrollTop}return a.preventDefault&&a.preventDefault(),a.cancelBubble=!0,!1}},i}(Rt);function wi(t){var e={},i={},n=null,a=-1,r=null,s=function(o){var l=-1,d=-1;return{resetCache:function(){l=-1,d=-1},_getRowHeight:function(){return l===-1&&(l=o.$getConfig().row_height),l},_refreshState:function(){this.resetCache(),d=!0;var c=o.$config.rowStore;if(c)for(var u=this._getRowHeight(),h=0;h<c.fullOrder.length;h++){var f=c.getItem(c.fullOrder[h]);if(f&&f.row_height&&f.row_height!==u){d=!1;break}}},canUseSimpleCalculation:function(){return d===-1&&this._refreshState(),d},getRowTop:function(c){return o.$config.rowStore?c*this._getRowHeight():0},getItemHeight:function(c){return this._getRowHeight()},getTotalHeight:function(){return o.$config.rowStore?o.$config.rowStore.countVisible()*this._getRowHeight():0},getItemIndexByTopPosition:function(c){return o.$config.rowStore?Math.floor(c/this._getRowHeight()):0}}}(t);return{_resetTopPositionHeight:function(){e={},i={},s.resetCache()},_resetHeight:function(){var o=this.$config.rowStore,l=this.getCacheStateTotalHeight(o);r?this.shouldClearHeightCache(r,l)&&(r=l,n=null):r=l,a=-1,s.resetCache()},getRowTop:function(o){if(s.canUseSimpleCalculation())return s.getRowTop(o);var l=this.$config.rowStore;if(!l)return 0;if(i[o]!==void 0)return i[o];for(var d=l.getIndexRange(),c=0,u=0,h=0;h<d.length;h++)i[h]=c,c+=this.getItemHeight(d[h].id),h<o&&(u=c);return u},getItemTop:function(o){if(this.$config.rowStore){if(e[o]!==void 0)return e[o];var l=this.$config.rowStore;if(!l)return 0;var d=l.getIndexById(o);if(d===-1&&l.getParent&&l.exists(o)){var c=l.getParent(o);if(l.exists(c)){var u=l.getItem(c);if(this.$gantt.isSplitTask(u))return this.getItemTop(c)}}return e[o]=this.getRowTop(d),e[o]}return 0},getItemHeight:function(o){if(s.canUseSimpleCalculation())return s.getItemHeight(o);if(!n&&this.$config.rowStore&&this._fillHeightCache(this.$config.rowStore),n[o]!==void 0)return n[o];var l=this.$getConfig().row_height;if(this.$config.rowStore){var d=this.$config.rowStore;if(!d)return l;var c=d.getItem(o);return n[o]=c&&c.row_height||l}return l},_fillHeightCache:function(o){if(o){n={};var l=this.$getConfig().row_height;o.eachItem(function(d){return n[d.id]=d&&d.row_height||l})}},getCacheStateTotalHeight:function(o){var l=this.$getConfig().row_height,d={},c=[],u=0;return o&&o.eachItem(function(h){c.push(h),d[h.id]=h.row_height,u+=h.row_height||l}),{globalHeight:l,items:c,count:c.length,sumHeight:u}},shouldClearHeightCache:function(o,l){if(o.count!=l.count||o.globalHeight!=l.globalHeight||o.sumHeight!=l.sumHeight)return!0;for(var d in o.items){var c=l.items[d];if(c!==void 0&&c!=o.items[d])return!0}return!1},getTotalHeight:function(){if(s.canUseSimpleCalculation())return s.getTotalHeight();if(a!=-1)return a;if(this.$config.rowStore){var o=this.$config.rowStore;this._fillHeightCache(o);var l=this.getItemHeight.bind(this),d=o.getVisibleItems(),c=0;return d.forEach(function(u){c+=l(u.id)}),a=c,c}return 0},getItemIndexByTopPosition:function(o){if(this.$config.rowStore){if(s.canUseSimpleCalculation())return s.getItemIndexByTopPosition(o);for(var l=this.$config.rowStore,d=0;d<l.countVisible();d++){var c=this.getRowTop(d),u=this.getRowTop(d+1);if(!u){var h=l.getIdByIndex(d);u=c+this.getItemHeight(h)}if(o>=c&&o<u)return d}return l.countVisible()+2}return 0}}}const Ha=function(){return{render:function(){},destroy:function(){}}};var Ut=function(t,e,i,n){this.$config=N({},e||{}),this.$scaleHelper=new ue(n),this.$gantt=n,this._posFromDateCache={},this._timelineDragScroll=null,N(this,wi(this)),ot(this)};Ut.prototype={init:function(t){t.innerHTML+="<div class='gantt_task' style='width:inherit;height:inherit;'></div>",this.$task=t.childNodes[0],this.$task.innerHTML="<div class='gantt_task_scale'></div><div class='gantt_data_area'></div>",this.$task_scale=this.$task.childNodes[0],this.$task_data=this.$task.childNodes[1],this.$task_data.innerHTML="<div class='gantt_task_bg'></div><div class='gantt_task_baselines'></div><div class='gantt_links_area'></div><div class='gantt_bars_area'></div><div class='gantt_task_constraints'></div><div class='gantt_task_deadlines'></div>",this.$task_bg=this.$task_data.childNodes[0],this.$task_baselines=this.$task_data.childNodes[1],this.$task_links=this.$task_data.childNodes[2],this.$task_bars=this.$task_data.childNodes[3],this.$task_constraints=this.$task_data.childNodes[4],this.$task_deadlines=this.$task_data.childNodes[5],this._tasks={col_width:0,width:[],full_width:0,trace_x:[],rendered:{}};var e=this.$getConfig(),i=e[this.$config.bind+"_attribute"],n=e[this.$config.bindLinks+"_attribute"];!i&&this.$config.bind&&(i="data-"+this.$config.bind+"-id"),!n&&this.$config.bindLinks&&(n="data-"+this.$config.bindLinks+"-id"),this.$config.item_attribute=i||null,this.$config.link_attribute=n||null;var a=this._createLayerConfig();this.$config.layers||(this.$config.layers=a.tasks),this.$config.linkLayers||(this.$config.linkLayers=a.links),this._attachLayers(this.$gantt),this.callEvent("onReady",[]),this.$gantt.ext.dragTimeline&&(this._timelineDragScroll=this.$gantt.ext.dragTimeline.create(),this._timelineDragScroll.attach(this))},setSize:function(t,e){var i=this.$getConfig();if(1*t===t&&(this.$config.width=t),1*e===e){this.$config.height=e;var n=Math.max(this.$config.height-i.scale_height);this.$task_data.style.height=n+"px"}this.refresh(),this.$task_bg.style.backgroundImage="",i.smart_rendering&&this.$config.rowStore?this.$task_bg.style.height=this.getTotalHeight()+"px":this.$task_bg.style.height="";for(var a=this._tasks,r=this.$task_data.childNodes,s=0,o=r.length;s<o;s++){var l=r[s];l.hasAttribute("data-layer")&&l.style&&(l.style.width=a.full_width+"px")}},isVisible:function(){return this.$parent&&this.$parent.$config?!this.$parent.$config.hidden:this.$task.offsetWidth},getSize:function(){var t=this.$getConfig(),e=this.$config.rowStore?this.getTotalHeight():0,i=this.isVisible()?this._tasks.full_width:0;return{x:this.isVisible()?this.$config.width:0,y:this.isVisible()?this.$config.height:0,contentX:this.isVisible()?i:0,contentY:this.isVisible()?t.scale_height+e:0,scrollHeight:this.isVisible()?e:0,scrollWidth:this.isVisible()?i:0}},scrollTo:function(t,e){if(this.isVisible()){var i=!1;this.$config.scrollTop=this.$config.scrollTop||0,this.$config.scrollLeft=this.$config.scrollLeft||0,1*e===e&&(this.$config.scrollTop=e,this.$task_data.scrollTop=this.$config.scrollTop,i=!0),1*t===t&&(this.$task.scrollLeft=t,this.$config.scrollLeft=this.$task.scrollLeft,this._refreshScales(),i=!0),i&&this.callEvent("onScroll",[this.$config.scrollLeft,this.$config.scrollTop])}},_refreshScales:function(){if(this.isVisible()&&this.$getConfig().smart_scales){var t=this.getViewPort(),e=this._scales;this.$task_scale.innerHTML=this._getScaleChunkHtml(e,t.x,t.x_end)}},getViewPort:function(){var t=this.$config.scrollLeft||0,e=this.$config.scrollTop||0,i=this.$config.height||0,n=this.$config.width||0;return{y:e,y_end:e+i,x:t,x_end:t+n,height:i,width:n}},_createLayerConfig:function(){var t=this,e=function(){return t.isVisible()};this.$gantt;var i=[{expose:!0,renderer:this.$gantt.$ui.layers.taskBar(),container:this.$task_bars,filter:[e,function(n,a){return!a.hide_bar}]}];return i.push({renderer:this.$gantt.$ui.layers.taskBg(),container:this.$task_bg,filter:[e]}),{tasks:i,links:[{expose:!0,renderer:this.$gantt.$ui.layers.link(),container:this.$task_links,filter:[e]}]}},_attachLayers:function(t){this._taskLayers=[],this._linkLayers=[];var e=this,i=this.$gantt.$services.getService("layers");if(this.$config.bind){this._bindStore();var n=i.getDataRender(this.$config.bind);n||(n=i.createDataRender({name:this.$config.bind,defaultContainer:function(){return e.$task_data}})),n.container=function(){return e.$task_data};for(var a=this.$config.layers,r=0;a&&r<a.length;r++){typeof(d=a[r])=="string"&&(d=this.$gantt.$ui.layers[d]()),(typeof d=="function"||d&&d.render&&d.update)&&(d={renderer:d}),d.view=this;var s=n.addLayer(d);this._taskLayers.push(s),d.expose&&(this._taskRenderer=n.getLayer(s))}this._initStaticBackgroundRender()}if(this.$config.bindLinks){e.$config.linkStore=e.$gantt.getDatastore(e.$config.bindLinks);var o=i.getDataRender(this.$config.bindLinks);o||(o=i.createDataRender({name:this.$config.bindLinks,defaultContainer:function(){return e.$task_data}}));var l=this.$config.linkLayers;for(r=0;l&&r<l.length;r++){var d;typeof d=="string"&&(d=this.$gantt.$ui.layers[d]()),(d=l[r]).view=this;var c=o.addLayer(d);this._taskLayers.push(c),l[r].expose&&(this._linkRenderer=o.getLayer(c))}}},_initStaticBackgroundRender:function(){var t=this,e=Ha(),i=t.$config.rowStore;i&&(this._staticBgHandler=i.attachEvent("onStoreUpdated",function(n,a,r){if(n===null&&t.isVisible()){var s=t.$getConfig();if(s.static_background||s.timeline_placeholder){var o=t.$gantt.getDatastore(t.$config.bind),l=t.$task_bg_static;if(l||((l=document.createElement("div")).className="gantt_task_bg",t.$task_bg_static=l,t.$task_bg.nextSibling?t.$task_data.insertBefore(l,t.$task_bg.nextSibling):t.$task_data.appendChild(l)),o){var d=t.getTotalHeight();s.timeline_placeholder&&(d=s.timeline_placeholder.height||t.$task_data.offsetHeight||99999),e.render(l,s,t.getScale(),d,t.getItemHeight(a?a.id:null))}}else s.static_background&&t.$task_bg_static&&t.$task_bg_static.parentNode&&t.$task_bg_static.parentNode.removeChild(t.$task_bg_static)}}),this.attachEvent("onDestroy",function(){}),this._initStaticBackgroundRender=function(){})},_clearLayers:function(t){var e=this.$gantt.$services.getService("layers"),i=e.getDataRender(this.$config.bind),n=e.getDataRender(this.$config.bindLinks);if(this._taskLayers)for(var a=0;a<this._taskLayers.length;a++)i.removeLayer(this._taskLayers[a]);if(this._linkLayers)for(a=0;a<this._linkLayers.length;a++)n.removeLayer(this._linkLayers[a]);this._linkLayers=[],this._taskLayers=[]},_render_tasks_scales:function(){var t=this.$getConfig(),e="",i=0,n=0,a=this.$gantt.getState();if(this.isVisible()){var r=this.$scaleHelper,s=this._getScales();n=t.scale_height;var o=this.$config.width;t.autosize!="x"&&t.autosize!="xy"||(o=Math.max(t.autosize_min_width,0));var l=r.prepareConfigs(s,t.min_column_width,o,n-1,a.min_date,a.max_date,t.rtl),d=this._tasks=l[l.length-1];this._scales=l,this._posFromDateCache={},e=this._getScaleChunkHtml(l,0,this.$config.width),i=d.full_width+"px",n+="px"}this.$task_scale.style.height=n,this.$task_data.style.width=this.$task_scale.style.width=i,this.$task_scale.innerHTML=e},_getScaleChunkHtml:function(t,e,i){for(var n=[],a=this.$gantt.templates.scale_row_class,r=0;r<t.length;r++){var s="gantt_scale_line",o=a(t[r]);o&&(s+=" "+o),n.push('<div class="'+s+'" style="height:'+t[r].height+"px;position:relative;line-height:"+t[r].height+'px">'+this._prepareScaleHtml(t[r],e,i,r)+"</div>")}return n.join("")},_prepareScaleHtml:function(t,e,i,n){var a=this.$getConfig(),r=this.$gantt.templates,s=[],o=null,l=null,d=t.format||t.template||t.date;typeof d=="string"&&(d=this.$gantt.date.date_to_str(d));var c=0,u=t.count;!a.smart_scales||isNaN(e)||isNaN(i)||(c=It(t.left,e),u=It(t.left,i)+1),l=t.css||function(){},!t.css&&a.inherit_scale_class&&(l=r.scale_cell_class);for(var h=c;h<u&&t.trace_x[h];h++){o=new Date(t.trace_x[h]);var f=d.call(this,o),g=t.width[h];t.height;var y=t.left[h],v="",b="",_="";if(g){v="width:"+g+"px;"+(a.smart_scales?"position:absolute;left:"+y+"px":"");const p=this.getViewPort(),k=(a.scales[n]||{}).sticky;let $="";const w=70;if(k!==!1&&g>w||k===!0){if(y<p.x&&y+g/2-w/2<p.x)$=` style='position:absolute;left: ${p.x-y+10}px;' `;else if(y+g/2+w/2>p.x_end&&g>w){let x=p.x_end-y-10,S="-100%";x<w&&(x=w,S=`-${x}px`),$=` style='position:absolute;left: ${x}px;transform: translate(${S},0);' `}}_="gantt_scale_cell"+(h==t.count-1?" gantt_last_cell":""),(b=l.call(this,o))&&(_+=" "+b);var m=`<div class='${_}' ${this.$gantt._waiAria.getTimelineCellAttr(f)} style='${v}'><span ${$}>${f}</span></div>`;s.push(m)}}return s.join("")},dateFromPos:function(t){var e=this._tasks;if(t<0||t>e.full_width||!e.full_width)return null;var i=It(this._tasks.left,t),n=this._tasks.left[i],a=e.width[i]||e.col_width,r=0;a&&(r=(t-n)/a,e.rtl&&(r=1-r));var s=0;return r&&(s=this._getColumnDuration(e,e.trace_x[i])),new Date(e.trace_x[i].valueOf()+Math.round(r*s))},posFromDate:function(t){if(!this.isVisible()||!t)return 0;var e=String(t.valueOf());if(this._posFromDateCache[e]!==void 0)return this._posFromDateCache[e];var i=this.columnIndexByDate(t);this.$gantt.assert(i>=0,"Invalid day index");var n=Math.floor(i),a=i%1,r=this._tasks.left[Math.min(n,this._tasks.width.length-1)];n==this._tasks.width.length&&(r+=this._tasks.width[this._tasks.width.length-1]),a&&(n<this._tasks.width.length?r+=this._tasks.width[n]*(a%1):r+=1);var s=Math.round(r);return this._posFromDateCache[e]=s,Math.round(s)},_getNextVisibleColumn:function(t,e,i){for(var n=+e[t],a=t;i[n];)n=+e[++a];return a},_getPrevVisibleColumn:function(t,e,i){for(var n=+e[t],a=t;i[n];)n=+e[--a];return a},_getClosestVisibleColumn:function(t,e,i){var n=this._getNextVisibleColumn(t,e,i);return e[n]||(n=this._getPrevVisibleColumn(t,e,i)),n},columnIndexByDate:function(t){var e=new Date(t).valueOf(),i=this._tasks.trace_x_ascending,n=this._tasks.ignore_x,a=this.$gantt.getState();if(e<=a.min_date)return this._tasks.rtl?i.length:0;if(e>=a.max_date)return this._tasks.rtl?0:i.length;var r=It(i,e),s=this._getClosestVisibleColumn(r,i,n),o=i[s],l=this._tasks.trace_index_transition;if(!o)return l?l[0]:0;var d=(t-i[s])/this._getColumnDuration(this._tasks,i[s]);return l?l[s]+(1-d):s+d},getItemPosition:function(t,e,i){var n,a,r;let s=e||t.start_date||t.$auto_start_date,o=i||t.end_date||t.$auto_end_date;return this._tasks.rtl?(a=this.posFromDate(s),n=this.posFromDate(o)):(n=this.posFromDate(s),a=this.posFromDate(o)),r=Math.max(a-n,0),{left:n,top:this.getItemTop(t.id),height:this.getBarHeight(t.id),width:r,rowHeight:this.getItemHeight(t.id)}},getBarHeight:function(t,e){var i=this.$getConfig(),n=this.$config.rowStore.getItem(t),a=n.task_height||n.bar_height||i.bar_height||i.task_height,r=this.getItemHeight(t);return a=="full"&&(a=r-(i.bar_height_padding||3)),a=Math.min(a,r),e&&(a=Math.round(a/Math.sqrt(2))),Math.max(a,0)},getScale:function(){return this._tasks},_getScales:function(){var t=this.$getConfig(),e=this.$scaleHelper,i=[e.primaryScale(t)].concat(e.getSubScales(t));return e.sortScales(i),i},_getColumnDuration:function(t,e){return this.$gantt.date.add(e,t.step,t.unit)-e},_bindStore:function(){if(this.$config.bind){var t=this.$gantt.getDatastore(this.$config.bind);if(this.$config.rowStore=t,t&&!t._timelineCacheAttached){var e=this;t._timelineCacheAttached=t.attachEvent("onBeforeFilter",function(){e._resetTopPositionHeight()})}}},_unbindStore:function(){if(this.$config.bind){var t=this.$gantt.getDatastore(this.$config.bind);t&&t._timelineCacheAttached&&(t.detachEvent(t._timelineCacheAttached),t._timelineCacheAttached=!1)}},refresh:function(){this._bindStore(),this.$config.bindLinks&&(this.$config.linkStore=this.$gantt.getDatastore(this.$config.bindLinks)),this._resetTopPositionHeight(),this._resetHeight(),this._initStaticBackgroundRender(),this._render_tasks_scales()},destructor:function(){var t=this.$gantt;this._clearLayers(t),this._unbindStore(),this.$task=null,this.$task_scale=null,this.$task_data=null,this.$task_bg=null,this.$task_links=null,this.$task_bars=null,this.$gantt=null,this.$config.rowStore&&(this.$config.rowStore.detachEvent(this._staticBgHandler),this.$config.rowStore=null),this.$config.linkStore&&(this.$config.linkStore=null),this._timelineDragScroll&&(this._timelineDragScroll.destructor(),this._timelineDragScroll=null),this.callEvent("onDestroy",[]),this.detachAllEvents()}};class Oa{constructor(e){this._scrollOrder=0;const{gantt:i,grid:n,dnd:a,getCurrentX:r}=e;this.$gantt=i,this.$grid=n,this._dnd=a,this.getCurrentX=r,this._scrollView=this.$gantt.$ui.getView(this.$grid.$config.scrollX),this.attachEvents()}attachEvents(){this.isScrollable()&&(this._dnd.attachEvent("onDragMove",(e,i)=>{const n=this.$grid.$grid.getBoundingClientRect(),a=n.right,r=n.left,s=this.getCurrentX(i.clientX);return s>=a-20&&(this.autoscrollRight(),this.autoscrollStart()),s<=r+20&&(this.autoscrollLeft(),this.autoscrollStart()),s<a-20&&s>r+20&&this.autoscrollStop(),!0}),this._dnd.attachEvent("onDragEnd",()=>{this.autoscrollStop()}))}autoscrollStart(){if(this._scrollOrder===0)return;const e=10*this._scrollOrder,i=this._scrollView.getScrollState();this._scrollView.scrollTo(i.position+e),setTimeout(()=>{this.autoscrollStart()},50)}autoscrollRight(){this._scrollOrder=1}autoscrollLeft(){this._scrollOrder=-1}autoscrollStop(){this._scrollOrder=0}getCorrection(){return this.isScrollable()?this._scrollView.getScrollState().position:0}isScrollable(){return!!this.$grid.$config.scrollable}}const Ke="data-column-id";class Ba{constructor(e,i){this._targetMarker=null,this.calculateCurrentPosition=n=>{const a=this.$grid.$grid.getBoundingClientRect(),r=a.right,s=a.left;let o=n;return o>r&&(o=r),o<s&&(o=s),o},this.$gantt=e,this.$grid=i}init(){const e=this.$gantt.$services.getService("dnd");this._dnd=new e(this.$grid.$grid_scale,{updates_per_second:60}),this._scrollableGrid=new Oa({gantt:this.$gantt,grid:this.$grid,dnd:this._dnd,getCurrentX:this.calculateCurrentPosition}),this.attachEvents()}attachEvents(){this._dnd.attachEvent("onBeforeDragStart",(e,i)=>{if(this._draggedCell=this.$gantt.utils.dom.closest(i.target,".gantt_grid_head_cell"),!this._draggedCell)return;const n=this.$grid.$getConfig().columns,a=this._draggedCell.getAttribute(Ke);let r,s;return n.map(function(o,l){o.name===a&&(r=o,s=l)}),this.$grid.callEvent("onBeforeColumnDragStart",[{draggedColumn:r,draggedIndex:s}])!==!1&&!(!this._draggedCell||!r)&&(this._gridConfig=this.$grid.$getConfig(),this._originAutoscroll=this.$gantt.config.autoscroll,this.$gantt.config.autoscroll=!1,!0)}),this._dnd.attachEvent("onAfterDragStart",(e,i)=>{this._draggedCell&&(this._dnd.config.column=this._draggedCell.getAttribute(Ke),this._dnd.config.marker.innerHTML=this._draggedCell.outerHTML,this._dnd.config.marker.classList.add("gantt_column_drag_marker"),this._dnd.config.marker.style.height=this._gridConfig.scale_height+"px",this._dnd.config.marker.style.lineHeight=this._gridConfig.scale_height+"px",this._draggedCell.classList.add("gantt_grid_head_cell_dragged"))}),this._dnd.attachEvent("onDragMove",(e,i)=>{if(!this._draggedCell)return;this._dragX=i.clientX;const n=this.calculateCurrentPosition(i.clientX),a=this.findColumnsIndexes();return this.setMarkerPosition(n),this.drawTargetMarker(a),!0}),this._dnd.attachEvent("onDragEnd",()=>{if(!this._draggedCell)return;const e=this.findColumnsIndexes(),i=e.targetIndex,n=e.draggedIndex,a=this.$grid.$getConfig().columns,r=a[n],s=a[i];if(this.$grid.callEvent("onColumnDragMove",[{draggedColumn:r,targetColumn:s,draggedIndex:n,targetIndex:i}])===!1)return this.cleanTargetMarker(),void this.$gantt.render();this.$gantt.config.autoscroll=this._originAutoscroll,this._draggedCell.classList.remove("gantt_grid_head_cell_dragged"),this.cleanTargetMarker(),this.reorderColumns()})}reorderColumns(){const{targetIndex:e,draggedIndex:i}=this.findColumnsIndexes(),n=this.$grid.$getConfig().columns,a=n[i],r=n[e];this.$grid.callEvent("onBeforeColumnReorder",[{draggedColumn:a,targetColumn:r,draggedIndex:i,targetIndex:e}])!==!1&&e!==i&&(n.splice(i,1),n.splice(e,0,a),this.$gantt.render(),this.$grid.callEvent("onAfterColumnReorder",[{draggedColumn:a,targetColumn:r,draggedIndex:i,targetIndex:e}]))}findColumnsIndexes(){const e=this._dnd.config.column,i=this.$grid.$getConfig().columns;let n,a,r,s;const o={startX:0,endX:0};let l,d=0,c=i.length-1,u=(g,y)=>g<=y,h=g=>++g;this.$gantt.config.rtl&&(d=i.length-1,c=0,u=(g,y)=>g>=y,h=g=>--g);const f=this._dragX-this.$grid.$grid.getBoundingClientRect().left+this._scrollableGrid.getCorrection();for(let g=d;u(g,c)&&(n===void 0||a===void 0);g=h(g))i[g].hide||(o.startX=o.endX,o.endX+=i[g].width,f>=o.startX&&(f<=o.endX||!u(h(g),c))&&(n=g,r=o.startX,s=o.endX,l=(f-o.startX)/(o.endX-o.startX)),e===i[g].name&&(a=g));return{targetIndex:n,draggedIndex:a,xBefore:r,xAfter:s,columnRelativePos:l}}setMarkerPosition(e,i=10){const{marker:n}=this._dnd.config,a=this._dnd._obj.getBoundingClientRect();n.style.top=`${a.y+i}px`,n.style.left=`${e}px`}drawTargetMarker({targetIndex:e,draggedIndex:i,xBefore:n,xAfter:a,columnRelativePos:r}){let s;this._targetMarker||(this._targetMarker=document.createElement("div"),St(this._targetMarker,"gantt_grid_target_marker"),this._targetMarker.style.display="none",this._targetMarker.style.height=`${this._gridConfig.scale_height}px`),this._targetMarker.parentNode||this.$grid.$grid_scale.appendChild(this._targetMarker),s=e>i?a:e<i?n:r>.5?a:n,this._targetMarker.style.left=`${s}px`,this._targetMarker.style.display="block"}cleanTargetMarker(){this._targetMarker&&this._targetMarker.parentNode&&this.$grid.$grid_scale.removeChild(this._targetMarker),this._targetMarker=null}}function Te(t){var e=[];return{delegate:function(i,n,a,r){e.push([i,n,a,r]),t.$services.getService("mouseEvents").delegate(i,n,a,r)},destructor:function(){for(var i=t.$services.getService("mouseEvents"),n=0;n<e.length;n++){var a=e[n];i.detach(a[0],a[1],a[2],a[3])}e=[]}}}var ye=function(t,e,i,n){this.$config=N({},e||{}),this.$gantt=n,this.$parent=t,ot(this),this.$state={},N(this,wi(this))};ye.prototype={init:function(t){var e=this.$gantt,i=e._waiAria.gridAttrString(),n=e._waiAria.gridDataAttrString(),a=this.$getConfig(),r=a.reorder_grid_columns||!1;this.$config.reorder_grid_columns!==void 0&&(r=this.$config.reorder_grid_columns),t.innerHTML="<div class='gantt_grid' style='height:inherit;width:inherit;' "+i+"></div>",this.$grid=t.childNodes[0],this.$grid.innerHTML="<div class='gantt_grid_scale' "+e._waiAria.gridScaleRowAttrString()+"></div><div class='gantt_grid_data' "+n+"></div>",this.$grid_scale=this.$grid.childNodes[0],this.$grid_data=this.$grid.childNodes[1];var s=a[this.$config.bind+"_attribute"];if(!s&&this.$config.bind&&(s="data-"+this.$config.bind+"-id"),this.$config.item_attribute=s||null,!this.$config.layers){var o=this._createLayerConfig();this.$config.layers=o}var l={doOnRender:function(){}};this._renderHeaderResizers=l.doOnRender,this._mouseDelegates=Te(e);var d=function(c,u){var h={row_before_start:c.bind(function(f,g,y){var v=u.$getConfig(),b=u.$config.rowStore;if(!et(y,v.task_grid_row_resizer_attribute))return!1;var _=this.locate(y,v.task_grid_row_resizer_attribute),m=b.getItem(_);return u.callEvent("onBeforeRowResize",[m])!==!1&&void 0},c),row_after_start:c.bind(function(f,g,y){var v=u.$getConfig(),b=this.locate(y,v.task_grid_row_resizer_attribute);f.config.marker.innerHTML="",f.config.marker.className+=" gantt_row_grid_resize_area",f.config.marker.style.width=u.$grid.offsetWidth+"px",f.config.drag_id=b},c),row_drag_move:c.bind(function(f,g,y){var v=u.$config.rowStore,b=u.$getConfig(),_=f.config,m=_.drag_id,p=u.getItemHeight(m),k=u.getItemTop(m)-g.scrollTop,$=F(u.$grid_data),w=parseInt(_.marker.style.top,10),x=k+$.y,S=0,T=b.min_task_grid_row_height;return(S=w-x)<T&&(S=T),_.marker.style.left=$.x+"px",_.marker.style.top=x-1+"px",_.marker.style.height=Math.abs(S)+1+"px",_.marker_height=S,u.callEvent("onRowResize",[m,v.getItem(m),S+p]),!0},c),row_drag_end:c.bind(function(f,g,y){var v=u.$config.rowStore,b=f.config,_=b.drag_id,m=v.getItem(_),p=u.getItemHeight(_),k=b.marker_height;u.callEvent("onBeforeRowResizeEnd",[_,m,k])!==!1&&m.row_height!=k&&(m.row_height=k,v.updateItem(_),u.callEvent("onAfterRowResize",[_,m,p,k]),this.render())},c)};return{init:function(){var f=c.$services.getService("dnd"),g=u.$getConfig(),y=new f(u.$grid_data,{updates_per_second:60});c.defined(g.dnd_sensitivity)&&(y.config.sensitivity=g.dnd_sensitivity),y.attachEvent("onBeforeDragStart",function(v,b){return h.row_before_start(y,v,b)}),y.attachEvent("onAfterDragStart",function(v,b){return h.row_after_start(y,v,b)}),y.attachEvent("onDragMove",function(v,b){return h.row_drag_move(y,v,b)}),y.attachEvent("onDragEnd",function(v,b){return h.row_drag_end(y,v,b)})}}}(e,this);d.init(),this._addLayers(this.$gantt),this._initEvents(),r&&(this._columnDND=new Ba(e,this),this._columnDND.init()),this.callEvent("onReady",[])},_validateColumnWidth:function(t,e){var i=t[e];if(i&&i!="*"){var n=this.$gantt,a=1*i;isNaN(a)?n.assert(!1,"Wrong "+e+" value of column "+t.name):t[e]=a}},setSize:function(t,e){this.$config.width=this.$state.width=t,this.$config.height=this.$state.height=e;for(var i,n=this.getGridColumns(),a=0,r=(d=this.$getConfig()).grid_elastic_columns,s=0,o=n.length;s<o;s++)this._validateColumnWidth(n[s],"min_width"),this._validateColumnWidth(n[s],"max_width"),this._validateColumnWidth(n[s],"width"),a+=1*n[s].width;if(!isNaN(a)&&this.$config.scrollable||(a=i=this._setColumnsWidth(t+1)),this.$config.scrollable&&r&&!isNaN(a)){let u="width";r=="min_width"&&(u="min_width");let h=0;n.forEach(function(f){h+=f[u]||d.min_grid_column_width});var l=Math.max(h,t);a=this._setColumnsWidth(l),i=t}this.$config.scrollable?(this.$grid_scale.style.width=a+"px",this.$grid_data.style.width=a+"px"):(this.$grid_scale.style.width="inherit",this.$grid_data.style.width="inherit"),this.$config.width-=1;var d=this.$getConfig();i!==t&&(i!==void 0?(d.grid_width=i,this.$config.width=i-1):isNaN(a)||(this._setColumnsWidth(a),d.grid_width=a,this.$config.width=a-1));var c=Math.max(this.$state.height-d.scale_height,0);this.$grid_data.style.height=c+"px",this.refresh()},getSize:function(){var t=this.$getConfig(),e=this.$config.rowStore?this.getTotalHeight():0,i=this._getGridWidth();return{x:this.$state.width,y:this.$state.height,contentX:this.isVisible()?i:0,contentY:this.isVisible()?t.scale_height+e:0,scrollHeight:this.isVisible()?e:0,scrollWidth:this.isVisible()?i:0}},_bindStore:function(){if(this.$config.bind){var t=this.$gantt.getDatastore(this.$config.bind);if(this.$config.rowStore=t,t&&!t._gridCacheAttached){var e=this;t._gridCacheAttached=t.attachEvent("onBeforeFilter",function(){e._resetTopPositionHeight()})}}},_unbindStore:function(){if(this.$config.bind){var t=this.$gantt.getDatastore(this.$config.bind);t&&t._gridCacheAttached&&(t.detachEvent(t._gridCacheAttached),t._gridCacheAttached=!1)}},refresh:function(){this._bindStore(),this._resetTopPositionHeight(),this._resetHeight(),this._initSmartRenderingPlaceholder(),this._calculateGridWidth(),this._renderGridHeader()},getViewPort:function(){var t=this.$config.scrollLeft||0,e=this.$config.scrollTop||0,i=this.$config.height||0,n=this.$config.width||0;return{y:e,y_end:e+i,x:t,x_end:t+n,height:i,width:n}},scrollTo:function(t,e){if(this.isVisible()){var i=!1;this.$config.scrollTop=this.$config.scrollTop||0,this.$config.scrollLeft=this.$config.scrollLeft||0,1*t==t&&(this.$config.scrollLeft=this.$state.scrollLeft=this.$grid.scrollLeft=t,i=!0),1*e==e&&(this.$config.scrollTop=this.$state.scrollTop=this.$grid_data.scrollTop=e,i=!0),i&&this.callEvent("onScroll",[this.$config.scrollLeft,this.$config.scrollTop])}},getColumnIndex:function(t,e){for(var i=this.$getConfig().columns,n=0,a=0;a<i.length;a++)if(e&&i[a].hide&&n++,i[a].name==t)return a-n;return null},getColumn:function(t){var e=this.getColumnIndex(t);return e===null?null:this.$getConfig().columns[e]},getGridColumns:function(){return this.$getConfig().columns.slice()},isVisible:function(){return this.$parent&&this.$parent.$config?!this.$parent.$config.hidden:this.$grid.offsetWidth},_createLayerConfig:function(){var t=this.$gantt,e=this;return[{renderer:t.$ui.layers.gridLine(),container:this.$grid_data,filter:[function(){return e.isVisible()}]},{renderer:t.$ui.layers.gridTaskRowResizer(),container:this.$grid_data,append:!0,filter:[function(){return t.config.resize_rows}]}]},_addLayers:function(t){if(this.$config.bind){this._taskLayers=[];var e=this,i=this.$gantt.$services.getService("layers"),n=i.getDataRender(this.$config.bind);n||(n=i.createDataRender({name:this.$config.bind,defaultContainer:function(){return e.$grid_data}}));for(var a=this.$config.layers,r=0;a&&r<a.length;r++){var s=a[r];s.view=this;var o=n.addLayer(s);this._taskLayers.push(o)}this._bindStore(),this._initSmartRenderingPlaceholder()}},_refreshPlaceholderOnStoreUpdate:function(t){var e=this.$getConfig(),i=this.$config.rowStore;if(i&&t===null&&this.isVisible()&&e.smart_rendering){var n;if(this.$config.scrollY){var a=this.$gantt.$ui.getView(this.$config.scrollY);a&&(n=a.getScrollState().scrollSize)}if(n||(n=i?this.getTotalHeight():0),n){this.$rowsPlaceholder&&this.$rowsPlaceholder.parentNode&&this.$rowsPlaceholder.parentNode.removeChild(this.$rowsPlaceholder);var r=this.$rowsPlaceholder=document.createElement("div");r.style.visibility="hidden",r.style.height=n+"px",r.style.width="1px",this.$grid_data.appendChild(r)}}},_initSmartRenderingPlaceholder:function(){var t=this.$config.rowStore;t&&(this._initSmartRenderingPlaceholder=function(){},this._staticBgHandler=t.attachEvent("onStoreUpdated",R(this._refreshPlaceholderOnStoreUpdate,this)))},_initEvents:function(){var t=this.$gantt;this._mouseDelegates.delegate("click","gantt_close",t.bind(function(e,i,n){var a=this.$config.rowStore;if(!a)return!0;var r=et(e,this.$config.item_attribute);return r&&a.close(r.getAttribute(this.$config.item_attribute)),!1},this),this.$grid),this._mouseDelegates.delegate("click","gantt_open",t.bind(function(e,i,n){var a=this.$config.rowStore;if(!a)return!0;var r=et(e,this.$config.item_attribute);return r&&a.open(r.getAttribute(this.$config.item_attribute)),!1},this),this.$grid)},_clearLayers:function(t){var e=this.$gantt.$services.getService("layers").getDataRender(this.$config.bind);if(this._taskLayers)for(var i=0;i<this._taskLayers.length;i++)e.removeLayer(this._taskLayers[i]);this._taskLayers=[]},_getColumnWidth:function(t,e,i){var n=t.min_width||e.min_grid_column_width,a=Math.max(i,n||10);return t.max_width&&(a=Math.min(a,t.max_width)),a},_checkGridColumnMinWidthLimits:function(t,e){for(var i=0,n=t.length;i<n;i++){var a=1*t[i].width;!t[i].min_width&&a<e.min_grid_column_width&&(t[i].min_width=a)}},_getGridWidthLimits:function(){for(var t=this.$getConfig(),e=this.getGridColumns(),i=0,n=0,a=0;a<e.length;a++)i+=e[a].min_width?e[a].min_width:t.min_grid_column_width,n!==void 0&&(n=e[a].max_width?n+e[a].max_width:void 0);return this._checkGridColumnMinWidthLimits(e,t),[i,n]},_setColumnsWidth:function(t,e){var i=this.$getConfig(),n=this.getGridColumns(),a=0,r=t;e=window.isNaN(e)?-1:e;for(var s=0,o=n.length;s<o;s++)a+=1*n[s].width;if(window.isNaN(a))for(this._calculateGridWidth(),a=0,s=0,o=n.length;s<o;s++)a+=1*n[s].width;var l=r-a,d=0;for(s=0;s<e+1;s++)d+=n[s].width;for(a-=d,s=e+1;s<n.length;s++){var c=n[s],u=Math.round(l*(c.width/a));l<0?c.min_width&&c.width+u<c.min_width?u=c.min_width-c.width:!c.min_width&&i.min_grid_column_width&&c.width+u<i.min_grid_column_width&&(u=i.min_grid_column_width-c.width):c.max_width&&c.width+u>c.max_width&&(u=c.max_width-c.width),a-=c.width,c.width+=u,l-=u}for(var h=l>0?1:-1;l>0&&h===1||l<0&&h===-1;){var f=l;for(s=e+1;s<n.length;s++){var g;if((g=n[s].width+h)==this._getColumnWidth(n[s],i,g)&&(l-=h,n[s].width=g),!l)break}if(f==l)break}return l&&e>-1&&(g=n[e].width+l)==this._getColumnWidth(n[e],i,g)&&(n[e].width=g),this._getColsTotalWidth()},_getColsTotalWidth:function(){for(var t=this.getGridColumns(),e=0,i=0;i<t.length;i++){var n=parseFloat(t[i].width);if(window.isNaN(n))return!1;e+=n}return e},_calculateGridWidth:function(){for(var t=this.$getConfig(),e=this.getGridColumns(),i=0,n=[],a=[],r=0;r<e.length;r++){var s=parseFloat(e[r].width);window.isNaN(s)&&(s=t.min_grid_column_width||10,n.push(r)),a[r]=s,i+=s}var o=this._getGridWidth()+1;if(t.autofit||n.length){var l=o-i;if(t.autofit&&!t.grid_elastic_columns)for(r=0;r<a.length;r++){var d=Math.round(l/(a.length-r));a[r]+=d,(c=this._getColumnWidth(e[r],t,a[r]))!=a[r]&&(d=c-a[r],a[r]=c),l-=d}else if(n.length)for(r=0;r<n.length;r++){d=Math.round(l/(n.length-r));var c,u=n[r];a[u]+=d,(c=this._getColumnWidth(e[u],t,a[u]))!=a[u]&&(d=c-a[u],a[u]=c),l-=d}for(r=0;r<a.length;r++)e[r].width=a[r]}else{var h=o!=i;this.$config.width=i-1,t.grid_width=i,h&&this.$parent._setContentSize(this.$config.width,null)}},_renderGridHeader:function(){var t=this.$gantt,e=this.$getConfig(),i=this.$gantt.locale,n=this.$gantt.templates,a=this.getGridColumns();e.rtl&&(a=a.reverse());for(var r=[],s=0,o=i.labels,l=e.scale_height-1,d=0;d<a.length;d++){var c=d==a.length-1,u=a[d];u.name||(u.name=t.uid()+"");var h=1*u.width,f=this._getGridWidth();c&&f>s+h&&(u.width=h=f-s),s+=h;var g=t._sort&&u.name==t._sort.name?`<div data-column-id="${u.name}" class="gantt_sort gantt_${t._sort.direction}"></div>`:"",y=["gantt_grid_head_cell","gantt_grid_head_"+u.name,c?"gantt_last_cell":"",n.grid_header_class(u.name,u)].join(" "),v="width:"+(h-(c?1:0))+"px;",b=u.label||o["column_"+u.name]||o[u.name];b=b||"";var _="<div class='"+y+"' style='"+v+"' "+t._waiAria.gridScaleCellAttrString(u,b)+" data-column-id='"+u.name+"' column_id='"+u.name+"' data-column-name='"+u.name+"' data-column-index='"+d+"'>"+b+g+"</div>";r.push(_)}this.$grid_scale.style.height=e.scale_height+"px",this.$grid_scale.style.lineHeight=l+"px",this.$grid_scale.innerHTML=r.join(""),this._renderHeaderResizers&&this._renderHeaderResizers()},_getGridWidth:function(){return this.$config.width},destructor:function(){this._clearLayers(this.$gantt),this._mouseDelegates&&(this._mouseDelegates.destructor(),this._mouseDelegates=null),this._unbindStore(),this.$grid=null,this.$grid_scale=null,this.$grid_data=null,this.$gantt=null,this.$config.rowStore&&(this.$config.rowStore.detachEvent(this._staticBgHandler),this.$config.rowStore=null),this.callEvent("onDestroy",[]),this.detachAllEvents()}};const za={init:function(t,e){var i=e.$gantt;i.attachEvent("onTaskClick",function(n,a){if(i._is_icon_open_click(a))return!0;var r=t.getState(),s=t.locateCell(a.target);return!s||!t.getEditorConfig(s.columnName)||(t.isVisible()&&r.id==s.id&&r.columnName==s.columnName||t.startEdit(s.id,s.columnName),!1)}),i.attachEvent("onEmptyClick",function(){return t.isVisible()&&t.isChanged()?t.save():t.hide(),!0}),i.attachEvent("onTaskDblClick",function(n,a){var r=t.getState(),s=t.locateCell(a.target);return!s||!t.isVisible()||s.columnName!=r.columnName})},onShow:function(t,e,i){var n=i.$gantt;n.ext&&n.ext.keyboardNavigation&&n.ext.keyboardNavigation.attachEvent("onKeyDown",function(a,r){var s=n.constants.KEY_CODES,o=!1;return r.keyCode===s.SPACE&&t.isVisible()&&(o=!0),!o}),e.onkeydown=function(a){a=a||window.event;var r=n.constants.KEY_CODES;if(!(a.defaultPrevented||a.shiftKey&&a.keyCode!=r.TAB)){var s=!0;switch(a.keyCode){case n.keys.edit_save:t.save();break;case n.keys.edit_cancel:t.hide();break;case r.UP:case r.DOWN:t.isVisible()&&(t.hide(),s=!1);break;case r.TAB:a.shiftKey?t.editPrevCell(!0):t.editNextCell(!0);break;default:s=!1}s&&a.preventDefault()}}},onHide:function(){},destroy:function(){}},ja={init:function(t,e){var i=t,n=e.$gantt,a=null,r=n.ext.keyboardNavigation;r.attachEvent("onBeforeFocus",function(s){var o=t.locateCell(s);if(clearTimeout(a),o){var l=o.columnName,d=o.id,c=i.getState();if(i.isVisible()&&c.id==d&&c.columnName===l)return!1}return!0}),r.attachEvent("onFocus",function(s){var o=t.locateCell(s),l=t.getState();return clearTimeout(a),!o||o.id==l.id&&o.columnName==l.columnName||i.isVisible()&&i.save(),!0}),t.attachEvent("onHide",function(){clearTimeout(a)}),r.attachEvent("onBlur",function(){return a=setTimeout(function(){i.save()}),!0}),n.attachEvent("onTaskDblClick",function(s,o){var l=t.getState(),d=t.locateCell(o.target);return!d||!t.isVisible()||d.columnName!=l.columnName}),n.attachEvent("onTaskClick",function(s,o){if(n._is_icon_open_click(o))return!0;var l=t.getState(),d=t.locateCell(o.target);return!d||!t.getEditorConfig(d.columnName)||(t.isVisible()&&l.id==d.id&&l.columnName==d.columnName||t.startEdit(d.id,d.columnName),!1)}),n.attachEvent("onEmptyClick",function(){return i.save(),!0}),r.attachEvent("onKeyDown",function(s,o){var l=t.locateCell(o.target),d=!!l&&t.getEditorConfig(l.columnName),c=t.getState(),u=n.constants.KEY_CODES,h=o.keyCode,f=!1;switch(h){case u.ENTER:t.isVisible()?(t.save(),o.preventDefault(),f=!0):d&&!(o.ctrlKey||o.metaKey||o.shiftKey)&&(i.startEdit(l.id,l.columnName),o.preventDefault(),f=!0);break;case u.ESC:t.isVisible()&&(t.hide(),o.preventDefault(),f=!0);break;case u.UP:case u.DOWN:break;case u.LEFT:case u.RIGHT:(d&&t.isVisible()||c.editorType==="date")&&(f=!0);break;case u.SPACE:t.isVisible()&&(f=!0),d&&!t.isVisible()&&(i.startEdit(l.id,l.columnName),o.preventDefault(),f=!0);break;case u.DELETE:d&&!t.isVisible()?(i.startEdit(l.id,l.columnName),f=!0):d&&t.isVisible()&&(f=!0);break;case u.TAB:if(t.isVisible()){o.shiftKey?t.editPrevCell(!0):t.editNextCell(!0);var g=t.getState();g.id&&r.focus({type:"taskCell",id:g.id,column:g.columnName}),o.preventDefault(),f=!0}break;default:if(t.isVisible())f=!0;else if(h>=48&&h<=57||h>95&&h<112||h>=64&&h<=91||h>185&&h<193||h>218&&h<223){var y=s.modifiers,v=y.alt||y.ctrl||y.meta||y.shift;y.alt||v&&r.getCommandHandler(s,"taskCell")||d&&!t.isVisible()&&(i.startEdit(l.id,l.columnName),f=!0)}}return!f})},onShow:function(t,e,i){},onHide:function(t,e,i){const n=i.$gantt;n&&n.focus()},destroy:function(){}};function Tt(t){var e=function(){};return e.prototype={show:function(i,n,a,r){},hide:function(){},set_value:function(i,n,a,r){this.get_input(r).value=i},get_value:function(i,n,a){return this.get_input(a).value||""},is_changed:function(i,n,a,r){var s=this.get_value(n,a,r);return s&&i&&s.valueOf&&i.valueOf?s.valueOf()!=i.valueOf():s!=i},is_valid:function(i,n,a,r){return!0},save:function(i,n,a){},get_input:function(i){return i.querySelector("input")},focus:function(i){var n=this.get_input(i);n&&(n.focus&&n.focus(),n.select&&n.select())}},e}function Wa(t){var e=Tt();function i(){return e.apply(this,arguments)||this}return z(i,e),N(i.prototype,{show:function(n,a,r,s){var o=`<div role='cell'><input type='text' name='${a.name}' title='${a.name}'></div>`;s.innerHTML=o}},!0),i}function Fa(t){var e=Tt();function i(){return e.apply(this,arguments)||this}return z(i,e),N(i.prototype,{show:function(n,a,r,s){var o=r.min||0,l=r.max||100,d=`<div role='cell'><input type='number' min='${o}' max='${l}' name='${a.name}' title='${a.name}'></div>`;s.innerHTML=d,s.oninput=function(c){+c.target.value<o&&(c.target.value=o),+c.target.value>l&&(c.target.value=l)}},get_value:function(n,a,r){return this.get_input(r).value||""},is_valid:function(n,a,r,s){return!isNaN(parseInt(n,10))}},!0),i}function Va(t){var e=Tt();function i(){return e.apply(this,arguments)||this}return z(i,e),N(i.prototype,{show:function(n,a,r,s){for(var o=`<div role='cell'><select name='${a.name}' title='${a.name}'>`,l=[],d=r.options||[],c=0;c<d.length;c++)l.push("<option value='"+r.options[c].key+"'>"+d[c].label+"</option>");o+=l.join("")+"</select></div>",s.innerHTML=o},get_input:function(n){return n.querySelector("select")}},!0),i}function Ua(t){var e=Tt(),i="%Y-%m-%d",n=null,a=null;function r(){return e.apply(this,arguments)||this}return z(r,e),N(r.prototype,{show:function(s,o,l,d){n||(n=t.date.date_to_str(i)),a||(a=t.date.str_to_date(i));var c=null,u=null;c=typeof l.min=="function"?l.min(s,o):l.min,u=typeof l.max=="function"?l.max(s,o):l.max;var h=`<div style='width:140px' role='cell'><input type='date' ${c?" min='"+n(c)+"' ":""} ${u?" max='"+n(u)+"' ":""} name='${o.name}' title='${o.name}'></div>`;d.innerHTML=h,d.oninput=function(f){f.target.value&&(c||u)&&(+t.date.str_to_date("%Y-%m-%d")(f.target.value)<+c&&(f.target.value=t.date.date_to_str("%Y-%m-%d")(c)),+t.date.str_to_date("%Y-%m-%d")(f.target.value)>+u&&(f.target.value=t.date.date_to_str("%Y-%m-%d")(u)))}},set_value:function(s,o,l,d){s&&s.getFullYear?this.get_input(d).value=n(s):this.get_input(d).value=s},is_valid:function(s,o,l,d){return!(!s||isNaN(s.getTime()))},get_value:function(s,o,l){var d;try{d=a(this.get_input(l).value||"")}catch{d=null}return d}},!0),r}function qa(t){var e=Tt();function i(){return e.apply(this,arguments)||this}function n(l){return l.formatter||t.ext.formatters.linkFormatter()}function a(l,d){for(var c=(l||"").split(d.delimiter||","),u=0;u<c.length;u++){var h=c[u].trim();h?c[u]=h:(c.splice(u,1),u--)}return c.sort(),c}function r(l,d,c){for(var u=l.$target,h=[],f=0;f<u.length;f++){var g=c.getLink(u[f]);h.push(n(d).format(g))}return h.join((d.delimiter||",")+" ")}function s(l){return l.source+"_"+l.target+"_"+l.type+"_"+(l.lag||0)}function o(l,d,c){var u=function(v,b,_){var m=[];return[...new Set(b)].forEach(function(p){var k=n(_).parse(p);k&&(k.target=v,k.id="predecessor_generated",t.isLinkAllowed(k)&&(k.id=void 0,m.push(k)))}),m}(l.id,d,c),h={};l.$target.forEach(function(v){var b=t.getLink(v);h[s(b)]=b.id});var f=[];u.forEach(function(v){var b=s(v);h[b]?delete h[b]:f.push(v)});var g=[];for(var y in h)g.push(h[y]);return{add:f,remove:g}}return z(i,e),N(i.prototype,{show:function(l,d,c,u){var h=`<div role='cell'><input type='text' name='${d.name}' title='${d.name}'></div>`;u.innerHTML=h},hide:function(){},set_value:function(l,d,c,u){this.get_input(u).value=r(l,c.editor,t)},get_value:function(l,d,c){return a(this.get_input(c).value||"",d.editor)},save:function(l,d,c){var u=o(t.getTask(l),this.get_value(l,d,c),d.editor);(u.add.length||u.remove.length)&&t.batchUpdate(function(){u.add.forEach(function(h){t.addLink(h)}),u.remove.forEach(function(h){t.deleteLink(h)}),t.autoSchedule&&t.autoSchedule()})},is_changed:function(l,d,c,u){var h=this.get_value(d,c,u),f=a(r(l,c.editor,t),c.editor);return h.join()!==f.join()}},!0),i}function Ga(t){var e=Tt();function i(){return e.apply(this,arguments)||this}function n(a){return a.formatter||t.ext.formatters.durationFormatter()}return z(i,e),N(i.prototype,{show:function(a,r,s,o){var l=`<div role='cell'><input type='text' name='${r.name}' title='${r.name}'></div>`;o.innerHTML=l},set_value:function(a,r,s,o){this.get_input(o).value=n(s.editor).format(a)},get_value:function(a,r,s){return n(r.editor).parse(this.get_input(s).value||"")}},!0),i}function Ya(t){return function(i,n,a){a=="keepDates"?function(r,s){s=="duration"?r.end_date=t.calculateEndDate(r):s!="end_date"&&s!="start_date"||(r.duration=t.calculateDuration(r))}(i,n):a=="keepDuration"?function(r,s){s=="end_date"?r.start_date=e(r):s!="start_date"&&s!="duration"||(r.end_date=t.calculateEndDate(r))}(i,n):function(r,s){t.config.schedule_from_end?s=="end_date"||s=="duration"?r.start_date=e(r):s=="start_date"&&(r.duration=t.calculateDuration(r)):s=="start_date"||s=="duration"?r.end_date=t.calculateEndDate(r):s=="end_date"&&(r.duration=t.calculateDuration(r))}(i,n)};function e(i){return t.calculateEndDate({start_date:i.end_date,duration:-i.duration,task:i})}}function Ja(t){t.config.editor_types={text:new(Wa()),number:new(Fa()),select:new(Va()),date:new(Ua(t)),predecessor:new(qa(t)),duration:new(Ga(t))}}function Ka(t){var e=function(a){var r=null;return{setMapping:function(s){r=s},getMapping:function(){return r||(a.config.keyboard_navigation_cells&&a.ext.keyboardNavigation?ja:za)}}}(t),i={};ot(i);var n={init:Ja,createEditors:function(a){function r(u,h){var f=a.$getConfig(),g=function(b,_){for(var m=a.$getConfig(),p=a.getItemTop(b),k=a.getItemHeight(b),$=a.getGridColumns(),w=0,x=0,S=0,T=0;T<$.length;T++){if($[T].name==_){S=$[T].width;break}m.rtl?x+=$[T].width:w+=$[T].width}return m.rtl?{top:p,right:x,height:k,width:S}:{top:p,left:w,height:k,width:S}}(u,h),y=document.createElement("div");y.className="gantt_grid_editor_placeholder",y.setAttribute(a.$config.item_attribute,u),y.setAttribute(a.$config.bind+"_id",u),y.setAttribute("data-column-name",h);var v=function(b,_){for(var m=b.getGridColumns(),p=0;p<m.length;p++)if(m[p].name==_)return p;return 0}(a,h);return y.setAttribute("data-column-index",v),t._waiAria.inlineEditorAttr(y),f.rtl?y.style.cssText=["top:"+g.top+"px","right:"+g.right+"px","width:"+g.width+"px","height:"+g.height+"px"].join(";"):y.style.cssText=["top:"+g.top+"px","left:"+g.left+"px","width:"+g.width+"px","height:"+g.height+"px"].join(";"),y}var s=Ya(t),o=[],l=[],d=null,c={_itemId:null,_columnName:null,_editor:null,_editorType:null,_placeholder:null,locateCell:function(u){if(!G(u,a.$grid))return null;var h=et(u,a.$config.item_attribute),f=et(u,"data-column-name");if(h&&f){var g=f.getAttribute("data-column-name");return{id:h.getAttribute(a.$config.item_attribute),columnName:g}}return null},getEditorConfig:function(u){return a.getColumn(u).editor},init:function(){var u=e.getMapping();u.init&&u.init(this,a),d=a.$gantt.getDatastore(a.$config.bind);var h=this;o.push(d.attachEvent("onIdChange",function(f,g){h._itemId==f&&(h._itemId=g)})),o.push(d.attachEvent("onStoreUpdated",function(){a.$gantt.getState("batchUpdate").batch_update||h.isVisible()&&!d.isVisible(h._itemId)&&h.hide()})),l.push(t.attachEvent("onDataRender",function(){h._editor&&h._placeholder&&!G(h._placeholder,t.$root)&&a.$grid_data.appendChild(h._placeholder)})),this.init=function(){}},getState:function(){return{editor:this._editor,editorType:this._editorType,placeholder:this._placeholder,id:this._itemId,columnName:this._columnName}},startEdit:function(u,h){if(this.isVisible()&&this.save(),d.exists(u)){var f={id:u,columnName:h};t.isReadonly(d.getItem(u))?this.callEvent("onEditPrevent",[f]):this.callEvent("onBeforeEditStart",[f])!==!1?(this.show(f.id,f.columnName),this.setValue(),this.callEvent("onEditStart",[f])):this.callEvent("onEditPrevent",[f])}},isVisible:function(){return!(!this._editor||!G(this._placeholder,t.$root))},show:function(u,h){this.isVisible()&&this.save();var f={id:u,columnName:h},g=a.getColumn(f.columnName),y=this.getEditorConfig(g.name);if(y){var v=a.$getConfig().editor_types[y.type],b=r(f.id,f.columnName);a.$grid_data.appendChild(b),v.show(f.id,g,y,b),this._editor=v,this._placeholder=b,this._itemId=f.id,this._columnName=f.columnName,this._editorType=y.type;var _=e.getMapping();_.onShow&&_.onShow(this,b,a)}},setValue:function(){var u=this.getState(),h=u.id,f=u.columnName,g=a.getColumn(f),y=d.getItem(h),v=this.getEditorConfig(f);if(v){var b=y[v.map_to];v.map_to=="auto"&&(b=d.getItem(h)),this._editor.set_value(b,h,g,this._placeholder),this.focus()}},focus:function(){this._editor.focus(this._placeholder)},getValue:function(){var u=a.getColumn(this._columnName);return this._editor.get_value(this._itemId,u,this._placeholder)},_getItemValue:function(){var u=this.getEditorConfig(this._columnName);if(u){var h=t.getTask(this._itemId)[u.map_to];return u.map_to=="auto"&&(h=d.getItem(this._itemId)),h}},isChanged:function(){var u=a.getColumn(this._columnName),h=this._getItemValue();return this._editor.is_changed(h,this._itemId,u,this._placeholder)},hide:function(){if(this._itemId){var u=this._itemId,h=this._columnName,f=e.getMapping();f.onHide&&f.onHide(this,this._placeholder,a),this._itemId=null,this._columnName=null,this._editorType=null,this._placeholder&&(this._editor&&this._editor.hide&&this._editor.hide(this._placeholder),this._editor=null,this._placeholder.parentNode&&this._placeholder.parentNode.removeChild(this._placeholder),this._placeholder=null,this.callEvent("onEditEnd",[{id:u,columnName:h}]))}},save:function(){if(this.isVisible()&&d.exists(this._itemId)&&this.isChanged()){var u=this._itemId,h=this._columnName;if(d.exists(u)){var f=d.getItem(u),g=this.getEditorConfig(h),y={id:u,columnName:h,newValue:this.getValue(),oldValue:this._getItemValue()};if(this.callEvent("onBeforeSave",[y])!==!1&&(!this._editor.is_valid||this._editor.is_valid(y.newValue,y.id,a.getColumn(h),this._placeholder))){var v=g.map_to,b=y.newValue;v!="auto"?(f[v]=b,s(f,v,t.config.inline_editors_date_processing),d.updateItem(u)):this._editor.save(u,a.getColumn(h),this._placeholder),this.callEvent("onSave",[y])}this.hide()}}else this.hide()},_findEditableCell:function(u,h){var f=u,g=a.getGridColumns()[f],y=g?g.name:null;if(y){for(;y&&!this.getEditorConfig(y);)y=this._findEditableCell(u+h,h);return y}return null},getNextCell:function(u){return this._findEditableCell(a.getColumnIndex(this._columnName,!0)+u,u)},getFirstCell:function(){return this._findEditableCell(0,1)},getLastCell:function(){return this._findEditableCell(a.getGridColumns().length-1,-1)},editNextCell:function(u){var h=this.getNextCell(1);if(h){var f=this.getNextCell(1);f&&this.getEditorConfig(f)&&this.startEdit(this._itemId,f)}else if(u&&this.moveRow(1)){var g=this.moveRow(1);(h=this.getFirstCell())&&this.getEditorConfig(h)&&this.startEdit(g,h)}},editPrevCell:function(u){var h=this.getNextCell(-1);if(h){var f=this.getNextCell(-1);f&&this.getEditorConfig(f)&&this.startEdit(this._itemId,f)}else if(u&&this.moveRow(-1)){var g=this.moveRow(-1);(h=this.getLastCell())&&this.getEditorConfig(h)&&this.startEdit(g,h)}},moveRow:function(u){for(var h=u>0?t.getNext:t.getPrev,f=(h=t.bind(h,t))(this._itemId);t.isTaskExists(f)&&t.isReadonly(t.getTask(f));)f=h(f);return f},editNextRow:function(u){var h=this.getState().id;if(t.isTaskExists(h)){var f=null;f=u?this.moveRow(1):t.getNext(h),t.isTaskExists(f)&&this.startEdit(f,this._columnName)}},editPrevRow:function(u){var h=this.getState().id;if(t.isTaskExists(h)){var f=null;f=u?this.moveRow(-1):t.getPrev(h),t.isTaskExists(f)&&this.startEdit(f,this._columnName)}},detachStore:function(){o.forEach(function(u){d.detachEvent(u)}),l.forEach(function(u){t.detachEvent(u)}),o=[],l=[],d=null,this.hide()},destructor:function(){this.detachStore(),this.detachAllEvents()}};return N(c,e),N(c,i),c}};return N(n,e),N(n,i),n}function be(t,e,i,n,a){if(!t.start_date||!t.end_date)return null;var r=i.getItemTop(t.id),s=i.getItemHeight(t.id);if(r>e.y_end||r+s<e.y)return!1;var o=i.posFromDate(t.start_date),l=i.posFromDate(t.end_date),d=Math.min(o,l)-200,c=Math.max(o,l)+200;return!(d>e.x_end||c<e.x)}function Si(t){function e(r,s,o){if(t._isAllowedUnscheduledTask(r)||!t._isTaskInTimelineLimits(r))return;var l=s.getItemPosition(r),d=o,c=s.$getTemplates(),u=t.getTaskType(r.type),h=s.getBarHeight(r.id,u==d.types.milestone),f=0;u==d.types.milestone&&(f=(h-l.height)/2);var g=Math.floor((s.getItemHeight(r.id)-h)/2);const y=t.config.baselines&&r.baselines&&r.baselines.length,v=t.config.baselines&&(t.config.baselines.render_mode=="separateRow"||t.config.baselines.render_mode=="individualRow");if(y&&v&&r.bar_height!=="full"&&r.bar_height<r.row_height)if(u===d.types.milestone){let x=s.getBarHeight(r.id,!0),S=Math.sqrt(2*x*x);g=Math.floor((S-h)/2)+2}else g=2;u==d.types.milestone&&(l.left-=Math.round(h/2),l.width=h);var b=document.createElement("div"),_=Math.round(l.width);s.$config.item_attribute&&(b.setAttribute(s.$config.item_attribute,r.id),b.setAttribute(s.$config.bind+"_id",r.id)),d.show_progress&&u!=d.types.milestone&&function(x,S,T,E,C){var D=1*x.progress||0;T=Math.max(T-2,0);var A=document.createElement("div"),I=Math.round(T*D);I=Math.min(T,I),A.style.width=I+"px",A.className="gantt_task_progress",A.innerHTML=C.progress_text(x.start_date,x.end_date,x),E.rtl&&(A.style.position="absolute",A.style.right="0px");var M=document.createElement("div");if(M.className="gantt_task_progress_wrapper",M.appendChild(A),S.appendChild(M),t.config.drag_progress&&!t.isReadonly(x)){var L=document.createElement("div"),P=I;E.rtl&&(P=T-I),L.style.left=P+"px",L.className="gantt_task_progress_drag",L.innerHTML=`<svg xmlns="http://www.w3.org/2000/svg" width="12" height="9" viewBox="0 0 12 9" fill="none">
<path d="M5.58397 1.52543C5.78189 1.22856 6.21811 1.22856 6.41602 1.52543L10.5475 7.72265C10.769 8.05493 10.5308 8.5 10.1315 8.5L1.86852 8.5C1.46917 8.5 1.23097 8.05493 1.45249 7.72265L5.58397 1.52543Z" fill="var(--dhx-gantt-progress-handle-background)" stroke="var(--dhx-gantt-progress-handle-border)"/>
</svg>`,A.appendChild(L),S.appendChild(L)}}(r,b,_,d,c);var m=function(x,S,T){var E=document.createElement("div");return t.getTaskType(x.type)!=t.config.types.milestone?E.innerHTML=T.task_text(x.start_date,x.end_date,x):t.getTaskType(x.type)==t.config.types.milestone&&S&&(E.style.height=E.style.width=S+"px"),E.className="gantt_task_content",E}(r,_,c);b.appendChild(m);var p=function(x,S,T,E){var C=E.$getConfig(),D=[x];S&&D.push(S);var A=t.getState(),I=t.getTask(T);if(t.getTaskType(I.type)==C.types.milestone?D.push("gantt_milestone"):t.getTaskType(I.type)==C.types.project&&D.push("gantt_project"),D.push("gantt_bar_"+t.getTaskType(I.type)),t.isSummaryTask(I)&&D.push("gantt_dependent_task"),t.isSplitTask(I)&&(C.open_split_tasks&&!I.$open||!C.open_split_tasks)&&D.push("gantt_split_parent"),C.select_task&&t.isSelectedTask(T)&&D.push("gantt_selected"),T==A.drag_id&&(D.push("gantt_drag_"+A.drag_mode),A.touch_drag&&D.push("gantt_touch_"+A.drag_mode)),A.link_source_id==T&&(D.push("gantt_link_source"),A.link_from_start?D.push("gantt_link_from_start"):D.push("gantt_link_from_end")),A.link_target_id==T&&D.push("gantt_link_target"),C.highlight_critical_path&&t.isCriticalTask&&t.isCriticalTask(I)&&D.push("gantt_critical_task"),A.link_landing_area&&A.link_target_id&&A.link_source_id&&A.link_target_id!=A.link_source_id&&(A.link_target_id==T||A.link_source_id==T)){var M=A.link_source_id,L=A.link_from_start,P=A.link_to_start,H="";H=t.isLinkAllowed(M,T,L,P)?P?"link_start_allow":"link_finish_allow":P?"link_start_deny":"link_finish_deny",D.push(H)}return D.join(" ")}("gantt_task_line",c.task_class(r.start_date,r.end_date,r),r.id,s);(r.color||r.progressColor||r.textColor)&&(p+=" gantt_task_inline_color"),l.width<20&&(p+=" gantt_thin_task"),b.className=p;var k=["left:"+l.left+"px","top:"+(g+l.top)+"px","height:"+h+"px","line-height:"+Math.max(h<30?h-2:h,0)+"px","width:"+_+"px"];b.style.cssText=k.join(";"),r.color&&b.style.setProperty("--dhx-gantt-task-background",r.color),r.textColor&&b.style.setProperty("--dhx-gantt-task-color",r.textColor),r.progressColor&&b.style.setProperty("--dhx-gantt-task-progress-color",r.progressColor);var $=function(x,S,T,E){var C="gantt_left "+n(!S.rtl,x),D=null;return E&&(D={type:"marginRight",value:E}),i(x,T.leftside_text,C,D)}(r,d,c,f);$&&b.appendChild($),$=function(x,S,T,E){var C="gantt_right "+n(!!S.rtl,x),D=null;return E&&(D={type:"marginLeft",value:E}),i(x,T.rightside_text,C,D)}(r,d,c,f),$&&b.appendChild($),t._waiAria.setTaskBarAttr(r,b);var w=t.getState();return t.isReadonly(r)||(d.drag_resize&&!t.isSummaryTask(r)&&u!=d.types.milestone&&a(b,"gantt_task_drag",r,function(x){var S=document.createElement("div");return S.className=x,S},d),d.drag_links&&d.show_links&&a(b,"gantt_link_control",r,function(x){var S=document.createElement("div");S.className=x,S.style.cssText=["height:"+h+"px","line-height:"+h+"px"].join(";");var T=document.createElement("div");T.className="gantt_link_point";var E=!1;return w.link_source_id&&d.touch&&(E=!0),T.style.display=E?"block":"",S.appendChild(T),S},d,f)),b}function i(r,s,o,l){if(!s)return null;var d=s(r.start_date,r.end_date,r);if(!d)return null;var c=document.createElement("div");return c.className="gantt_side_content "+o,c.innerHTML=d,l&&(c.style[l.type]=Math.abs(l.value)+"px"),c}function n(r,s){var o=r?{$source:[t.config.links.start_to_start],$target:[t.config.links.start_to_start,t.config.links.finish_to_start]}:{$source:[t.config.links.finish_to_start,t.config.links.finish_to_finish],$target:[t.config.links.finish_to_finish]};for(var l in o)for(var d=s[l],c=0;c<d.length;c++)for(var u=t.getLink(d[c]),h=0;h<o[l].length;h++)if(u.type==o[l][h])return"gantt_link_crossing";return""}function a(r,s,o,l,d,c){var u,h=t.getState();+o.start_date>=+h.min_date&&((u=l([s,d.rtl?"task_right":"task_left","task_start_date"].join(" "))).setAttribute("data-bind-property","start_date"),c&&(u.style.marginLeft=c+"px"),r.appendChild(u)),+o.end_date<=+h.max_date&&((u=l([s,d.rtl?"task_left":"task_right","task_end_date"].join(" "))).setAttribute("data-bind-property","end_date"),c&&(u.style.marginRight=c+"px"),r.appendChild(u))}return function(r,s,o){var l=(o=s.$getConfig()).type_renderers[t.getTaskType(r.type)],d=e;return l?l.call(t,r,function(c){return d.call(t,c,s,o)},s):d.call(t,r,s,o)}}function Xe(t){return{render:Si(t),update:null,isInViewPort:be,getVisibleRange:pt}}function Dt(){return console.error("You are trying to use a Pro feature that is not available in the GPL version."),{render:function(){},isInViewPort:function(){},getVisibleRange:function(){}}}function Ze(t,e,i){return{top:e.getItemTop(t.id),height:e.getItemHeight(t.id),left:0,right:1/0}}function Wt(t,e){var i=0,n=t.left.length-1;if(e)for(var a=0;a<t.left.length;a++){var r=t.left[a];if(r<e.x&&(i=a),r>e.x_end){n=a;break}}return{start:i,end:n}}function ie(t,e,i,n){var a=e.width[t];if(a<=0)return!1;if(!n.config.smart_rendering||Lt(n))return!0;var r=e.left[t]-a,s=e.left[t]+a;return r<=i.x_end&&s>=i.x}function Xa(t,e){var i=e.config.timeline_placeholder;if(t=t||[],i&&t.filter(l=>l.id==="timeline_placeholder_task").length===0){var n=e.getState(),a=null,r=n.min_date,s=n.max_date;t.length&&(a=t[t.length-1].id);var o={start_date:r,end_date:s,row_height:i.height||0,id:"timeline_placeholder_task",unscheduled:!0,lastTaskId:a,calendar_id:i.calendar||"global",$source:[],$target:[]};t.push(o)}}function Za(t){var e={current_pos:null,dirs:{left:"left",right:"right",up:"up",down:"down"},path:[],clear:function(){this.current_pos=null,this.path=[]},point:function(a){this.current_pos=t.copy(a)},get_lines:function(a){this.clear(),this.point(a[0]);for(var r=1;r<a.length;r++)this.line_to(a[r]);return this.get_path()},line_to:function(a){var r=t.copy(a),s=this.current_pos,o=this._get_line(s,r);this.path.push(o),this.current_pos=r},get_path:function(){return this.path},get_wrapper_sizes:function(a,r,s){var o,l=r.$getConfig().link_wrapper_width,d=a.y-l/2;switch(a.direction){case this.dirs.left:o={top:d,height:l,lineHeight:l,left:a.x-a.size-l/2,width:a.size+l};break;case this.dirs.right:o={top:d,lineHeight:l,height:l,left:a.x-l/2,width:a.size+l};break;case this.dirs.up:o={top:d-a.size,lineHeight:a.size+l,height:a.size+l,left:a.x-l/2,width:l};break;case this.dirs.down:o={top:d,lineHeight:a.size+l,height:a.size+l,left:a.x-l/2,width:l}}return o},get_line_sizes:function(a,r){var s,o=r.$getConfig(),l=o.link_line_width,d=o.link_wrapper_width,c=a.size+l;switch(a.direction){case this.dirs.left:case this.dirs.right:s={height:l,width:c,marginTop:(d-l)/2,marginLeft:(d-l)/2};break;case this.dirs.up:case this.dirs.down:s={height:c,width:l,marginTop:(d-l)/2,marginLeft:(d-l)/2}}return s},render_line:function(a,r,s,o){var l=this.get_wrapper_sizes(a,s,o),d=document.createElement("div");d.style.cssText=["top:"+l.top+"px","left:"+l.left+"px","height:"+l.height+"px","width:"+l.width+"px"].join(";"),d.className="gantt_line_wrapper";var c=this.get_line_sizes(a,s),u=document.createElement("div");return u.style.cssText=["height:"+c.height+"px","width:"+c.width+"px","margin-top:"+c.marginTop+"px","margin-left:"+c.marginLeft+"px"].join(";"),u.className="gantt_link_line_"+a.direction,d.appendChild(u),d},render_corner:function(a,r){const s=a.radius,o=r.$getConfig(),l=o.link_line_width||2,d=document.createElement("div");let c,u;return d.classList.add("gantt_link_corner"),d.classList.add(`gantt_link_corner_${a.direction.from}_${a.direction.to}`),d.style.width=`${s}px`,d.style.height=`${s}px`,a.direction.from==="right"&&a.direction.to==="down"?(c="Right",u="Top",d.style.left=a.x-o.link_line_width/2+"px",d.style.top=`${a.y}px`):a.direction.from==="down"&&a.direction.to==="right"?(c="Left",u="Bottom",d.style.left=a.x-o.link_line_width/2+"px",d.style.top=`${a.y}px`):a.direction.from==="right"&&a.direction.to==="up"?(c="Right",u="Bottom",d.style.left=a.x-o.link_line_width/2+"px",d.style.top=a.y-s+"px"):a.direction.from==="up"&&a.direction.to==="right"?(c="Left",u="Top",d.style.left=a.x-o.link_line_width/2+"px",d.style.top=a.y-s+"px"):a.direction.from==="left"&&a.direction.to==="down"?(c="Left",u="Top",d.style.left=a.x-s-o.link_line_width/2+"px",d.style.top=`${a.y}px`):a.direction.from==="down"&&a.direction.to==="left"?(c="Right",u="Bottom",d.style.left=a.x-s-o.link_line_width/2+"px",d.style.top=`${a.y}px`):a.direction.from==="left"&&a.direction.to==="up"?(c="Left",u="Bottom",d.style.left=a.x-s-o.link_line_width/2+"px",d.style.top=a.y-s+"px"):a.direction.from==="up"&&a.direction.to==="left"&&(c="Right",u="Top",d.style.left=a.x-s-o.link_line_width/2+"px",d.style.top=a.y-s+"px"),d.style[`border${u}Width`]=`${l}px`,d.style[`border${c}Width`]=`${l}px`,d.style[`border${c}Style`]="solid",d.style[`border${u}Style`]="solid",d.style[`border${u}${c}Radius`]=`${s}px`,d},render_arrow(a,r){var s=document.createElement("div"),o=a.y,l=a.x,d=r.link_arrow_size;s.style.setProperty("--dhx-gantt-icon-size",`${d}px`);var c="gantt_link_arrow gantt_link_arrow_"+a.direction;return s.style.top=o+"px",s.style.left=l+"px",s.className=c,s},_get_line:function(a,r){var s=this.get_direction(a,r),o={x:a.x,y:a.y,direction:this.get_direction(a,r)};return s==this.dirs.left||s==this.dirs.right?o.size=Math.abs(a.x-r.x):o.size=Math.abs(a.y-r.y),o},get_direction:function(a,r){return r.x<a.x?this.dirs.left:r.x>a.x?this.dirs.right:r.y>a.y?this.dirs.down:this.dirs.up}},i={path:[],clear:function(){this.path=[]},current:function(){return this.path[this.path.length-1]},point:function(a){return a?(this.path.push(t.copy(a)),a):this.current()},point_to:function(a,r,s){s=s?{x:s.x,y:s.y}:t.copy(this.point());var o=e.dirs;switch(a){case o.left:s.x-=r;break;case o.right:s.x+=r;break;case o.up:s.y-=r;break;case o.down:s.y+=r}return this.point(s)},get_points:function(a,r,s,o){var l=this.get_endpoint(a,r,s,o),d=t.config,c=l.e_y-l.y,u=l.e_x-l.x,h=e.dirs,f=r.getItemHeight(a.source);this.clear(),this.point({x:l.x,y:l.y});var g=2*d.link_arrow_size,y=this.get_line_type(a,r.$getConfig()),v=l.e_x>l.x;if(y.from_start&&y.to_start)this.point_to(h.left,g),v?(this.point_to(h.down,c),this.point_to(h.right,u)):(this.point_to(h.right,u),this.point_to(h.down,c)),this.point_to(h.right,g);else if(!y.from_start&&y.to_start)if(c!==0&&(v=l.e_x>l.x+2*g),this.point_to(h.right,g),v)u-=g,this.point_to(h.down,c),this.point_to(h.right,u);else{u-=2*g;var b=c>0?1:-1;this.point_to(h.down,b*(f/2)),this.point_to(h.right,u),this.point_to(h.down,b*(Math.abs(c)-f/2)),this.point_to(h.right,g)}else y.from_start||y.to_start?y.from_start&&!y.to_start&&(c!==0&&(v=l.e_x>l.x-2*g),this.point_to(h.left,g),v?(u+=2*g,b=c>0?1:-1,this.point_to(h.down,b*(f/2)),this.point_to(h.right,u),this.point_to(h.down,b*(Math.abs(c)-f/2)),this.point_to(h.left,g)):(u+=g,this.point_to(h.down,c),this.point_to(h.right,u))):(this.point_to(h.right,g),v?(this.point_to(h.right,u),this.point_to(h.down,c)):(this.point_to(h.down,c),this.point_to(h.right,u)),this.point_to(h.left,g));return this.path},get_line_type:function(a,r){var s=r.links,o=!1,l=!1;return a.type==s.start_to_start?o=l=!0:a.type==s.finish_to_finish?o=l=!1:a.type==s.finish_to_start?(o=!1,l=!0):a.type==s.start_to_finish?(o=!0,l=!1):t.assert(!1,"Invalid link type"),r.rtl&&(o=!o,l=!l),{from_start:o,to_start:l}},get_endpoint:function(a,r,s,o){var l=r.$getConfig(),d=this.get_line_type(a,l),c=d.from_start,u=d.to_start,h=n(s,r,l),f=n(o,r,l);return{x:c?h.left:h.left+h.width,e_x:u?f.left:f.left+f.width,y:h.top+h.rowHeight/2-1,e_y:f.top+f.rowHeight/2-1}}};function n(a,r,s){var o=r.getItemPosition(a);let l=Ln(t,r,a),d=l.maxHeight,c=l.splitChild;const u=t.config.baselines&&(t.config.baselines.render_mode=="separateRow"||t.config.baselines.render_mode=="individualRow")&&a.baselines&&a.baselines.length;let h;l.shrinkHeight&&(o.rowHeight=d);let f=t.getTaskType(a.type)==s.types.milestone;if(f){let g=r.getBarHeight(a.id,!0);h=Math.sqrt(2*g*g),l.shrinkHeight&&d<g&&(g=d,h=d),o.left-=h/2,o.width=h}if(c)if(d>=o.height){const g=Nn(t,a.parent);u||g?f?(o.rowHeight=o.height+4,o.left+=(o.width-o.rowHeight+4)/2,o.width=o.rowHeight-3):o.rowHeight=o.height+6:f&&(o.left+=(h-o.height)/2)}else o.rowHeight=d+2,f&&(o.left+=(o.width-o.rowHeight+4)/2,o.width=o.rowHeight-3);else u&&(o.rowHeight=o.height+4);return o}return{render:function(a,r,s){var o=t.getTask(a.source);if(o.hide_bar)return;var l=t.getTask(a.target);if(l.hide_bar)return;var d=i.get_endpoint(a,r,o,l),c=d.e_y-d.y;if(!(d.e_x-d.x)&&!c)return null;var u=i.get_points(a,r,o,l);const h=function(v,b){const _=b.link_radius||4,m=b.link_arrow_size||6,p=[];for(let $=0;$<v.length;$++){const w=v[$],x=v[$+1];if(!x||b.link_radius<=1)p.push({type:"line",data:w});else if(w.direction!==x.direction){if(w.size<_||x.size<_){p.push({type:"line",data:w});continue}w.size-=_,p.push({type:"line",data:w});let S=w.x,T=w.y-b.link_line_width/2;switch(w.direction){case"right":S+=w.size;break;case"left":S-=w.size;break;case"down":T+=w.size;break;case"up":T-=w.size}const E={x:S,y:T,direction:{from:w.direction,to:x.direction},radius:_};switch(p.push({type:"corner",data:E}),x.direction){case"right":x.x+=_,x.size-=_;break;case"left":x.x-=_,x.size-=_;break;case"down":x.y+=_,x.size-=_;break;case"up":x.y-=_,x.size-=_}}else p.push({type:"line",data:w})}const k=v[v.length-1];if(k.direction==="right"||k.direction==="left"){k.size-=3*m/4;let $=k.direction==="right"?k.x+k.size:k.x-k.size-m/2,w=k.y-b.link_line_width/2-m/2+1;k.direction==="left"?(w-=1,$-=2):$-=1;const x={x:$,y:w,size:m,direction:k.direction};p.push({type:"line",data:k}),p.push({type:"arrow",data:x})}else p.push({type:"line",data:k});return p}(e.get_lines(u,r).filter(v=>v.size>0),s),f=function(v,b,_,m){const p=document.createElement("div");return v.forEach(k=>{let $;k.type==="line"?$=e.render_line(k.data,null,b,_.source):k.type==="corner"?$=e.render_corner(k.data,b):k.type==="arrow"&&($=e.render_arrow(k.data,m)),p.appendChild($)}),p}(h,r,a,s);var g="gantt_task_link";a.color&&(g+=" gantt_link_inline_color");var y=t.templates.link_class?t.templates.link_class(a):"";return y&&(g+=" "+y),s.highlight_critical_path&&t.isCriticalLink&&t.isCriticalLink(a)&&(g+=" gantt_critical_link"),f.className=g,r.$config.link_attribute&&(f.setAttribute(r.$config.link_attribute,a.id),f.setAttribute("link_id",a.id)),a.color&&f.style.setProperty("--dhx-gantt-link-background",a.color),t._waiAria.linkAttr(a,f),f},update:null,isInViewPort:xi,getVisibleRange:bi()}}function Qa(t,e,i,n,a){if(a.$ui.getView("grid")&&(a.config.keyboard_navigation&&a.getSelectedId()||a.ext.inlineEditors&&a.ext.inlineEditors.getState().id))return!!t.$expanded_branch;var r=i.getItemTop(t.id),s=i.getItemHeight(t.id);return!(r>e.y_end||r+s<e.y)}function tr(t){let e={};return t.$data.tasksStore.attachEvent("onStoreUpdated",function(){e={}}),function(i,n,a,r){const s=i.id+"_"+n+"_"+a.unit+"_"+a.step;let o;return o=e[s]?e[s]:e[s]=function(l,d,c,u){let h,f=!1,g={};t.config.process_resource_assignments&&d===t.config.resource_property?(h=l.$role=="task"?t.getResourceAssignments(l.$resource_id,l.$task_id):t.getResourceAssignments(l.id),f=!0):h=l.$role=="task"?[]:t.getTaskBy(d,l.id),g=function(x,S,T){const E=S.unit,C=S.step,D={},A={};for(let I=0;I<x.length;I++){const M=x[I];let L=M;if(T&&(L=t.getTask(M.task_id)),L.unscheduled)continue;let P=M.start_date||L.start_date,H=M.end_date||L.end_date;T&&(M.start_date&&(P=new Date(Math.max(M.start_date.valueOf(),L.start_date.valueOf()))),M.end_date&&(H=new Date(Math.min(M.end_date.valueOf(),L.end_date.valueOf()))),M.mode&&M.mode=="fixedDates"&&(P=M.start_date,H=M.end_date));let V=It(S.trace_x,P.valueOf()),_t=new Date(S.trace_x[V]||t.date[E+"_start"](new Date(P))),O=new Date(Math.min(P.valueOf(),_t.valueOf())),Q=t.config.work_time?t.getTaskCalendar(L):t;for(A[Q.id]={};O<H;){const Y=A[Q.id],B=O.valueOf();O=t.date.add(O,C,E),Y[B]!==!1&&(D[B]||(D[B]={tasks:[],assignments:[]}),D[B].tasks.push(L),T&&D[B].assignments.push(M))}}return D}(h,c,f);const y=c.unit,v=c.step,b=[];let _,m,p,k,$;const w=u.$getConfig();for(let x=0;x<c.trace_x.length;x++)_=new Date(c.trace_x[x]),m=t.date.add(_,v,y),$=g[_.valueOf()]||{},p=$.tasks||[],k=$.assignments||[],p.length||w.resource_render_empty_cells?b.push({start_date:_,end_date:m,tasks:p,assignments:k}):b.push(null);return b}(i,n,a,r),o}}const er={init:function(t,e){var i=t.$services.getService("dnd");if(e.$config.bind&&t.getDatastore(e.$config.bind)){var n=new i(e.$grid_data,{updates_per_second:60});t.defined(e.$getConfig().dnd_sensitivity)&&(n.config.sensitivity=e.$getConfig().dnd_sensitivity),n.attachEvent("onBeforeDragStart",t.bind(function(o,l){var d=a(l);if(!d||(t.hideQuickInfo&&t.hideQuickInfo(),ct(l.target,".gantt_grid_editor_placeholder")))return!1;var c=d.getAttribute(e.$config.item_attribute);if(s(c))return!1;var u=r().getItem(c);return!t.isReadonly(u)&&(n.config.initial_open_state=u.$open,!!t.callEvent("onRowDragStart",[c,l.target||l.srcElement,l])&&void 0)},t)),n.attachEvent("onAfterDragStart",t.bind(function(o,l){var d=a(l);n.config.marker.innerHTML=d.outerHTML;var c=n.config.marker.firstChild;c&&(c.style.position="static"),n.config.id=d.getAttribute(e.$config.item_attribute);var u=r(),h=u.getItem(n.config.id);n.config.index=u.getBranchIndex(n.config.id),n.config.parent=h.parent,h.$open=!1,h.$transparent=!0,this.refreshData()},t)),n.lastTaskOfLevel=function(o){for(var l=null,d=r().getItems(),c=0,u=d.length;c<u;c++)d[c].$level==o&&(l=d[c]);return l?l.id:null},n._getGridPos=t.bind(function(o){var l=F(e.$grid_data),d=l.x+e.$grid.scrollLeft,c=o.pos.y-10,u=e.getItemHeight(n.config.id);c<l.y&&(c=l.y);var h=e.getTotalHeight();c>l.y+h-u&&(c=l.y+h-u);const f=l.y+l.height;return c>f-u&&(c=f-u),l.x=d,l.y=c,l},t),n._getTargetY=t.bind(function(o){var l=F(e.$grid_data),d=e.$state.scrollTop||0,c=t.$grid_data.getBoundingClientRect().height+d,u=o.pageY-l.y+d;return u>c?u=c:u<d&&(u=d),u},t),n._getTaskByY=t.bind(function(o,l){var d=r();o=o||0;var c=e.getItemIndexByTopPosition(o);return(c=l<c?c-1:c)>d.countVisible()-1?null:d.getIdByIndex(c)},t),n.attachEvent("onDragMove",t.bind(function(o,l){var d=t.$grid_data.getBoundingClientRect(),c=d.height+d.y+(e.$state.scrollTop||0)+window.scrollY,u=n.config,h=n._getGridPos(l);t._waiAria.reorderMarkerAttr(u.marker);var f=e.$getConfig(),g=r();h.y<c?u.marker.style.top=h.y+"px":u.marker.style.top=c+"px",u.marker.style.left=h.x+10+"px";const y=F(t.$root);h.width>y.width&&(u.marker.style.width=y.width-10-2+"px",u.marker.style.overflow="hidden");var v=g.getItem(n.config.id),b=n._getTargetY(l),_=n._getTaskByY(b,g.getIndexById(v.id));function m(D,A){return!g.isChildOf(p.id,A.id)&&(D.$level==A.$level||f.order_branch_free)}if(g.exists(_)||(_=n.lastTaskOfLevel(f.order_branch_free?v.$level:0))==n.config.id&&(_=null),g.exists(_)){var p=g.getItem(_),k=e.getItemTop(p.id),$=e.getItemHeight(p.id);if(k+$/2<b){var w=g.getIndexById(p.id),x=g.getNext(p.id),S=g.getItem(x);if(s(x)){var T=g.getPrev(S.id);S=g.getItem(T)}if(S){if(S.id==v.id)return f.order_branch_free&&g.isChildOf(v.id,p.id)&&g.getChildren(p.id).length==1?void g.move(v.id,g.getBranchIndex(p.id)+1,g.getParent(p.id)):void 0;p=S}else if(x=g.getIdByIndex(w),S=g.getItem(x),s(x)&&(T=g.getPrev(S.id),S=g.getItem(T)),m(S,v)&&S.id!=v.id)return void g.move(v.id,-1,g.getParent(S.id))}else if(f.order_branch_free&&p.id!=v.id&&m(p,v)&&!s(p.id)){if(!g.hasChild(p.id))return p.$open=!0,void g.move(v.id,-1,p.id);if(g.getIndexById(p.id)||$/3<b)return}w=g.getIndexById(p.id),T=g.getIdByIndex(w-1);for(var E=g.getItem(T),C=1;(!E||E.id==p.id)&&w-C>=0;)T=g.getIdByIndex(w-C),E=g.getItem(T),C++;if(v.id==p.id||s(p.id))return;m(p,v)&&v.id!=p.id?g.move(v.id,0,0,p.id):p.$level!=v.$level-1||g.getChildren(p.id).length?E&&m(E,v)&&v.id!=E.id&&g.move(v.id,-1,g.getParent(E.id)):g.move(v.id,0,p.id)}return!0},t)),n.attachEvent("onDragEnd",t.bind(function(){var o=r(),l=o.getItem(n.config.id);l.$transparent=!1,l.$open=n.config.initial_open_state,this.callEvent("onBeforeRowDragEnd",[n.config.id,n.config.parent,n.config.index])===!1?(o.move(n.config.id,n.config.index,n.config.parent),l.$drop_target=null):this.callEvent("onRowDragEnd",[n.config.id,l.$drop_target]),t.render(),this.refreshData()},t))}function a(o){return et(o,e.$config.item_attribute)}function r(){return t.getDatastore(e.$config.bind)}function s(o){return Pt(o,t,r())}}},K={createDropTargetObject:function(t){var e={targetParent:null,targetIndex:0,targetId:null,child:!1,nextSibling:!1,prevSibling:!1};return t&&N(e,t,!0),e},nextSiblingTarget:function(t,e,i){var n=this.createDropTargetObject();return n.targetId=e,n.nextSibling=!0,n.targetParent=i.getParent(n.targetId),n.targetIndex=i.getBranchIndex(n.targetId),(i.getParent(t)!=n.targetParent||n.targetIndex<i.getBranchIndex(t))&&(n.targetIndex+=1),n},prevSiblingTarget:function(t,e,i){var n=this.createDropTargetObject();return n.targetId=e,n.prevSibling=!0,n.targetParent=i.getParent(n.targetId),n.targetIndex=i.getBranchIndex(n.targetId),i.getParent(t)==n.targetParent&&n.targetIndex>i.getBranchIndex(t)&&(n.targetIndex-=1),n},firstChildTarget:function(t,e,i){var n=this.createDropTargetObject();return n.targetId=e,n.targetParent=n.targetId,n.targetIndex=0,n.child=!0,n},lastChildTarget:function(t,e,i){var n=i.getChildren(e),a=this.createDropTargetObject();return a.targetId=n[n.length-1],a.targetParent=e,a.targetIndex=n.length,a.nextSibling=!0,a}};function Ti(t,e,i,n,a){for(var r=e;n.exists(r);){var s=n.calculateItemLevel(n.getItem(r));if((s===i||s===i-1)&&n.getBranchIndex(r)>-1)break;r=a?n.getPrev(r):n.getNext(r)}return n.exists(r)?n.calculateItemLevel(n.getItem(r))===i?a?K.nextSiblingTarget(t,r,n):K.prevSiblingTarget(t,r,n):K.firstChildTarget(t,r,n):null}function ne(t,e,i,n){return Ti(t,e,i,n,!0)}function Qe(t,e,i,n){return Ti(t,e,i,n,!1)}function ti(t,e,i,n,a,r){var s;if(e!==a.$getRootId()){var o=a.getItem(e),l=a.calculateItemLevel(o);if(l===r){var d=a.getPrevSibling(e);i<.5&&!d?s=K.prevSiblingTarget(t,e,a):(i<.5&&(e=d),s=K.nextSiblingTarget(t,e,a))}else if(l>r)a.eachParent(function(g){a.calculateItemLevel(g)===r&&(e=g.id)},o),s=ne(t,e,r,a);else{var c=ne(t,e,r,a),u=Qe(t,e,r,a);s=i<.5?c:u}}else{var h=a.$getRootId(),f=a.getChildren(h);s=K.createDropTargetObject(),s=f.length&&n>=0?ne(t,function(g){for(var y=g.getNext();g.exists(y);){var v=g.getNext(y);if(!g.exists(v))return y;y=v}return null}(a),r,a):Qe(t,h,r,a)}return s}function ei(t,e){var i=F(e.$grid_data);return t.x+=i.x+e.$grid.scrollLeft,t.y+=i.y-e.$grid_data.scrollTop,t}function ae(t,e,i=0){const n=F(t.$root);return e>n.width&&(e=n.width-i-2),e}const ii={removeLineHighlight:function(t){t.markerLine&&t.markerLine.parentNode&&t.markerLine.parentNode.removeChild(t.markerLine),t.markerLine=null},highlightPosition:function(t,e,i){var n=function(r,s){var o=F(s.$grid_data),l=rt(r,s.$grid_data),d=o.x+s.$grid.scrollLeft,c=l.y-10,u=s.getItemHeight(r.targetId);c<o.y&&(c=o.y);var h=s.getTotalHeight();return c>o.y+h-u&&(c=o.y+h-u),o.x=d,o.y=c,o.width=ae(s.$gantt,o.width,9),o}(t,i);e.marker.style.left=n.x+9+"px",e.marker.style.width=n.width+"px",e.marker.style.overflow="hidden";var a=e.markerLine;a||((a=document.createElement("div")).className="gantt_drag_marker gantt_grid_dnd_marker",a.innerHTML="<div class='gantt_grid_dnd_marker_line'></div>",a.style.pointerEvents="none"),t.child?function(r,s,o){var l=r.targetParent,d=ei({x:0,y:o.getItemTop(l)},o),c=o.$grid_data.getBoundingClientRect().bottom+window.scrollY;let u=ae(o.$gantt,o.$grid_data.offsetWidth);s.innerHTML="<div class='gantt_grid_dnd_marker_folder'></div>",s.style.width=u+"px",s.style.top=d.y+"px",s.style.left=d.x+"px",s.style.height=o.getItemHeight(l)+"px",d.y>c&&(s.style.top=c+"px")}(t,a,i):function(r,s,o){var l=function(u,h){var f=h.$config.rowStore,g={x:0,y:0},y=h.$grid_data.querySelector(".gantt_tree_indent"),v=15,b=0;y&&(v=y.offsetWidth);var _=40;if(u.targetId!==f.$getRootId()){var m=h.getItemTop(u.targetId),p=h.getItemHeight(u.targetId);if(b=f.exists(u.targetId)?f.calculateItemLevel(f.getItem(u.targetId)):0,u.prevSibling)g.y=m;else if(u.nextSibling){var k=0;f.eachItem(function($){f.getIndexById($.id)!==-1&&k++},u.targetId),g.y=m+p+k*p}else g.y=m+p,b+=1}return g.x=_+b*v,g.width=ae(h.$gantt,Math.max(h.$grid_data.offsetWidth-g.x,0),g.x),ei(g,h)}(r,o),d=o.$grid_data.getBoundingClientRect().bottom+window.scrollY;s.innerHTML="<div class='gantt_grid_dnd_marker_line'></div>",s.style.left=l.x+"px",s.style.height="4px";var c=l.y-2;s.style.top=c+"px",s.style.width=l.width+"px",c>d&&(s.style.top=d+"px")}(t,a,i),e.markerLine||(document.body.appendChild(a),e.markerLine=a)}},ir={init:function(t,e){var i=t.$services.getService("dnd");if(e.$config.bind&&t.getDatastore(e.$config.bind)){var n=new i(e.$grid_data,{updates_per_second:60});t.defined(e.$getConfig().dnd_sensitivity)&&(n.config.sensitivity=e.$getConfig().dnd_sensitivity),n.attachEvent("onBeforeDragStart",t.bind(function(o,l){var d=a(l);if(!d||(t.hideQuickInfo&&t.hideQuickInfo(),ct(l.target,".gantt_grid_editor_placeholder")))return!1;var c=d.getAttribute(e.$config.item_attribute),u=e.$config.rowStore.getItem(c);return!t.isReadonly(u)&&!r(c)&&(n.config.initial_open_state=u.$open,!!t.callEvent("onRowDragStart",[c,l.target||l.srcElement,l])&&void 0)},t)),n.attachEvent("onAfterDragStart",t.bind(function(o,l){var d=a(l);n.config.marker.innerHTML=d.outerHTML;var c=n.config.marker.firstChild;c&&(n.config.marker.style.opacity=.4,c.style.position="static",c.style.pointerEvents="none"),n.config.id=d.getAttribute(e.$config.item_attribute);var u=e.$config.rowStore,h=u.getItem(n.config.id);n.config.level=u.calculateItemLevel(h),n.config.drop_target=K.createDropTargetObject({targetParent:u.getParent(h.id),targetIndex:u.getBranchIndex(h.id),targetId:h.id,nextSibling:!0}),h.$open=!1,h.$transparent=!0,this.refreshData()},t)),n.attachEvent("onDragMove",t.bind(function(o,l){var d=s(l);return d&&t.callEvent("onBeforeRowDragMove",[n.config.id,d.targetParent,d.targetIndex])!==!1||(d=K.createDropTargetObject(n.config.drop_target)),ii.highlightPosition(d,n.config,e),n.config.drop_target=d,t._waiAria.reorderMarkerAttr(n.config.marker),this.callEvent("onRowDragMove",[n.config.id,d.targetParent,d.targetIndex]),!0},t)),n.attachEvent("onDragEnd",t.bind(function(){var o=e.$config.rowStore,l=o.getItem(n.config.id);ii.removeLineHighlight(n.config),l.$transparent=!1,l.$open=n.config.initial_open_state;var d=n.config.drop_target;this.callEvent("onBeforeRowDragEnd",[n.config.id,d.targetParent,d.targetIndex])===!1?l.$drop_target=null:(o.move(n.config.id,d.targetIndex,d.targetParent),t.render(),this.callEvent("onRowDragEnd",[n.config.id,d.targetParent,d.targetIndex])),o.refresh(l.id)},t))}function a(o){return et(o,e.$config.item_attribute)}function r(o){return Pt(o,t,t.getDatastore(e.$config.bind))}function s(o){var l,d=function(g){var y=rt(g,e.$grid_data).y,v=e.$config.rowStore;document.doctype||(y+=window.scrollY),y=y||0;var b=e.$state.scrollTop||0,_=t.$grid_data.getBoundingClientRect().height+b+window.scrollY,m=b,p=e.getItemIndexByTopPosition(e.$state.scrollTop);if(v.exists(p)||(p=v.countVisible()-1),p<0)return v.$getRootId();var k=v.getIdByIndex(p),$=e.$state.scrollTop/e.getItemHeight(k),w=$-Math.floor($);w>.1&&w<.9&&(_-=e.getItemHeight(k)*w,m+=e.getItemHeight(k)*(1-w));const x=F(e.$grid_data),S=x.y+x.height,T=n.config.marker.offsetHeight;y+T+window.scrollY>=_&&(n.config.marker.style.top=S-T+"px"),y>=_?y=_:y<=m&&(y=m,n.config.marker.style.top=x.y+"px");var E=e.getItemIndexByTopPosition(y);if(E>v.countVisible()-1||E<0)return v.$getRootId();var C=v.getIdByIndex(E);return r(C)?v.getPrevSibling(C):v.getIdByIndex(E)}(o),c=null,u=e.$config.rowStore,h=!e.$getConfig().order_branch_free,f=rt(o,e.$grid_data).y;return document.doctype||(f+=window.scrollY),d!==u.$getRootId()&&(c=(f-e.getItemTop(d))/e.getItemHeight(d)),h?(l=ti(n.config.id,d,c,f,u,n.config.level))&&l.targetParent&&r(l.targetParent)&&(d=u.getPrevSibling(l.targetParent),l=ti(n.config.id,d,c,f,u,n.config.level)):l=function(g,y,v,b,_){var m;if(y!==_.$getRootId())m=v<.25?K.prevSiblingTarget(g,y,_):!(v>.6)||_.hasChild(y)&&_.getItem(y).$open?K.firstChildTarget(g,y,_):K.nextSiblingTarget(g,y,_);else{var p=_.$getRootId();m=_.hasChild(p)&&b>=0?K.lastChildTarget(g,p,_):K.firstChildTarget(g,p,_)}return m}(n.config.id,d,c,f,u),l}}};var nr=function(t){return{onCreated:function(e){e.$config=N(e.$config,{bind:"task"}),e.$config.id=="grid"&&(this.extendGantt(e),t.ext.inlineEditors=t.ext._inlineEditors.createEditors(e),t.ext.inlineEditors.init()),this._mouseDelegates=Te(t)},onInitialized:function(e){var i=e.$getConfig();i.order_branch&&(i.order_branch=="marker"?ir.init(e.$gantt,e):er.init(e.$gantt,e)),this.initEvents(e,t),e.$config.id=="grid"&&this.extendDom(e)},onDestroyed:function(e){e.$config.id=="grid"&&t.ext.inlineEditors.detachStore(),this.clearEvents(e,t)},initEvents:function(e,i){this._mouseDelegates.delegate("click","gantt_row",i.bind(function(n,a,r){var s=e.$getConfig();if(a!==null){var o=this.getTask(a);s.scroll_on_click&&!i._is_icon_open_click(n)&&this.showDate(o.start_date),i.callEvent("onTaskRowClick",[a,r])}},i),e.$grid),this._mouseDelegates.delegate("click","gantt_grid_head_cell",i.bind(function(n,a,r){var s=r.getAttribute("data-column-id");if(i.callEvent("onGridHeaderClick",[s,n])){var o=e.$getConfig();if(s!="add"){if(o.sort&&s){for(var l,d=s,c=0;c<o.columns.length;c++)if(o.columns[c].name==s){l=o.columns[c];break}if(l&&l.sort!==void 0&&l.sort!==!0&&!(d=l.sort))return;var u=this._sort&&this._sort.direction&&this._sort.name==s?this._sort.direction:"desc";u=u=="desc"?"asc":"desc",this._sort={name:s,direction:u},this.sort(d,u=="desc")}}else i.$services.getService("mouseEvents").callHandler("click","gantt_add",e.$grid,[n,o.root_id])}},i),e.$grid),this._mouseDelegates.delegate("click","gantt_add",i.bind(function(n,a,r){if(!e.$getConfig().readonly)return this.createTask({},a||i.config.root_id),!1},i),e.$grid)},clearEvents:function(e,i){this._mouseDelegates.destructor(),this._mouseDelegates=null},extendDom:function(e){t.$grid=e.$grid,t.$grid_scale=e.$grid_scale,t.$grid_data=e.$grid_data},extendGantt:function(e){t.getGridColumns=t.bind(e.getGridColumns,e),e.attachEvent("onColumnResizeStart",function(){return t.callEvent("onColumnResizeStart",arguments)}),e.attachEvent("onColumnResize",function(){return t.callEvent("onColumnResize",arguments)}),e.attachEvent("onColumnResizeEnd",function(){return t.callEvent("onColumnResizeEnd",arguments)}),e.attachEvent("onColumnResizeComplete",function(i,n){t.config.grid_width=n}),e.attachEvent("onBeforeRowResize",function(){return t.callEvent("onBeforeRowResize",arguments)}),e.attachEvent("onRowResize",function(){return t.callEvent("onRowResize",arguments)}),e.attachEvent("onBeforeRowResizeEnd",function(){return t.callEvent("onBeforeRowResizeEnd",arguments)}),e.attachEvent("onAfterRowResize",function(){return t.callEvent("onAfterRowResize",arguments)})}}};const ar={createTaskDND:function(){var t;return{extend:function(e){e.roundTaskDates=function(i){t.round_task_dates(i)}},init:function(e,i){return t=function(n,a){var r=a.$services;return{drag:null,dragMultiple:{},_events:{before_start:{},before_finish:{},after_finish:{}},_handlers:{},init:function(){this._domEvents=a._createDomEventScope(),this.clear_drag_state();var s=a.config.drag_mode;this.set_actions(),r.getService("state").registerProvider("tasksDnd",R(function(){return{drag_id:this.drag?this.drag.id:void 0,drag_mode:this.drag?this.drag.mode:void 0,drag_from_start:this.drag?this.drag.left:void 0}},this));var o={before_start:"onBeforeTaskDrag",before_finish:"onBeforeTaskChanged",after_finish:"onAfterTaskDrag"};for(var l in this._events)for(var d in s)this._events[l][d]=o[l];this._handlers[s.move]=this._move,this._handlers[s.resize]=this._resize,this._handlers[s.progress]=this._resize_progress},set_actions:function(){var s=n.$task_data;this._domEvents.attach(s,"mousemove",a.bind(function(o){this.on_mouse_move(o)},this)),this._domEvents.attach(s,"mousedown",a.bind(function(o){this.on_mouse_down(o)},this)),this._domEvents.attach(document.body,"mouseup",a.bind(function(o){this.on_mouse_up(o)},this))},clear_drag_state:function(){this.drag={id:null,mode:null,pos:null,start_x:null,start_y:null,obj:null,left:null},this.dragMultiple={}},_resize:function(s,o,l){var d=n.$getConfig(),c=this._drag_task_coords(s,l);l.left?(s.start_date=a.dateFromPos(c.start+o),s.start_date||(s.start_date=new Date(a.getState().min_date))):(s.end_date=a.dateFromPos(c.end+o),s.end_date||(s.end_date=new Date(a.getState().max_date)));var u=this._calculateMinDuration(d.min_duration,d.duration_unit);s.end_date-s.start_date<d.min_duration&&(l.left?s.start_date=a.calculateEndDate(s.end_date,-u,d.duration_unit,s):s.end_date=a.calculateEndDate(s.start_date,u,d.duration_unit,s)),a._init_task_timing(s)},_calculateMinDuration:function(s,o){return Math.ceil(s/{minute:6e4,hour:36e5,day:864e5,week:6048e5,month:24192e5,year:31356e6}[o])},_resize_progress:function(s,o,l){var d=this._drag_task_coords(s,l),c=n.$getConfig().rtl?d.start-l.pos.x:l.pos.x-d.start,u=Math.max(0,c);s.progress=Math.min(1,u/Math.abs(d.end-d.start))},_find_max_shift:function(s,o){var l;for(var d in s){var c=s[d],u=a.getTask(c.id),h=this._drag_task_coords(u,c),f=a.posFromDate(new Date(a.getState().min_date)),g=a.posFromDate(new Date(a.getState().max_date));if(h.end+o>g){var y=g-h.end;(y<l||l===void 0)&&(l=y)}else if(h.start+o<f){var v=f-h.start;(v>l||l===void 0)&&(l=v)}}return l},_move:function(s,o,l,d){var c=this._drag_task_coords(s,l),u=null,h=null;d?(u=new Date(+l.obj.start_date+d),h=new Date(+l.obj.end_date+d)):(u=a.dateFromPos(c.start+o),h=a.dateFromPos(c.end+o)),u?h?(s.start_date=u,s.end_date=h):(s.end_date=new Date(a.getState().max_date),s.start_date=a.dateFromPos(a.posFromDate(s.end_date)-(c.end-c.start))):(s.start_date=new Date(a.getState().min_date),s.end_date=a.dateFromPos(a.posFromDate(s.start_date)+(c.end-c.start)))},_drag_task_coords:function(s,o){return{start:o.obj_s_x=o.obj_s_x||a.posFromDate(s.start_date),end:o.obj_e_x=o.obj_e_x||a.posFromDate(s.end_date)}},_mouse_position_change:function(s,o){var l=s.x-o.x,d=s.y-o.y;return Math.sqrt(l*l+d*d)},_is_number:function(s){return!isNaN(parseFloat(s))&&isFinite(s)},on_mouse_move:function(s){if(this.drag.start_drag){var o=rt(s,a.$task_data),l=this.drag.start_drag.start_x,d=this.drag.start_drag.start_y;(Date.now()-this.drag.timestamp>50||this._is_number(l)&&this._is_number(d)&&this._mouse_position_change({x:l,y:d},o)>20)&&this._start_dnd(s)}if(this.drag.mode){if(!fi(this,40))return;this._update_on_move(s)}},_update_item_on_move:function(s,o,l,d,c,u){var h=a.getTask(o),f=a.mixin({},h),g=a.mixin({},h);this._handlers[l].apply(this,[g,s,d,u]),a.mixin(h,g,!0),a.callEvent("onTaskDrag",[h.id,l,g,f,c]),a.mixin(h,g,!0),a.refreshTask(o)},_update_on_move:function(s){var o=this.drag,l=n.$getConfig();if(o.mode){var d=rt(s,n.$task_data);if(o.pos&&o.pos.x==d.x)return;o.pos=d;var c=a.dateFromPos(d.x);if(!c||isNaN(c.getTime()))return;var u=d.x-o.start_x,h=a.getTask(o.id);if(this._handlers[o.mode]){if(o.mode===l.drag_mode.move){var f={};this._isMultiselect()&&a.getSelectedTasks().indexOf(o.id)>=0&&(f=this.dragMultiple);var g=!1;if(a.isSummaryTask(h)&&a.config.drag_project){var y={};y[o.id]=q(o),g=!0,f=N(y,this.dragMultiple)}var v=this._find_max_shift(f,u);let m;if(v!==void 0&&(u=v),this._update_item_on_move(u,o.id,o.mode,o,s),v===void 0){const p=a.posFromDate(o.obj.start_date),k=a.posFromDate(o.obj.end_date);if(o.handle_offset===void 0){const w=k-p,x=o.start_x-p;o.handle_offset=x/w}let $=p+Math.abs(k-p)*o.handle_offset;m=c-a.dateFromPos($)}for(var b in f){var _=f[b];g&&_.id!=o.id&&(a._bulk_dnd=!0),this._update_item_on_move(u,_.id,_.mode,_,s,m)}a._bulk_dnd=!1}else this._update_item_on_move(u,o.id,o.mode,o,s);a._update_parents(o.id)}}},on_mouse_down:function(s,o){if(s.button!=2||s.button===void 0){var l=n.$getConfig(),d=a.locate(s),c=null;if(a.isTaskExists(d)&&(c=a.getTask(d)),!a.isReadonly(c)&&!this.drag.mode){this.clear_drag_state();var u=X(o=o||s.target||s.srcElement),h=this._get_drag_mode(u,o);if(!u||!h)return o.parentNode?this.on_mouse_down(s,o.parentNode):void 0;if(h)if(h.mode&&h.mode!=l.drag_mode.ignore&&l["drag_"+h.mode]){if(d=a.locate(o),c=a.copy(a.getTask(d)||{}),a.isReadonly(c))return this.clear_drag_state(),!1;if(a.isSummaryTask(c)&&c.auto_scheduling!==!1&&!l.drag_project&&h.mode!=l.drag_mode.progress)return void this.clear_drag_state();h.id=d;var f=rt(s,a.$task_data);h.start_x=f.x,h.start_y=f.y,h.obj=c,this.drag.start_drag=h,this.drag.timestamp=Date.now()}else this.clear_drag_state();else if(a.checkEvent("onMouseDown")&&a.callEvent("onMouseDown",[u.split(" ")[0]])&&o.parentNode)return this.on_mouse_down(s,o.parentNode)}}},_fix_dnd_scale_time:function(s,o){var l=n.$getConfig(),d=a.getScale().unit,c=a.getScale().step;function u(h){if(a.config.correct_work_time){var f=n.$getConfig();a.isWorkTime(h.start_date,void 0,h)||(h.start_date=a.calculateEndDate({start_date:h.start_date,duration:-1,unit:f.duration_unit,task:h}))}}l.round_dnd_dates||(d="minute",c=l.time_step),o.mode==l.drag_mode.resize?o.left?(s.start_date=a.roundDate({date:s.start_date,unit:d,step:c}),u(s)):(s.end_date=a.roundDate({date:s.end_date,unit:d,step:c}),function(h){if(a.config.correct_work_time){var f=n.$getConfig();a.isWorkTime(new Date(h.end_date-1),void 0,h)||(h.end_date=a.calculateEndDate({start_date:h.end_date,duration:1,unit:f.duration_unit,task:h}))}}(s)):o.mode==l.drag_mode.move&&(s.start_date=a.roundDate({date:s.start_date,unit:d,step:c}),u(s),s.end_date=a.calculateEndDate(s))},_fix_working_times:function(s,o){var l=n.$getConfig();(o=o||{mode:l.drag_mode.move}).mode==l.drag_mode.resize?o.left?s.start_date=a.getClosestWorkTime({date:s.start_date,dir:"future",task:s}):s.end_date=a.getClosestWorkTime({date:s.end_date,dir:"past",task:s}):o.mode==l.drag_mode.move&&a.correctTaskWorkTime(s)},_finalize_mouse_up:function(s,o,l,d){var c=a.getTask(s);if(o.work_time&&o.correct_work_time&&this._fix_working_times(c,l),this._fix_dnd_scale_time(c,l),this._fireEvent("before_finish",l.mode,[s,l.mode,a.copy(l.obj),d])){var u=s;a._init_task_timing(c),this.clear_drag_state(),a.updateTask(c.id),this._fireEvent("after_finish",l.mode,[u,l.mode,d])}else this.clear_drag_state(),s==l.id&&(l.obj._dhx_changed=!1,a.mixin(c,l.obj,!0)),a.refreshTask(c.id)},on_mouse_up:function(s){var o=this.drag;if(o.mode&&o.id){var l=n.$getConfig(),d=a.getTask(o.id),c=this.dragMultiple,u=!1,h=0;o.mode===l.drag_mode.move&&(a.isSummaryTask(d)&&l.drag_project||this._isMultiselect())&&(u=!0,h=Object.keys(c).length);var f=function(){if(u)for(var g in c)c[g].id!=o.id&&this._finalize_mouse_up(c[g].id,l,c[g],s);this._finalize_mouse_up(o.id,l,o,s)};u&&h>10?a.batchUpdate((function(){f.call(this)}).bind(this)):f.call(this)}this.clear_drag_state()},_get_drag_mode:function(s,o){var l=n.$getConfig().drag_mode,d={mode:null,left:null};switch((s||"").split(" ")[0]){case"gantt_task_line":case"gantt_task_content":d.mode=l.move;break;case"gantt_task_drag":d.mode=l.resize;var c=o.getAttribute("data-bind-property");d.left=c=="start_date";break;case"gantt_task_progress_drag":d.mode=l.progress;break;case"gantt_link_control":case"gantt_link_point":d.mode=l.ignore;break;default:d=null}return d},_start_dnd:function(s){var o=this.drag=this.drag.start_drag;delete o.start_drag;var l=n.$getConfig(),d=o.id;if(l["drag_"+o.mode]&&a.callEvent("onBeforeDrag",[d,o.mode,s])&&this._fireEvent("before_start",o.mode,[d,o.mode,s])){delete o.start_drag;var c=a.getTask(d);if(a.isReadonly(c))return void this.clear_drag_state();if(this._isMultiselect()){var u=a.getSelectedTasks();u.indexOf(o.id)>=0&&yt(u,a.bind(function(h){var f=a.getTask(h);a.isSummaryTask(f)&&a.config.drag_project&&o.mode==l.drag_mode.move&&this._addSubtasksToDragMultiple(f.id),this.dragMultiple[h]=a.mixin({id:f.id,obj:a.copy(f)},this.drag)},this))}a.isSummaryTask(c)&&a.config.drag_project&&o.mode==l.drag_mode.move&&this._addSubtasksToDragMultiple(c.id),a.callEvent("onTaskDragStart",[])}else this.clear_drag_state()},_fireEvent:function(s,o,l){a.assert(this._events[s],"Invalid stage:{"+s+"}");var d=this._events[s][o];return a.assert(d,"Unknown after drop mode:{"+o+"}"),a.assert(l,"Invalid event arguments"),!a.checkEvent(d)||a.callEvent(d,l)},round_task_dates:function(s){var o=this.drag,l=n.$getConfig();o||(o={mode:l.drag_mode.move}),this._fix_dnd_scale_time(s,o)},destructor:function(){this._domEvents.detachAll()},_isMultiselect:function(){return a.config.drag_multiple&&!!(a.getSelectedTasks&&a.getSelectedTasks().length>0)},_addSubtasksToDragMultiple:function(s){a.eachTask(function(o){this.dragMultiple[o.id]=a.mixin({id:o.id,obj:a.copy(o)},this.drag)},s,this)}}}(e,i),e._tasks_dnd=t,t.init(i)},destructor:function(){t&&(t.destructor(),t=null)}}}};var rr=function(t,e){var i,n,a,r,s;function o(){return{link_source_id:r,link_target_id:n,link_from_start:s,link_to_start:a,link_landing_area:i}}var l=e.$services,d=l.getService("state"),c=l.getService("dnd");d.registerProvider("linksDnD",o);var u="gantt_link_point",h="gantt_link_control",f=new c(t.$task_bars,{sensitivity:0,updates_per_second:60,mousemoveContainer:e.$root,selector:"."+u,preventDefault:!0});function g(m,p){var k,$=f.getPosition(m),w=function(A){var I=0,M=0;return A&&(I=A.offsetWidth||0,M=A.offsetHeight||0),{width:I,height:M}}(p),x={right:(k=e.$root).offsetWidth,bottom:k.offsetHeight},S=e.config.tooltip_offset_x||10,T=e.config.tooltip_offset_y||10,E=e.config.scroll_size||18,C=e.$container.getBoundingClientRect().y+window.scrollY,D={y:$.y+T,x:$.x+S,bottom:$.y+w.height+T+E,right:$.x+w.width+S+E};return D.bottom>x.bottom+C&&(D.y=x.bottom+C-w.height-T),D.right>x.right&&(D.x=x.right-w.width-S),D}function y(m){var p=o();p.link_source_id&&p.link_target_id&&e.isLinkAllowed(p.link_source_id,p.link_target_id,p.link_from_start,p.link_to_start);var k="<div class='"+e.templates.drag_link_class(p.link_source_id,p.link_from_start,p.link_target_id,p.link_to_start)+"'>"+e.templates.drag_link(p.link_source_id,p.link_from_start,p.link_target_id,p.link_to_start)+"</div>";m.innerHTML=k}function v(){r=s=n=null,a=!0}function b(m,p,k,$){var w=function(){return f._direction&&f._direction.parentNode||(f._direction=document.createElement("div"),t.$task_links.appendChild(f._direction)),f._direction}(),x=o(),S=["gantt_link_direction"];e.templates.link_direction_class&&S.push(e.templates.link_direction_class(x.link_source_id,x.link_from_start,x.link_target_id,x.link_to_start));var T=Math.sqrt(Math.pow(k-m,2)+Math.pow($-p,2));if(T=Math.max(0,T-3)){w.className=S.join(" ");var E=($-p)/(k-m),C=Math.atan(E);_(m,k,p,$)==2?C+=Math.PI:_(m,k,p,$)==3&&(C-=Math.PI);var D=Math.sin(C),A=Math.cos(C),I=Math.round(p),M=Math.round(m),L=["-webkit-transform: rotate("+C+"rad)","-moz-transform: rotate("+C+"rad)","-ms-transform: rotate("+C+"rad)","-o-transform: rotate("+C+"rad)","transform: rotate("+C+"rad)","width:"+Math.round(T)+"px"];if(window.navigator.userAgent.indexOf("MSIE 8.0")!=-1){L.push('-ms-filter: "'+function(V,_t){return"progid:DXImageTransform.Microsoft.Matrix(M11 = "+_t+",M12 = -"+V+",M21 = "+V+",M22 = "+_t+",SizingMethod = 'auto expand')"}(D,A)+'"');var P=Math.abs(Math.round(m-k)),H=Math.abs(Math.round($-p));switch(_(m,k,p,$)){case 1:I-=H;break;case 2:M-=P,I-=H;break;case 3:M-=P}}L.push("top:"+I+"px"),L.push("left:"+M+"px"),w.style.cssText=L.join(";")}}function _(m,p,k,$){return p>=m?$<=k?1:4:$<=k?2:3}f.attachEvent("onBeforeDragStart",e.bind(function(m,p){var k=p.target||p.srcElement;if(v(),e.getState("tasksDnd").drag_id)return!1;if(mt(k,u)){mt(k,"task_start_date")&&(s=!0);var $=e.locate(p);r=$;var w=e.getTask($);return e.isReadonly(w)?(v(),!1):(this._dir_start={x:f.config.original_element_sizes.x+f.config.original_element_sizes.width/2,y:f.config.original_element_sizes.y+f.config.original_element_sizes.height/2},!0)}return!1},this)),f.attachEvent("onAfterDragStart",e.bind(function(m,p){e.config.touch&&e.refreshData(),y(f.config.marker)},this)),f.attachEvent("onDragMove",e.bind(function(m,p){var k=f.config,$=g(p,k.marker);(function(A,I){A.style.left=I.x+"px",A.style.top=I.y+"px"})(k.marker,$);var w=!!mt(p,h),x=n,S=i,T=a,E=e.locate(p),C=!0;if(G(bt(p),e.$root)||(w=!1,E=null),w&&(C=!mt(p,"task_end_date"),w=!!E),n=E,i=w,a=C,w){const A=mt(p,h).querySelector(`.${u}`);if(A){const I=oi(A,t.$task_bg);this._dir_end={x:I.x+A.offsetWidth/2,y:I.y+A.offsetHeight/2}}}else this._dir_end=rt(p,t.$task_data),e.env.isEdge&&(this._dir_end.y+=window.scrollY);var D=!(S==w&&x==E&&T==C);return D&&(x&&e.refreshTask(x,!1),E&&e.refreshTask(E,!1)),D&&y(k.marker),b(this._dir_start.x,this._dir_start.y,this._dir_end.x,this._dir_end.y),!0},this)),f.attachEvent("onDragEnd",e.bind(function(){var m=o();if(m.link_source_id&&m.link_target_id&&m.link_source_id!=m.link_target_id){var p=e._get_link_type(m.link_from_start,m.link_to_start),k={source:m.link_source_id,target:m.link_target_id,type:p};k.type&&e.isLinkAllowed(k)&&e.callEvent("onLinkCreated",[k])&&e.addLink(k)}v(),e.config.touch?e.refreshData():(m.link_source_id&&e.refreshTask(m.link_source_id,!1),m.link_target_id&&e.refreshTask(m.link_target_id,!1)),f._direction&&(f._direction.parentNode&&f._direction.parentNode.removeChild(f._direction),f._direction=null)},this)),e.attachEvent("onGanttRender",e.bind(function(){f._direction&&b(this._dir_start.x,this._dir_start.y,this._dir_end.x,this._dir_end.y)},this))};const sr=function(){return{init:rr}};var or=function(t){var e=t.$services;return{onCreated:function(i){var n=i.$config;n.bind=j(n.bind)?n.bind:"task",n.bindLinks=j(n.bindLinks)?n.bindLinks:"link",i._linksDnD=sr(),i._tasksDnD=ar.createTaskDND(),i._tasksDnD.extend(i),this._mouseDelegates=Te(t)},onInitialized:function(i){this._attachDomEvents(t),this._attachStateProvider(t,i),i._tasksDnD.init(i,t),i._linksDnD.init(i,t),i.$config.id=="timeline"&&this.extendDom(i)},onDestroyed:function(i){this._clearDomEvents(t),this._clearStateProvider(t),i._tasksDnD&&i._tasksDnD.destructor()},extendDom:function(i){t.$task=i.$task,t.$task_scale=i.$task_scale,t.$task_data=i.$task_data,t.$task_bg=i.$task_bg,t.$task_links=i.$task_links,t.$task_bars=i.$task_bars},_clearDomEvents:function(){this._mouseDelegates.destructor(),this._mouseDelegates=null},_attachDomEvents:function(i){function n(a,r){if(a&&this.callEvent("onLinkDblClick",[a,r])){var s=this.getLink(a);if(this.isReadonly(s))return;var o=this.locale.labels.link+" "+this.templates.link_description(this.getLink(a))+" "+this.locale.labels.confirm_link_deleting;window.setTimeout(function(){i._simple_confirm(o,"",function(){i.deleteLink(a)})},this.config.touch?300:1)}}this._mouseDelegates.delegate("click","gantt_task_link",i.bind(function(a,r){var s=this.locate(a,this.config.link_attribute);s&&this.callEvent("onLinkClick",[s,a])},i),this.$task),this._mouseDelegates.delegate("click","gantt_scale_cell",i.bind(function(a,r){var s=rt(a,i.$task_data),o=i.dateFromPos(s.x),l=Math.floor(i.columnIndexByDate(o)),d=i.getScale().trace_x[l];i.callEvent("onScaleClick",[a,d])},i),this.$task),this._mouseDelegates.delegate("doubleclick","gantt_task_link",i.bind(function(a,r,s){r=this.locate(a,i.config.link_attribute),n.call(this,r,a)},i),this.$task),this._mouseDelegates.delegate("doubleclick","gantt_link_point",i.bind(function(a,r,s){r=this.locate(a);var o=this.getTask(r),l=null;return s.parentNode&&X(s.parentNode)&&(l=X(s.parentNode).indexOf("_left")>-1?o.$target[0]:o.$source[0]),l&&n.call(this,l,a),!1},i),this.$task)},_attachStateProvider:function(i,n){var a=n;e.getService("state").registerProvider("tasksTimeline",function(){return{scale_unit:a._tasks?a._tasks.unit:void 0,scale_step:a._tasks?a._tasks.step:void 0}})},_clearStateProvider:function(){e.getService("state").unregisterProvider("tasksTimeline")}}},lr=function(t){return{getVerticalScrollbar:function(){return t.$ui.getView("scrollVer")},getHorizontalScrollbar:function(){return t.$ui.getView("scrollHor")},_legacyGridResizerClass:function(e){for(var i=e.getCellsByType("resizer"),n=0;n<i.length;n++){var a=i[n],r=!1,s=a.$parent.getPrevSibling(a.$id);if(s&&s.$config&&s.$config.id==="grid")r=!0;else{var o=a.$parent.getNextSibling(a.$id);o&&o.$config&&o.$config.id==="grid"&&(r=!0)}r&&(a.$config.css=(a.$config.css?a.$config.css+" ":"")+"gantt_grid_resize_wrap")}},onCreated:function(e){var i=!0;this._legacyGridResizerClass(e),e.attachEvent("onBeforeResize",function(){var n=t.$ui.getView("timeline");n&&(n.$config.hidden=n.$parent.$config.hidden=!t.config.show_chart);var a=t.$ui.getView("grid");if(a){var r=a._getColsTotalWidth(),s=!t.config.show_grid||!t.config.grid_width||r===0;if(i&&!s&&r!==!1&&(t.config.grid_width=r),a.$config.hidden=a.$parent.$config.hidden=s,!a.$config.hidden){var o=a._getGridWidthLimits();if(o[0]&&t.config.grid_width<o[0]&&(t.config.grid_width=o[0]),o[1]&&t.config.grid_width>o[1]&&(t.config.grid_width=o[1]),n&&t.config.show_chart){if(a.$config.width=t.config.grid_width-1,!a.$config.scrollable&&a.$config.scrollY&&t.$root.offsetWidth){var l=a.$gantt.$layout.$container.offsetWidth,d=t.$ui.getView(a.$config.scrollY).$config.width,c=l-(a.$config.width+d)-4;c<0&&(a.$config.width+=c,t.config.grid_width+=c)}if(i)a.$parent.$config.width=t.config.grid_width,a.$parent.$config.group&&t.$layout._syncCellSizes(a.$parent.$config.group,{value:a.$parent.$config.width,isGravity:!1});else if(n&&!G(n.$task,e.$view)){if(!a.$config.original_grid_width){var u=t.skins[t.skin];u&&u.config&&u.config.grid_width?a.$config.original_grid_width=u.config.grid_width:a.$config.original_grid_width=0}t.config.grid_width=a.$config.original_grid_width,a.$parent.$config.width=t.config.grid_width}else a.$parent._setContentSize(a.$config.width,null),t.$layout._syncCellSizes(a.$parent.$config.group,{value:t.config.grid_width,isGravity:!1})}else n&&G(n.$task,e.$view)&&(a.$config.original_grid_width=t.config.grid_width),i||(a.$parent.$config.width=0)}i=!1}}),this._initScrollStateEvents(e)},_initScrollStateEvents:function(e){t._getVerticalScrollbar=this.getVerticalScrollbar,t._getHorizontalScrollbar=this.getHorizontalScrollbar;var i=this.getVerticalScrollbar(),n=this.getHorizontalScrollbar();i&&i.attachEvent("onScroll",function(a,r,s){var o=t.getScrollState();t.callEvent("onGanttScroll",[o.x,a,o.x,r])}),n&&n.attachEvent("onScroll",function(a,r,s){var o=t.getScrollState();t.callEvent("onGanttScroll",[a,o.y,r,o.y]);var l=t.$ui.getView("grid");l&&l.$grid_data&&!l.$config.scrollable&&(l.$grid_data.style.left=l.$grid.scrollLeft+"px",l.$grid_data.scrollLeft=l.$grid.scrollLeft)}),e.attachEvent("onResize",function(){i&&!t.$scroll_ver&&(t.$scroll_ver=i.$scroll_ver),n&&!t.$scroll_hor&&(t.$scroll_hor=n.$scroll_hor)})},_findGridResizer:function(e,i){for(var n,a=e.getCellsByType("resizer"),r=!0,s=0;s<a.length;s++){var o=a[s];o._getSiblings();var l=o._behind,d=o._front;if(l&&l.$content===i||l.isChild&&l.isChild(i)){n=o,r=!0;break}if(d&&d.$content===i||d.isChild&&d.isChild(i)){n=o,r=!1;break}}return{resizer:n,gridFirst:r}},onInitialized:function(e){var i=t.$ui.getView("grid"),n=this._findGridResizer(e,i);if(n.resizer){var a,r=n.gridFirst,s=n.resizer;if(s.$config.mode!=="x")return;s.attachEvent("onResizeStart",function(o,l){var d=t.$ui.getView("grid"),c=d?d.$parent:null;if(c){var u=d._getGridWidthLimits();d.$config.scrollable||(c.$config.minWidth=u[0]),c.$config.maxWidth=u[1]}return a=r?o:l,t.callEvent("onGridResizeStart",[a])}),s.attachEvent("onResize",function(o,l){var d=r?o:l;return t.callEvent("onGridResize",[a,d])}),s.attachEvent("onResizeEnd",function(o,l,d,c){var u=r?o:l,h=r?d:c,f=t.$ui.getView("grid"),g=f?f.$parent:null;g&&(g.$config.minWidth=void 0);var y=t.callEvent("onGridResizeEnd",[u,h]);return y&&h!==0&&(t.config.grid_width=h),y})}},onDestroyed:function(e){}}};const dr={init:function(t){function e(r,s){var o=s(t);o.onCreated&&o.onCreated(r),r.attachEvent("onReady",function(){o.onInitialized&&o.onInitialized(r)}),r.attachEvent("onDestroy",function(){o.onDestroyed&&o.onDestroyed(r)})}var i=Da(t);i.registerView("cell",Rt),i.registerView("resizer",null),i.registerView("scrollbar",Ra),i.registerView("layout",$i,function(r){(r.$config?r.$config.id:null)==="main"&&e(r,lr)}),i.registerView("viewcell",Pa),i.registerView("multiview",La),i.registerView("timeline",Ut,function(r){(r.$config?r.$config.id:null)!=="timeline"&&r.$config.bind!="task"||e(r,or)}),i.registerView("grid",ye,function(r){(r.$config?r.$config.id:null)!=="grid"&&r.$config.bind!="task"||e(r,nr)}),i.registerView("resourceGrid",ye),i.registerView("resourceTimeline",Ut),i.registerView("resourceHistogram",Ut);var n=function(r){var s=Ma(r);return{getDataRender:function(o){return r.$services.getService("layer:"+o)||null},createDataRender:function(o){var l=o.name,d=o.defaultContainer,c=o.defaultContainerSibling,u=s.createGroup(d,c,function(h,f){if(!u.filters)return!0;for(var g=0;g<u.filters.length;g++)if(u.filters[g](h,f)===!1)return!1},Na);return r.$services.setService("layer:"+l,function(){return u}),r.attachEvent("onGanttReady",function(){u.addLayer()}),u},init:function(){var o=this.createDataRender({name:"task",defaultContainer:function(){return r.$task_data?r.$task_data:r.$ui.getView("timeline")?r.$ui.getView("timeline").$task_data:void 0},defaultContainerSibling:function(){return r.$task_links?r.$task_links:r.$ui.getView("timeline")?r.$ui.getView("timeline").$task_links:void 0},filter:function(d){}},r),l=this.createDataRender({name:"link",defaultContainer:function(){return r.$task_data?r.$task_data:r.$ui.getView("timeline")?r.$ui.getView("timeline").$task_data:void 0}},r);return{addTaskLayer:function(d){const c=pt;return typeof d=="function"?d={renderer:{render:d,getVisibleRange:c}}:d.renderer&&!d.renderer.getVisibleRange&&(d.renderer.getVisibleRange=c),d.view="timeline",o.addLayer(d)},_getTaskLayers:function(){return o.getLayers()},removeTaskLayer:function(d){o.removeLayer(d)},_clearTaskLayers:function(){o.clear()},addLinkLayer:function(d){const c=bi();return typeof d=="function"?d={renderer:{render:d,getVisibleRange:c}}:d.renderer&&!d.renderer.getVisibleRange&&(d.renderer.getVisibleRange=c),d.view="timeline",d&&d.renderer&&(d.renderer.getRectangle||d.renderer.isInViewPort||(d.renderer.isInViewPort=xi)),l.addLayer(d)},_getLinkLayers:function(){return l.getLayers()},removeLinkLayer:function(d){l.removeLayer(d)},_clearLinkLayers:function(){l.clear()}}}}}(t),a=Ka(t);return t.ext.inlineEditors=a,t.ext._inlineEditors=a,a.init(t),{factory:i,mouseEvents:Ia.init(t),layersApi:n.init(),render:{gridLine:function(){return function(r){return{render:function(s,o,l,d){for(var c=o.getGridColumns(),u=o.$getTemplates(),h=o.$config.rowStore,f=[],g=0;g<c.length;g++){var y,v,b,_=g==c.length-1,m=c[g];m.name=="add"?(v="<div "+(S=r._waiAria.gridAddButtonAttrString(m))+" class='gantt_add'></div>",b=""):(Z(v=m.template?m.template(s):s[m.name])&&(v=u.date_grid(v,s,m.name)),v==null&&(v=""),b=v,v="<div class='gantt_tree_content'>"+v+"</div>");var p="gantt_cell"+(_?" gantt_last_cell":""),k=[];if(m.tree){p+=" gantt_cell_tree";for(var $=0;$<s.$level;$++)k.push(u.grid_indent(s));!h.hasChild(s.id)||r.isSplitTask(s)&&!r.config.open_split_tasks?(k.push(u.grid_blank(s)),k.push(u.grid_file(s))):(k.push(u.grid_open(s)),k.push(u.grid_folder(s)))}var w="width:"+(m.width-(_?1:0))+"px;";if(this.defined(m.align)){var x={right:"flex-end",left:"flex-start",center:"center"}[m.align];w+="text-align:"+m.align+";justify-content:"+x+";"}var S=r._waiAria.gridCellAttrString(m,b,s);k.push(v),y="<div class='"+p+"' data-column-index='"+g+"' data-column-name='"+m.name+"' style='"+w+"' "+S+">"+k.join("")+"</div>",f.push(y)}switch(p="",h.$config.name){case"task":p=r.getGlobalTaskIndex(s.id)%2==0?"":" odd";break;case"resource":p=h.visibleOrder.indexOf(s.id)%2==0?"":" odd"}if(p+=s.$transparent?" gantt_transparent":"",p+=s.$dataprocessor_class?" "+s.$dataprocessor_class:"",u.grid_row_class){var T=u.grid_row_class.call(r,s.start_date,s.end_date,s);T&&(p+=" "+T)}h.isSelected(s.id)&&(p+=" gantt_selected");var E=document.createElement("div");E.className="gantt_row"+p+" gantt_row_"+r.getTaskType(s.type);var C=o.getItemHeight(s.id);return E.style.height=C+"px",E.style.lineHeight=C+"px",l.smart_rendering&&(E.style.position="absolute",E.style.left="0px",E.style.top=o.getItemTop(s.id)+"px"),o.$config.item_attribute&&(E.setAttribute(o.$config.item_attribute,s.id),E.setAttribute(o.$config.bind+"_id",s.id)),r._waiAria.taskRowAttr(s,E),E.innerHTML=f.join(""),E},update:null,getRectangle:Yt,isInViewPort:Qa,getVisibleRange:pt,onrender:function(s,o,l){for(var d=l.getGridColumns(),c=0;c<d.length;c++){var u=d[c];if(u.onrender){var h=o.querySelector("[data-column-name="+u.name+"]");if(h){var f=u.onrender(s,h);if(f&&typeof f=="string")h.innerHTML=f;else if(f&&typeof f=="object"&&r.config.external_render){var g=r.config.external_render;g.isElement(f)&&g.renderElement(f,h)}}}}}}}(t)},taskBg:function(){return function(r){var s={},o={};function l(f,g){return!(!s[f.id][g]||!s[f.id][g].parentNode)}function d(f,g){s[f]&&s[f][g]&&s[f][g].parentNode&&s[f][g].parentNode.removeChild(s[f][g])}function c(f){var g,y=f.$getTemplates();return y.task_cell_class!==void 0?(g=y.task_cell_class,(console.warn||console.log)("gantt.templates.task_cell_class template is deprecated and will be removed soon. Please use gantt.templates.timeline_cell_class instead.")):g=y.timeline_cell_class,g}function u(f){return f.$getTemplates().timeline_cell_content}function h(f,g,y,v,b,_,m,p){var k=f.width[g],$="";if(ie(g,f,v,r)){var w=_(y,f.trace_x[g]),x="";if(m&&(x=m(y,f.trace_x[g])),p.static_background){var S=!(!w&&!x);if(!p.static_background_cells||!S)return null}if(s[y.id][g])return o[y.id][g]=g,s[y.id][g];var T=document.createElement("div");return T.style.width=k+"px",$="gantt_task_cell"+(g==b-1?" gantt_last_cell":""),w&&($+=" "+w),T.className=$,x&&(T.innerHTML=x),T.style.position="absolute",T.style.left=f.left[g]+"px",s[y.id][g]=T,o[y.id][g]=g,T}return null}return{render:function(f,g,y,v){var b=g.$getTemplates(),_=g.getScale(),m=_.count;if(y.static_background&&!y.static_background_cells)return null;var p,k=document.createElement("div"),$=c(g),w=u(g);if(p=v&&y.smart_rendering&&!Lt(r)?Wt(_,v.x):{start:0,end:m-1},y.show_task_cells){s[f.id]={},o[f.id]={};for(var x=p.start;x<=p.end;x++){var S=h(_,x,f,v,m,$,w,y);S&&k.appendChild(S)}}const T=g.$config.rowStore,E=T.getIndexById(f.id)%2!=0;var C=b.task_row_class(f.start_date,f.end_date,f),D="gantt_task_row"+(E?" odd":"")+(C?" "+C:"");if(T.isSelected(f.id)&&(D+=" gantt_selected"),k.className=D,y.smart_rendering?(k.style.position="absolute",k.style.top=g.getItemTop(f.id)+"px",k.style.width="100%"):k.style.position="relative",k.style.height=g.getItemHeight(f.id)+"px",f.id=="timeline_placeholder_task"){var A=0;f.lastTaskId&&(A=g.getItemTop(f.lastTaskId)+g.getItemHeight(f.lastTaskId));var I=(f.row_height||g.$task_data.offsetHeight)-A;I<0&&(I=0),y.smart_rendering&&(k.style.top=A+"px"),k.style.height=I+"px"}return g.$config.item_attribute&&(k.setAttribute(g.$config.item_attribute,f.id),k.setAttribute(g.$config.bind+"_id",f.id)),k},update:function(f,g,y,v,b){var _=y.getScale(),m=_.count,p=c(y),k=u(y);if(v.show_task_cells){s[f.id]||(s[f.id]={}),o[f.id]||(o[f.id]={});var $=Wt(_,b);for(var w in o[f.id]){var x=o[f.id][w];(Number(x)<$.start||Number(x)>$.end)&&d(f.id,x)}o[f.id]={};for(var S=$.start;S<=$.end;S++){var T=h(_,S,f,b,m,p,k,v);!T&&l(f,S)?d(f.id,S):T&&!T.parentNode&&g.appendChild(T)}}},getRectangle:Ze,getVisibleRange:pt,prepareData:Xa}}(t)},taskBar:function(){return Xe(t)},timedProjectBar:function(){return Xe(t)},taskRollupBar:function(){return function(r){const s=Si(r),o={};function l(u,h,f,g,y){let v=!0;return g.smart_rendering&&(v=be(u,h,f)),v}function d(u,h,f,g){const y=r.copy(r.getTask(h.id));if(y.$rendered_at=u.id,r.callEvent("onBeforeRollupTaskDisplay",[y.id,y,u.id])===!1)return;const v=s(y,f);if(!v)return;const b=f.getBarHeight(u.id,h.type==r.config.types.milestone),_=Math.floor((f.getItemHeight(u.id)-b)/2);return v.style.top=g.top+_+"px",v.classList.add("gantt_rollup_child"),v.setAttribute("data-rollup-parent-id",u.id),v}function c(u,h){return u+"_"+h}return{render:function(u,h,f,g){if(u.rollup!==!1&&u.$rollup&&u.$rollup.length){const y=document.createElement("div"),v=r.getTaskPosition(u);return g&&(g.y=0,g.y_end=r.$task_bg.scrollHeight),u.$rollup.forEach(function(b){if(!r.isTaskExists(b))return;const _=r.getTask(b);if(!l(_,g,h,f))return;const m=d(u,_,h,v);m?(o[c(_.id,u.id)]=m,y.appendChild(m)):o[c(_.id,u.id)]=!1}),y}return!1},update:function(u,h,f,g,y){const v=document.createElement("div"),b=r.getTaskPosition(u);y.y=0,y.y_end=r.$task_bg.scrollHeight,u.$rollup.forEach(function(_){const m=r.getTask(_),p=c(m.id,u.id);let k=l(m,y,f,g);if(k!==!!o[p])if(k){const $=d(u,m,f,b);o[p]=$||!1}else o[p]=!1;o[p]&&v.appendChild(o[p]),h.innerHTML="",h.appendChild(v)})},isInViewPort:be,getVisibleRange:pt}}(t)},taskSplitBar:function(){return Dt()},taskConstraints:function(){return Dt()},taskDeadline:function(){return Dt()},taskBaselines:function(){return Dt()},link:function(){return Za(t)},resourceRow:function(){return function(r){var s=tr(r),o={};function l(c,u,h,f,g){var y=h.resource_cell_class(u.start_date,u.end_date,c,u.tasks,u.assignments),v=h.resource_cell_value(u.start_date,u.end_date,c,u.tasks,u.assignments),b=g.getItemHeight(c.id)-1;if(y||v){var _=g.getItemPosition(c,u.start_date,u.end_date),m=document.createElement("div");return m.setAttribute(g.$config.item_attribute,c.id),m.className=["gantt_resource_marker",y].join(" "),m.style.cssText=["left:"+_.left+"px","width:"+_.width+"px","height:"+b+"px","line-height:"+b+"px","top:"+_.top+"px"].join(";"),v&&(m.innerHTML=v),m}return null}function d(c,u){o[c]&&o[c][u]&&o[c][u].parentNode&&o[c][u].parentNode.removeChild(o[c][u])}return{render:function(c,u,h,f){var g=u.$getTemplates(),y=u.getScale(),v=s(c,h.resource_property,u.getScale(),u),b=!!f,_=[];o[c.id]={};for(var m=Wt(y,f),p=m.start;p<=m.end;p++){var k=v[p];if(k&&(!b||ie(p,y,f,r))){var $=l(c,k,g,0,u);$&&(_.push($),o[c.id][p]=$)}}var w=null;if(_.length){w=document.createElement("div");for(var x=0;x<_.length;x++)w.appendChild(_[x])}return w},update:function(c,u,h,f,g){var y=h.$getTemplates(),v=h.getScale(),b=s(c,f.resource_property,h.getScale(),h),_=Wt(v,g),m={};if(o&&o[c.id])for(var p in o[c.id])m[p]=p;for(var k=_.start;k<=_.end;k++){var $=b[k];if(m[k]=!1,$)if(ie(k,v,g,r))if(o[c.id]&&o[c.id][k])o[c.id]&&o[c.id][k]&&!o[c.id][k].parentNode&&u.appendChild(o[c.id][k]);else{var w=l(c,$,y,0,h);w&&(u.appendChild(w),o[c.id][k]=w)}else d(c.id,k)}for(var p in m)m[p]!==!1&&d(c.id,p)},getRectangle:Ze,getVisibleRange:pt}}(t)},resourceHistogram:function(){return Dt()},gridTaskRowResizer:function(){return function(r){return{render:function(s,o,l){var d=o.$getConfig(),c=document.createElement("div");return c.className="gantt_task_grid_row_resize_wrap",c.style.top=o.getItemTop(s.id)+o.getItemHeight(s.id)+"px",c.innerHTML="<div class='gantt_task_grid_row_resize' role='cell'></div>",c.setAttribute(d.task_grid_row_resizer_attribute,s.id),r._waiAria.rowResizerAttr(c),c},update:null,getRectangle:Yt,getVisibleRange:pt}}(t)}},layersService:{getDataRender:function(r){return n.getDataRender(r,t)},createDataRender:function(r){return n.createDataRender(r,t)}}}}};function re(t,e){const i=getComputedStyle(e.$root).getPropertyValue("--dhx-gantt-theme");let n,a=!!i;if(a)n=i;else{var r=e.skin;if(n=r,!r||t)for(var s=document.getElementsByTagName("link"),o=0;o<s.length;o++){var l=s[o].href.match("dhtmlxgantt_([a-z_]+).css");if(l&&(e.skins[l[1]]||!r)){n=l[1];break}}}e._theme_info={theme:n,cssVarTheme:a},e.skin=n||"terrace";var d=e.skins[e.skin]||e.skins.terrace;(function(h,f,g){for(var y in f)(h[y]===void 0||g)&&(h[y]=f[y])})(e.config,d.config,t),a||(e.config.link_radius=1);var c=e.getGridColumns();for(c[1]&&!e.defined(c[1].width)&&(c[1].width=d._second_column_width),c[2]&&!e.defined(c[2].width)&&(c[2].width=d._third_column_width),o=0;o<c.length;o++){var u=c[o];u.name=="add"&&(u.width||(u.width=44),e.defined(u.min_width)&&e.defined(u.max_width)||(u.min_width=u.min_width||u.width,u.max_width=u.max_width||u.width),u.min_width&&(u.min_width=+u.min_width),u.max_width&&(u.max_width=+u.max_width),u.width&&(u.width=+u.width,u.width=u.min_width&&u.min_width>u.width?u.min_width:u.width,u.width=u.max_width&&u.max_width<u.width?u.max_width:u.width))}d.config.task_height&&(e.config.task_height=d.config.task_height||"full"),d.config.bar_height&&(e.config.bar_height=d.config.bar_height||"full"),d._lightbox_template&&(e._lightbox_template=d._lightbox_template),d._redefine_lightbox_buttons&&(e.config.buttons_right=d._redefine_lightbox_buttons.buttons_right,e.config.buttons_left=d._redefine_lightbox_buttons.buttons_left),e.resetLightbox()}function cr(t){var e=50,i=30,n=10,a=50,r=null,s=!1,o=null,l={started:!1},d={};function c(b){return b&&G(b,t.$root)&&b.offsetHeight}function u(){var b=!!document.querySelector(".gantt_drag_marker"),_=!!document.querySelector(".gantt_drag_marker.gantt_grid_resize_area")||!!document.querySelector(".gantt_drag_marker.gantt_row_grid_resize_area"),m=!!document.querySelector(".gantt_link_direction"),p=t.getState(),k=p.autoscroll;return s=b&&!_&&!m,!(!p.drag_mode&&!b||_)||k}function h(b){if(o&&(clearTimeout(o),o=null),b){var _=t.config.autoscroll_speed;_&&_<10&&(_=10),o=setTimeout(function(){r=setInterval(y,_||a)},t.config.autoscroll_delay||n)}}function f(b){b?(h(!0),l.started||(l.x=d.x,l.y=d.y,l.started=!0)):(r&&(clearInterval(r),r=null),h(!1),l.started=!1)}function g(b){var _=u();if(!r&&!o||_||f(!1),!t.config.autoscroll||!_)return!1;d={x:b.clientX,y:b.clientY},b.type=="touchmove"&&(d.x=b.targetTouches[0].clientX,d.y=b.targetTouches[0].clientY),!r&&_&&f(!0)}function y(){if(!u())return f(!1),!1;var b=c(t.$task)?t.$task:c(t.$grid)?t.$grid:t.$root;if(b){var _=!1;[".gantt_drag_marker.gantt_grid_resize_area",".gantt_drag_marker .gantt_row.gantt_row_task",".gantt_drag_marker.gantt_grid_dnd_marker"].forEach(function(M){_=_||!!document.querySelector(M)}),_&&(b=t.$grid);var m=F(b),p=d.x-m.x,k=d.y-m.y+window.scrollY,$=s?0:v(p,m.width,l.x-m.x),w=v(k,m.height,l.y-m.y+window.scrollY),x=t.getScrollState(),S=x.y,T=x.inner_height,E=x.height,C=x.x,D=x.inner_width,A=x.width;(w&&!T||w<0&&!S||w>0&&S+T>=E+2)&&(w=0),($&&!D||$<0&&!C||$>0&&C+D>=A)&&($=0);var I=t.config.autoscroll_step;I&&I<2&&(I=2),w*=I||i,(($*=I||i)||w)&&function(M,L){var P=t.getScrollState(),H=null,V=null;M&&(H=P.x+M,H=Math.min(P.width,H),H=Math.max(0,H)),L&&(V=P.y+L,V=Math.min(P.height,V),V=Math.max(0,V)),t.scrollTo(H,V)}($,w)}}function v(b,_,m){return b-e<0&&b<m?-1:b>_-e&&b>m?1:0}t.attachEvent("onGanttReady",function(){if(!W(t)){var b=kt(t.$root)||document.body;t.eventRemove(b,"mousemove",g),t.event(b,"mousemove",g),t.eventRemove(b,"touchmove",g),t.event(b,"touchmove",g),t.eventRemove(b,"pointermove",g),t.event(b,"pointermove",g)}}),t.attachEvent("onDestroy",function(){f(!1)})}var se,oe;window.jQuery&&(se=window.jQuery,oe=[],se.fn.dhx_gantt=function(t){if(typeof(t=t||{})!="string"){var e=[];return this.each(function(){if(this&&this.getAttribute)if(this.gantt||window.gantt.$root==this)e.push(typeof this.gantt=="object"?this.gantt:window.gantt);else{var i=window.gantt.$container&&window.Gantt?window.Gantt.getGanttInstance():window.gantt;for(var n in t)n!="data"&&(i.config[n]=t[n]);i.init(this),t.data&&i.parse(t.data),e.push(i)}}),e.length===1?e[0]:e}if(oe[t])return oe[t].apply(this,[]);se.error("Method "+t+" does not exist on jQuery.dhx_gantt")});const ur=null;window.dhtmlx&&(window.dhtmlx.attaches||(window.dhtmlx.attaches={}),window.dhtmlx.attaches.attachGantt=function(t,e,i){var n=document.createElement("DIV");i=i||window.gantt,n.id="gantt_"+i.uid(),n.style.width="100%",n.style.height="100%",n.cmp="grid",document.body.appendChild(n),this.attachObject(n.id),this.dataType="gantt",this.dataObj=i;var a=this.vs[this.av];return a.grid=i,i.init(n.id,t,e),n.firstChild.style.border="none",a.gridId=n.id,a.gridObj=n,this.vs[this._viewRestore()].grid}),window.dhtmlXCellObject!==void 0&&(window.dhtmlXCellObject.prototype.attachGantt=function(t,e,i){i=i||window.gantt;var n=document.createElement("DIV");return n.id="gantt_"+i.uid(),n.style.width="100%",n.style.height="100%",n.cmp="grid",document.body.appendChild(n),this.attachObject(n.id),this.dataType="gantt",this.dataObj=i,i.init(n.id,t,e),n.firstChild.style.border="none",n=null,this.callEvent("_onContentAttach",[]),this.dataObj});const hr=null,_r=["ctrlKey","altKey","shiftKey","metaKey"],fr=[[{unit:"month",date:"%M",step:1},{unit:"day",date:"%d",step:1}],[{unit:"day",date:"%d %M",step:1}],[{unit:"day",date:"%d %M",step:1},{unit:"hour",date:"%H:00",step:8}],[{unit:"day",date:"%d %M",step:1},{unit:"hour",date:"%H:00",step:1}]];class gr{constructor(e){this.zoomIn=()=>{const i=this.getCurrentLevel()-1;i<0||this.setLevel(i)},this.zoomOut=()=>{const i=this.getCurrentLevel()+1;i>this._levels.length-1||this.setLevel(i)},this.getCurrentLevel=()=>this._activeLevelIndex,this.getLevels=()=>this._levels,this.setLevel=i=>{const n=this._getZoomIndexByName(i);n===-1&&this.$gantt.assert(n!==-1,"Invalid zoom level for gantt.ext.zoom.setLevel. "+i+" is not an expected value."),this._setLevel(n,0)},this._getZoomIndexByName=i=>{let n=-1;if(typeof i=="string"){if(!isNaN(Number(i))&&this._levels[Number(i)])n=Number(i);else for(let a=0;a<this._levels.length;a++)if(this._levels[a].name===i){n=a;break}}else n=i;return n},this._getVisibleDate=()=>{if(!this.$gantt.$task)return null;const i=this.$gantt.getScrollState().x,n=this.$gantt.$task.offsetWidth;this._visibleDate=this.$gantt.dateFromPos(i+n/2)},this._setLevel=(i,n)=>{this._activeLevelIndex=i;const a=this.$gantt,r=a.copy(this._levels[this._activeLevelIndex]),s=a.copy(r);if(delete s.name,a.mixin(a.config,s,!0),["resourceTimeline","resourceHistogram"].forEach(function(o){const l=a.$ui.getView(o);if(l){const d=l.$getConfig();d.fixed_scales||a.mixin(d,s,!0)}}),a.$root&&a.$task){if(n){const o=this.$gantt.dateFromPos(n+this.$gantt.getScrollState().x);this.$gantt.render();const l=this.$gantt.posFromDate(o);this.$gantt.scrollTo(l-n)}else{const o=this.$gantt.$task.offsetWidth;this._visibleDate||this._getVisibleDate();const l=this._visibleDate;this.$gantt.render();const d=this.$gantt.posFromDate(l);this.$gantt.scrollTo(d-o/2)}this.callEvent("onAfterZoom",[this._activeLevelIndex,r])}},this._attachWheelEvent=i=>{const n=vt.isFF?"wheel":"mousewheel";let a;a=typeof i.element=="function"?i.element():i.element,a&&this._domEvents.attach(a,n,this.$gantt.bind(function(r){if(this._useKey&&(_r.indexOf(this._useKey)<0||!r[this._useKey]))return!1;if(typeof this._handler=="function")return this._handler.apply(this,[r]),!0},this),{passive:!1})},this._defaultHandler=i=>{const n=this.$gantt.$task.getBoundingClientRect().x,a=i.clientX-n;let r=!1;(this.$gantt.env.isFF?-40*i.deltaY:i.wheelDelta)>0&&(r=!0),i.preventDefault(),i.stopPropagation(),this._setScaleSettings(r,a)},this._setScaleDates=()=>{this._initialStartDate&&this._initialEndDate&&(this.$gantt.config.start_date=this._initialStartDate,this.$gantt.config.end_date=this._initialEndDate)},this.$gantt=e,this._domEvents=this.$gantt._createDomEventScope()}init(e){this.$gantt.env.isNode||(this._initialStartDate=e.startDate,this._initialEndDate=e.endDate,this._activeLevelIndex=e.activeLevelIndex?e.activeLevelIndex:0,this._levels=this._mapScales(e.levels||fr),this._handler=e.handler||this._defaultHandler,this._minColumnWidth=e.minColumnWidth||60,this._maxColumnWidth=e.maxColumnWidth||240,this._widthStep=e.widthStep||3/8*e.minColumnWidth,this._useKey=e.useKey,this._initialized||(ot(this),this.$gantt.attachEvent("onGanttScroll",()=>{this._getVisibleDate()})),this._domEvents.detachAll(),e.trigger==="wheel"&&(this.$gantt.$root?this._attachWheelEvent(e):this.$gantt.attachEvent("onGanttReady",()=>{this._attachWheelEvent(e)})),this._initialized=!0,this.setLevel(this._activeLevelIndex))}_mapScales(e){return e.map(i=>Array.isArray(i)?{scales:i}:i)}_setScaleSettings(e,i){e?this._stepUp(i):this._stepDown(i)}_stepUp(e){if(this._activeLevelIndex>=this._levels.length-1)return;let i=this._activeLevelIndex;if(this._setScaleDates(),this._widthStep){let n=this.$gantt.config.min_column_width+this._widthStep;n>this._maxColumnWidth&&(n=this._minColumnWidth,i++),this.$gantt.config.min_column_width=n}else i++;this._setLevel(i,e)}_stepDown(e){if(this._activeLevelIndex<1)return;let i=this._activeLevelIndex;if(this._setScaleDates(),this._widthStep){let n=this.$gantt.config.min_column_width-this._widthStep;n<this._minColumnWidth&&(n=this._maxColumnWidth,i--),this.$gantt.config.min_column_width=n}else i--;this._setLevel(i,e)}}function pr(t){function e(){if(t.config.touch!="force"&&(t.config.touch=t.config.touch&&(navigator.userAgent.indexOf("Mobile")!=-1||navigator.userAgent.indexOf("iPad")!=-1||navigator.userAgent.indexOf("Android")!=-1||navigator.userAgent.indexOf("Touch")!=-1)||navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1),t.config.touch){var r=!0;try{document.createEvent("TouchEvent")}catch{r=!1}r?t._touch_events(["touchmove","touchstart","touchend"],function(s){return s.touches&&s.touches.length>1?null:s.touches[0]?{target:s.target,pageX:s.touches[0].pageX,pageY:s.touches[0].pageY,clientX:s.touches[0].clientX,clientY:s.touches[0].clientY}:s},function(){return!1}):window.navigator.pointerEnabled?t._touch_events(["pointermove","pointerdown","pointerup"],function(s){return s.pointerType=="mouse"?null:s},function(s){return!s||s.pointerType=="mouse"}):window.navigator.msPointerEnabled&&t._touch_events(["MSPointerMove","MSPointerDown","MSPointerUp"],function(s){return s.pointerType==s.MSPOINTER_TYPE_MOUSE?null:s},function(s){return!s||s.pointerType==s.MSPOINTER_TYPE_MOUSE})}}function i(r){var s=r.$config.scrollX?t.$ui.getView(r.$config.scrollX):null,o=r.$config.scrollY?t.$ui.getView(r.$config.scrollY):null,l={x:null,y:null};return s&&s.getScrollState().visible&&(l.x=s.$view.scrollLeft),o&&o.getScrollState().visible&&(l.y=o.$view.scrollTop),l}function n(){var r;return t.$ui.getView("timeline")&&(r=t.$ui.getView("timeline")._tasks_dnd),r}t.config.touch_drag=75,t.config.touch=!0,t.config.touch_feedback=!0,t.config.touch_feedback_duration=1,t._prevent_touch_scroll=!1,t._touch_feedback=function(){t.config.touch_feedback&&navigator.vibrate&&navigator.vibrate(t.config.touch_feedback_duration)},t.attachEvent("onGanttReady",function(){t.$container&&e()}),t.attachEvent("onGanttLayoutReady",function(){t.$container&&t.attachEvent("onGanttRender",e,{once:!0})});var a=[];t._touch_events=function(r,s,o){var l,d=0,c=!1,u=!1,h=null,f=null,g=null,y=[],v=null;let b={};for(var _=0;_<a.length;_++)t.eventRemove(a[_][0],a[_][1],a[_][2]);(a=[]).push([t.$container,r[0],function(p){var k=n();if(!o(p)&&c){f&&clearTimeout(f);var $=s(p);if(k&&(k.drag.id||k.drag.start_drag))return k.on_mouse_move($),p.preventDefault&&p.preventDefault(),p.cancelBubble=!0,!1;if(!t._prevent_touch_scroll){if($&&h){var w=h.pageX-$.pageX,x=h.pageY-$.pageY;if(!u&&(Math.abs(w)>5||Math.abs(x)>5)&&(u=!0,d=0,l=v?i(v):t.getScrollState()),u){var S,T=l.x+w,E=l.y+x;if(v?(function(C,D,A){var I=C.$config.scrollX?t.$ui.getView(C.$config.scrollX):null,M=C.$config.scrollY?t.$ui.getView(C.$config.scrollY):null;I&&I.scrollTo(D,null),M&&M.scrollTo(null,A)}(v,T,E),S=i(v)):(t.scrollTo(T,E),S=t.getScrollState()),l.x!=S.x&&x>2*w||l.y!=S.y&&w>2*x)return m(p)}}return m(p)}return!0}}]);try{document.addEventListener("touchmove",function(p){t._touch_drag&&m(p)},{passive:!1})}catch{console.warn("Cannot prevent touch event for the page drag")}for(a.push([this.$container,"contextmenu",function(p){if(c)return m(p)}]),a.push([this.$container,r[1],function(p){if(b=p.touches.length,document&&document.body&&document.body.classList.add("gantt_touch_active"),!o(p))if(p.touches&&p.touches.length>1)c=!1;else{h=s(p),v=function($){for(var w=t.$layout.getCellsByType("viewCell"),x=0;x<w.length;x++){var S=w[x].$view.getBoundingClientRect();if($.clientX>=S.left&&$.clientX<=S.right&&$.clientY<=S.bottom&&$.clientY>=S.top)return w[x]}}(h),t._locate_css(h,"gantt_hor_scroll")||t._locate_css(h,"gantt_ver_scroll")||(c=!0);var k=n();f=setTimeout(function(){var $=t.locate(h);k&&$&&!t._locate_css(h,"gantt_link_control")&&!t._locate_css(h,"gantt_grid_data")&&(k.on_mouse_down(h),k.drag&&k.drag.start_drag&&(function(w){const x=t._getTaskLayers();let S=t.getTask(w);if(S){let T=t.isTaskVisible(w);if(T){g=w;for(let E=0;E<x.length;E++)if(S=x[E].rendered[w],S&&S.getAttribute(t.config.task_attribute)&&S.getAttribute(t.config.task_attribute)==w){const C=S.cloneNode(!0);y.push(S),x[E].rendered[w]=C,S.style.display="none",C.className+=" gantt_drag_move ",S.parentNode.appendChild(C)}}else if(S.$split_subtask){let E=S.$rendered_parent;if(T=t.isTaskVisible(E),!T)return;g=w;for(let C=0;C<x.length;C++){const D=x[C].rendered[E];let A;if(D&&D.childNodes&&(A=D.querySelector(`[${t.config.task_attribute}="${S.id}"]`)),A){const I=A.cloneNode(!0);A.parentNode.appendChild(I),t.$task_bars.appendChild(A),A.style.display="none",y.push(A),A=null}}}}}($),k._start_dnd(h),t._touch_drag=!0,t.refreshTask($),t._touch_feedback())),f=null},t.config.touch_drag)}}]),a.push([this.$container,r[2],function(p){if(document&&document.body&&document.body.classList.remove("gantt_touch_active"),!o(p)){f&&clearTimeout(f),t._touch_drag=!1,c=!1;var k=s(p),$=n();if($&&$.on_mouse_up(k),g&&t.isTaskExists(g)&&(t.refreshTask(g),y.length&&(y.forEach(function(x){x.parentNode&&x.parentNode.removeChild(x)}),t._touch_feedback())),c=u=!1,y=[],g=null,h&&d){var w=new Date;w-d<500&&b<=1?(t.$services.getService("mouseEvents").onDoubleClick(h),m(p)):d=w}else d=new Date}}]),_=0;_<a.length;_++)t.event(a[_][0],a[_][1],a[_][2]);function m(p){return p&&p.preventDefault&&p.cancelable&&p.preventDefault(),p.cancelBubble=!0,!1}}}function Ft(){console.log("Method is not implemented.")}function Nt(){}function ht(t){return Nt}Nt.prototype.render=Ft,Nt.prototype.set_value=Ft,Nt.prototype.get_value=Ft,Nt.prototype.focus=Ft;var Ei={getHtmlSelect:function(t,e,i){var n="",a=this;return yt(t=t||[],function(r){var s=[{key:"value",value:r.key}];i==r.key&&(s[s.length]={key:"selected",value:"selected"}),r.attributes&&(s=s.concat(r.attributes)),n+=a.getHtmlOption({innerHTML:r.label},s)}),At("select",{innerHTML:n},e)},getHtmlOption:function(t,e){return At("option",t,e)},getHtmlButton:function(t,e){return At("button",t,e)},getHtmlDiv:function(t,e){return At("div",t,e)},getHtmlLabel:function(t,e){return At("label",t,e)},getHtmlInput:function(t){return"<input"+Ci(t||[])+">"}};function At(t,e,i){return e=e||[],"<"+t+Ci(i||[])+">"+(e.innerHTML||"")+"</"+t+">"}function Ci(t){var e="";return yt(t,function(i){e+=" "+i.key+"='"+i.value+"'"}),e}function qt(t){const e=ht();function i(){return e.apply(this,arguments)||this}return z(i,e),i.prototype.render=function(n){const a=n.height?`height:${n.height}px;`:"";let r=`<div class='gantt_cal_ltext gantt_section_${n.name}' ${a?`style='${a}'`:""}>`;return r+=Ei.getHtmlSelect(n.options,[{key:"style",value:"width:100%;"},{key:"title",value:n.name}]),r+="</div>",r},i.prototype.set_value=function(n,a,r,s){var o=n.firstChild;!o._dhx_onchange&&s.onchange&&(o.onchange=s.onchange,o._dhx_onchange=!0),a===void 0&&(a=(o.options[0]||{}).value),o.value=a||""},i.prototype.get_value=function(n){return n.firstChild.value},i.prototype.focus=function(n){var a=n.firstChild;t._focus(a,!0)},i}function mr(t){var e=qt(t);function i(){return e.apply(this,arguments)||this}function n(a,r){var s=[],o=[];r&&(s=t.getTaskByTime(),a.allow_root&&s.unshift({id:t.config.root_id,text:a.root_label||""}),s=function(u,h,f){var g=h.filter||function(){return!0};u=u.slice(0);for(var y=0;y<u.length;y++){var v=u[y];(v.id==f||t.isChildOf(v.id,f)||g(v.id,v)===!1)&&(u.splice(y,1),y--)}return u}(s,a,r),a.sort&&s.sort(a.sort));for(var l=a.template||t.templates.task_text,d=0;d<s.length;d++){var c=l.apply(t,[s[d].start_date,s[d].end_date,s[d]]);c===void 0&&(c=""),o.push({key:s[d].id,label:c})}return a.options=o,a.map_to=a.map_to||"parent",t.form_blocks.select.render.apply(this,arguments)}return z(i,e),i.prototype.render=function(a){return n(a,!1)},i.prototype.set_value=function(a,r,s,o){r===0&&(r="0");var l=document.createElement("div");l.innerHTML=n(o,s.id);var d=l.removeChild(l.firstChild);return a.onselect=null,a.parentNode.replaceChild(d,a),t.form_blocks.select.set_value.apply(t,[d,r,s,o])},i}function vr(t){var e=function(){const _=ht();function m(){return _.apply(this,arguments)||this}return z(m,_),m.prototype.render=function(p){let k=p.height?`${p.height}px`:"";return`<div class='gantt_cal_ltext gantt_cal_template gantt_section_${p.name}' ${k?`style='height:${k};'`:""}></div>`},m.prototype.set_value=function(p,k){p.innerHTML=k||""},m.prototype.get_value=function(p){return p.innerHTML||""},m.prototype.focus=function(){},m}(),i=function(_){const m=ht();function p(){return m.apply(this,arguments)||this}return z(p,m),p.prototype.render=function(k){const $=(k.height||"130")+"px",w=k.placeholder?`placeholder='${k.placeholder}'`:"";return`<div class='gantt_cal_ltext gantt_section_${k.name}' style='height:${$};' ${w}><textarea></textarea></div>`},p.prototype.set_value=function(k,$){_.form_blocks.textarea._get_input(k).value=$||""},p.prototype.get_value=function(k){return _.form_blocks.textarea._get_input(k).value},p.prototype.focus=function(k){var $=_.form_blocks.textarea._get_input(k);_._focus($,!0)},p.prototype._get_input=function(k){return k.querySelector("textarea")},p}(t),n=function(_){const m=ht();function p(){return m.apply(this,arguments)||this}return z(p,m),p.prototype.render=function(k){var $=_.form_blocks.getTimePicker.call(this,k);let w="gantt_section_time";k.name!=="time"&&(w+=" gantt_section_"+k.name);var x="<div style='padding-top:0px;font-size:inherit;text-align:center;' class='"+w+"'>";return x+=$,k.single_date?($=_.form_blocks.getTimePicker.call(this,k,!0),x+="<span></span>"):x+="<span class='gantt_section_time_spacer'> &nbsp;&ndash;&nbsp; </span>",(x+=$)+"</div>"},p.prototype.set_value=function(k,$,w,x){var S=x,T=k.getElementsByTagName("select"),E=x._time_format_order;if(S.auto_end_date)for(var C=function(){I=new Date(T[E[2]].value,T[E[1]].value,T[E[0]].value,0,0),M=_.calculateEndDate({start_date:I,duration:1,task:w}),_.form_blocks._fill_lightbox_select(T,E.size,M,E,S)},D=0;D<4;D++)T[D].onchange=C;var A=_._resolve_default_mapping(x);typeof A=="string"&&(A={start_date:A});var I=w[A.start_date]||new Date,M=w[A.end_date]||_.calculateEndDate({start_date:I,duration:1,task:w});_.form_blocks._fill_lightbox_select(T,0,I,E,S),_.form_blocks._fill_lightbox_select(T,E.size,M,E,S)},p.prototype.get_value=function(k,$,w){var x,S=k.getElementsByTagName("select"),T=w._time_format_order;return x=_.form_blocks.getTimePickerValue(S,w),typeof _._resolve_default_mapping(w)=="string"?x:{start_date:x,end_date:function(E,C,D){var A=_.form_blocks.getTimePickerValue(E,w,C.size);return A<=D&&(w.autofix_end!==!1||w.single_date)?_.date.add(D,_._get_timepicker_step(),"minute"):A}(S,T,x)}},p.prototype.focus=function(k){_._focus(k.getElementsByTagName("select")[0])},p}(t),a=qt(t),r=function(_){var m=ht();function p(){return m.apply(this,arguments)||this}return z(p,m),p.prototype.render=function(k){const $=k.height?`height:${k.height}px;`:"";let w=`<div class='gantt_cal_ltext gantt_cal_lcheckbox gantt_section_${k.name}' ${$?`style='${$}'`:""}>`;if(k.options&&k.options.length)for(var x=0;x<k.options.length;x++)w+="<label><input type='checkbox' value='"+k.options[x].key+"' name='"+k.name+"'>"+k.options[x].label+"</label>";else k.single_value=!0,w+="<label><input type='checkbox' name='"+k.name+"'></label>";return w+="</div>",w},p.prototype.set_value=function(k,$,w,x){var S=Array.prototype.slice.call(k.querySelectorAll("input[type=checkbox]"));!k._dhx_onchange&&x.onchange&&(k.onchange=x.onchange,k._dhx_onchange=!0),x.single_value?S[0].checked=!!$:yt(S,function(T){T.checked=!!$&&$.indexOf(T.value)>=0})},p.prototype.get_value=function(k,$,w){return w.single_value?k.querySelector("input[type=checkbox]").checked:function(x,S){if(x.map)return x.map(S);for(var T=x.slice(),E=[],C=0;C<T.length;C++)E.push(S(T[C],C));return E}(Array.prototype.slice.call(k.querySelectorAll("input[type=checkbox]:checked")),function(x){return x.value})},p.prototype.focus=function(k){_._focus(k.querySelector("input[type=checkbox]"))},p}(t),s=function(_){const m=ht();function p(){return m.apply(this,arguments)||this}return z(p,m),p.prototype.render=function(k){const $=k.height?`${k.height}px`:"";let w=`<div class='gantt_cal_ltext gantt_cal_lradio gantt_section_${k.name}' ${$?`style='height:${$};'`:""}>`;if(k.options&&k.options.length)for(var x=0;x<k.options.length;x++)w+="<label><input type='radio' value='"+k.options[x].key+"' name='"+k.name+"'>"+k.options[x].label+"</label>";return w+="</div>",w},p.prototype.set_value=function(k,$,w,x){var S;x.options&&x.options.length&&(S=k.querySelector("input[type=radio][value='"+$+"']")||k.querySelector("input[type=radio][value='"+x.default_value+"']"))&&(!k._dhx_onchange&&x.onchange&&(k.onchange=x.onchange,k._dhx_onchange=!0),S.checked=!0)},p.prototype.get_value=function(k,$){var w=k.querySelector("input[type=radio]:checked");return w?w.value:""},p.prototype.focus=function(k){_._focus(k.querySelector("input[type=radio]"))},p}(t),o=function(_){var m=ht();function p(){return m.apply(this,arguments)||this}function k(x){return x.formatter||new pe}function $(x,S){var T=x.getElementsByTagName("select"),E=S._time_format_order,C=0,D=0;if(_.defined(E[3])){var A=T[E[3]],I=parseInt(A.value,10);isNaN(I)&&A.hasAttribute("data-value")&&(I=parseInt(A.getAttribute("data-value"),10)),C=Math.floor(I/60),D=I%60}return new Date(T[E[2]].value,T[E[1]].value,T[E[0]].value,C,D)}function w(x,S){var T=x.getElementsByTagName("input")[1];return(T=k(S).parse(T.value))&&!window.isNaN(T)||(T=1),T<0&&(T*=-1),T}return z(p,m),p.prototype.render=function(x){var S="<div class='gantt_time_selects'>"+_.form_blocks.getTimePicker.call(this,x)+"</div>",T=" "+_.locale.labels[_.config.duration_unit+"s"]+" ",E=x.single_date?" style='display:none'":"",C=x.readonly?" disabled='disabled'":"",D=_._waiAria.lightboxDurationInputAttrString(x),A="gantt_duration_value";x.formatter&&(T="",A+=" gantt_duration_value_formatted");var I="<div class='gantt_duration' "+E+"><div class='gantt_duration_inputs'><input type='button' class='gantt_duration_dec' value='−'"+C+"><input type='text' value='5days' class='"+A+"'"+C+" "+D+"><input type='button' class='gantt_duration_inc' value='+'"+C+"></div><div class='gantt_duration_end_date'>"+T+"<span></span></div></div></div>";let M="gantt_section_time gantt_section_duration";return x.name!=="time"&&(M+=" gantt_section_"+x.name),"<div style='padding-top:0px;font-size:inherit;' class='"+M+"'>"+S+" "+I+"</div>"},p.prototype.set_value=function(x,S,T,E){var C,D,A,I,M=x.getElementsByTagName("select"),L=x.getElementsByTagName("input"),P=L[1],H=[L[0],L[2]],V=x.getElementsByTagName("span")[0],_t=E._time_format_order;function O(){var Y=$.call(_,x,E),B=w.call(_,x,E),ft=_.calculateEndDate({start_date:Y,duration:B,task:T}),Et=_.templates.task_end_date||_.templates.task_date;V.innerHTML=Et(ft)}function Q(Y){var B=P.value;B=k(E).parse(B),window.isNaN(B)&&(B=0),(B+=Y)<1&&(B=1),P.value=k(E).format(B),O()}H[0].onclick=_.bind(function(){Q(-1*_.config.duration_step)},this),H[1].onclick=_.bind(function(){Q(1*_.config.duration_step)},this),M[0].onchange=O,M[1].onchange=O,M[2].onchange=O,M[3]&&(M[3].onchange=O),P.onkeydown=_.bind(function(Y){var B;return(B=(Y=Y||window.event).charCode||Y.keyCode||Y.which)==_.constants.KEY_CODES.DOWN?(Q(-1*_.config.duration_step),!1):B==_.constants.KEY_CODES.UP?(Q(1*_.config.duration_step),!1):void window.setTimeout(O,1)},this),P.onchange=_.bind(O,this),typeof(C=_._resolve_default_mapping(E))=="string"&&(C={start_date:C}),D=T[C.start_date]||new Date,A=T[C.end_date]||_.calculateEndDate({start_date:D,duration:1,task:T}),I=Math.round(T[C.duration])||_.calculateDuration({start_date:D,end_date:A,task:T}),I=k(E).format(I),_.form_blocks._fill_lightbox_select(M,0,D,_t,E),P.value=I,O()},p.prototype.get_value=function(x,S,T){var E=$(x,T),C=w(x,T),D=_.calculateEndDate({start_date:E,duration:C,task:S});return typeof _._resolve_default_mapping(T)=="string"?E:{start_date:E,end_date:D,duration:C}},p.prototype.focus=function(x){_._focus(x.getElementsByTagName("select")[0])},p}(t),l=mr(t),d=qt(t),c=function(_){var m=ht();function p(){return m.apply(this,arguments)||this}function k(w){return!w||w===_.config.constraint_types.ASAP||w===_.config.constraint_types.ALAP}function $(w,x){for(var S=k(x),T=0;T<w.length;T++)w[T].disabled=S}return z(p,m),p.prototype.render=function(w){const x=w.height?`height:${w.height}px;`:"";let S=`<div class='gantt_cal_ltext gantt_section_${w.name}' ${x?`style='${x}'`:""}>`;var T=[];for(var E in _.config.constraint_types)T.push({key:_.config.constraint_types[E],label:_.locale.labels[_.config.constraint_types[E]]});return w.options=w.options||T,S+="<span data-constraint-type-select>"+Ei.getHtmlSelect(w.options,[{key:"data-type",value:"constraint-type"}])+"</span>",S+="<label data-constraint-time-select>"+(_.locale.labels.constraint_date||"Constraint date")+": "+_.form_blocks.getTimePicker.call(this,w)+"</label>",S+="</div>",S},p.prototype.set_value=function(w,x,S,T){var E=w.querySelector("[data-constraint-type-select] select"),C=w.querySelectorAll("[data-constraint-time-select] select"),D=T._time_format_order,A=_._resolve_default_mapping(T);E._eventsInitialized||(E.addEventListener("change",function(L){$(C,L.target.value)}),E._eventsInitialized=!0);var I=S[A.constraint_date]||new Date;_.form_blocks._fill_lightbox_select(C,0,I,D,T);var M=S[A.constraint_type]||_.getConstraintType(S);E.value=M,$(C,M)},p.prototype.get_value=function(w,x,S){var T=w.querySelector("[data-constraint-type-select] select"),E=w.querySelectorAll("[data-constraint-time-select] select"),C=T.value,D=null;return k(C)||(D=_.form_blocks.getTimePickerValue(E,S)),{constraint_type:C,constraint_date:D}},p.prototype.focus=function(w){_._focus(w.querySelector("select"))},p}(t),u=function(_){const m=qt(_);function p(){return m.apply(this,arguments)||this}return z(p,m),p.prototype.render=function(k){var $=_.config.types,w=_.locale.labels,x=[],S=k.filter||function(C,D){return!$.placeholder||D!==$.placeholder};for(var T in $)!S(T,$[T])==0&&x.push({key:$[T],label:w["type_"+T]});k.options=x;var E=k.onchange;return k.onchange=function(){_._lightbox_current_type=this.value,_.changeLightboxType(this.value),typeof E=="function"&&E.apply(this,arguments)},m.prototype.render.apply(this,arguments)},p}(t),h=function(_){var m=ht();function p(){return m.apply(this,arguments)||this}function k(S){return S.formatter||new pe}function $(S,T,E,C){const D="<div class='gantt_time_selects'>"+_.form_blocks.getTimePicker.call(_,C)+"</div>";let A=" "+_.locale.labels[_.config.duration_unit+"s"]+" ";const I=C.single_date?" style='display:none'":"",M=C.readonly?" disabled='disabled'":"",L=_._waiAria.lightboxDurationInputAttrString(C),P=_.locale.labels.baselines_remove_button;let H="gantt_duration_value";C.formatter&&(A="",H+=" gantt_duration_value_formatted");const V="<div class='gantt_duration' "+I+"><div class='gantt_duration_inputs'><input type='button' class='gantt_duration_dec' value='−'"+M+"><input type='text' value='5days' class='"+H+"'"+M+" "+L+"><input type='button' class='gantt_duration_inc' value='+'"+M+"></div><div class='gantt_duration_end_date'>"+A+"<span></span></div></div></div>",_t=`<div><div class='baseline_delete_button gantt_custom_button'>${P}</div></div>`,O=document.createElement("div");O.className="gantt_section_time gantt_section_duration",O.setAttribute("data-baseline-id",T.id),O.innerHTML=D+V+_t+"<br>",S.appendChild(O);var Q,Y,B,ft=O.getElementsByTagName("select"),Et=O.getElementsByTagName("input"),Ct=Et[1],Ee=[Et[0],Et[2]],Di=O.getElementsByTagName("span")[0],Ai=C._time_format_order;function gt(){var ut=w.call(_,O,C),U=x.call(_,O,C),Ii=_.calculateEndDate({start_date:ut,duration:U,task:E}),Mi=_.templates.task_end_date||_.templates.task_date;Di.innerHTML=Mi(Ii)}function Ht(ut){var U=Ct.value;U=k(C).parse(U),window.isNaN(U)&&(U=0),(U+=ut)<1&&(U=1),Ct.value=k(C).format(U),gt()}O.querySelector(".baseline_delete_button").onclick=function(ut){const U=O.parentNode;O.innerHTML="",O.remove(),U.innerHTML===""&&(U.innerHTML=_.locale.labels.baselines_section_placeholder)},Ee[0].onclick=_.bind(function(){Ht(-1*_.config.duration_step)},_),Ee[1].onclick=_.bind(function(){Ht(1*_.config.duration_step)},_),ft[0].onchange=gt,ft[1].onchange=gt,ft[2].onchange=gt,ft[3]&&(ft[3].onchange=gt),Ct.onkeydown=_.bind(function(ut){var U;return(U=(ut=ut||window.event).charCode||ut.keyCode||ut.which)==_.constants.KEY_CODES.DOWN?(Ht(-1*_.config.duration_step),!1):U==_.constants.KEY_CODES.UP?(Ht(1*_.config.duration_step),!1):void window.setTimeout(gt,1)},_),Ct.onchange=_.bind(gt,_),_._resolve_default_mapping(C),Q=T.start_date||new Date,Y=T.end_date||_.calculateEndDate({start_date:Q,duration:1,task:E}),B=_.calculateDuration({start_date:Q,end_date:Y,task:E}),B=k(C).format(B),_.form_blocks._fill_lightbox_select(ft,0,Q,Ai,C),Ct.value=B,gt()}function w(S,T){var E=S.getElementsByTagName("select"),C=T._time_format_order,D=0,A=0;if(_.defined(C[3])){var I=E[C[3]],M=parseInt(I.value,10);isNaN(M)&&I.hasAttribute("data-value")&&(M=parseInt(I.getAttribute("data-value"),10)),D=Math.floor(M/60),A=M%60}return new Date(E[C[2]].value,E[C[1]].value,E[C[0]].value,D,A)}function x(S,T){var E=S.getElementsByTagName("input")[1];return(E=k(T).parse(E.value))&&!window.isNaN(E)||(E=1),E<0&&(E*=-1),E}return z(p,m),p.prototype.render=function(S){return`<div style='height: ${S.height||100}px; padding-top:0px; font-size:inherit;' class='gantt_section_baselines'></div>`},p.prototype.set_value=function(S,T,E,C){E.baselines?(S.innerHTML="",E.baselines.forEach(D=>{$(S,D,E,C)})):S.innerHTML=_.locale.labels.baselines_section_placeholder},p.prototype.get_value=function(S,T,E){const C=[];return S.querySelectorAll("[data-baseline-id]").forEach(D=>{const A=D.dataset.baselineId;let I,M=_.getDatastore("baselines").getItem(A);I=M?_.copy(M):{id:_.uid(),task_id:T.id,text:"Baseline 1"},I.start_date=w(D,E),I.duration=x(D,E),I.end_date=_.calculateEndDate({start_date:I.start_date,duration:I.duration,task:T}),C.push(I)}),C},p.prototype.button_click=function(S,T,E,C){if(_.callEvent("onSectionButton",[_._lightbox_id,E])!==!1&&(T.closest(".gantt_custom_button.gantt_remove_baselines")&&(C.innerHTML=_.locale.labels.baselines_section_placeholder),T.closest(".gantt_custom_button.gantt_add_baselines"))){C.innerHTML==_.locale.labels.baselines_section_placeholder&&(C.innerHTML="");const D=_.getTask(_._lightbox_id);$(C,{id:_.uid(),task_id:D.id,start_date:D.start_date,end_date:D.end_date},D,_._get_typed_lightbox_config()[S])}},p.prototype.focus=function(S){_._focus(S.getElementsByTagName("select")[0])},p}(t);t._lightbox_methods={},t._lightbox_template="<div class='gantt_cal_ltitle'><span class='gantt_mark'>&nbsp;</span><span class='gantt_time'></span><span class='gantt_title'></span></div><div class='gantt_cal_larea'></div>",t._lightbox_template=`<div class='gantt_cal_ltitle'><div class="dhx_cal_ltitle_descr"><span class='gantt_mark'>&nbsp;</span><span class='gantt_time'></span><span class='dhx_title'></span>
</div>
<div class="gantt_cal_ltitle_controls">
	<a class="gantt_cal_ltitle_close_btn dhx_gantt_icon dhx_gantt_icon_close"></a>

</div></div><div class='gantt_cal_larea'></div>`,t._lightbox_root=t.$root,t.$services.getService("state").registerProvider("lightbox",function(){return{lightbox:t._lightbox_id}}),t.showLightbox=function(_){var m=this.getTask(_);if(this.callEvent("onBeforeLightbox",[_])){var p=this.getLightbox(this.getTaskType(m.type));this.showCover(p),this._fill_lightbox(_,p),this._setLbPosition(p),this._waiAria.lightboxVisibleAttr(p),this.callEvent("onLightbox",[_])}else t.isTaskExists(_)&&t.getTask(_).$new&&this.$data.tasksStore._updateOrder()},t._get_timepicker_step=function(){if(this.config.round_dnd_dates){var _;if(function(p){var k=p.$ui.getView("timeline");return!(!k||!k.isVisible())}(this)){var m=t.getScale();_=Vt(m.unit)*m.step/60}return(!_||_>=1440)&&(_=this.config.time_step),_}return this.config.time_step},t.getLabel=function(_,m){for(var p=this._get_typed_lightbox_config(),k=0;k<p.length;k++)if(p[k].map_to==_){for(var $=p[k].options,w=0;w<$.length;w++)if($[w].key==m)return $[w].label}return""},t.updateCollection=function(_,m){m=m.slice(0);var p=t.serverList(_);if(!p)return!1;p.splice(0,p.length),p.push.apply(p,m||[]),t.resetLightbox()},t.getLightboxType=function(){return this.getTaskType(this._lightbox_type)},t.getLightbox=function(_){var m,p,k,$,w,x="";if(function(){const T=t.config.csp===!0,E=!!window.Sfdc||!!window.$A||window.Aura||"$shadowResolver$"in document.body;t._lightbox_root=T||E?t.$root:document.body}(),_===void 0&&(_=this.getLightboxType()),!this._lightbox||this.getLightboxType()!=this.getTaskType(_)){this._lightbox_type=this.getTaskType(_),m=document.createElement("div"),x="gantt_cal_light",p=this._is_lightbox_timepicker(),t.config.wide_form&&(x+=" gantt_cal_light_wide"),p&&(x+=" gantt_cal_light_full"),m.className=x,m.style.visibility="hidden",k=this._lightbox_template,k+="<div class='gantt_cal_lcontrols'>",k+=y(this.config.buttons_left),k+="<div class='gantt_cal_lcontrols_push_right'></div>",k+=y(this.config.buttons_right),k+="</div>",m.innerHTML=k,t._waiAria.lightboxAttr(m),t.config.drag_lightbox&&(m.firstChild.onmousedown=t._ready_to_dnd,m.firstChild.ontouchstart=function(T){t._ready_to_dnd(T.touches[0])},m.firstChild.onselectstart=function(){return!1},m.firstChild.style.cursor="pointer",t._init_dnd_events()),this._lightbox&&this.resetLightbox(),f(),this._cover.insertBefore(m,this._cover.firstChild),this._lightbox=m,$=this._get_typed_lightbox_config(_),k=this._render_sections($);var S=(w=m.querySelector("div.gantt_cal_larea")).style.overflow;w.style.overflow="hidden",w.innerHTML=k,function(T){var E,C,D,A,I,M;for(M=0;M<T.length;M++)E=T[M],D=t._lightbox_root.querySelector("#"+E.id),E.id&&D&&(C=D.querySelector("label"),(A=D.nextSibling)&&(I=A.querySelector("input, select, textarea"))&&(I.id=I.id||"input_"+t.uid(),E.inputId=I.id,C.setAttribute("for",E.inputId)))}($),w.style.overflow=S,this._init_lightbox_events(this),m.style.display="none",m.style.visibility="visible"}return this._lightbox},t._render_sections=function(_){for(var m="",p=0;p<_.length;p++){var k=this.form_blocks[_[p].type];if(k){_[p].id="area_"+this.uid();var $=_[p].hidden?" style='display:none'":"",w="";_[p].button&&(w="<div class='gantt_custom_button' data-index='"+p+"'><div class='gantt_custom_button_"+_[p].button+"'></div><div class='gantt_custom_button_label'>"+this.locale.labels["button_"+_[p].button]+"</div></div>"),_[p].type=="baselines"&&(w="<div class='gantt_custom_button gantt_remove_baselines' data-index='"+p+"'><div class='gantt_custom_button_delete_baselines'></div><div class='gantt_custom_button_label'>"+this.locale.labels.baselines_remove_all_button+"</div></div><div class='gantt_custom_button gantt_add_baselines' data-index='"+p+"'><div class='gantt_custom_button_add_baseline'></div><div class='gantt_custom_button_label'>"+this.locale.labels.baselines_add_button+"</div></div>"),this.config.wide_form&&(m+="<div class='gantt_wrap_section' "+$+">"),m+="<div id='"+_[p].id+"' class='gantt_cal_lsection'><label>"+w+this.locale.labels["section_"+_[p].name]+"</label></div>"+k.render.call(this,_[p]),m+="</div>"}}return m},t._center_lightbox=function(_){t._setLbPosition(_)},t._setLbPosition=function(_){if(!_)return;const m=t._lightbox_root||t.$root;_.style.top=Math.max(m.offsetHeight/2-_.offsetHeight/2,0)+"px",_.style.left=Math.max(m.offsetWidth/2-_.offsetWidth/2,0)+"px"},t.showCover=function(_){_&&(_.style.display="block",this._setLbPosition(_)),f(),this._cover.style.display=""};const f=function(){t._cover||(t._cover=document.createElement("div"),t._cover.className="gantt_cal_cover",t._cover.style.display="none",t.event(t._cover,"mousemove",t._move_while_dnd),t.event(t._cover,"mouseup",t._finish_dnd),(t._lightbox_root||t.$root).appendChild(t._cover))};function g(_){for(var m in this.config.types)if(this.config.types[m]==_)return m;return"task"}function y(_,m){var p,k,$="";for(k=0;k<_.length;k++)p=t.config._migrate_buttons[_[k]]?t.config._migrate_buttons[_[k]]:_[k],$+="<div "+t._waiAria.lightboxButtonAttrString(p)+" class='gantt_btn_set gantt_left_btn_set "+p+"_set'><div dhx_button='1' data-dhx-button='1' class='"+p+"'></div><div>"+t.locale.labels[p]+"</div></div>";return $}function v(_){var m,p;return _.time_format?_.time_format:(p=["%d","%m","%Y"],Vt((m=t.getScale())?m.unit:t.config.duration_unit)<Vt("day")&&p.push("%H:%i"),p)}function b(_,m,p){var k,$,w,x,S,T,E="";switch(p.timeFormat[m]){case"%Y":for(_._time_format_order[2]=m,_._time_format_order.size++,_.year_range&&(isNaN(_.year_range)?_.year_range.push&&(w=_.year_range[0],x=_.year_range[1]):k=_.year_range),k=k||10,$=$||Math.floor(k/2),w=w||p.date.getFullYear()-$,x=x||t.getState().max_date.getFullYear()+$,S=w;S<=x;S++)E+="<option value='"+S+"'>"+S+"</option>";break;case"%m":for(_._time_format_order[1]=m,_._time_format_order.size++,S=0;S<12;S++)E+="<option value='"+S+"'>"+t.locale.date.month_full[S]+"</option>";break;case"%d":for(_._time_format_order[0]=m,_._time_format_order.size++,S=1;S<32;S++)E+="<option value='"+S+"'>"+S+"</option>";break;case"%H:%i":for(_._time_format_order[3]=m,_._time_format_order.size++,S=p.first,T=p.date.getDate(),_._time_values=[];S<p.last;)E+="<option value='"+S+"'>"+t.templates.time_picker(p.date)+"</option>",_._time_values.push(S),p.date.setTime(p.date.valueOf()+60*t._get_timepicker_step()*1e3),S=24*(p.date.getDate()!=T?1:0)*60+60*p.date.getHours()+p.date.getMinutes()}return E}t._init_lightbox_events=function(){t.lightbox_events={},t.lightbox_events.gantt_save_btn=function(){t._save_lightbox()},t.lightbox_events.gantt_delete_btn=function(){t._lightbox_current_type=null,t.callEvent("onLightboxDelete",[t._lightbox_id])&&(t.isTaskExists(t._lightbox_id)?t.$click.buttons.delete(t._lightbox_id):t.hideLightbox())},t.lightbox_events.gantt_cancel_btn=function(){t._cancel_lightbox()},t.lightbox_events.default=function(_,m){if(m.getAttribute("data-dhx-button"))t.callEvent("onLightboxButton",[m.className,m,_]);else{var p,k,$=X(m);if($.indexOf("gantt_custom_button")!=-1)if($.indexOf("gantt_custom_button_")!=-1)for(p=m.parentNode.getAttribute("data-index"),k=m;k&&X(k).indexOf("gantt_cal_lsection")==-1;)k=k.parentNode;else p=m.getAttribute("data-index"),k=m.closest(".gantt_cal_lsection"),m=m.firstChild;var w=t._get_typed_lightbox_config();p&&(p*=1,t.form_blocks[w[1*p].type].button_click(p,m,k,k.nextSibling))}},this.event(t.getLightbox(),"click",function(_){_.target.closest(".gantt_cal_ltitle_close_btn")&&t._cancel_lightbox();var m=bt(_),p=X(m);return p||(p=X(m=m.previousSibling)),m&&p&&p.indexOf("gantt_btn_set")===0&&(p=X(m=m.firstChild)),!(!m||!p)&&(t.defined(t.lightbox_events[m.className])?t.lightbox_events[m.className]:t.lightbox_events.default)(_,m)}),t.getLightbox().onkeydown=function(_){var m=_||window.event,p=_.target||_.srcElement,k=X(p).indexOf("gantt_btn_set")>-1;switch((_||m).keyCode){case t.constants.KEY_CODES.SPACE:if((_||m).shiftKey)return;k&&p.click&&p.click();break;case t.keys.edit_save:if((_||m).shiftKey)return;k&&p.click?p.click():t._save_lightbox();break;case t.keys.edit_cancel:t._cancel_lightbox()}}},t._cancel_lightbox=function(){var _=this.getLightboxValues();t._lightbox_current_type=null,this.callEvent("onLightboxCancel",[this._lightbox_id,_.$new]),t.isTaskExists(_.id)&&_.$new&&(this.silent(function(){t.$data.tasksStore.removeItem(_.id),t._update_flags(_.id,null)}),this.refreshData()),this.hideLightbox()},t._save_lightbox=function(){var _=this.getLightboxValues();t._lightbox_current_type=null,this.callEvent("onLightboxSave",[this._lightbox_id,_,!!_.$new])&&(t.$data.tasksStore._skipTaskRecalculation="lightbox",_.$new?(delete _.$new,this.addTask(_,_.parent,this.getTaskIndex(_.id))):this.isTaskExists(_.id)&&(this.mixin(this.getTask(_.id),_,!0),this.refreshTask(_.id),this.updateTask(_.id)),t.$data.tasksStore._skipTaskRecalculation=!1,this.refreshData(),this.hideLightbox())},t._resolve_default_mapping=function(_){var m=_.map_to;return{time:!0,time_optional:!0,duration:!0,duration_optional:!0}[_.type]?_.map_to=="auto"?m={start_date:"start_date",end_date:"end_date",duration:"duration"}:typeof _.map_to=="string"&&(m={start_date:_.map_to}):_.type==="constraint"&&(_.map_to&&typeof _.map_to!="string"||(m={constraint_type:"constraint_type",constraint_date:"constraint_date"})),m},t.getLightboxValues=function(){var _={};t.isTaskExists(this._lightbox_id)&&(_=this.mixin({},this.getTask(this._lightbox_id)));for(var m=this._get_typed_lightbox_config(),p=0;p<m.length;p++){var k=t._lightbox_root.querySelector("#"+m[p].id);k=k&&k.nextSibling;var $=this.form_blocks[m[p].type];if($){var w=$.get_value.call(this,k,_,m[p]),x=t._resolve_default_mapping(m[p]);if(typeof x=="string"&&x!="auto")_[x]=w;else if(typeof x=="object")for(var S in x)x[S]&&(_[x[S]]=w[S])}}return t._lightbox_current_type&&(_.type=t._lightbox_current_type),_},t.hideLightbox=function(){var _=this.getLightbox();_&&(_.style.display="none"),this._waiAria.lightboxHiddenAttr(_),this._lightbox_id=null,this.hideCover(_),this.resetLightbox(),this.callEvent("onAfterLightbox",[])},t.hideCover=function(_){_&&(_.style.display="none"),this._cover&&this._cover.parentNode.removeChild(this._cover),this._cover=null},t.resetLightbox=function(){t._lightbox&&!t._custom_lightbox&&t._lightbox.remove(),t._lightbox=null},t._set_lightbox_values=function(_,m){var p=_,k=m.getElementsByTagName("span"),$=[];t.templates.lightbox_header?($.push(""),$.push(t.templates.lightbox_header(p.start_date,p.end_date,p)),k[1].innerHTML="",k[2].innerHTML=t.templates.lightbox_header(p.start_date,p.end_date,p)):($.push(this.templates.task_time(p.start_date,p.end_date,p)),$.push(String(this.templates.task_text(p.start_date,p.end_date,p)||"").substr(0,70)),k[1].innerHTML=this.templates.task_time(p.start_date,p.end_date,p),k[2].innerHTML=String(this.templates.task_text(p.start_date,p.end_date,p)||"").substr(0,70)),k[1].innerHTML=$[0],k[2].innerHTML=$[1],t._waiAria.lightboxHeader(m,$.join(" "));for(var w=this._get_typed_lightbox_config(this.getLightboxType()),x=0;x<w.length;x++){var S=w[x];if(this.form_blocks[S.type]){var T=t._lightbox_root.querySelector("#"+S.id).nextSibling,E=this.form_blocks[S.type],C=t._resolve_default_mapping(w[x]),D=this.defined(p[C])?p[C]:S.default_value;E.set_value.call(t,T,D,p,S),S.focus&&E.focus.call(t,T)}}t.isTaskExists(_.id)&&(t._lightbox_id=_.id)},t._fill_lightbox=function(_,m){var p=this.getTask(_);this._set_lightbox_values(p,m)},t.getLightboxSection=function(_){for(var m=this._get_typed_lightbox_config(),p=0;p<m.length&&m[p].name!=_;p++);var k=m[p];if(!k)return null;this._lightbox||this.getLightbox();var $=t._lightbox_root.querySelector("#"+k.id),w=$.nextSibling,x={section:k,header:$,node:w,getValue:function(T){return t.form_blocks[k.type].get_value.call(t,w,T||{},k)},setValue:function(T,E){return t.form_blocks[k.type].set_value.call(t,w,T,E||{},k)}},S=this._lightbox_methods["get_"+k.type+"_control"];return S?S(x):x},t._lightbox_methods.get_template_control=function(_){return _.control=_.node,_},t._lightbox_methods.get_select_control=function(_){return _.control=_.node.getElementsByTagName("select")[0],_},t._lightbox_methods.get_textarea_control=function(_){return _.control=_.node.getElementsByTagName("textarea")[0],_},t._lightbox_methods.get_time_control=function(_){return _.control=_.node.getElementsByTagName("select"),_},t._init_dnd_events=function(){var _=t._lightbox_root;this.event(_,"mousemove",t._move_while_dnd),this.event(_,"mouseup",t._finish_dnd),this.event(_,"touchmove",function(m){t._move_while_dnd(m.touches[0])}),this.event(_,"touchend",function(m){t._finish_dnd(m.touches[0])})},t._move_while_dnd=function(_){if(t._dnd_start_lb){document.gantt_unselectable||(t._lightbox_root.className+=" gantt_unselectable",document.gantt_unselectable=!0);var m=t.getLightbox(),p=[_.pageX,_.pageY];m.style.top=t._lb_start[1]+p[1]-t._dnd_start_lb[1]+"px",m.style.left=t._lb_start[0]+p[0]-t._dnd_start_lb[0]+"px"}},t._ready_to_dnd=function(_){var m=t.getLightbox();t._lb_start=[m.offsetLeft,m.offsetTop],t._dnd_start_lb=[_.pageX,_.pageY]},t._finish_dnd=function(){t._lb_start&&(t._lb_start=t._dnd_start_lb=!1,t._lightbox_root.className=t._lightbox_root.className.replace(" gantt_unselectable",""),document.gantt_unselectable=!1)},t._focus=function(_,m){if(_&&_.focus&&!t.config.touch)try{m&&_.select&&_.select(),_.focus()}catch{}},t.form_blocks={getTimePicker:function(_,m){var p,k,$,w="",x=this.config,S={first:0,last:1440,date:this.date.date_part(new Date(t._min_date.valueOf())),timeFormat:v(_)};for(_._time_format_order={size:0},t.config.limit_time_select&&(S.first=60*x.first_hour,S.last=60*x.last_hour+1,S.date.setHours(x.first_hour)),p=0;p<S.timeFormat.length;p++)p>0&&(w+=" "),(k=b(_,p,S))&&($=t._waiAria.lightboxSelectAttrString(S.timeFormat[p]),w+="<select "+(_.readonly?"disabled='disabled'":"")+(m?" style='display:none' ":"")+$+">"+k+"</select>");return w},getTimePickerValue:function(_,m,p){var k,$=m._time_format_order,w=0,x=0,S=p||0;return t.defined($[3])&&(k=parseInt(_[$[3]+S].value,10),w=Math.floor(k/60),x=k%60),new Date(_[$[2]+S].value,_[$[1]+S].value,_[$[0]+S].value,w,x)},_fill_lightbox_select:function(_,m,p,k){if(_[m+k[0]].value=p.getDate(),_[m+k[1]].value=p.getMonth(),_[m+k[2]].value=p.getFullYear(),t.defined(k[3])){var $=60*p.getHours()+p.getMinutes();$=Math.round($/t._get_timepicker_step())*t._get_timepicker_step();var w=_[m+k[3]];w.value=$,w.setAttribute("data-value",$)}},template:new e,textarea:new i,select:new a,time:new n,duration:new o,parent:new l,radio:new s,checkbox:new r,resources:new d,constraint:new c,baselines:new h,typeselect:new u},t._is_lightbox_timepicker=function(){for(var _=this._get_typed_lightbox_config(),m=0;m<_.length;m++)if(_[m].name=="time"&&_[m].type=="time")return!0;return!1},t._simple_confirm=function(_,m,p,k){if(!_)return p();var $={text:_};m&&($.title=m),k&&($.ok=k),p&&($.callback=function(w){w&&p()}),t.confirm($)},t._get_typed_lightbox_config=function(_){_===void 0&&(_=this.getLightboxType());var m=g.call(this,_);return t.config.lightbox[m+"_sections"]?t.config.lightbox[m+"_sections"]:t.config.lightbox.sections},t._silent_redraw_lightbox=function(_){var m=this.getLightboxType();if(this.getState().lightbox){var p=this.getState().lightbox,k=this.getLightboxValues(),$=this.copy(this.getTask(p));this.resetLightbox();var w=this.mixin($,k,!0),x=this.getLightbox(_||void 0);this._set_lightbox_values(w,x),this.showCover(x)}else this.resetLightbox(),this.getLightbox(_||void 0);this.callEvent("onLightboxChange",[m,this.getLightboxType()])}}function kr(t){if(!vt.isNode){t.utils={arrayFind:Xi,dom:ci};var e=Se();t.event=e.attach,t.eventRemove=e.detach,t._eventRemoveAll=e.detachAll,t._createDomEventScope=e.extend,N(t,Ea(t));var i=dr.init(t);t.$ui=i.factory,t.$ui.layers=i.render,t.$mouseEvents=i.mouseEvents,t.$services.setService("mouseEvents",function(){return t.$mouseEvents}),t.mixin(t,i.layersApi),function(n){delete n.addTaskLayer,delete n.addLinkLayer}(t),t.$services.setService("layers",function(){return i.layersService}),t.mixin(t,function(){function n(u){return u.$ui.getView("timeline")}function a(u){return u.$ui.getView("grid")}function r(u){var h=n(u);if(h&&!h.$config.hidden)return h;var f=a(u);return f&&!f.$config.hidden?f:null}function s(u){var h=null,f=!1;return[".gantt_drag_marker.gantt_grid_resize_area",".gantt_drag_marker .gantt_row.gantt_row_task",".gantt_drag_marker.gantt_grid_dnd_marker"].forEach(function(g){f=f||!!document.querySelector(g)}),(h=f?a(u):r(u))?l(u,h,"scrollY"):null}function o(u){var h=r(u);return h&&h.id!="grid"?l(u,h,"scrollX"):null}function l(u,h,f){var g=h.$config[f];return u.$ui.getView(g)}var d="DEFAULT_VALUE";function c(u,h,f,g){var y=u(this);return y&&y.isVisible()?y[h].apply(y,f):g?g():d}return{getColumnIndex:function(u){var h=c.call(this,a,"getColumnIndex",[u]);return h===d?0:h},dateFromPos:function(u){var h=c.call(this,n,"dateFromPos",Array.prototype.slice.call(arguments));return h===d?this.getState().min_date:h},posFromDate:function(u){var h=c.call(this,n,"posFromDate",[u]);return h===d?0:h},getRowTop:function(u){var h=this,f=c.call(h,n,"getRowTop",[u],function(){return c.call(h,a,"getRowTop",[u])});return f===d?0:f},getTaskTop:function(u){var h=this,f=c.call(h,n,"getItemTop",[u],function(){return c.call(h,a,"getItemTop",[u])});return f===d?0:f},getTaskPosition:function(u,h,f){var g=c.call(this,n,"getItemPosition",[u,h,f]);return g===d?{left:0,top:this.getTaskTop(u.id),height:this.getTaskBarHeight(u.id),width:0}:g},getTaskBarHeight:function(u,h){var f=this,g=c.call(f,n,"getBarHeight",[u,h],function(){return c.call(f,a,"getItemHeight",[u])});return g===d?0:g},getTaskHeight:function(u){var h=this,f=c.call(h,n,"getItemHeight",[u],function(){return c.call(h,a,"getItemHeight",[u])});return f===d?0:f},columnIndexByDate:function(u){var h=c.call(this,n,"columnIndexByDate",[u]);return h===d?0:h},roundTaskDates:function(){c.call(this,n,"roundTaskDates",[])},getScale:function(){var u=c.call(this,n,"getScale",[]);return u===d?null:u},getTaskNode:function(u){var h=n(this);if(h&&h.isVisible()){var f=h._taskRenderer.rendered[u];if(!f){var g=h.$config.item_attribute;f=h.$task_bars.querySelector("["+g+"='"+u+"']")}return f||null}return null},getLinkNode:function(u){var h=n(this);return h.isVisible()?h._linkRenderer.rendered[u]:null},scrollTo:function(u,h){var f=s(this),g=o(this),y={position:0},v={position:0};f&&(v=f.getScrollState()),g&&(y=g.getScrollState());var b=g&&1*u==u,_=f&&1*h==h;if(b&&_)for(var m=f._getLinkedViews(),p=g._getLinkedViews(),k=[],$=0;$<m.length;$++)for(var w=0;w<p.length;w++)m[$].$config.id&&p[w].$config.id&&m[$].$config.id===p[w].$config.id&&k.push(m[$].$config.id);b&&(k&&k.forEach((function(T){this.$ui.getView(T).$config.$skipSmartRenderOnScroll=!0}).bind(this)),g.scroll(u),k&&k.forEach((function(T){this.$ui.getView(T).$config.$skipSmartRenderOnScroll=!1}).bind(this))),_&&f.scroll(h);var x={position:0},S={position:0};f&&(x=f.getScrollState()),g&&(S=g.getScrollState()),this.callEvent("onGanttScroll",[y.position,v.position,S.position,x.position])},showDate:function(u){var h=this.posFromDate(u),f=Math.max(h-this.config.task_scroll_offset,0);this.scrollTo(f)},showTask:function(u){var h=this.getTaskPosition(this.getTask(u)),f=h.left;this.config.rtl&&(f=h.left+h.width);var g,y=Math.max(f-this.config.task_scroll_offset,0),v=this._scroll_state().y;g=v?h.top-(v-this.getTaskBarHeight(u))/2:h.top,this.scrollTo(y,g);var b=a(this),_=n(this);b&&_&&b.$config.scrollY!=_.$config.scrollY&&l(this,b,"scrollY").scrollTo(null,g)},_scroll_state:function(){var u={x:!1,y:!1,x_pos:0,y_pos:0,scroll_size:this.config.scroll_size+1,x_inner:0,y_inner:0},h=s(this),f=o(this);if(f){var g=f.getScrollState();g.visible&&(u.x=g.size,u.x_inner=g.scrollSize),u.x_pos=g.position||0}if(h){var y=h.getScrollState();y.visible&&(u.y=y.size,u.y_inner=y.scrollSize),u.y_pos=y.position||0}return u},getScrollState:function(){var u=this._scroll_state();return{x:u.x_pos,y:u.y_pos,inner_width:u.x,inner_height:u.y,width:u.x_inner,height:u.y_inner}},getLayoutView:function(u){return this.$ui.getView(u)},scrollLayoutCell:function(u,h,f){const g=this.$ui.getView(u);if(!g)return!1;if(h!==null){const y=this.$ui.getView(g.$config.scrollX);y&&y.scrollTo(h,null)}if(f!==null){const y=this.$ui.getView(g.$config.scrollY);y&&y.scrollTo(null,f)}}}}()),function(n){n.resetSkin||(n.resetSkin=function(){this.skin="",re(!0,this)},n.skins={},n.attachEvent("onGanttLayoutReady",function(){re(!1,this),r()})),n._addThemeClass=function(){document.documentElement.setAttribute("data-gantt-theme",n.skin)},n.setSkin=function(s){this.skin=s,n._addThemeClass(),r(),n.$root&&(re(!0,n),this.render())};let a=null;function r(){const s=n.$root;a&&clearInterval(a),s&&(a=setInterval(()=>{const o=getComputedStyle(s).getPropertyValue("--dhx-gantt-theme");o&&o!==n.skin&&n.setSkin(o)},100))}n.attachEvent("onDestroy",function(){clearInterval(a)})}(t),function(n){n.skins.skyblue={config:{grid_width:370,row_height:27,bar_height_padding:4,scale_height:27,link_line_width:1,link_arrow_size:8,link_radius:2,lightbox_additional_height:75},_second_column_width:95,_third_column_width:80}}(t),function(n){n.skins.dark={config:{grid_width:390,row_height:36,scale_height:36,link_line_width:2,link_arrow_size:12,bar_height_padding:9,lightbox_additional_height:75},_second_column_width:100,_third_column_width:70}}(t),function(n){n.skins.meadow={config:{grid_width:380,row_height:27,scale_height:30,link_line_width:2,link_arrow_size:10,bar_height_padding:4,lightbox_additional_height:72},_second_column_width:95,_third_column_width:80}}(t),function(n){n.skins.terrace={config:{grid_width:390,row_height:36,scale_height:36,link_line_width:2,link_arrow_size:12,bar_height_padding:9,lightbox_additional_height:75},_second_column_width:100,_third_column_width:70}}(t),function(n){n.skins.broadway={config:{grid_width:390,row_height:35,scale_height:35,link_line_width:1,link_arrow_size:9,bar_height_padding:4,lightbox_additional_height:86},_second_column_width:100,_third_column_width:80,_lightbox_template:"<div class='gantt_cal_ltitle'><span class='gantt_mark'>&nbsp;</span><span class='gantt_time'></span><span class='gantt_title'></span><div class='gantt_cancel_btn'></div></div><div class='gantt_cal_larea'></div>",_config_buttons_left:{},_config_buttons_right:{gantt_delete_btn:"icon_delete",gantt_save_btn:"icon_save"}}}(t),function(n){n.skins.material={config:{grid_width:411,row_height:34,scale_height:36,link_line_width:2,link_arrow_size:12,bar_height_padding:9,lightbox_additional_height:80},_second_column_width:110,_third_column_width:75,_redefine_lightbox_buttons:{buttons_left:["dhx_delete_btn"],buttons_right:["dhx_cancel_btn","dhx_save_btn"]}},n.attachEvent("onAfterTaskDrag",function(a){var r=n.getTaskNode(a);r&&(r.className+=" gantt_drag_animation",setTimeout(function(){var s=r.className.indexOf(" gantt_drag_animation");s>-1&&(r.className=r.className.slice(0,s))},200))})}(t),function(n){n.skins.contrast_black={config:{grid_width:390,row_height:35,scale_height:35,link_line_width:2,link_arrow_size:12,lightbox_additional_height:75},_second_column_width:100,_third_column_width:80}}(t),function(n){n.skins.contrast_white={config:{grid_width:390,row_height:35,scale_height:35,link_line_width:2,link_arrow_size:12,lightbox_additional_height:75},_second_column_width:100,_third_column_width:80}}(t),function(n){n.ext||(n.ext={});for(var a=[cr,ur,hr],r=0;r<a.length;r++)a[r]&&a[r](n);n.ext.zoom=new gr(n)}(t),pr(t),vr(t),function(n){n._extend_to_optional=function(a){var r=a,s={render:r.render,focus:r.focus,set_value:function(o,l,d,c){var u=n._resolve_default_mapping(c);if(!d[u.start_date]||u.start_date=="start_date"&&this._isAllowedUnscheduledTask(d)){s.disable(o,c);var h={};for(var f in u)h[u[f]]=d[f];return r.set_value.call(n,o,l,h,c)}return s.enable(o,c),r.set_value.call(n,o,l,d,c)},get_value:function(o,l,d){return d.disabled?{start_date:null}:r.get_value.call(n,o,l,d)},update_block:function(o,l){if(n.callEvent("onSectionToggle",[n._lightbox_id,l]),o.style.display=l.disabled?"none":"",l.button){var d=o.previousSibling.querySelector(".gantt_custom_button_label"),c=n.locale.labels,u=l.disabled?c[l.name+"_enable_button"]:c[l.name+"_disable_button"];d.innerHTML=u}},disable:function(o,l){l.disabled=!0,s.update_block(o,l)},enable:function(o,l){l.disabled=!1,s.update_block(o,l)},button_click:function(o,l,d,c){if(n.callEvent("onSectionButton",[n._lightbox_id,d])!==!1){var u=n._get_typed_lightbox_config()[o];u.disabled?s.enable(c,u):s.disable(c,u)}}};return s},n.form_blocks.duration_optional=n._extend_to_optional(n.form_blocks.duration),n.form_blocks.time_optional=n._extend_to_optional(n.form_blocks.time)}(t),function(n){var a=new RegExp(`<(?:.|
)*?>`,"gm"),r=new RegExp(" +","gm");function s(c){return(c+"").replace(a," ").replace(r," ")}var o=new RegExp("'","gm");function l(c){return(c+"").replace(o,"&#39;")}for(var d in n._waiAria={getAttributeString:function(c){var u=[" "];for(var h in c){var f=l(s(c[h]));u.push(h+"='"+f+"'")}return u.push(" "),u.join(" ")},getTimelineCellAttr:function(c){return n._waiAria.getAttributeString({"aria-label":c})},_taskCommonAttr:function(c,u){c.start_date&&c.end_date&&(u.setAttribute("aria-label",s(n.templates.tooltip_text(c.start_date,c.end_date,c))),c.$dataprocessor_class&&u.setAttribute("aria-busy",!0))},setTaskBarAttr:function(c,u){this._taskCommonAttr(c,u),u.setAttribute("role","img"),!n.isReadonly(c)&&n.config.drag_move&&(c.id!=n.getState("tasksDnd").drag_id?u.setAttribute("aria-grabbed",!1):u.setAttribute("aria-grabbed",!0))},taskRowAttr:function(c,u){this._taskCommonAttr(c,u),!n.isReadonly(c)&&n.config.order_branch&&u.setAttribute("aria-grabbed",!1),u.setAttribute("role","row"),u.setAttribute("aria-selected",n.isSelectedTask(c.id)?"true":"false"),u.setAttribute("aria-level",c.$level+1||1),n.hasChild(c.id)&&u.setAttribute("aria-expanded",c.$open?"true":"false")},linkAttr:function(c,u){var h=n.config.links,f=c.type==h.finish_to_start||c.type==h.start_to_start,g=c.type==h.start_to_start||c.type==h.start_to_finish,y=n.locale.labels.link+" "+n.templates.drag_link(c.source,g,c.target,f);u.setAttribute("role","img"),u.setAttribute("aria-label",s(y)),n.isReadonly(c)&&u.setAttribute("aria-readonly",!0)},gridSeparatorAttr:function(c){c.setAttribute("role","columnheader")},rowResizerAttr:function(c){c.setAttribute("role","row")},lightboxHiddenAttr:function(c){c.setAttribute("aria-hidden","true")},lightboxVisibleAttr:function(c){c.setAttribute("aria-hidden","false")},lightboxAttr:function(c){c.setAttribute("role","dialog"),c.setAttribute("aria-hidden","true"),c.firstChild.setAttribute("role","heading"),c.firstChild.setAttribute("aria-level","1")},lightboxButtonAttrString:function(c){return this.getAttributeString({role:"button","aria-label":n.locale.labels[c],tabindex:"0"})},lightboxHeader:function(c,u){c.setAttribute("aria-label",u)},lightboxSelectAttrString:function(c){var u="";switch(c){case"%Y":u=n.locale.labels.years;break;case"%m":u=n.locale.labels.months;break;case"%d":u=n.locale.labels.days;break;case"%H:%i":u=n.locale.labels.hours+n.locale.labels.minutes}return n._waiAria.getAttributeString({"aria-label":u})},lightboxDurationInputAttrString:function(c){return this.getAttributeString({"aria-label":n.locale.labels.column_duration,"aria-valuemin":"0",role:"spinbutton"})},inlineEditorAttr:function(c){c.setAttribute("role","row")},gridAttrString:function(){return[" role='treegrid'",n.config.multiselect?"aria-multiselectable='true'":"aria-multiselectable='false'"," "].join(" ")},gridScaleRowAttrString:function(){return"role='row'"},gridScaleCellAttrString:function(c,u){var h="";if(c.name=="add")h=this.getAttributeString({role:"columnheader","aria-label":n.locale.labels.new_task});else{var f={role:"columnheader","aria-label":u};n._sort&&n._sort.name==c.name&&(n._sort.direction=="asc"?f["aria-sort"]="ascending":f["aria-sort"]="descending"),h=this.getAttributeString(f)}return h},gridDataAttrString:function(){return"role='rowgroup'"},reorderMarkerAttr:function(c){c.setAttribute("role","grid"),c.firstChild.removeAttribute("aria-level"),c.firstChild.setAttribute("aria-grabbed","true")},gridCellAttrString:function(c,u,h){var f={role:"gridcell","aria-label":u};return c.editor&&!n.isReadonly(h)||(f["aria-readonly"]=!0),this.getAttributeString(f)},gridAddButtonAttrString:function(c){return this.getAttributeString({role:"button","aria-label":n.locale.labels.new_task})},messageButtonAttrString:function(c){return"tabindex='0' role='button' aria-label='"+c+"'"},messageInfoAttr:function(c){c.setAttribute("role","alert")},messageModalAttr:function(c,u){c.setAttribute("role","dialog"),u&&c.setAttribute("aria-labelledby",u)},quickInfoAttr:function(c){c.setAttribute("role","dialog")},quickInfoHeaderAttrString:function(){return" role='heading' aria-level='1' "},quickInfoHeader:function(c,u){c.setAttribute("aria-label",u)},quickInfoButtonAttrString:function(c){return n._waiAria.getAttributeString({role:"button","aria-label":c,tabindex:"0"})},tooltipAttr:function(c){c.setAttribute("role","tooltip")},tooltipVisibleAttr:function(c){c.setAttribute("aria-hidden","false")},tooltipHiddenAttr:function(c){c.setAttribute("aria-hidden","true")}},n._waiAria)n._waiAria[d]=function(c){return function(){return n.config.wai_aria_attributes?c.apply(this,arguments):""}}(n._waiAria[d])}(t),t.locate=function(n){var a=bt(n);if(ct(a,".gantt_task_row"))return null;var r=arguments[1]||this.config.task_attribute,s=et(a,r);return s?s.getAttribute(r):null},t._locate_css=function(n,a,r){return mt(n,a,r)},t._locateHTML=function(n,a){return et(n,a||this.config.task_attribute)}}t.attachEvent("onParse",function(){W(t)||t.attachEvent("onGanttRender",function(){if(t.config.initial_scroll){var n=t.getTaskByIndex(0),a=n?n.id:t.config.root_id;t.isTaskExists(a)&&t.$task&&t.utils.dom.isChildOf(t.$task,t.$container)&&t.showTask(a)}},{once:!0})}),t.attachEvent("onBeforeGanttReady",function(){this.config.scroll_size||(this.config.scroll_size=ni()||15),W(t)||(this._eventRemoveAll(),this.$mouseEvents.reset(),this.resetLightbox())}),t.attachEvent("onGanttReady",function(){!W(t)&&t.config.rtl&&t.$layout.getCellsByType("viewCell").forEach(function(n){var a=n.$config.scrollX;if(a){var r=t.$ui.getView(a);r&&r.scrollTo(r.$config.scrollSize,0)}})}),t.attachEvent("onGanttReady",function(){if(!W(t)){var n=t.plugins(),a={auto_scheduling:t.autoSchedule,click_drag:t.ext.clickDrag,critical_path:t.isCriticalTask,drag_timeline:t.ext.dragTimeline,export_api:t.exportToPDF,fullscreen:t.ext.fullscreen,grouping:t.groupBy,keyboard_navigation:t.ext.keyboardNavigation,marker:t.addMarker,multiselect:t.eachSelectedTask,overlay:t.ext.overlay,quick_info:t.templates.quick_info_content,tooltip:t.ext.tooltips,undo:t.undo};for(let r in a)a[r]&&!n[r]&&console.warn(`You connected the '${r}' extension via an obsolete file. 
To fix it, you need to remove the obsolete file and connect the extension via the plugins method: https://docs.dhtmlx.com/gantt/api__gantt_plugins.html`)}})}const J=dt.gantt=function(t){var e=Ta(t);return e.env.isNode||(kr(e),function(i){i.load=function(n,a,r){this._load_url=n,this.assert(arguments.length,"Invalid load arguments");var s="json",o=null;return arguments.length>=3?(s=a,o=r):typeof arguments[1]=="string"?s=arguments[1]:typeof arguments[1]=="function"&&(o=arguments[1]),this._load_type=s,this.callEvent("onLoadStart",[n,s]),this.ajax.get(n,i.bind(function(l){this.on_load(l,s),this.callEvent("onLoadEnd",[n,s]),typeof o=="function"&&o.call(this)},this))}}(e)),e}(ln),yr={class:"overflow-hidden lt-sm:overflow-auto"},Ir=Ni({__name:"dhtmlx",setup(t){const e=Ce(),i=Ce("quarter"),n=[{name:"Day",code:"day"},{name:"Week",code:"week"},{name:"Month",code:"month"},{name:"Quarter",code:"quarter"},{name:"Year",code:"year"}];function a(){if(!e.value)return;const s={grid_width:350,add_column:!1,autofit:!1,row_height:60,bar_height:34,auto_types:!0,xml_date:"%Y-%m-%d",columns:[{name:"text",label:"Project name",tree:!0,width:"*"},{name:"start_date",label:"Start date",align:"center",width:150}]};Object.assign(J.config,s),J.init(e.value),J.parse({data:Vi});const o=[{name:"day",scale_height:60,scales:[{unit:"day",step:1,format:"%d %M"}]},{name:"week",scale_height:60,scales:[{unit:"week",step:1,format(l){const d=J.date.date_to_str("%m-%d"),c=J.date.add(l,-6,"day");return`${d(c)} to ${d(l)}`}},{unit:"day",step:1,format:"%d",css(l){return l.getDay()===0||l.getDay()===6?"day-item weekend weekend-border-bottom":"day-item"}}]},{name:"month",scale_height:60,min_column_width:18,scales:[{unit:"month",format:"%Y-%m"},{unit:"day",step:1,format:"%d",css(l){return l.getDay()===0||l.getDay()===6?"day-item weekend weekend-border-bottom":"day-item"}}]},{name:"quarter",height:60,min_column_width:110,scales:[{unit:"quarter",step:1,format(l){const d=`${new Date(l).getFullYear()}`,c=J.date.date_to_str("%M"),u=J.date.add(J.date.add(l,3,"month"),-1,"day");return`${d+c(l)} - ${c(u)}`}},{unit:"week",step:1,format(l){const d=J.date.date_to_str("%m-%d"),c=J.date.add(l,6,"day");return`${d(l)} to ${d(c)}`}}]},{name:"year",scale_height:50,min_column_width:150,scales:[{unit:"year",step:1,format:"%Y"},{unit:"month",format:"%Y-%m"}]}];J.ext.zoom.init({levels:o}),J.ext.zoom.setLevel(i.value)}function r(s){i.value=s,J.ext.zoom.setLevel(s)}return Li(()=>{a()}),(s,o)=>{const l=Fi,d=Wi,c=Pi;return Ae(),De("div",yr,[Jt(c,{title:"Gantt chart demo",bordered:!1,size:"small","content-class":"overflow-y-hidden overflow-x-auto",class:"h-full card-wrapper"},{"header-extra":Ot(()=>[Jt(d,{value:Hi(i),type:"segment",animated:"",size:"small",class:"relative w-320px","onUpdate:value":r},{default:Ot(()=>[(Ae(),De(Oi,null,Bi(n,u=>Jt(l,{key:u.code,name:u.code},{default:Ot(()=>[zi(ji(u.name),1)]),_:2},1032,["name"])),64))]),_:1},8,["value"])]),default:Ot(()=>[Ri("div",{ref_key:"ganttRef",ref:e,class:"size-full min-w-800px"},null,512)]),_:1})])}}});export{Ir as default};
