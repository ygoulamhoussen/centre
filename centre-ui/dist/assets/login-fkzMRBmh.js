import{a as W,_ as G}from"./lang-switch.vue_vue_type_script_setup_true_lang-DXKk1EwP.js";import{_ as H}from"./system-logo.vue_vue_type_script_setup_true_lang-ColD8dEG.js";import{O as Q,a as k,cO as X,cN as Y,d as L,cK as K,b as V,o as P,h as j,g as e,cP as Z,$ as a,V as F,bq as U,c as S,k as s,l as o,e as x,a2 as B,X as y,Y as h,cQ as M,a0 as J,cR as $,F as ee,Z as oe,i as ne,j as te,cS as le,f as ae,T as se,y as re,b8 as ce}from"./index-D_-DzWhp.js";import{R as pe,u as E,a as I,_ as O,b as T}from"./form-D6Mkvttn.js";import{_ as D}from"./Input-Bb-Nkj9P.js";import{_ as A}from"./Space-CoVGbzuR.js";import{_ as ie}from"./Checkbox-BH2EHdvK.js";import{_ as de}from"./Divider-B3MX9R6D.js";import"./button-icon.vue_vue_type_script_setup_true_lang-3c8B961T.js";import"./Tooltip-D7FLeIpa.js";import"./Popover-uiGA841y.js";import"./map-BMPY2oeZ.js";import"./Follower-CPJzzLbY.js";import"./next-frame-once-C5Ksf8W7.js";import"./cssr-BW6v_MNg.js";import"./use-merged-state-DuV1Lu3L.js";import"./use-compitable-Cr7qxnTd.js";import"./Dropdown-BfCXARAG.js";import"./create-B6F92WxY.js";import"./create-ref-setter-C4J8sofl.js";import"./get-slot-Bk_rJcZu.js";function ue(b){const i=Q(0),d=k(()=>Math.ceil(i.value/60)),c=k(()=>i.value>0),{pause:u,resume:v}=X(()=>{i.value>0?i.value-=1:u()},{immediate:!1});function g(f=b){i.value=60*f,v()}function n(){i.value=0,u()}return Y(()=>{u()}),{count:d,isCounting:c,start:g,stop:n}}const me=L({name:"WaveBg",__name:"wave-bg",props:{themeColor:{}},setup(b){const _=b,i=k(()=>K(_.themeColor,300)),d=k(()=>K(_.themeColor,600));return(c,u)=>(P(),V("div",{class:"absolute-lt z-1 size-full overflow-hidden",style:j(`background-color: ${e(d)};background-image: linear-gradient(43deg, ${e(d)} 0%, ${c.themeColor} 46%, ${e(i)} 100%);`)},null,4))}});function q(){const{loading:b,startLoading:_,endLoading:i}=Z(),{count:d,start:c,stop:u,isCounting:v}=ue(10),g=k(()=>{let r=a("page.login.codeLogin.getCode");const t=a("page.login.codeLogin.reGetCode",{time:d.value});return b.value&&(r=""),v.value&&(r=t),r});function n(r){var t,l,m,p;return r.trim()===""?((l=(t=window.$message)==null?void 0:t.error)==null||l.call(t,a("form.phone.required")),!1):pe.test(r)?!0:((p=(m=window.$message)==null?void 0:m.error)==null||p.call(m,a("form.phone.invalid")),!1)}async function f(r){var l,m;!n(r)||b.value||(_(),await new Promise(p=>{setTimeout(p,500)}),(m=(l=window.$message)==null?void 0:l.success)==null||m.call(l,a("page.login.codeLogin.sendCodeSuccess")),c(),i())}return{label:g,start:c,stop:u,isCounting:v,loading:b,getCaptcha:f}}const ge={class:"w-full flex-y-center gap-16px"},_e=L({name:"CodeLogin",__name:"code-login",setup(b){const{toggleLoginModule:_}=F(),{formRef:i,validate:d}=E(),{label:c,isCounting:u,loading:v,getCaptcha:g}=q(),n=U({phone:"",code:""}),f=k(()=>{const{formRules:t}=I();return{phone:t.phone,code:t.code}});async function r(){var t;await d(),(t=window.$message)==null||t.success(a("page.login.common.validateSuccess"))}return(t,l)=>{const m=D,p=O,C=B,R=A,z=T;return P(),S(z,{ref_key:"formRef",ref:i,model:e(n),rules:e(f),size:"large","show-label":!1,onKeyup:M(r,["enter"])},{default:s(()=>[o(p,{path:"phone"},{default:s(()=>[o(m,{value:e(n).phone,"onUpdate:value":l[0]||(l[0]=w=>e(n).phone=w),placeholder:e(a)("page.login.common.phonePlaceholder")},null,8,["value","placeholder"])]),_:1}),o(p,{path:"code"},{default:s(()=>[x("div",ge,[o(m,{value:e(n).code,"onUpdate:value":l[1]||(l[1]=w=>e(n).code=w),placeholder:e(a)("page.login.common.codePlaceholder")},null,8,["value","placeholder"]),o(C,{size:"large",disabled:e(u),loading:e(v),onClick:l[2]||(l[2]=w=>e(g)(e(n).phone))},{default:s(()=>[y(h(e(c)),1)]),_:1},8,["disabled","loading"])])]),_:1}),o(R,{vertical:"",size:18,class:"w-full"},{default:s(()=>[o(C,{type:"primary",size:"large",round:"",block:"",onClick:r},{default:s(()=>[y(h(e(a)("common.confirm")),1)]),_:1}),o(C,{size:"large",round:"",block:"",onClick:l[3]||(l[3]=w=>e(_)("pwd-login"))},{default:s(()=>[y(h(e(a)("page.login.common.back")),1)]),_:1})]),_:1})]),_:1},8,["model","rules"])}}}),fe={class:"flex-y-center justify-between"},we={class:"flex-y-center justify-between gap-12px"},he={class:"flex-center gap-12px"},ve=L({name:"PwdLogin",__name:"pwd-login",setup(b){const _=J(),{toggleLoginModule:i}=F(),{formRef:d,validate:c}=E(),u=U({userName:"Soybean",password:"123456"}),v=k(()=>{const{formRules:r}=I();return{userName:r.userName,password:r.pwd}});async function g(){await c(),await _.login(u.userName,u.password)}const n=k(()=>[{key:"super",label:a("page.login.pwdLogin.superAdmin"),userName:"Super",password:"123456"},{key:"admin",label:a("page.login.pwdLogin.admin"),userName:"Admin",password:"123456"},{key:"user",label:a("page.login.pwdLogin.user"),userName:"User",password:"123456"}]);async function f(r){await _.login(r.userName,r.password)}return(r,t)=>{const l=D,m=O,p=ie,C=B,R=de,z=A,w=T;return P(),S(w,{ref_key:"formRef",ref:d,model:e(u),rules:e(v),size:"large","show-label":!1,onKeyup:M(g,["enter"])},{default:s(()=>[o(m,{path:"userName"},{default:s(()=>[o(l,{value:e(u).userName,"onUpdate:value":t[0]||(t[0]=N=>e(u).userName=N),placeholder:e(a)("page.login.common.userNamePlaceholder")},null,8,["value","placeholder"])]),_:1}),o(m,{path:"password"},{default:s(()=>[o(l,{value:e(u).password,"onUpdate:value":t[1]||(t[1]=N=>e(u).password=N),type:"password","show-password-on":"click",placeholder:e(a)("page.login.common.passwordPlaceholder")},null,8,["value","placeholder"])]),_:1}),o(z,{vertical:"",size:24},{default:s(()=>[x("div",fe,[o(p,null,{default:s(()=>[y(h(e(a)("page.login.pwdLogin.rememberMe")),1)]),_:1}),o(C,{quaternary:"",onClick:t[2]||(t[2]=N=>e(i)("reset-pwd"))},{default:s(()=>[y(h(e(a)("page.login.pwdLogin.forgetPassword")),1)]),_:1})]),o(C,{type:"primary",size:"large",round:"",block:"",loading:e(_).loginLoading,onClick:g},{default:s(()=>[y(h(e(a)("common.confirm")),1)]),_:1},8,["loading"]),x("div",we,[o(C,{class:"flex-1",block:"",onClick:t[3]||(t[3]=N=>e(i)("code-login"))},{default:s(()=>[y(h(e(a)(e($)["code-login"])),1)]),_:1}),o(C,{class:"flex-1",block:"",onClick:t[4]||(t[4]=N=>e(i)("register"))},{default:s(()=>[y(h(e(a)(e($).register)),1)]),_:1})]),o(R,{class:"text-14px text-#666 !m-0"},{default:s(()=>[y(h(e(a)("page.login.pwdLogin.otherAccountLogin")),1)]),_:1}),x("div",he,[(P(!0),V(ee,null,oe(e(n),N=>(P(),S(C,{key:N.key,type:"primary",onClick:Re=>f(N)},{default:s(()=>[y(h(N.label),1)]),_:2},1032,["onClick"]))),128))])]),_:1})]),_:1},8,["model","rules"])}}}),ye={class:"w-full flex-y-center gap-16px"},be=L({name:"Register",__name:"register",setup(b){const{toggleLoginModule:_}=F(),{formRef:i,validate:d}=E(),{label:c,isCounting:u,loading:v,getCaptcha:g}=q(),n=U({phone:"",code:"",password:"",confirmPassword:""}),f=k(()=>{const{formRules:t,createConfirmPwdRule:l}=I();return{phone:t.phone,code:t.code,password:t.pwd,confirmPassword:l(n.password)}});async function r(){var t;await d(),(t=window.$message)==null||t.success(a("page.login.common.validateSuccess"))}return(t,l)=>{const m=D,p=O,C=B,R=A,z=T;return P(),S(z,{ref_key:"formRef",ref:i,model:e(n),rules:e(f),size:"large","show-label":!1,onKeyup:M(r,["enter"])},{default:s(()=>[o(p,{path:"phone"},{default:s(()=>[o(m,{value:e(n).phone,"onUpdate:value":l[0]||(l[0]=w=>e(n).phone=w),placeholder:e(a)("page.login.common.phonePlaceholder")},null,8,["value","placeholder"])]),_:1}),o(p,{path:"code"},{default:s(()=>[x("div",ye,[o(m,{value:e(n).code,"onUpdate:value":l[1]||(l[1]=w=>e(n).code=w),placeholder:e(a)("page.login.common.codePlaceholder")},null,8,["value","placeholder"]),o(C,{size:"large",disabled:e(u),loading:e(v),onClick:l[2]||(l[2]=w=>e(g)(e(n).phone))},{default:s(()=>[y(h(e(c)),1)]),_:1},8,["disabled","loading"])])]),_:1}),o(p,{path:"password"},{default:s(()=>[o(m,{value:e(n).password,"onUpdate:value":l[3]||(l[3]=w=>e(n).password=w),type:"password","show-password-on":"click",placeholder:e(a)("page.login.common.passwordPlaceholder")},null,8,["value","placeholder"])]),_:1}),o(p,{path:"confirmPassword"},{default:s(()=>[o(m,{value:e(n).confirmPassword,"onUpdate:value":l[4]||(l[4]=w=>e(n).confirmPassword=w),type:"password","show-password-on":"click",placeholder:e(a)("page.login.common.confirmPasswordPlaceholder")},null,8,["value","placeholder"])]),_:1}),o(R,{vertical:"",size:18,class:"w-full"},{default:s(()=>[o(C,{type:"primary",size:"large",round:"",block:"",onClick:r},{default:s(()=>[y(h(e(a)("common.confirm")),1)]),_:1}),o(C,{size:"large",round:"",block:"",onClick:l[5]||(l[5]=w=>e(_)("pwd-login"))},{default:s(()=>[y(h(e(a)("page.login.common.back")),1)]),_:1})]),_:1})]),_:1},8,["model","rules"])}}}),Ce=L({name:"ResetPwd",__name:"reset-pwd",setup(b){const{toggleLoginModule:_}=F(),{formRef:i,validate:d}=E(),c=U({phone:"",code:"",password:"",confirmPassword:""}),u=k(()=>{const{formRules:g,createConfirmPwdRule:n}=I();return{phone:g.phone,password:g.pwd,confirmPassword:n(c.password)}});async function v(){var g;await d(),(g=window.$message)==null||g.success(a("page.login.common.validateSuccess"))}return(g,n)=>{const f=D,r=O,t=B,l=A,m=T;return P(),S(m,{ref_key:"formRef",ref:i,model:e(c),rules:e(u),size:"large","show-label":!1,onKeyup:M(v,["enter"])},{default:s(()=>[o(r,{path:"phone"},{default:s(()=>[o(f,{value:e(c).phone,"onUpdate:value":n[0]||(n[0]=p=>e(c).phone=p),placeholder:e(a)("page.login.common.phonePlaceholder")},null,8,["value","placeholder"])]),_:1}),o(r,{path:"code"},{default:s(()=>[o(f,{value:e(c).code,"onUpdate:value":n[1]||(n[1]=p=>e(c).code=p),placeholder:e(a)("page.login.common.codePlaceholder")},null,8,["value","placeholder"])]),_:1}),o(r,{path:"password"},{default:s(()=>[o(f,{value:e(c).password,"onUpdate:value":n[2]||(n[2]=p=>e(c).password=p),type:"password","show-password-on":"click",placeholder:e(a)("page.login.common.passwordPlaceholder")},null,8,["value","placeholder"])]),_:1}),o(r,{path:"confirmPassword"},{default:s(()=>[o(f,{value:e(c).confirmPassword,"onUpdate:value":n[3]||(n[3]=p=>e(c).confirmPassword=p),type:"password","show-password-on":"click",placeholder:e(a)("page.login.common.confirmPasswordPlaceholder")},null,8,["value","placeholder"])]),_:1}),o(l,{vertical:"",size:18,class:"w-full"},{default:s(()=>[o(t,{type:"primary",size:"large",round:"",block:"",onClick:v},{default:s(()=>[y(h(e(a)("common.confirm")),1)]),_:1}),o(t,{size:"large",round:"",block:"",onClick:n[4]||(n[4]=p=>e(_)("pwd-login"))},{default:s(()=>[y(h(e(a)("page.login.common.back")),1)]),_:1})]),_:1})]),_:1},8,["model","rules"])}}}),ke={class:"w-400px lt-sm:w-300px"},xe={class:"flex-y-center justify-between"},Ne={class:"text-28px text-primary font-500 lt-sm:text-22px"},Pe={class:"i-flex-col"},Se={class:"pt-24px"},$e={class:"text-18px text-primary font-medium"},Le={class:"pt-24px"},Ze=L({__name:"login",props:{module:{}},setup(b){const _=b,i=ne(),d=te(),c={"pwd-login":{label:$["pwd-login"],component:ve},"code-login":{label:$["code-login"],component:_e},register:{label:$.register,component:be},"reset-pwd":{label:$["reset-pwd"],component:Ce}},u=k(()=>c[_.module||"pwd-login"]),v=k(()=>d.darkMode?K(d.themeColor,600):d.themeColor),g=k(()=>{const n="#ffffff",f=d.darkMode?.5:.2;return le(n,d.themeColor,f)});return(n,f)=>{const r=me,t=H,l=W,m=G,p=ce;return P(),V("div",{class:"relative size-full flex-center overflow-hidden",style:j({backgroundColor:e(g)})},[o(r,{"theme-color":e(v)},null,8,["theme-color"]),o(p,{bordered:!1,class:"relative z-4 w-auto rd-12px"},{default:s(()=>[x("div",ke,[x("header",xe,[o(t,{class:"text-64px text-primary lt-sm:text-48px"}),x("h3",Ne,h(e(a)("system.title")),1),x("div",Pe,[o(l,{"theme-schema":e(d).themeScheme,"show-tooltip":!1,class:"text-20px lt-sm:text-18px",onSwitch:e(d).toggleThemeScheme},null,8,["theme-schema","onSwitch"]),e(d).header.multilingual.visible?(P(),S(m,{key:0,lang:e(i).locale,"lang-options":e(i).localeOptions,"show-tooltip":!1,onChangeLang:e(i).changeLocale},null,8,["lang","lang-options","onChangeLang"])):ae("",!0)])]),x("main",Se,[x("h3",$e,h(e(a)(e(u).label)),1),x("div",Le,[o(se,{name:e(d).page.animateMode,mode:"out-in",appear:""},{default:s(()=>[(P(),S(re(e(u).component)))]),_:1},8,["name"])])])])]),_:1})],4)}}});export{Ze as default};
