var jm=Object.defineProperty;var If=e=>{throw TypeError(e)};var Cm=(e,n,t)=>n in e?jm(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t;var Ae=(e,n,t)=>Cm(e,typeof n!="symbol"?n+"":n,t),cr=(e,n,t)=>n.has(e)||If("Cannot "+t);var ct=(e,n,t)=>(cr(e,n,"read from private field"),t?t.call(e):n.get(e)),dr=(e,n,t)=>n.has(e)?If("Cannot add the same private member more than once"):n instanceof WeakSet?n.add(e):n.set(e,t),Sn=(e,n,t,r)=>(cr(e,n,"write to private field"),r?r.call(e,t):n.set(e,t),t),lr=(e,n,t)=>(cr(e,n,"access private method"),t);function Pm(e,n){var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&n.indexOf(r)<0&&(t[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)n.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(t[r[i]]=e[r[i]]);return t}function ye(e,n,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{c(r.next(d))}catch(p){o(p)}}function f(d){try{c(r.throw(d))}catch(p){o(p)}}function c(d){d.done?s(d.value):i(d.value).then(a,f)}c((r=r.apply(e,n||[])).next())})}var Lm="*",Dm=function(){function e(){this._events={}}return e.prototype.on=function(n,t,r){return this._events[n]||(this._events[n]=[]),this._events[n].push({callback:t,once:!!r}),this},e.prototype.once=function(n,t){return this.on(n,t,!0)},e.prototype.emit=function(n){for(var t=this,r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];var s=this._events[n]||[],o=this._events[Lm]||[],a=function(f){for(var c=f.length,d=0;d<c;d++)if(f[d]){var p=f[d],m=p.callback,y=p.once;y&&(f.splice(d,1),f.length===0&&delete t._events[n],c--,d--),m.apply(t,r)}};a(s),a(o)},e.prototype.off=function(n,t){if(!n)this._events={};else if(!t)delete this._events[n];else{for(var r=this._events[n]||[],i=r.length,s=0;s<i;s++)r[s].callback===t&&(r.splice(s,1),i--,s--);r.length===0&&delete this._events[n]}return this},e.prototype.getEvents=function(){return this._events},e}();function Bu(e,n,t,r){for(;e.length;){const i=e.shift();if(t(i))return!0;n.add(i.id),r(i.id).forEach(o=>{n.has(o.id)||(n.add(o.id),e.push(o))})}return!1}function kn(e,n,t,r){if(t(e))return!0;n.add(e.id);for(const s of r(e.id))if(!n.has(s.id)&&kn(s,n,t,r))return!0;return!1}const Tf=()=>!0;class zm{constructor(n){Ae(this,"graph");Ae(this,"nodeFilter");Ae(this,"edgeFilter");Ae(this,"cacheEnabled");Ae(this,"inEdgesMap",new Map);Ae(this,"outEdgesMap",new Map);Ae(this,"bothEdgesMap",new Map);Ae(this,"allNodesMap",new Map);Ae(this,"allEdgesMap",new Map);Ae(this,"clearCache",()=>{this.inEdgesMap.clear(),this.outEdgesMap.clear(),this.bothEdgesMap.clear(),this.allNodesMap.clear(),this.allEdgesMap.clear()});Ae(this,"refreshCache",()=>{this.clearCache(),this.updateCache(this.graph.getAllNodes().map(n=>n.id))});Ae(this,"updateCache",n=>{const t=new Set;n.forEach(r=>{const i=this.bothEdgesMap.get(r);if(i&&i.forEach(s=>t.add(s.id)),!this.hasNode(r))this.inEdgesMap.delete(r),this.outEdgesMap.delete(r),this.bothEdgesMap.delete(r),this.allNodesMap.delete(r);else{const s=this.graph.getRelatedEdges(r,"in").filter(this.edgeFilter),o=this.graph.getRelatedEdges(r,"out").filter(this.edgeFilter),a=Array.from(new Set([...s,...o]));a.forEach(f=>t.add(f.id)),this.inEdgesMap.set(r,s),this.outEdgesMap.set(r,o),this.bothEdgesMap.set(r,a),this.allNodesMap.set(r,this.graph.getNode(r))}}),t.forEach(r=>{this.hasEdge(r)?this.allEdgesMap.set(r,this.graph.getEdge(r)):this.allEdgesMap.delete(r)})});Ae(this,"handleGraphChanged",n=>{const t=new Set;n.changes.forEach(r=>{switch(r.type){case"NodeAdded":t.add(r.value.id);break;case"NodeDataUpdated":t.add(r.id);break;case"EdgeAdded":t.add(r.value.source),t.add(r.value.target);break;case"EdgeUpdated":(r.propertyName==="source"||r.propertyName==="target")&&(t.add(r.oldValue),t.add(r.newValue));break;case"EdgeDataUpdated":if(n.graph.hasEdge(r.id)){const i=n.graph.getEdge(r.id);t.add(i.source),t.add(i.target)}break;case"EdgeRemoved":t.add(r.value.source),t.add(r.value.target);break;case"NodeRemoved":t.add(r.value.id);break}}),this.updateCache(t)});this.graph=n.graph;const t=n.nodeFilter||Tf,r=n.edgeFilter||Tf;this.nodeFilter=t,this.edgeFilter=i=>{const{source:s,target:o}=this.graph.getEdgeDetail(i.id);return!t(s)||!t(o)?!1:r(i,s,o)},n.cache==="auto"?(this.cacheEnabled=!0,this.startAutoCache()):n.cache==="manual"?this.cacheEnabled=!0:this.cacheEnabled=!1}startAutoCache(){this.refreshCache(),this.graph.on("changed",this.handleGraphChanged)}stopAutoCache(){this.graph.off("changed",this.handleGraphChanged)}checkNodeExistence(n){this.getNode(n)}hasNode(n){if(!this.graph.hasNode(n))return!1;const t=this.graph.getNode(n);return this.nodeFilter(t)}areNeighbors(n,t){return this.checkNodeExistence(n),this.getNeighbors(t).some(r=>r.id===n)}getNode(n){const t=this.graph.getNode(n);if(!this.nodeFilter(t))throw new Error("Node not found for id: "+n);return t}getRelatedEdges(n,t){return this.checkNodeExistence(n),this.cacheEnabled?t==="in"?this.inEdgesMap.get(n):t==="out"?this.outEdgesMap.get(n):this.bothEdgesMap.get(n):this.graph.getRelatedEdges(n,t).filter(this.edgeFilter)}getDegree(n,t){return this.getRelatedEdges(n,t).length}getSuccessors(n){const r=this.getRelatedEdges(n,"out").map(i=>this.getNode(i.target));return Array.from(new Set(r))}getPredecessors(n){const r=this.getRelatedEdges(n,"in").map(i=>this.getNode(i.source));return Array.from(new Set(r))}getNeighbors(n){const t=this.getPredecessors(n),r=this.getSuccessors(n);return Array.from(new Set([...t,...r]))}hasEdge(n){if(!this.graph.hasEdge(n))return!1;const t=this.graph.getEdge(n);return this.edgeFilter(t)}getEdge(n){const t=this.graph.getEdge(n);if(!this.edgeFilter(t))throw new Error("Edge not found for id: "+n);return t}getEdgeDetail(n){const t=this.getEdge(n);return{edge:t,source:this.getNode(t.source),target:this.getNode(t.target)}}hasTreeStructure(n){return this.graph.hasTreeStructure(n)}getRoots(n){return this.graph.getRoots(n).filter(this.nodeFilter)}getChildren(n,t){return this.checkNodeExistence(n),this.graph.getChildren(n,t).filter(this.nodeFilter)}getParent(n,t){this.checkNodeExistence(n);const r=this.graph.getParent(n,t);return!r||!this.nodeFilter(r)?null:r}getAllNodes(){return this.cacheEnabled?Array.from(this.allNodesMap.values()):this.graph.getAllNodes().filter(this.nodeFilter)}getAllEdges(){return this.cacheEnabled?Array.from(this.allEdgesMap.values()):this.graph.getAllEdges().filter(this.edgeFilter)}bfs(n,t,r="out"){const i={in:this.getPredecessors.bind(this),out:this.getSuccessors.bind(this),both:this.getNeighbors.bind(this)}[r];Bu([this.getNode(n)],new Set,t,i)}dfs(n,t,r="out"){const i={in:this.getPredecessors.bind(this),out:this.getSuccessors.bind(this),both:this.getNeighbors.bind(this)}[r];kn(this.getNode(n),new Set,t,i)}}class $e extends Dm{constructor(t){super();Ae(this,"nodeMap",new Map);Ae(this,"edgeMap",new Map);Ae(this,"inEdgesMap",new Map);Ae(this,"outEdgesMap",new Map);Ae(this,"bothEdgesMap",new Map);Ae(this,"treeIndices",new Map);Ae(this,"changes",[]);Ae(this,"batchCount",0);Ae(this,"onChanged",()=>{});Ae(this,"batch",t=>{this.batchCount+=1,t(),this.batchCount-=1,this.batchCount||this.commit()});t&&(t.nodes&&this.addNodes(t.nodes),t.edges&&this.addEdges(t.edges),t.tree&&this.addTree(t.tree),t.onChanged&&(this.onChanged=t.onChanged))}commit(){const t=this.changes;this.changes=[];const r={graph:this,changes:t};this.emit("changed",r),this.onChanged(r)}reduceChanges(t){let r=[];return t.forEach(i=>{switch(i.type){case"NodeRemoved":{let s=!1;r=r.filter(o=>{if(o.type==="NodeAdded"){const a=o.value.id===i.value.id;return a&&(s=!0),!a}else{if(o.type==="NodeDataUpdated")return o.id!==i.value.id;if(o.type==="TreeStructureChanged")return o.nodeId!==i.value.id}return!0}),s||r.push(i);break}case"EdgeRemoved":{let s=!1;r=r.filter(o=>{if(o.type==="EdgeAdded"){const a=o.value.id===i.value.id;return a&&(s=!0),!a}else if(o.type==="EdgeDataUpdated"||o.type==="EdgeUpdated")return o.id!==i.value.id;return!0}),s||r.push(i);break}case"NodeDataUpdated":case"EdgeDataUpdated":case"EdgeUpdated":{const s=r.findIndex(a=>a.type===i.type&&a.id===i.id&&(i.propertyName===void 0||a.propertyName===i.propertyName)),o=r[s];o?i.propertyName!==void 0?o.newValue=i.newValue:(r.splice(s,1),r.push(i)):r.push(i);break}case"TreeStructureDetached":{r=r.filter(s=>s.type==="TreeStructureAttached"||s.type==="TreeStructureChanged"?s.treeKey!==i.treeKey:!0),r.push(i);break}case"TreeStructureChanged":{const s=r.find(o=>o.type==="TreeStructureChanged"&&o.treeKey===i.treeKey&&o.nodeId===i.nodeId);s?s.newParentId=i.newParentId:r.push(i);break}default:r.push(i);break}}),r}checkNodeExistence(t){this.getNode(t)}hasNode(t){return this.nodeMap.has(t)}areNeighbors(t,r){return this.getNeighbors(r).some(i=>i.id===t)}getNode(t){const r=this.nodeMap.get(t);if(!r)throw new Error("Node not found for id: "+t);return r}getRelatedEdges(t,r){if(this.checkNodeExistence(t),r==="in"){const i=this.inEdgesMap.get(t);return Array.from(i)}else if(r==="out"){const i=this.outEdgesMap.get(t);return Array.from(i)}else{const i=this.bothEdgesMap.get(t);return Array.from(i)}}getDegree(t,r){return this.getRelatedEdges(t,r).length}getSuccessors(t){const i=this.getRelatedEdges(t,"out").map(s=>this.getNode(s.target));return Array.from(new Set(i))}getPredecessors(t){const i=this.getRelatedEdges(t,"in").map(s=>this.getNode(s.source));return Array.from(new Set(i))}getNeighbors(t){const r=this.getPredecessors(t),i=this.getSuccessors(t);return Array.from(new Set([...r,...i]))}doAddNode(t){if(this.hasNode(t.id))throw new Error("Node already exists: "+t.id);this.nodeMap.set(t.id,t),this.inEdgesMap.set(t.id,new Set),this.outEdgesMap.set(t.id,new Set),this.bothEdgesMap.set(t.id,new Set),this.treeIndices.forEach(r=>{r.childrenMap.set(t.id,new Set)}),this.changes.push({type:"NodeAdded",value:t})}addNodes(t){this.batch(()=>{for(const r of t)this.doAddNode(r)})}addNode(t){this.addNodes([t])}doRemoveNode(t){const r=this.getNode(t),i=this.bothEdgesMap.get(t);i==null||i.forEach(s=>this.doRemoveEdge(s.id)),this.nodeMap.delete(t),this.treeIndices.forEach(s=>{var a,f;(a=s.childrenMap.get(t))==null||a.forEach(c=>{s.parentMap.delete(c.id)});const o=s.parentMap.get(t);o&&((f=s.childrenMap.get(o.id))==null||f.delete(r)),s.parentMap.delete(t),s.childrenMap.delete(t)}),this.bothEdgesMap.delete(t),this.inEdgesMap.delete(t),this.outEdgesMap.delete(t),this.changes.push({type:"NodeRemoved",value:r})}removeNodes(t){this.batch(()=>{t.forEach(r=>this.doRemoveNode(r))})}removeNode(t){this.removeNodes([t])}updateNodeDataProperty(t,r,i){const s=this.getNode(t);this.batch(()=>{const o=s.data[r],a=i;s.data[r]=a,this.changes.push({type:"NodeDataUpdated",id:t,propertyName:r,oldValue:o,newValue:a})})}mergeNodeData(t,r){this.batch(()=>{Object.entries(r).forEach(([i,s])=>{this.updateNodeDataProperty(t,i,s)})})}updateNodeData(...t){const r=t[0],i=this.getNode(r);if(typeof t[1]=="string"){this.updateNodeDataProperty(r,t[1],t[2]);return}let s;if(typeof t[1]=="function"){const o=t[1];s=o(i.data)}else typeof t[1]=="object"&&(s=t[1]);this.batch(()=>{const o=i.data,a=s;i.data=s,this.changes.push({type:"NodeDataUpdated",id:r,oldValue:o,newValue:a})})}checkEdgeExistence(t){if(!this.hasEdge(t))throw new Error("Edge not found for id: "+t)}hasEdge(t){return this.edgeMap.has(t)}getEdge(t){return this.checkEdgeExistence(t),this.edgeMap.get(t)}getEdgeDetail(t){const r=this.getEdge(t);return{edge:r,source:this.getNode(r.source),target:this.getNode(r.target)}}doAddEdge(t){if(this.hasEdge(t.id))throw new Error("Edge already exists: "+t.id);this.checkNodeExistence(t.source),this.checkNodeExistence(t.target),this.edgeMap.set(t.id,t);const r=this.inEdgesMap.get(t.target),i=this.outEdgesMap.get(t.source),s=this.bothEdgesMap.get(t.source),o=this.bothEdgesMap.get(t.target);r.add(t),i.add(t),s.add(t),o.add(t),this.changes.push({type:"EdgeAdded",value:t})}addEdges(t){this.batch(()=>{for(const r of t)this.doAddEdge(r)})}addEdge(t){this.addEdges([t])}doRemoveEdge(t){const r=this.getEdge(t),i=this.outEdgesMap.get(r.source),s=this.inEdgesMap.get(r.target),o=this.bothEdgesMap.get(r.source),a=this.bothEdgesMap.get(r.target);i.delete(r),s.delete(r),o.delete(r),a.delete(r),this.edgeMap.delete(t),this.changes.push({type:"EdgeRemoved",value:r})}removeEdges(t){this.batch(()=>{t.forEach(r=>this.doRemoveEdge(r))})}removeEdge(t){this.removeEdges([t])}updateEdgeSource(t,r){const i=this.getEdge(t);this.checkNodeExistence(r);const s=i.source,o=r;this.outEdgesMap.get(s).delete(i),this.bothEdgesMap.get(s).delete(i),this.outEdgesMap.get(o).add(i),this.bothEdgesMap.get(o).add(i),i.source=r,this.batch(()=>{this.changes.push({type:"EdgeUpdated",id:t,propertyName:"source",oldValue:s,newValue:o})})}updateEdgeTarget(t,r){const i=this.getEdge(t);this.checkNodeExistence(r);const s=i.target,o=r;this.inEdgesMap.get(s).delete(i),this.bothEdgesMap.get(s).delete(i),this.inEdgesMap.get(o).add(i),this.bothEdgesMap.get(o).add(i),i.target=r,this.batch(()=>{this.changes.push({type:"EdgeUpdated",id:t,propertyName:"target",oldValue:s,newValue:o})})}updateEdgeDataProperty(t,r,i){const s=this.getEdge(t);this.batch(()=>{const o=s.data[r],a=i;s.data[r]=a,this.changes.push({type:"EdgeDataUpdated",id:t,propertyName:r,oldValue:o,newValue:a})})}updateEdgeData(...t){const r=t[0],i=this.getEdge(r);if(typeof t[1]=="string"){this.updateEdgeDataProperty(r,t[1],t[2]);return}let s;if(typeof t[1]=="function"){const o=t[1];s=o(i.data)}else typeof t[1]=="object"&&(s=t[1]);this.batch(()=>{const o=i.data,a=s;i.data=s,this.changes.push({type:"EdgeDataUpdated",id:r,oldValue:o,newValue:a})})}mergeEdgeData(t,r){this.batch(()=>{Object.entries(r).forEach(([i,s])=>{this.updateEdgeDataProperty(t,i,s)})})}checkTreeExistence(t){if(!this.hasTreeStructure(t))throw new Error("Tree structure not found for treeKey: "+t)}hasTreeStructure(t){return this.treeIndices.has(t)}attachTreeStructure(t){this.treeIndices.has(t)||(this.treeIndices.set(t,{parentMap:new Map,childrenMap:new Map}),this.batch(()=>{this.changes.push({type:"TreeStructureAttached",treeKey:t})}))}detachTreeStructure(t){this.checkTreeExistence(t),this.treeIndices.delete(t),this.batch(()=>{this.changes.push({type:"TreeStructureDetached",treeKey:t})})}addTree(t,r){this.batch(()=>{this.attachTreeStructure(r);const i=[],s=Array.isArray(t)?t:[t];for(;s.length;){const o=s.shift();i.push(o),o.children&&s.push(...o.children)}this.addNodes(i),i.forEach(o=>{var a;(a=o.children)==null||a.forEach(f=>{this.setParent(f.id,o.id,r)})})})}getRoots(t){return this.checkTreeExistence(t),this.getAllNodes().filter(r=>!this.getParent(r.id,t))}getChildren(t,r){this.checkNodeExistence(t),this.checkTreeExistence(r);const s=this.treeIndices.get(r).childrenMap.get(t);return Array.from(s||[])}getParent(t,r){return this.checkNodeExistence(t),this.checkTreeExistence(r),this.treeIndices.get(r).parentMap.get(t)||null}getAncestors(t,r){const i=[];let s=this.getNode(t),o;for(;o=this.getParent(s.id,r);)i.push(o),s=o;return i}setParent(t,r,i){var d,p;this.checkTreeExistence(i);const s=this.treeIndices.get(i);if(!s)return;const o=this.getNode(t),a=s.parentMap.get(t);if((a==null?void 0:a.id)===r)return;if(r==null){a&&((d=s.childrenMap.get(a.id))==null||d.delete(o)),s.parentMap.delete(t);return}const f=this.getNode(r);s.parentMap.set(t,f),a&&((p=s.childrenMap.get(a.id))==null||p.delete(o));let c=s.childrenMap.get(f.id);c||(c=new Set,s.childrenMap.set(f.id,c)),c.add(o),this.batch(()=>{this.changes.push({type:"TreeStructureChanged",treeKey:i,nodeId:t,oldParentId:a==null?void 0:a.id,newParentId:f.id})})}dfsTree(t,r,i){const s=o=>this.getChildren(o,i);return kn(this.getNode(t),new Set,r,s)}bfsTree(t,r,i){const s=o=>this.getChildren(o,i);return Bu([this.getNode(t)],new Set,r,s)}getAllNodes(){return Array.from(this.nodeMap.values())}getAllEdges(){return Array.from(this.edgeMap.values())}bfs(t,r,i="out"){const s={in:this.getPredecessors.bind(this),out:this.getSuccessors.bind(this),both:this.getNeighbors.bind(this)}[i];return Bu([this.getNode(t)],new Set,r,s)}dfs(t,r,i="out"){const s={in:this.getPredecessors.bind(this),out:this.getSuccessors.bind(this),both:this.getNeighbors.bind(this)}[i];return kn(this.getNode(t),new Set,r,s)}clone(){const t=this.getAllNodes().map(s=>({...s,data:{...s.data}})),r=this.getAllEdges().map(s=>({...s,data:{...s.data}})),i=new $e({nodes:t,edges:r});return this.treeIndices.forEach(({parentMap:s,childrenMap:o},a)=>{const f=new Map;s.forEach((d,p)=>{f.set(p,i.getNode(d.id))});const c=new Map;o.forEach((d,p)=>{c.set(p,new Set(Array.from(d).map(m=>i.getNode(m.id))))}),i.treeIndices.set(a,{parentMap:f,childrenMap:c})}),i}toJSON(){return JSON.stringify({nodes:this.getAllNodes(),edges:this.getAllEdges()})}createView(t){return new zm({graph:this,...t})}}/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Lp=Symbol("Comlink.proxy"),Fm=Symbol("Comlink.endpoint"),Bm=Symbol("Comlink.releaseProxy"),hr=Symbol("Comlink.finalizer"),In=Symbol("Comlink.thrown"),Dp=e=>typeof e=="object"&&e!==null||typeof e=="function",$m={canHandle:e=>Dp(e)&&e[Lp],serialize(e){const{port1:n,port2:t}=new MessageChannel;return Qu(e,n),[t,[t]]},deserialize(e){return e.start(),Wm(e)}},Gm={canHandle:e=>Dp(e)&&In in e,serialize({value:e}){let n;return e instanceof Error?n={isError:!0,value:{message:e.message,name:e.name,stack:e.stack}}:n={isError:!1,value:e},[n,[]]},deserialize(e){throw e.isError?Object.assign(new Error(e.value.message),e.value):e.value}},zp=new Map([["proxy",$m],["throw",Gm]]);function Um(e,n){for(const t of e)if(n===t||t==="*"||t instanceof RegExp&&t.test(n))return!0;return!1}function Qu(e,n=globalThis,t=["*"]){n.addEventListener("message",function r(i){if(!i||!i.data)return;if(!Um(t,i.origin)){console.warn(`Invalid origin '${i.origin}' for comlink proxy`);return}const{id:s,type:o,path:a}=Object.assign({path:[]},i.data),f=(i.data.argumentList||[]).map(kt);let c;try{const d=a.slice(0,-1).reduce((m,y)=>m[y],e),p=a.reduce((m,y)=>m[y],e);switch(o){case"GET":c=p;break;case"SET":d[a.slice(-1)[0]]=kt(i.data.value),c=!0;break;case"APPLY":c=p.apply(d,f);break;case"CONSTRUCT":{const m=new p(...f);c=Jm(m)}break;case"ENDPOINT":{const{port1:m,port2:y}=new MessageChannel;Qu(e,y),c=Zm(m,[m])}break;case"RELEASE":c=void 0;break;default:return}}catch(d){c={value:d,[In]:0}}Promise.resolve(c).catch(d=>({value:d,[In]:0})).then(d=>{const[p,m]=Pn(d);n.postMessage(Object.assign(Object.assign({},p),{id:s}),m),o==="RELEASE"&&(n.removeEventListener("message",r),Fp(n),hr in e&&typeof e[hr]=="function"&&e[hr]())}).catch(d=>{const[p,m]=Pn({value:new TypeError("Unserializable return value"),[In]:0});n.postMessage(Object.assign(Object.assign({},p),{id:s}),m)})}),n.start&&n.start()}function Vm(e){return e.constructor.name==="MessagePort"}function Fp(e){Vm(e)&&e.close()}function Wm(e,n){const t=new Map;return e.addEventListener("message",function(i){const{data:s}=i;if(!s||!s.id)return;const o=t.get(s.id);if(o)try{o(s)}finally{t.delete(s.id)}}),$u(e,t,[],n)}function qn(e){if(e)throw new Error("Proxy has been released and is not useable")}function Bp(e){return Gt(e,new Map,{type:"RELEASE"}).then(()=>{Fp(e)})}const jn=new WeakMap,Cn="FinalizationRegistry"in globalThis&&new FinalizationRegistry(e=>{const n=(jn.get(e)||0)-1;jn.set(e,n),n===0&&Bp(e)});function Ym(e,n){const t=(jn.get(n)||0)+1;jn.set(n,t),Cn&&Cn.register(e,n,e)}function Km(e){Cn&&Cn.unregister(e)}function $u(e,n,t=[],r=function(){}){let i=!1;const s=new Proxy(r,{get(o,a){if(qn(i),a===Bm)return()=>{Km(s),Bp(e),n.clear(),i=!0};if(a==="then"){if(t.length===0)return{then:()=>s};const f=Gt(e,n,{type:"GET",path:t.map(c=>c.toString())}).then(kt);return f.then.bind(f)}return $u(e,n,[...t,a])},set(o,a,f){qn(i);const[c,d]=Pn(f);return Gt(e,n,{type:"SET",path:[...t,a].map(p=>p.toString()),value:c},d).then(kt)},apply(o,a,f){qn(i);const c=t[t.length-1];if(c===Fm)return Gt(e,n,{type:"ENDPOINT"}).then(kt);if(c==="bind")return $u(e,n,t.slice(0,-1));const[d,p]=kf(f);return Gt(e,n,{type:"APPLY",path:t.map(m=>m.toString()),argumentList:d},p).then(kt)},construct(o,a){qn(i);const[f,c]=kf(a);return Gt(e,n,{type:"CONSTRUCT",path:t.map(d=>d.toString()),argumentList:f},c).then(kt)}});return Ym(s,e),s}function Xm(e){return Array.prototype.concat.apply([],e)}function kf(e){const n=e.map(Pn);return[n.map(t=>t[0]),Xm(n.map(t=>t[1]))]}const $p=new WeakMap;function Zm(e,n){return $p.set(e,n),e}function Jm(e){return Object.assign(e,{[Lp]:!0})}function Pn(e){for(const[n,t]of zp)if(t.canHandle(e)){const[r,i]=t.serialize(e);return[{type:"HANDLER",name:n,value:r},i]}return[{type:"RAW",value:e},$p.get(e)||[]]}function kt(e){switch(e.type){case"HANDLER":return zp.get(e.name).deserialize(e.value);case"RAW":return e.value}}function Gt(e,n,t,r){return new Promise(i=>{const s=Qm();n.set(s,i),e.start&&e.start(),e.postMessage(Object.assign({id:s},t),r)})}function Qm(){return new Array(4).fill(0).map(()=>Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16)).join("-")}function xt(e){return typeof e=="function"}function Hm(e){return e==null}function Hu(e){return Array.isArray(e)}var Wt=function(e){var n=typeof e;return e!==null&&n==="object"||n==="function"};function ey(e,n){if(e){var t;if(Hu(e))for(var r=0,i=e.length;r<i&&(t=n(e[r],r),t!==!1);r++);else if(Wt(e)){for(var s in e)if(e.hasOwnProperty(s)&&(t=n(e[s],s),t===!1))break}}}var ty=function(e){return typeof e=="object"&&e!==null},ny={}.toString,ry=function(e,n){return ny.call(e)==="[object "+n+"]"},Gu=function(e){if(!ty(e)||!ry(e,"Object"))return!1;if(Object.getPrototypeOf(e)===null)return!0;for(var n=e;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return Object.getPrototypeOf(e)===n};function fn(e){return typeof e=="string"}function me(e){return typeof e=="number"}var Ln=function(e){if(typeof e!="object"||e===null)return e;var n;if(Hu(e)){n=[];for(var t=0,r=e.length;t<r;t++)typeof e[t]=="object"&&e[t]!=null?n[t]=Ln(e[t]):n[t]=e[t]}else{n={};for(var i in e)typeof e[i]=="object"&&e[i]!=null?n[i]=Ln(e[i]):n[i]=e[i]}return n},iy=5;function sy(e,n){if(Object.hasOwn)return Object.hasOwn(e,n);if(e==null)throw new TypeError("Cannot convert undefined or null to object");return Object.prototype.hasOwnProperty.call(Object(e),n)}function Gp(e,n,t,r){t=t||0,r=r||iy;for(var i in n)if(sy(n,i)){var s=n[i];s!==null&&Gu(s)?(Gu(e[i])||(e[i]={}),t<r?Gp(e[i],s,t+1,r):e[i]=n[i]):Hu(s)?(e[i]=[],e[i]=e[i].concat(s)):s!==void 0&&(e[i]=s)}}var jf=function(e){for(var n=[],t=1;t<arguments.length;t++)n[t-1]=arguments[t];for(var r=0;r<n.length;r+=1)Gp(e,n[r]);return e},ay=Object.prototype.hasOwnProperty,Cf=function(e,n){if(e===null||!Gu(e))return{};var t={};return ey(n,function(r){ay.call(e,r)&&(t[r]=e[r])}),t};const oy=(e,n)=>{if(e!=="next"&&e!=="prev")return n},Pf=e=>{e.prev.next=e.next,e.next.prev=e.prev,delete e.next,delete e.prev};let uy=class{constructor(){const n={};n.prev=n,n.next=n.prev,this.shortcut=n}dequeue(){const n=this.shortcut,t=n.prev;if(t&&t!==n)return Pf(t),t}enqueue(n){const t=this.shortcut;n.prev&&n.next&&Pf(n),n.next=t.next,t.next.prev=n,t.next=n,n.prev=t}toString(){const n=[],t=this.shortcut;let r=t.prev;for(;r!==t;)n.push(JSON.stringify(r,oy)),r=r==null?void 0:r.prev;return`[${n.join(", ")}]`}};class fy extends uy{}const cy=()=>1,dy=(e,n)=>{var t;if(e.getAllNodes().length<=1)return[];const r=hy(e,n||cy);return(t=ly(r.graph,r.buckets,r.zeroIdx).map(s=>e.getRelatedEdges(s.v,"out").filter(({target:o})=>o===s.w)))===null||t===void 0?void 0:t.flat()},ly=(e,n,t)=>{let r=[];const i=n[n.length-1],s=n[0];let o;for(;e.getAllNodes().length;){for(;o=s.dequeue();)gr(e,n,t,o);for(;o=i.dequeue();)gr(e,n,t,o);if(e.getAllNodes().length){for(let a=n.length-2;a>0;--a)if(o=n[a].dequeue(),o){r=r.concat(gr(e,n,t,o,!0));break}}}return r},gr=(e,n,t,r,i)=>{var s,o;const a=[];return e.hasNode(r.v)&&((s=e.getRelatedEdges(r.v,"in"))===null||s===void 0||s.forEach(f=>{const c=f.data.weight,d=e.getNode(f.source);i&&a.push({v:f.source,w:f.target,in:0,out:0}),d.data.out===void 0&&(d.data.out=0),d.data.out-=c,Uu(n,t,Object.assign({v:d.id},d.data))}),(o=e.getRelatedEdges(r.v,"out"))===null||o===void 0||o.forEach(f=>{const c=f.data.weight,d=f.target,p=e.getNode(d);p.data.in===void 0&&(p.data.in=0),p.data.in-=c,Uu(n,t,Object.assign({v:p.id},p.data))}),e.removeNode(r.v)),i?a:void 0},hy=(e,n)=>{const t=new $e;let r=0,i=0;e.getAllNodes().forEach(f=>{t.addNode({id:f.id,data:{v:f.id,in:0,out:0}})}),e.getAllEdges().forEach(f=>{const c=t.getRelatedEdges(f.source,"out").find(p=>p.target===f.target),d=(n==null?void 0:n(f))||1;c?t.updateEdgeData(c==null?void 0:c.id,Object.assign(Object.assign({},c.data),{weight:c.data.weight+d})):t.addEdge({id:f.id,source:f.source,target:f.target,data:{weight:d}}),i=Math.max(i,t.getNode(f.source).data.out+=d),r=Math.max(r,t.getNode(f.target).data.in+=d)});const s=[],o=i+r+3;for(let f=0;f<o;f++)s.push(new fy);const a=r+1;return t.getAllNodes().forEach(f=>{Uu(s,a,Object.assign({v:f.id},t.getNode(f.id).data))}),{buckets:s,zeroIdx:a,graph:t}},Uu=(e,n,t)=>{t.out?t.in?e[t.out-t.in+n].enqueue(t):e[e.length-1].enqueue(t):e[0].enqueue(t)},gy=(e,n)=>{const r=dy(e,(i=>s=>s.data.weight||1)());r==null||r.forEach(i=>{const s=i.data;e.removeEdge(i.id),s.forwardName=i.data.name,s.reversed=!0,e.addEdge({id:i.id,source:i.target,target:i.source,data:Object.assign({},s)})})},py=e=>{e.getAllEdges().forEach(n=>{const t=n.data;if(t.reversed){e.removeEdge(n.id);const r=t.forwardName;delete t.reversed,delete t.forwardName,e.addEdge({id:n.id,source:n.target,target:n.source,data:Object.assign(Object.assign({},t),{forwardName:r})})}})},vy=(e,n)=>Number(e)-Number(n),Kt=(e,n,t,r)=>{let i;do i=`${r}${Math.random()}`;while(e.hasNode(i));return t.dummy=n,e.addNode({id:i,data:t}),i},my=e=>{const n=new $e;return e.getAllNodes().forEach(t=>{n.addNode(Object.assign({},t))}),e.getAllEdges().forEach(t=>{const r=n.getRelatedEdges(t.source,"out").find(i=>i.target===t.target);r?n.updateEdgeData(r==null?void 0:r.id,Object.assign(Object.assign({},r.data),{weight:r.data.weight+t.data.weight||0,minlen:Math.max(r.data.minlen,t.data.minlen||1)})):n.addEdge({id:t.id,source:t.source,target:t.target,data:{weight:t.data.weight||0,minlen:t.data.minlen||1}})}),n},Up=e=>{const n=new $e;return e.getAllNodes().forEach(t=>{e.getChildren(t.id).length||n.addNode(Object.assign({},t))}),e.getAllEdges().forEach(t=>{n.addEdge(t)}),n},yy=(e,n)=>e==null?void 0:e.reduce((t,r,i)=>(t[r]=n[i],t),{}),Lf=(e,n)=>{const t=Number(e.x),r=Number(e.y),i=Number(n.x)-t,s=Number(n.y)-r;let o=Number(e.width)/2,a=Number(e.height)/2;if(!i&&!s)return{x:0,y:0};let f,c;return Math.abs(s)*o>Math.abs(i)*a?(s<0&&(a=-a),f=a*i/s,c=a):(i<0&&(o=-o),f=o,c=o*s/i),{x:t+f,y:r+c}},cn=e=>{const n=[],t=Vp(e)+1;for(let r=0;r<t;r++)n.push([]);e.getAllNodes().forEach(r=>{const i=r.data.rank;i!==void 0&&n[i]&&n[i].push(r.id)});for(let r=0;r<t;r++)n[r]=n[r].sort((i,s)=>vy(e.getNode(i).data.order,e.getNode(s).data.order));return n},wy=e=>{const n=e.getAllNodes().filter(r=>r.data.rank!==void 0).map(r=>r.data.rank),t=Math.min(...n);e.getAllNodes().forEach(r=>{r.data.hasOwnProperty("rank")&&t!==1/0&&(r.data.rank-=t)})},by=(e,n=0)=>{const t=e.getAllNodes(),r=t.filter(a=>a.data.rank!==void 0).map(a=>a.data.rank),i=Math.min(...r),s=[];t.forEach(a=>{const f=(a.data.rank||0)-i;s[f]||(s[f]=[]),s[f].push(a.id)});let o=0;for(let a=0;a<s.length;a++){const f=s[a];f===void 0?a%n!==0&&(o-=1):o&&(f==null||f.forEach(c=>{const d=e.getNode(c);d&&(d.data.rank=d.data.rank||0,d.data.rank+=o)}))}},Df=(e,n,t,r)=>{const i={width:0,height:0};return me(t)&&me(r)&&(i.rank=t,i.order=r),Kt(e,"border",i,n)},Vp=e=>{let n;return e.getAllNodes().forEach(t=>{const r=t.data.rank;r!==void 0&&(n===void 0||r>n)&&(n=r)}),n||(n=0),n},_y=(e,n)=>{const t={lhs:[],rhs:[]};return e==null||e.forEach(r=>{n(r)?t.lhs.push(r):t.rhs.push(r)}),t},ef=(e,n)=>e.reduce((t,r)=>{const i=n(t),s=n(r);return i>s?r:t}),Wp=(e,n,t,r,i,s)=>{r.includes(n.id)||(r.push(n.id),t||s.push(n.id),i(n.id).forEach(o=>Wp(e,o,t,r,i,s)),t&&s.push(n.id))},Yp=(e,n,t,r)=>{const i=Array.isArray(n)?n:[n],s=f=>e.getNeighbors(f),o=[],a=[];return i.forEach(f=>{if(e.hasNode(f.id))Wp(e,f,t==="post",a,s,o);else throw new Error(`Graph does not have node: ${f}`)}),o},Ey=e=>{const n=t=>{const r=e.getChildren(t),i=e.getNode(t);if(r!=null&&r.length&&r.forEach(s=>n(s.id)),i.data.hasOwnProperty("minRank")){i.data.borderLeft=[],i.data.borderRight=[];for(let s=i.data.minRank,o=i.data.maxRank+1;s<o;s+=1)zf(e,"borderLeft","_bl",t,i,s),zf(e,"borderRight","_br",t,i,s)}};e.getRoots().forEach(t=>n(t.id))},zf=(e,n,t,r,i,s)=>{const o={rank:s,borderType:n,width:0,height:0},a=i.data[n][s-1],f=Kt(e,"border",o,t);i.data[n][s]=f,e.setParent(f,r),a&&e.addEdge({id:`e${Math.random()}`,source:a,target:f,data:{weight:1}})},xy=(e,n)=>{const t=n.toLowerCase();(t==="lr"||t==="rl")&&Kp(e)},Ny=(e,n)=>{const t=n.toLowerCase();(t==="bt"||t==="rl")&&My(e),(t==="lr"||t==="rl")&&(Sy(e),Kp(e))},Kp=e=>{e.getAllNodes().forEach(n=>{Ff(n)}),e.getAllEdges().forEach(n=>{Ff(n)})},Ff=e=>{const n=e.data.width;e.data.width=e.data.height,e.data.height=n},My=e=>{e.getAllNodes().forEach(n=>{pr(n.data)}),e.getAllEdges().forEach(n=>{var t;(t=n.data.points)===null||t===void 0||t.forEach(r=>pr(r)),n.data.hasOwnProperty("y")&&pr(n.data)})},pr=e=>{e!=null&&e.y&&(e.y=-e.y)},Sy=e=>{e.getAllNodes().forEach(n=>{vr(n.data)}),e.getAllEdges().forEach(n=>{var t;(t=n.data.points)===null||t===void 0||t.forEach(r=>vr(r)),n.data.hasOwnProperty("x")&&vr(n.data)})},vr=e=>{const n=e.x;e.x=e.y,e.y=n},qy=e=>{const n=Kt(e,"root",{},"_root"),t=Ry(e);let r=Math.max(...Object.values(t));Math.abs(r)===1/0&&(r=1);const i=r-1,s=2*i+1;e.getAllEdges().forEach(a=>{a.data.minlen*=s});const o=Oy(e)+1;return e.getRoots().forEach(a=>{Xp(e,n,s,o,i,t,a.id)}),{nestingRoot:n,nodeRankFactor:s}},Xp=(e,n,t,r,i,s,o)=>{const a=e.getChildren(o);if(!(a!=null&&a.length)){o!==n&&e.addEdge({id:`e${Math.random()}`,source:n,target:o,data:{weight:0,minlen:t}});return}const f=Df(e,"_bt"),c=Df(e,"_bb"),d=e.getNode(o);e.setParent(f,o),d.data.borderTop=f,e.setParent(c,o),d.data.borderBottom=c,a==null||a.forEach(p=>{Xp(e,n,t,r,i,s,p.id);const m=p.data.borderTop?p.data.borderTop:p.id,y=p.data.borderBottom?p.data.borderBottom:p.id,x=p.data.borderTop?r:2*r,_=m!==y?1:i-s[o]+1;e.addEdge({id:`e${Math.random()}`,source:f,target:m,data:{minlen:_,weight:x,nestingEdge:!0}}),e.addEdge({id:`e${Math.random()}`,source:y,target:c,data:{minlen:_,weight:x,nestingEdge:!0}})}),e.getParent(o)||e.addEdge({id:`e${Math.random()}`,source:n,target:f,data:{weight:0,minlen:i+s[o]}})},Ry=e=>{const n={},t=(r,i)=>{const s=e.getChildren(r);s==null||s.forEach(o=>t(o.id,i+1)),n[r]=i};return e.getRoots().forEach(r=>t(r.id,1)),n},Oy=e=>{let n=0;return e.getAllEdges().forEach(t=>{n+=t.data.weight}),n},Ay=(e,n)=>{n&&e.removeNode(n),e.getAllEdges().forEach(t=>{t.data.nestingEdge&&e.removeEdge(t.id)})},Iy="edge",Zp="edge-label",Ty=(e,n)=>{e.getAllEdges().forEach(t=>ky(e,t,n))},ky=(e,n,t)=>{let r=n.source,i=e.getNode(r).data.rank;const s=n.target,o=e.getNode(s).data.rank,a=n.data.labelRank;if(o===i+1)return;e.removeEdge(n.id);let f,c,d;for(d=0,++i;i<o;++d,++i)n.data.points=[],c={originalEdge:n,width:0,height:0,rank:i},f=Kt(e,Iy,c,"_d"),i===a&&(c.width=n.data.width,c.height=n.data.height,c.dummy=Zp,c.labelpos=n.data.labelpos),e.addEdge({id:`e${Math.random()}`,source:r,target:f,data:{weight:n.data.weight}}),d===0&&t.push(f),r=f;e.addEdge({id:`e${Math.random()}`,source:r,target:s,data:{weight:n.data.weight}})},jy=(e,n)=>{n.forEach(t=>{let r=e.getNode(t);const{data:i}=r,s=i.originalEdge;let o;s&&e.addEdge(s);let a=t;for(;r.data.dummy;)o=e.getSuccessors(a)[0],e.removeNode(a),s.data.points.push({x:r.data.x,y:r.data.y}),r.data.dummy===Zp&&(s.data.x=r.data.x,s.data.y=r.data.y,s.data.width=r.data.width,s.data.height=r.data.height),a=o.id,r=e.getNode(a)})},Cy=(e,n,t)=>{const r={};let i;t==null||t.forEach(s=>{let o=e.getParent(s),a,f;for(;o;){if(a=e.getParent(o.id),a?(f=r[a.id],r[a.id]=o.id):(f=i,i=o.id),f&&f!==o.id){n.hasNode(f)||n.addNode({id:f,data:{}}),n.hasNode(o.id)||n.addNode({id:o.id,data:{}}),n.hasEdge(`e${f}-${o.id}`)||n.addEdge({id:`e${f}-${o.id}`,source:f,target:o.id,data:{}});return}o=a}})},Py=(e,n,t)=>{const r=Ly(e),i=new $e({tree:[{id:r,children:[],data:{}}]});return e.getAllNodes().forEach(s=>{const o=e.getParent(s.id);(s.data.rank===n||s.data.minRank<=n&&n<=s.data.maxRank)&&(i.hasNode(s.id)||i.addNode(Object.assign({},s)),o!=null&&o.id&&!i.hasNode(o==null?void 0:o.id)&&i.addNode(Object.assign({},o)),i.setParent(s.id,(o==null?void 0:o.id)||r),e.getRelatedEdges(s.id,t).forEach(a=>{const f=a.source===s.id?a.target:a.source;i.hasNode(f)||i.addNode(Object.assign({},e.getNode(f)));const c=i.getRelatedEdges(f,"out").find(({target:p})=>p===s.id),d=c!==void 0?c.data.weight:0;c?i.updateEdgeData(c.id,Object.assign(Object.assign({},c.data),{weight:a.data.weight+d})):i.addEdge({id:a.id,source:f,target:s.id,data:{weight:a.data.weight+d}})}),s.data.hasOwnProperty("minRank")&&i.updateNodeData(s.id,Object.assign(Object.assign({},s.data),{borderLeft:s.data.borderLeft[n],borderRight:s.data.borderRight[n]})))}),i},Ly=e=>{let n;for(;e.hasNode(n=`_root${Math.random()}`););return n},Dy=(e,n,t)=>{const r=yy(t,t.map((d,p)=>p)),s=n.map(d=>{const p=e.getRelatedEdges(d,"out").map(m=>({pos:r[m.target]||0,weight:m.data.weight}));return p==null?void 0:p.sort((m,y)=>m.pos-y.pos)}).flat().filter(d=>d!==void 0);let o=1;for(;o<t.length;)o<<=1;const a=2*o-1;o-=1;const f=Array(a).fill(0,0,a);let c=0;return s==null||s.forEach(d=>{if(d){let p=d.pos+o;f[p]+=d.weight;let m=0;for(;p>0;)p%2&&(m+=f[p+1]),p=p-1>>1,f[p]+=d.weight;c+=d.weight*m}}),c},Bf=(e,n)=>{let t=0;for(let r=1;r<(n==null?void 0:n.length);r+=1)t+=Dy(e,n[r-1],n[r]);return t},$f=e=>{const n={},t=e.getAllNodes(),r=t.map(c=>{var d;return(d=c.data.rank)!==null&&d!==void 0?d:-1/0}),i=Math.max(...r),s=[];for(let c=0;c<i+1;c++)s.push([]);const o=t.sort((c,d)=>e.getNode(c.id).data.rank-e.getNode(d.id).data.rank),f=o.filter(c=>e.getNode(c.id).data.fixorder!==void 0).sort((c,d)=>e.getNode(c.id).data.fixorder-e.getNode(d.id).data.fixorder);return f==null||f.forEach(c=>{isNaN(e.getNode(c.id).data.rank)||s[e.getNode(c.id).data.rank].push(c.id),n[c.id]=!0}),o==null||o.forEach(c=>e.dfsTree(c.id,d=>{if(n.hasOwnProperty(d.id))return!0;n[d.id]=!0,isNaN(d.data.rank)||s[d.data.rank].push(d.id)})),s},zy=(e,n)=>n.map(t=>{const r=e.getRelatedEdges(t,"in");if(!(r!=null&&r.length))return{v:t};const i={sum:0,weight:0};return r==null||r.forEach(s=>{const o=e.getNode(s.source);i.sum+=s.data.weight*o.data.order,i.weight+=s.data.weight}),{v:t,barycenter:i.sum/i.weight,weight:i.weight}}),Fy=(e,n)=>{var t,r,i;const s={};e==null||e.forEach((a,f)=>{s[a.v]={i:f,indegree:0,in:[],out:[],vs:[a.v]};const c=s[a.v];a.barycenter!==void 0&&(c.barycenter=a.barycenter,c.weight=a.weight)}),(t=n.getAllEdges())===null||t===void 0||t.forEach(a=>{const f=s[a.source],c=s[a.target];f!==void 0&&c!==void 0&&(c.indegree++,f.out.push(s[a.target]))});const o=(i=(r=Object.values(s)).filter)===null||i===void 0?void 0:i.call(r,a=>!a.indegree);return By(o)},By=e=>{var n,t;const r=[],i=f=>c=>{c.merged||(c.barycenter===void 0||f.barycenter===void 0||c.barycenter>=f.barycenter)&&$y(f,c)},s=f=>c=>{c.in.push(f),--c.indegree===0&&e.push(c)};for(;e!=null&&e.length;){const f=e.pop();r.push(f),(n=f.in.reverse())===null||n===void 0||n.forEach(c=>i(f)(c)),(t=f.out)===null||t===void 0||t.forEach(c=>s(f)(c))}const o=r.filter(f=>!f.merged),a=["vs","i","barycenter","weight"];return o.map(f=>{const c={};return a==null||a.forEach(d=>{f[d]!==void 0&&(c[d]=f[d])}),c})},$y=(e,n)=>{var t;let r=0,i=0;e.weight&&(r+=e.barycenter*e.weight,i+=e.weight),n.weight&&(r+=n.barycenter*n.weight,i+=n.weight),e.vs=(t=n.vs)===null||t===void 0?void 0:t.concat(e.vs),e.barycenter=r/i,e.weight=i,e.i=Math.min(n.i,e.i),n.merged=!0},Gy=(e,n,t,r)=>{const i=_y(e,m=>{const y=m.hasOwnProperty("fixorder")&&!isNaN(m.fixorder);return r?!y&&m.hasOwnProperty("barycenter"):y||m.hasOwnProperty("barycenter")}),s=i.lhs,o=i.rhs.sort((m,y)=>-m.i- -y.i),a=[];let f=0,c=0,d=0;s==null||s.sort(Uy(!!n,!!t)),d=Gf(a,o,d),s==null||s.forEach(m=>{var y;d+=(y=m.vs)===null||y===void 0?void 0:y.length,a.push(m.vs),f+=m.barycenter*m.weight,c+=m.weight,d=Gf(a,o,d)});const p={vs:a.flat()};return c&&(p.barycenter=f/c,p.weight=c),p},Gf=(e,n,t)=>{let r=t,i;for(;n.length&&(i=n[n.length-1]).i<=r;)n.pop(),e==null||e.push(i.vs),r++;return r},Uy=(e,n)=>(t,r)=>{if(t.fixorder!==void 0&&r.fixorder!==void 0)return t.fixorder-r.fixorder;if(t.barycenter<r.barycenter)return-1;if(t.barycenter>r.barycenter)return 1;if(n&&t.order!==void 0&&r.order!==void 0){if(t.order<r.order)return-1;if(t.order>r.order)return 1}return e?r.i-t.i:t.i-r.i},Jp=(e,n,t,r,i,s)=>{var o,a,f,c;let d=e.getChildren(n).map(E=>E.id);const p=e.getNode(n),m=p?p.data.borderLeft:void 0,y=p?p.data.borderRight:void 0,x={};m&&(d=d==null?void 0:d.filter(E=>E!==m&&E!==y));const _=zy(e,d||[]);_==null||_.forEach(E=>{var N;if(!((N=e.getChildren(E.v))===null||N===void 0)&&N.length){const S=Jp(e,E.v,t,r,s);x[E.v]=S,S.hasOwnProperty("barycenter")&&Wy(E,S)}});const b=Fy(_,t);Vy(b,x),(o=b.filter(E=>E.vs.length>0))===null||o===void 0||o.forEach(E=>{const N=e.getNode(E.vs[0]);N&&(E.fixorder=N.data.fixorder,E.order=N.data.order)});const w=Gy(b,r,i,s);if(m&&(w.vs=[m,w.vs,y].flat(),!((a=e.getPredecessors(m))===null||a===void 0)&&a.length)){const E=e.getNode(((f=e.getPredecessors(m))===null||f===void 0?void 0:f[0].id)||""),N=e.getNode(((c=e.getPredecessors(y))===null||c===void 0?void 0:c[0].id)||"");w.hasOwnProperty("barycenter")||(w.barycenter=0,w.weight=0),w.barycenter=(w.barycenter*w.weight+E.data.order+N.data.order)/(w.weight+2),w.weight+=2}return w},Vy=(e,n)=>{e==null||e.forEach(t=>{var r;const i=(r=t.vs)===null||r===void 0?void 0:r.map(s=>n[s]?n[s].vs:s);t.vs=i.flat()})},Wy=(e,n)=>{e.barycenter!==void 0?(e.barycenter=(e.barycenter*e.weight+n.barycenter*n.weight)/(e.weight+n.weight),e.weight+=n.weight):(e.barycenter=n.barycenter,e.weight=n.weight)},Yy=(e,n)=>{const t=Vp(e),r=[],i=[];for(let d=1;d<t+1;d++)r.push(d);for(let d=t-1;d>-1;d--)i.push(d);const s=Uf(e,r,"in"),o=Uf(e,i,"out");let a=$f(e);mr(e,a);let f=Number.POSITIVE_INFINITY,c;for(let d=0,p=0;p<4;++d,++p){Vf(d%2?s:o,d%4>=2,!1,n),a=cn(e);const m=Bf(e,a);m<f&&(p=0,c=Ln(a),f=m)}a=$f(e),mr(e,a);for(let d=0,p=0;p<4;++d,++p){Vf(d%2?s:o,d%4>=2,!0,n),a=cn(e);const m=Bf(e,a);m<f&&(p=0,c=Ln(a),f=m)}mr(e,c)},Uf=(e,n,t)=>n.map(r=>Py(e,r,t)),Vf=(e,n,t,r)=>{const i=new $e;e==null||e.forEach(s=>{var o;const a=s.getRoots()[0].id,f=Jp(s,a,i,n,t,r);for(let c=0;c<((o=f.vs)===null||o===void 0?void 0:o.length);c++){const d=s.getNode(f.vs[c]);d&&(d.data.order=c)}Cy(s,i,f.vs)})},mr=(e,n)=>{n==null||n.forEach(t=>{t==null||t.forEach((r,i)=>{e.getNode(r).data.order=i})})},Ky=(e,n)=>{const r=e.getAllNodes().filter(o=>{var a;return!(!((a=e.getChildren(o.id))===null||a===void 0)&&a.length)}).map(o=>o.data.rank),i=Math.max(...r),s=[];for(let o=0;o<i+1;o++)s[o]=[];n==null||n.forEach(o=>{const a=e.getNode(o);!a||a.data.dummy||isNaN(a.data.rank)||(a.data.fixorder=s[a.data.rank].length,s[a.data.rank].push(o))})},Xy=e=>{const n={};let t=0;const r=i=>{const s=t;e.getChildren(i).forEach(o=>r(o.id)),n[i]={low:s,lim:t++}};return e.getRoots().forEach(i=>r(i.id)),n},Zy=(e,n,t,r)=>{var i,s;const o=[],a=[],f=Math.min(n[t].low,n[r].low),c=Math.max(n[t].lim,n[r].lim);let d,p;d=t;do d=(i=e.getParent(d))===null||i===void 0?void 0:i.id,o.push(d);while(d&&(n[d].low>f||c>n[d].lim));for(p=d,d=r;d&&d!==p;)a.push(d),d=(s=e.getParent(d))===null||s===void 0?void 0:s.id;return{lca:p,path:o.concat(a.reverse())}},Jy=(e,n)=>{const t=Xy(e);n.forEach(r=>{var i,s;let o=r,a=e.getNode(o);const f=a.data.originalEdge;if(!f)return;const c=Zy(e,t,f.source,f.target),d=c.path,p=c.lca;let m=0,y=d[m],x=!0;for(;o!==f.target;){if(a=e.getNode(o),x){for(;y!==p&&((i=e.getNode(y))===null||i===void 0?void 0:i.data.maxRank)<a.data.rank;)m++,y=d[m];y===p&&(x=!1)}if(!x){for(;m<d.length-1&&((s=e.getNode(d[m+1]))===null||s===void 0?void 0:s.data.minRank)<=a.data.rank;)m++;y=d[m]}e.hasNode(y)&&e.setParent(o,y),o=e.getSuccessors(o)[0].id}})},Qy=(e,n)=>{const t={},r=(i,s)=>{let o=0,a=0;const f=i.length,c=s==null?void 0:s[(s==null?void 0:s.length)-1];return s==null||s.forEach((d,p)=>{var m;const y=e0(e,d),x=y?e.getNode(y.id).data.order:f;(y||d===c)&&((m=s.slice(a,p+1))===null||m===void 0||m.forEach(_=>{var b;(b=e.getPredecessors(_))===null||b===void 0||b.forEach(w=>{var E;const N=e.getNode(w.id),S=N.data.order;(S<o||x<S)&&!(N.data.dummy&&(!((E=e.getNode(_))===null||E===void 0)&&E.data.dummy))&&Qp(t,w.id,_)})}),a=p+1,o=x)}),s};return n!=null&&n.length&&n.reduce(r),t},Hy=(e,n)=>{const t={};function r(a,f,c,d,p){var m,y;let x;for(let _=f;_<c;_++)x=a[_],!((m=e.getNode(x))===null||m===void 0)&&m.data.dummy&&((y=e.getPredecessors(x))===null||y===void 0||y.forEach(b=>{const w=e.getNode(b.id);w.data.dummy&&(w.data.order<d||w.data.order>p)&&Qp(t,b.id,x)}))}function i(a){return JSON.stringify(a.slice(1))}function s(a,f){const c=i(a);f.get(c)||(r(...a),f.set(c,!0))}const o=(a,f)=>{let c=-1,d,p=0;const m=new Map;return f==null||f.forEach((y,x)=>{var _;if(((_=e.getNode(y))===null||_===void 0?void 0:_.data.dummy)==="border"){const b=e.getPredecessors(y)||[];b.length&&(d=e.getNode(b[0].id).data.order,s([f,p,x,c,d],m),p=x,c=d)}s([f,p,f.length,d,a.length],m)}),f};return n!=null&&n.length&&n.reduce(o),t},e0=(e,n)=>{var t,r;if(!((t=e.getNode(n))===null||t===void 0)&&t.data.dummy)return(r=e.getPredecessors(n))===null||r===void 0?void 0:r.find(i=>e.getNode(i.id).data.dummy)},Qp=(e,n,t)=>{let r=n,i=t;if(r>i){const o=r;r=i,i=o}let s=e[r];s||(e[r]=s={}),s[i]=!0},t0=(e,n,t)=>{let r=n,i=t;if(r>i){const s=n;r=i,i=s}return!!e[r]},n0=(e,n,t,r)=>{const i={},s={},o={};return n==null||n.forEach(a=>{a==null||a.forEach((f,c)=>{i[f]=f,s[f]=f,o[f]=c})}),n==null||n.forEach(a=>{let f=-1;a==null||a.forEach(c=>{let d=r(c).map(p=>p.id);if(d.length){d=d.sort((m,y)=>o[m]-o[y]);const p=(d.length-1)/2;for(let m=Math.floor(p),y=Math.ceil(p);m<=y;++m){const x=d[m];s[c]===c&&f<o[x]&&!t0(t,c,x)&&(s[x]=c,s[c]=i[c]=i[x],f=o[x])}}})}),{root:i,align:s}},r0=(e,n,t,r,i,s,o)=>{var a;const f={},c=i0(e,n,t,i,s,o),d=o?"borderLeft":"borderRight",p=(x,_)=>{let b=c.getAllNodes(),w=b.pop();const E={};for(;w;)E[w.id]?x(w.id):(E[w.id]=!0,b.push(w),b=b.concat(_(w.id))),w=b.pop()},m=x=>{f[x]=(c.getRelatedEdges(x,"in")||[]).reduce((_,b)=>Math.max(_,(f[b.source]||0)+b.data.weight),0)},y=x=>{const _=(c.getRelatedEdges(x,"out")||[]).reduce((w,E)=>Math.min(w,(f[E.target]||0)-E.data.weight),Number.POSITIVE_INFINITY),b=e.getNode(x);_!==Number.POSITIVE_INFINITY&&b.data.borderType!==d&&(f[x]=Math.max(f[x],_))};return p(m,c.getPredecessors.bind(c)),p(y,c.getSuccessors.bind(c)),(a=Object.values(r))===null||a===void 0||a.forEach(x=>{f[x]=f[t[x]]}),f},i0=(e,n,t,r,i,s)=>{const o=new $e,a=u0(r,i,s);return n==null||n.forEach(f=>{let c;f==null||f.forEach(d=>{const p=t[d];if(o.hasNode(p)||o.addNode({id:p,data:{}}),c){const m=t[c],y=o.getRelatedEdges(m,"out").find(x=>x.target===p);y?o.updateEdgeData(y.id,Object.assign(Object.assign({},y.data),{weight:Math.max(a(e,d,c),y.data.weight||0)})):o.addEdge({id:`e${Math.random()}`,source:m,target:p,data:{weight:Math.max(a(e,d,c),0)}})}c=d})}),o},s0=(e,n)=>ef(Object.values(n),t=>{var r;let i=Number.NEGATIVE_INFINITY,s=Number.POSITIVE_INFINITY;return(r=Object.keys(t))===null||r===void 0||r.forEach(o=>{const a=t[o],f=f0(e,o)/2;i=Math.max(a+f,i),s=Math.min(a-f,s)}),i-s});function a0(e,n){const t=Object.values(n),r=Math.min(...t),i=Math.max(...t);["u","d"].forEach(s=>{["l","r"].forEach(o=>{const a=s+o,f=e[a];let c;if(f===n)return;const d=Object.values(f);c=o==="l"?r-Math.min(...d):i-Math.max(...d),c&&(e[a]={},Object.keys(f).forEach(p=>{e[a][p]=f[p]+c}))})})}const o0=(e,n)=>{const t={};return Object.keys(e.ul).forEach(r=>{if(n)t[r]=e[n.toLowerCase()][r];else{const i=Object.values(e).map(s=>s[r]);t[r]=(i[0]+i[1])/2}}),t},u0=(e,n,t)=>(r,i,s)=>{const o=r.getNode(i),a=r.getNode(s);let f=0,c=0;if(f+=o.data.width/2,o.data.hasOwnProperty("labelpos"))switch((o.data.labelpos||"").toLowerCase()){case"l":c=-o.data.width/2;break;case"r":c=o.data.width/2;break}if(c&&(f+=t?c:-c),c=0,f+=(o.data.dummy?n:e)/2,f+=(a.data.dummy?n:e)/2,f+=a.data.width/2,a.data.labelpos)switch((a.data.labelpos||"").toLowerCase()){case"l":c=a.data.width/2;break;case"r":c=-a.data.width/2;break}return c&&(f+=t?c:-c),c=0,f},f0=(e,n)=>e.getNode(n).data.width||0,c0=(e,n)=>{const{ranksep:t=0}=n||{},r=cn(e);let i=0;r==null||r.forEach(s=>{const o=s.map(f=>e.getNode(f).data.height),a=Math.max(...o,0);s==null||s.forEach(f=>{e.getNode(f).data.y=i+a/2}),i+=a+t})},d0=(e,n)=>{const{align:t,nodesep:r=0,edgesep:i=0}=n||{},s=cn(e),o=Object.assign(Qy(e,s),Hy(e,s)),a={};let f=[];["u","d"].forEach(d=>{f=d==="u"?s:Object.values(s).reverse(),["l","r"].forEach(p=>{p==="r"&&(f=f.map(_=>Object.values(_).reverse()));const m=(d==="u"?e.getPredecessors:e.getSuccessors).bind(e),y=n0(e,f,o,m),x=r0(e,f,y.root,y.align,r,i,p==="r");p==="r"&&Object.keys(x).forEach(_=>x[_]=-x[_]),a[d+p]=x})});const c=s0(e,a);return c&&a0(a,c),o0(a,t)},l0=(e,n)=>{var t;const r=Up(e);c0(r,n);const i=d0(r,n);(t=Object.keys(i))===null||t===void 0||t.forEach(s=>{r.getNode(s).data.x=i[s]})},Hp=e=>{const n={},t=r=>{var i;const s=e.getNode(r);if(!s)return 0;if(n[r])return s.data.rank;n[r]=!0;let o;return(i=e.getRelatedEdges(r,"out"))===null||i===void 0||i.forEach(a=>{const f=t(a.target),c=a.data.minlen,d=f-c;d&&(o===void 0||d<o)&&(o=d)}),o||(o=0),s.data.rank=o,o};e.getAllNodes().filter(r=>e.getRelatedEdges(r.id,"in").length===0).forEach(r=>t(r.id))},h0=e=>{const n={};let t;const r=o=>{var a;const f=e.getNode(o);if(!f)return 0;if(n[o])return f.data.rank;n[o]=!0;let c;return(a=e.getRelatedEdges(o,"out"))===null||a===void 0||a.forEach(d=>{const p=r(d.target),m=d.data.minlen,y=p-m;y&&(c===void 0||y<c)&&(c=y)}),c||(c=0),(t===void 0||c<t)&&(t=c),f.data.rank=c,c};e.getAllNodes().filter(o=>e.getRelatedEdges(o.id,"in").length===0).forEach(o=>{o&&r(o.id)}),t===void 0&&(t=0);const i={},s=(o,a)=>{var f;const c=e.getNode(o),d=isNaN(c.data.layer)?a:c.data.layer;(c.data.rank===void 0||c.data.rank<d)&&(c.data.rank=d),!i[o]&&(i[o]=!0,(f=e.getRelatedEdges(o,"out"))===null||f===void 0||f.forEach(p=>{s(p.target,d+p.data.minlen)}))};e.getAllNodes().forEach(o=>{const a=o.data;a&&(isNaN(a.layer)?a.rank-=t:s(o.id,a.layer))})},At=(e,n)=>e.getNode(n.target).data.rank-e.getNode(n.source).data.rank-n.data.minlen,g0=e=>{const n=new $e({tree:[]}),t=e.getAllNodes()[0],r=e.getAllNodes().length;n.addNode(t);let i,s;for(;p0(n,e)<r;)i=ev(n,e),s=n.hasNode(i.source)?At(e,i):-At(e,i),tv(n,e,s);return n},p0=(e,n)=>{const t=r=>{n.getRelatedEdges(r,"both").forEach(i=>{const s=i.source,o=r===s?i.target:s;!e.hasNode(o)&&!At(n,i)&&(e.addNode({id:o,data:{}}),e.addEdge({id:i.id,source:r,target:o,data:{}}),t(o))})};return e.getAllNodes().forEach(r=>t(r.id)),e.getAllNodes().length},v0=e=>{const n=new $e({tree:[]}),t=e.getAllNodes()[0],r=e.getAllNodes().length;n.addNode(t);let i,s;for(;m0(n,e)<r;)i=ev(n,e),s=n.hasNode(i.source)?At(e,i):-At(e,i),tv(n,e,s);return n},m0=(e,n)=>{const t=r=>{var i;(i=n.getRelatedEdges(r,"both"))===null||i===void 0||i.forEach(s=>{const o=s.source,a=r===o?s.target:o;!e.hasNode(a)&&(n.getNode(a).data.layer!==void 0||!At(n,s))&&(e.addNode({id:a,data:{}}),e.addEdge({id:s.id,source:r,target:a,data:{}}),t(a))})};return e.getAllNodes().forEach(r=>t(r.id)),e.getAllNodes().length},ev=(e,n)=>ef(n.getAllEdges(),t=>e.hasNode(t.source)!==e.hasNode(t.target)?At(n,t):1/0),tv=(e,n,t)=>{e.getAllNodes().forEach(r=>{const i=n.getNode(r.id);i.data.rank||(i.data.rank=0),i.data.rank+=t})},y0=e=>{const n=my(e);Hp(n);const t=g0(n);rv(t),nv(t,n);let r,i;for(;r=_0(t);)i=E0(t,n,r),x0(t,n,r,i)},nv=(e,n)=>{let t=Yp(e,e.getAllNodes(),"post");t=t.slice(0,(t==null?void 0:t.length)-1),t.forEach(r=>{w0(e,n,r)})},w0=(e,n,t)=>{const i=e.getNode(t).data.parent,s=e.getRelatedEdges(t,"both").find(o=>o.target===i||o.source===i);s.data.cutvalue=b0(e,n,t)},b0=(e,n,t)=>{const i=e.getNode(t).data.parent;let s=!0,o=n.getRelatedEdges(t,"out").find(f=>f.target===i),a=0;return o||(s=!1,o=n.getRelatedEdges(i,"out").find(f=>f.target===t)),a=o.data.weight,n.getRelatedEdges(t,"both").forEach(f=>{const c=f.source===t,d=c?f.target:f.source;if(d!==i){const p=c===s,m=f.data.weight;if(a+=p?m:-m,M0(e,t,d)){const y=e.getRelatedEdges(t,"both").find(x=>x.source===d||x.target===d).data.cutvalue;a+=p?-y:y}}}),a},rv=(e,n=e.getAllNodes()[0].id)=>{iv(e,{},1,n)},iv=(e,n,t,r,i)=>{var s;const o=t;let a=t;const f=e.getNode(r);return n[r]=!0,(s=e.getNeighbors(r))===null||s===void 0||s.forEach(c=>{n[c.id]||(a=iv(e,n,a,c.id,r))}),f.data.low=o,f.data.lim=a++,i?f.data.parent=i:delete f.data.parent,a},_0=e=>e.getAllEdges().find(n=>n.data.cutvalue<0),E0=(e,n,t)=>{let r=t.source,i=t.target;n.getRelatedEdges(r,"out").find(d=>d.target===i)||(r=t.target,i=t.source);const s=e.getNode(r),o=e.getNode(i);let a=s,f=!1;s.data.lim>o.data.lim&&(a=o,f=!0);const c=n.getAllEdges().filter(d=>f===Wf(e.getNode(d.source),a)&&f!==Wf(e.getNode(d.target),a));return ef(c,d=>At(n,d))},x0=(e,n,t,r)=>{const i=e.getRelatedEdges(t.source,"both").find(s=>s.source===t.target||s.target===t.target);i&&e.removeEdge(i.id),e.addEdge({id:`e${Math.random()}`,source:r.source,target:r.target,data:{}}),rv(e),nv(e,n),N0(e,n)},N0=(e,n)=>{const t=e.getAllNodes().find(i=>!i.data.parent);let r=Yp(e,t,"pre");r=r.slice(1),r.forEach(i=>{const s=e.getNode(i).data.parent;let o=n.getRelatedEdges(i,"out").find(f=>f.target===s),a=!1;!o&&n.hasNode(s)&&(o=n.getRelatedEdges(s,"out").find(f=>f.target===i),a=!0),n.getNode(i).data.rank=(n.hasNode(s)&&n.getNode(s).data.rank||0)+(a?o==null?void 0:o.data.minlen:-(o==null?void 0:o.data.minlen))})},M0=(e,n,t)=>e.getRelatedEdges(n,"both").find(r=>r.source===t||r.target===t),Wf=(e,n)=>n.data.low<=e.data.lim&&e.data.lim<=n.data.lim,S0=(e,n)=>{switch(n){case"network-simplex":R0(e);break;case"tight-tree":Yf(e);break;case"longest-path":q0(e);break;default:Yf(e)}},q0=Hp,Yf=e=>{h0(e),v0(e)},R0=e=>{y0(e)},O0=(e,n)=>{const{edgeLabelSpace:t,keepNodeOrder:r,prevGraph:i,rankdir:s,ranksep:o}=n;!r&&i&&I0(e,i);const a=L0(e);t&&(n.ranksep=D0(a,{rankdir:s,ranksep:o}));let f;try{f=A0(a,n)}catch(c){if(c.message==="Not possible to find intersection inside of the rectangle"){console.error(`The following error may be caused by improper layer setting, please make sure your manual layer setting does not violate the graph's structure:
`,c);return}throw c}return T0(e,a),f},A0=(e,n)=>{const{ranker:t,rankdir:r="tb",nodeOrder:i,keepNodeOrder:s,align:o,nodesep:a=50,edgesep:f=20,ranksep:c=50}=n;Y0(e),gy(e);const{nestingRoot:d,nodeRankFactor:p}=qy(e);S0(Up(e),t),z0(e),by(e,p),Ay(e,d),wy(e),F0(e),B0(e);const m=[];Ty(e,m),Jy(e,m),Ey(e),s&&Ky(e,i),Yy(e,s),K0(e),xy(e,r),l0(e,{align:o,nodesep:a,edgesep:f,ranksep:c}),X0(e),W0(e),jy(e,m),U0(e),Ny(e,r);const{width:y,height:x}=$0(e);return G0(e),V0(e),py(e),{width:y,height:x}},I0=(e,n)=>{e.getAllNodes().forEach(t=>{const r=e.getNode(t.id);if(n.hasNode(t.id)){const i=n.getNode(t.id);r.data.fixorder=i.data._order,delete i.data._order}else delete r.data.fixorder})},T0=(e,n)=>{e.getAllNodes().forEach(t=>{var r;const i=e.getNode(t.id);if(i){const s=n.getNode(t.id);i.data.x=s.data.x,i.data.y=s.data.y,i.data._order=s.data.order,i.data._rank=s.data.rank,!((r=n.getChildren(t.id))===null||r===void 0)&&r.length&&(i.data.width=s.data.width,i.data.height=s.data.height)}}),e.getAllEdges().forEach(t=>{const r=e.getEdge(t.id),i=n.getEdge(t.id);r.data.points=i?i.data.points:[],i&&i.data.hasOwnProperty("x")&&(r.data.x=i.data.x,r.data.y=i.data.y)})},k0=["width","height","layer","fixorder"],j0={width:0,height:0},C0=["minlen","weight","width","height","labeloffset"],P0={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},yr=["labelpos"],L0=e=>{const n=new $e({tree:[]});return e.getAllNodes().forEach(t=>{const r=Xf(e.getNode(t.id).data),i=Object.assign(Object.assign({},j0),r),s=Kf(i,k0);n.hasNode(t.id)||n.addNode({id:t.id,data:Object.assign({},s)});const o=e.hasTreeStructure("combo")?e.getParent(t.id,"combo"):e.getParent(t.id);Hm(o)||(n.hasNode(o.id)||n.addNode(Object.assign({},o)),n.setParent(t.id,o.id))}),e.getAllEdges().forEach(t=>{const r=Xf(e.getEdge(t.id).data),i={};yr==null||yr.forEach(s=>{r[s]!==void 0&&(i[s]=r[s])}),n.addEdge({id:t.id,source:t.source,target:t.target,data:Object.assign({},P0,Kf(r,C0),i)})}),n},D0=(e,n)=>{const{ranksep:t=0,rankdir:r}=n;return e.getAllNodes().forEach(i=>{isNaN(i.data.layer)||i.data.layer||(i.data.layer=0)}),e.getAllEdges().forEach(i=>{var s;i.data.minlen*=2,((s=i.data.labelpos)===null||s===void 0?void 0:s.toLowerCase())!=="c"&&(r==="TB"||r==="BT"?i.data.width+=i.data.labeloffset:i.data.height+=i.data.labeloffset)}),t/2},z0=e=>{e.getAllEdges().forEach(n=>{if(n.data.width&&n.data.height){const t=e.getNode(n.source),r=e.getNode(n.target),i={e:n,rank:(r.data.rank-t.data.rank)/2+t.data.rank};Kt(e,"edge-proxy",i,"_ep")}})},F0=e=>{let n=0;return e.getAllNodes().forEach(t=>{var r,i;t.data.borderTop&&(t.data.minRank=(r=e.getNode(t.data.borderTop))===null||r===void 0?void 0:r.data.rank,t.data.maxRank=(i=e.getNode(t.data.borderBottom))===null||i===void 0?void 0:i.data.rank,n=Math.max(n,t.data.maxRank||-1/0))}),n},B0=e=>{e.getAllNodes().forEach(n=>{n.data.dummy==="edge-proxy"&&(e.getEdge(n.data.e.id).data.labelRank=n.data.rank,e.removeNode(n.id))})},$0=(e,n)=>{let t,r=0,i,s=0;const{marginx:o=0,marginy:a=0}={},f=c=>{if(!c.data)return;const d=c.data.x,p=c.data.y,m=c.data.width,y=c.data.height;!isNaN(d)&&!isNaN(m)&&(t===void 0&&(t=d-m/2),t=Math.min(t,d-m/2),r=Math.max(r,d+m/2)),!isNaN(p)&&!isNaN(y)&&(i===void 0&&(i=p-y/2),i=Math.min(i,p-y/2),s=Math.max(s,p+y/2))};return e.getAllNodes().forEach(c=>{f(c)}),e.getAllEdges().forEach(c=>{c!=null&&c.data.hasOwnProperty("x")&&f(c)}),t-=o,i-=a,e.getAllNodes().forEach(c=>{c.data.x-=t,c.data.y-=i}),e.getAllEdges().forEach(c=>{var d;(d=c.data.points)===null||d===void 0||d.forEach(p=>{p.x-=t,p.y-=i}),c.data.hasOwnProperty("x")&&(c.data.x-=t),c.data.hasOwnProperty("y")&&(c.data.y-=i)}),{width:r-t+o,height:s-i+a}},G0=e=>{e.getAllEdges().forEach(n=>{const t=e.getNode(n.source),r=e.getNode(n.target);let i,s;n.data.points?(i=n.data.points[0],s=n.data.points[n.data.points.length-1]):(n.data.points=[],i={x:r.data.x,y:r.data.y},s={x:t.data.x,y:t.data.y}),n.data.points.unshift(Lf(t.data,i)),n.data.points.push(Lf(r.data,s))})},U0=e=>{e.getAllEdges().forEach(n=>{if(n.data.hasOwnProperty("x"))switch((n.data.labelpos==="l"||n.data.labelpos==="r")&&(n.data.width-=n.data.labeloffset),n.data.labelpos){case"l":n.data.x-=n.data.width/2+n.data.labeloffset;break;case"r":n.data.x+=n.data.width/2+n.data.labeloffset;break}})},V0=e=>{e.getAllEdges().forEach(n=>{var t;n.data.reversed&&((t=n.data.points)===null||t===void 0||t.reverse())})},W0=e=>{e.getAllNodes().forEach(n=>{var t,r,i;if(!((t=e.getChildren(n.id))===null||t===void 0)&&t.length){const s=e.getNode(n.id),o=e.getNode(s.data.borderTop),a=e.getNode(s.data.borderBottom),f=e.getNode(s.data.borderLeft[((r=s.data.borderLeft)===null||r===void 0?void 0:r.length)-1]),c=e.getNode(s.data.borderRight[((i=s.data.borderRight)===null||i===void 0?void 0:i.length)-1]);s.data.width=Math.abs((c==null?void 0:c.data.x)-(f==null?void 0:f.data.x))||10,s.data.height=Math.abs((a==null?void 0:a.data.y)-(o==null?void 0:o.data.y))||10,s.data.x=((f==null?void 0:f.data.x)||0)+s.data.width/2,s.data.y=((o==null?void 0:o.data.y)||0)+s.data.height/2}}),e.getAllNodes().forEach(n=>{n.data.dummy==="border"&&e.removeNode(n.id)})},Y0=e=>{e.getAllEdges().forEach(n=>{if(n.source===n.target){const t=e.getNode(n.source);t.data.selfEdges||(t.data.selfEdges=[]),t.data.selfEdges.push(n),e.removeEdge(n.id)}})},K0=e=>{const n=cn(e);n==null||n.forEach(t=>{let r=0;t==null||t.forEach((i,s)=>{var o;const a=e.getNode(i);a.data.order=s+r,(o=a.data.selfEdges)===null||o===void 0||o.forEach(f=>{Kt(e,"selfedge",{width:f.data.width,height:f.data.height,rank:a.data.rank,order:s+ ++r,e:f},"_se")}),delete a.data.selfEdges})})},X0=e=>{e.getAllNodes().forEach(n=>{const t=e.getNode(n.id);if(t.data.dummy==="selfedge"){const r=e.getNode(t.data.e.source),i=r.data.x+r.data.width/2,s=r.data.y,o=t.data.x-i,a=r.data.height/2;e.hasEdge(t.data.e.id)?e.updateEdgeData(t.data.e.id,t.data.e.data):e.addEdge({id:t.data.e.id,source:t.data.e.source,target:t.data.e.target,data:t.data.e.data}),e.removeNode(n.id),t.data.e.data.points=[{x:i+2*o/3,y:s-a},{x:i+5*o/6,y:s-a},{y:s,x:i+o},{x:i+5*o/6,y:s+a},{x:i+2*o/3,y:s+a}],t.data.e.data.x=t.data.x,t.data.e.data.y=t.data.y}})},Kf=(e,n)=>{const t={};return n==null||n.forEach(r=>{e[r]!==void 0&&(t[r]=+e[r])}),t},Xf=(e={})=>{const n={};return Object.keys(e).forEach(t=>{n[t.toLowerCase()]=e[t]}),n},Et=Array.isArray,sv=e=>{const n=[],t=e.length;for(let r=0;r<t;r+=1){n[r]=[];for(let i=0;i<t;i+=1)r===i?n[r][i]=0:e[r][i]===0||!e[r][i]?n[r][i]=1/0:n[r][i]=e[r][i]}for(let r=0;r<t;r+=1)for(let i=0;i<t;i+=1)for(let s=0;s<t;s+=1)n[i][s]>n[i][r]+n[r][s]&&(n[i][s]=n[i][r]+n[r][s]);return n},av=(e,n)=>{const{nodes:t,edges:r}=e,i=[],s={};if(!t)throw new Error("invalid nodes data!");return t&&t.forEach((o,a)=>{s[o.id]=a;const f=[];i.push(f)}),r==null||r.forEach(o=>{const{source:a,target:f}=o,c=s[a],d=s[f];c===void 0||d===void 0||(i[c][d]=1,i[d][c]=1)}),i},Z0=(e,n)=>{const t=[];return e.forEach(r=>{const i=[];r.forEach(s=>{i.push(s*n)}),t.push(i)}),t},J0=e=>{let n=1/0,t=1/0,r=-1/0,i=-1/0;return e.forEach(s=>{let o=s.data.size;Et(o)?o.length===1&&(o=[o[0],o[0]]):me(o)?o=[o,o]:(o===void 0||isNaN(o))&&(o=[30,30]);const a=[o[0]/2,o[1]/2],f=s.data.x-a[0],c=s.data.x+a[0],d=s.data.y-a[1],p=s.data.y+a[1];n>f&&(n=f),t>d&&(t=d),r<c&&(r=c),i<p&&(i=p)}),{minX:n,minY:t,maxX:r,maxY:i}},Zf=(e,n)=>Math.sqrt((e.x-n.x)*(e.x-n.x)+(e.y-n.y)*(e.y-n.y)),Vu=(e,n,t,r="TB",i,s={})=>{if(!(n!=null&&n.length))return;const{stopBranchFn:o,stopAllFn:a}=s;for(let f=0;f<n.length;f++){const c=n[f];if(e.hasNode(c.id)&&!(o!=null&&o(c))){if(a!=null&&a(c))return;r==="TB"&&t(c),Vu(e,e.getChildren(c.id,i),t,r,i,s),r!=="TB"&&t(c)}}},Wu=e=>{if(e===null)return e;if(e instanceof Date)return new Date(e.getTime());if(e instanceof Array){const n=[];return e.forEach(t=>{n.push(t)}),n.map(t=>Wu(t))}if(typeof e=="object"){const n={};return Object.keys(e).forEach(t=>{n[t]=Wu(e[t])}),n}return e},it=(e,n)=>{const t=Wu(e);return t.data=t.data||{},n&&(me(t.data.x)||(t.data.x=Math.random()*n[0]),me(t.data.y)||(t.data.y=Math.random()*n[1])),t};function hn(e){if(!e)return[0,0,0];if(me(e))return[e,e,e];if(e.length===0)return[0,0,0];const[n,t=n,r=n]=e;return[n,t,r]}function jt(e,n){let t;return xt(n)?t=n:me(n)?t=()=>n:t=()=>e,t}function tf(e,n,t=!0){return!n&&n!==0?r=>{const{size:i}=r.data||{};return i?Array.isArray(i)?t?Math.max(...i)||e:i:Wt(i)&&i.width&&i.height?t?Math.max(i.width,i.height)||e:[i.width,i.height]:i:e}:xt(n)?n:me(n)?()=>n:Array.isArray(n)?()=>t?Math.max(...n)||e:n:Wt(n)&&n.width&&n.height?()=>t?Math.max(n.width,n.height)||e:[n.width,n.height]:()=>e}const nf=(e,n,t=10)=>{let r;const i=typeof n=="function"?n:()=>n||0;return e?Array.isArray(e)?r=o=>e:xt(e)?r=e:r=o=>e:r=o=>{var a,f,c;if(!((a=o.data)===null||a===void 0)&&a.bboxSize)return(f=o.data)===null||f===void 0?void 0:f.bboxSize;if(!((c=o.data)===null||c===void 0)&&c.size){const d=o.data.size;return Array.isArray(d)?d:Wt(d)?[d.width,d.height]:d}return t},o=>{const a=r(o),f=i(o);return Math.max(...hn(a))+f}},Q0={rankdir:"TB",nodesep:50,ranksep:50,edgeLabelSpace:!0,ranker:"tight-tree",controlPoints:!1,radial:!1,focusNode:null};class H0{constructor(n={}){this.options=n,this.id="antv-dagre",this.options=Object.assign(Object.assign({},Q0),n)}execute(n,t){return ye(this,void 0,void 0,function*(){return this.genericDagreLayout(!1,n,t)})}assign(n,t){return ye(this,void 0,void 0,function*(){yield this.genericDagreLayout(!0,n,t)})}genericDagreLayout(n,t,r){return ye(this,void 0,void 0,function*(){const i=Object.assign(Object.assign({},this.options),r),{nodeSize:s,align:o,rankdir:a="TB",ranksep:f,nodesep:c,ranksepFunc:d,nodesepFunc:p,edgeLabelSpace:m,ranker:y,nodeOrder:x,begin:_,controlPoints:b,radial:w,sortByCombo:E,preset:N}=i,S=new $e({tree:[]}),R=jt(f||50,d),A=jt(c||50,p);let j=A,I=R;(a==="LR"||a==="RL")&&(j=R,I=A);const D=tf(10,s,!1),z=t.getAllNodes(),$=t.getAllEdges();z.forEach(Z=>{const ue=hn(D(Z)),ge=I(Z),de=j(Z),ie=ue[0]+2*de,_e=ue[1]+2*ge,G=Z.data.layer;me(G)?S.addNode({id:Z.id,data:{width:ie,height:_e,layer:G}}):S.addNode({id:Z.id,data:{width:ie,height:_e}})}),E&&(S.attachTreeStructure("combo"),z.forEach(Z=>{const{parentId:ue}=Z.data;ue!==void 0&&S.hasNode(ue)&&S.setParent(Z.id,ue,"combo")})),$.forEach(Z=>{S.addEdge({id:Z.id,source:Z.source,target:Z.target,data:{weight:Z.data.weight||1}})});let V;N!=null&&N.length&&(V=new $e({nodes:N})),O0(S,{prevGraph:V,edgeLabelSpace:m,keepNodeOrder:!!x,nodeOrder:x||[],acyclicer:"greedy",ranker:y,rankdir:a,nodesep:c,align:o});const Y=[0,0];if(_){let Z=1/0,ue=1/0;S.getAllNodes().forEach(ge=>{Z>ge.data.x&&(Z=ge.data.x),ue>ge.data.y&&(ue=ge.data.y)}),S.getAllEdges().forEach(ge=>{var de;(de=ge.data.points)===null||de===void 0||de.forEach(ie=>{Z>ie.x&&(Z=ie.x),ue>ie.y&&(ue=ie.y)})}),Y[0]=_[0]-Z,Y[1]=_[1]-ue}const ee=a==="LR"||a==="RL";if(!w){const Z=new Set,ge=a==="BT"||a==="RL"?(G,P)=>P-G:(G,P)=>G-P;S.getAllNodes().forEach(G=>{G.data.x=G.data.x+Y[0],G.data.y=G.data.y+Y[1],Z.add(ee?G.data.x:G.data.y)});const de=Array.from(Z).sort(ge),ie=ee?(G,P)=>G.x!==P.x:(G,P)=>G.y!==P.y,_e=ee?(G,P,X)=>{const te=Math.max(P.y,X.y),ce=Math.min(P.y,X.y);return G.filter(xe=>xe.y<=te&&xe.y>=ce)}:(G,P,X)=>{const te=Math.max(P.x,X.x),ce=Math.min(P.x,X.x);return G.filter(xe=>xe.x<=te&&xe.x>=ce)};S.getAllEdges().forEach((G,P)=>{var X;m&&b&&G.data.type!=="loop"&&(G.data.controlPoints=ew((X=G.data.points)===null||X===void 0?void 0:X.map(({x:te,y:ce})=>({x:te+Y[0],y:ce+Y[1]})),S.getNode(G.source),S.getNode(G.target),de,ee,ie,_e))})}let J=[];J=S.getAllNodes().map(Z=>it(Z));const oe=S.getAllEdges();return n&&(J.forEach(Z=>{t.mergeNodeData(Z.id,{x:Z.data.x,y:Z.data.y})}),oe.forEach(Z=>{t.mergeEdgeData(Z.id,{controlPoints:Z.data.controlPoints})})),{nodes:J,edges:oe}})}}const ew=(e,n,t,r,i,s,o)=>{let a=(e==null?void 0:e.slice(1,e.length-1))||[];if(n&&t){let{x:f,y:c}=n.data,{x:d,y:p}=t.data;if(i&&(f=n.data.y,c=n.data.x,d=t.data.y,p=t.data.x),p!==c&&f!==d){const m=r.indexOf(c),y=r[m+1];if(y){const b=a[0],w=i?{x:(c+y)/2,y:(b==null?void 0:b.y)||d}:{x:(b==null?void 0:b.x)||d,y:(c+y)/2};(!b||s(b,w))&&a.unshift(w)}const x=r.indexOf(p),_=Math.abs(x-m);if(_===1)a=o(a,n.data,t.data),a.length||a.push(i?{x:(c+p)/2,y:f}:{x:f,y:(c+p)/2});else if(_>1){const b=r[x-1];if(b){const w=a[a.length-1],E=i?{x:(p+b)/2,y:(w==null?void 0:w.y)||d}:{x:(w==null?void 0:w.x)||f,y:(p+b)/2};(!w||s(w,E))&&a.push(E)}}}}return a},Pt=(e,n,t)=>{const r=e.getAllNodes(),i=e.getAllEdges();if(!(r!=null&&r.length))return{nodes:[],edges:i};if(r.length===1)return n&&e.mergeNodeData(r[0].id,{x:t[0],y:t[1]}),{nodes:[Object.assign(Object.assign({},r[0]),{data:Object.assign(Object.assign({},r[0].data),{x:t[0],y:t[1]})})],edges:i}},tw={radius:null,startRadius:null,endRadius:null,startAngle:0,endAngle:2*Math.PI,clockwise:!0,divisions:1,ordering:null,angleRatio:1};class nw{constructor(n={}){this.options=n,this.id="circular",this.options=Object.assign(Object.assign({},tw),n)}execute(n,t){return ye(this,void 0,void 0,function*(){return this.genericCircularLayout(!1,n,t)})}assign(n,t){return ye(this,void 0,void 0,function*(){yield this.genericCircularLayout(!0,n,t)})}genericCircularLayout(n,t,r){return ye(this,void 0,void 0,function*(){const i=Object.assign(Object.assign({},this.options),r),{width:s,height:o,center:a,divisions:f,startAngle:c=0,endAngle:d=2*Math.PI,angleRatio:p,ordering:m,clockwise:y,nodeSpacing:x,nodeSize:_}=i,b=t.getAllNodes(),w=t.getAllEdges(),[E,N,S]=iw(s,o,a),R=b==null?void 0:b.length;if(!R||R===1)return Pt(t,n,S);const A=(d-c)/R;let{radius:j,startRadius:I,endRadius:D}=i;if(x){const ee=jt(10,x),J=tf(10,_);let oe=-1/0;b.forEach(Z=>{const ue=J(Z);oe<ue&&(oe=ue)});let be=0;b.forEach((Z,ue)=>{ue===0?be+=oe||10:be+=(ee(Z)||0)+(oe||10)}),j=be/(2*Math.PI)}else!j&&!I&&!D?j=Math.min(N,E)/2:!I&&D?I=D:I&&!D&&(D=I);const z=A*p;let $=[];m==="topology"?$=Jf(t,b):m==="topology-directed"?$=Jf(t,b,!0):m==="degree"?$=rw(t,b):$=b.map(ee=>it(ee));const V=Math.ceil(R/f);for(let ee=0;ee<R;++ee){let J=j;!J&&I!==null&&D!==null&&(J=I+ee*(D-I)/(R-1)),J||(J=10+ee*100/(R-1));let oe=c+ee%V*z+2*Math.PI/f*Math.floor(ee/V);y||(oe=d-ee%V*z-2*Math.PI/f*Math.floor(ee/V)),$[ee].data.x=S[0]+Math.cos(oe)*J,$[ee].data.y=S[1]+Math.sin(oe)*J}return n&&$.forEach(ee=>{t.mergeNodeData(ee.id,{x:ee.data.x,y:ee.data.y})}),{nodes:$,edges:w}})}}const Jf=(e,n,t=!1)=>{const r=[it(n[0])],i={},s=n.length;i[n[0].id]=!0;let o=0;return n.forEach((a,f)=>{if(f!==0)if((f===s-1||e.getDegree(a.id,"both")!==e.getDegree(n[f+1].id,"both")||e.areNeighbors(r[o].id,a.id))&&!i[a.id])r.push(it(a)),i[a.id]=!0,o++;else{const c=t?e.getSuccessors(r[o].id):e.getNeighbors(r[o].id);let d=!1;for(let m=0;m<c.length;m++){const y=c[m];if(e.getDegree(y.id)===e.getDegree(a.id)&&!i[y.id]){r.push(it(y)),i[y.id]=!0,d=!0;break}}let p=0;for(;!d&&(i[n[p].id]||(r.push(it(n[p])),i[n[p].id]=!0,d=!0),p++,p!==s););}}),r};function rw(e,n){const t=[];return n.forEach((r,i)=>{t.push(it(r))}),t.sort((r,i)=>e.getDegree(r.id,"both")-e.getDegree(i.id,"both")),t}const iw=(e,n,t)=>{let r=e,i=n,s=t;return!r&&typeof window<"u"&&(r=window.innerWidth),!i&&typeof window<"u"&&(i=window.innerHeight),s||(s=[r/2,i/2]),[r,i,s]},sw={nodeSize:30,nodeSpacing:10,preventOverlap:!1,sweep:void 0,equidistant:!1,startAngle:3/2*Math.PI,clockwise:!0,maxLevelDiff:void 0,sortBy:"degree"};class Yu{constructor(n={}){this.options=n,this.id="concentric",this.options=Object.assign(Object.assign({},sw),n)}execute(n,t){return ye(this,void 0,void 0,function*(){return this.genericConcentricLayout(!1,n,t)})}assign(n,t){return ye(this,void 0,void 0,function*(){yield this.genericConcentricLayout(!0,n,t)})}genericConcentricLayout(n,t,r){return ye(this,void 0,void 0,function*(){const i=Object.assign(Object.assign({},this.options),r),{center:s,width:o,height:a,sortBy:f,maxLevelDiff:c,sweep:d,clockwise:p,equidistant:m,preventOverlap:y,startAngle:x=3/2*Math.PI,nodeSize:_,nodeSpacing:b}=i,w=t.getAllNodes(),E=t.getAllEdges(),N=!o&&typeof window<"u"?window.innerWidth:o,S=!a&&typeof window<"u"?window.innerHeight:a,R=s||[N/2,S/2];if(!(w!=null&&w.length)||w.length===1)return Pt(t,n,R);const A=[];let j,I=0;Et(_)?j=Math.max(_[0],_[1]):xt(_)?(j=-1/0,w.forEach(Z=>{const ue=Math.max(...hn(_(Z)));ue>j&&(j=ue)})):j=_,Et(b)?I=Math.max(b[0],b[1]):me(b)&&(I=b),w.forEach(Z=>{const ue=it(Z);A.push(ue);let ge=j;const{data:de}=ue;Et(de.size)?ge=Math.max(de.size[0],de.size[1]):me(de.size)?ge=de.size:Wt(de.size)&&(ge=Math.max(de.size.width,de.size.height)),j=Math.max(j,ge),xt(b)&&(I=Math.max(b(Z),I))});const D={};A.forEach((Z,ue)=>{D[Z.id]=ue});let z=f;(!fn(z)||A[0].data[z]===void 0)&&(z="degree"),z==="degree"?A.sort((Z,ue)=>t.getDegree(ue.id,"both")-t.getDegree(Z.id,"both")):A.sort((Z,ue)=>ue.data[z]-Z.data[z]);const $=A[0],V=(c||(z==="degree"?t.getDegree($.id,"both"):$.data[z]))/4,Y=[{nodes:[]}];let ee=Y[0];A.forEach(Z=>{if(ee.nodes.length>0){const ue=Math.abs(z==="degree"?t.getDegree(ee.nodes[0].id,"both")-t.getDegree(Z.id,"both"):ee.nodes[0].data[z]-Z.data[z]);V&&ue>=V&&(ee={nodes:[]},Y.push(ee))}ee.nodes.push(Z)});let J=j+I;if(!y){const Z=Y.length>0&&Y[0].nodes.length>1,ge=(Math.min(N,S)/2-J)/(Y.length+(Z?1:0));J=Math.min(J,ge)}let oe=0;if(Y.forEach(Z=>{const ue=d===void 0?2*Math.PI-2*Math.PI/Z.nodes.length:d;if(Z.dTheta=ue/Math.max(1,Z.nodes.length-1),Z.nodes.length>1&&y){const ge=Math.cos(Z.dTheta)-Math.cos(0),de=Math.sin(Z.dTheta)-Math.sin(0),ie=Math.sqrt(J*J/(ge*ge+de*de));oe=Math.max(ie,oe)}Z.r=oe,oe+=J}),m){let Z=0,ue=0;for(let ge=0;ge<Y.length;ge++){const ie=(Y[ge].r||0)-ue;Z=Math.max(Z,ie)}ue=0,Y.forEach((ge,de)=>{de===0&&(ue=ge.r||0),ge.r=ue,ue+=Z})}return Y.forEach(Z=>{const ue=Z.dTheta||0,ge=Z.r||0;Z.nodes.forEach((de,ie)=>{const _e=x+(p?1:-1)*ue*ie;de.data.x=R[0]+ge*Math.cos(_e),de.data.y=R[1]+ge*Math.sin(_e)})}),n&&A.forEach(Z=>t.mergeNodeData(Z.id,{x:Z.data.x,y:Z.data.y})),{nodes:A,edges:E}})}}function aw(e){const n=+this._x.call(null,e),t=+this._y.call(null,e);return ov(this.cover(n,t),n,t,e)}function ov(e,n,t,r){if(isNaN(n)||isNaN(t))return e;var i,s=e._root,o={data:r},a=e._x0,f=e._y0,c=e._x1,d=e._y1,p,m,y,x,_,b,w,E;if(!s)return e._root=o,e;for(;s.length;)if((_=n>=(p=(a+c)/2))?a=p:c=p,(b=t>=(m=(f+d)/2))?f=m:d=m,i=s,!(s=s[w=b<<1|_]))return i[w]=o,e;if(y=+e._x.call(null,s.data),x=+e._y.call(null,s.data),n===y&&t===x)return o.next=s,i?i[w]=o:e._root=o,e;do i=i?i[w]=new Array(4):e._root=new Array(4),(_=n>=(p=(a+c)/2))?a=p:c=p,(b=t>=(m=(f+d)/2))?f=m:d=m;while((w=b<<1|_)===(E=(x>=m)<<1|y>=p));return i[E]=s,i[w]=o,e}function ow(e){var n,t,r=e.length,i,s,o=new Array(r),a=new Array(r),f=1/0,c=1/0,d=-1/0,p=-1/0;for(t=0;t<r;++t)isNaN(i=+this._x.call(null,n=e[t]))||isNaN(s=+this._y.call(null,n))||(o[t]=i,a[t]=s,i<f&&(f=i),i>d&&(d=i),s<c&&(c=s),s>p&&(p=s));if(f>d||c>p)return this;for(this.cover(f,c).cover(d,p),t=0;t<r;++t)ov(this,o[t],a[t],e[t]);return this}function uw(e,n){if(isNaN(e=+e)||isNaN(n=+n))return this;var t=this._x0,r=this._y0,i=this._x1,s=this._y1;if(isNaN(t))i=(t=Math.floor(e))+1,s=(r=Math.floor(n))+1;else{for(var o=i-t||1,a=this._root,f,c;t>e||e>=i||r>n||n>=s;)switch(c=(n<r)<<1|e<t,f=new Array(4),f[c]=a,a=f,o*=2,c){case 0:i=t+o,s=r+o;break;case 1:t=i-o,s=r+o;break;case 2:i=t+o,r=s-o;break;case 3:t=i-o,r=s-o;break}this._root&&this._root.length&&(this._root=a)}return this._x0=t,this._y0=r,this._x1=i,this._y1=s,this}function fw(){var e=[];return this.visit(function(n){if(!n.length)do e.push(n.data);while(n=n.next)}),e}function cw(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function Qe(e,n,t,r,i){this.node=e,this.x0=n,this.y0=t,this.x1=r,this.y1=i}function dw(e,n,t){var r,i=this._x0,s=this._y0,o,a,f,c,d=this._x1,p=this._y1,m=[],y=this._root,x,_;for(y&&m.push(new Qe(y,i,s,d,p)),t==null?t=1/0:(i=e-t,s=n-t,d=e+t,p=n+t,t*=t);x=m.pop();)if(!(!(y=x.node)||(o=x.x0)>d||(a=x.y0)>p||(f=x.x1)<i||(c=x.y1)<s))if(y.length){var b=(o+f)/2,w=(a+c)/2;m.push(new Qe(y[3],b,w,f,c),new Qe(y[2],o,w,b,c),new Qe(y[1],b,a,f,w),new Qe(y[0],o,a,b,w)),(_=(n>=w)<<1|e>=b)&&(x=m[m.length-1],m[m.length-1]=m[m.length-1-_],m[m.length-1-_]=x)}else{var E=e-+this._x.call(null,y.data),N=n-+this._y.call(null,y.data),S=E*E+N*N;if(S<t){var R=Math.sqrt(t=S);i=e-R,s=n-R,d=e+R,p=n+R,r=y.data}}return r}function lw(e){if(isNaN(d=+this._x.call(null,e))||isNaN(p=+this._y.call(null,e)))return this;var n,t=this._root,r,i,s,o=this._x0,a=this._y0,f=this._x1,c=this._y1,d,p,m,y,x,_,b,w;if(!t)return this;if(t.length)for(;;){if((x=d>=(m=(o+f)/2))?o=m:f=m,(_=p>=(y=(a+c)/2))?a=y:c=y,n=t,!(t=t[b=_<<1|x]))return this;if(!t.length)break;(n[b+1&3]||n[b+2&3]||n[b+3&3])&&(r=n,w=b)}for(;t.data!==e;)if(i=t,!(t=t.next))return this;return(s=t.next)&&delete t.next,i?(s?i.next=s:delete i.next,this):n?(s?n[b]=s:delete n[b],(t=n[0]||n[1]||n[2]||n[3])&&t===(n[3]||n[2]||n[1]||n[0])&&!t.length&&(r?r[w]=t:this._root=t),this):(this._root=s,this)}function hw(e){for(var n=0,t=e.length;n<t;++n)this.remove(e[n]);return this}function gw(){return this._root}function pw(){var e=0;return this.visit(function(n){if(!n.length)do++e;while(n=n.next)}),e}function vw(e){var n=[],t,r=this._root,i,s,o,a,f;for(r&&n.push(new Qe(r,this._x0,this._y0,this._x1,this._y1));t=n.pop();)if(!e(r=t.node,s=t.x0,o=t.y0,a=t.x1,f=t.y1)&&r.length){var c=(s+a)/2,d=(o+f)/2;(i=r[3])&&n.push(new Qe(i,c,d,a,f)),(i=r[2])&&n.push(new Qe(i,s,d,c,f)),(i=r[1])&&n.push(new Qe(i,c,o,a,d)),(i=r[0])&&n.push(new Qe(i,s,o,c,d))}return this}function mw(e){var n=[],t=[],r;for(this._root&&n.push(new Qe(this._root,this._x0,this._y0,this._x1,this._y1));r=n.pop();){var i=r.node;if(i.length){var s,o=r.x0,a=r.y0,f=r.x1,c=r.y1,d=(o+f)/2,p=(a+c)/2;(s=i[0])&&n.push(new Qe(s,o,a,d,p)),(s=i[1])&&n.push(new Qe(s,d,a,f,p)),(s=i[2])&&n.push(new Qe(s,o,p,d,c)),(s=i[3])&&n.push(new Qe(s,d,p,f,c))}t.push(r)}for(;r=t.pop();)e(r.node,r.x0,r.y0,r.x1,r.y1);return this}function yw(e){return e[0]}function ww(e){return arguments.length?(this._x=e,this):this._x}function bw(e){return e[1]}function _w(e){return arguments.length?(this._y=e,this):this._y}function Xt(e,n,t){var r=new rf(n??yw,t??bw,NaN,NaN,NaN,NaN);return e==null?r:r.addAll(e)}function rf(e,n,t,r,i,s){this._x=e,this._y=n,this._x0=t,this._y0=r,this._x1=i,this._y1=s,this._root=void 0}function Qf(e){for(var n={data:e.data},t=n;e=e.next;)t=t.next={data:e.data};return n}var He=Xt.prototype=rf.prototype;He.copy=function(){var e=new rf(this._x,this._y,this._x0,this._y0,this._x1,this._y1),n=this._root,t,r;if(!n)return e;if(!n.length)return e._root=Qf(n),e;for(t=[{source:n,target:e._root=new Array(4)}];n=t.pop();)for(var i=0;i<4;++i)(r=n.source[i])&&(r.length?t.push({source:r,target:n.target[i]=new Array(4)}):n.target[i]=Qf(r));return e};He.add=aw;He.addAll=ow;He.cover=uw;He.data=fw;He.extent=cw;He.find=dw;He.remove=lw;He.removeAll=hw;He.root=gw;He.size=pw;He.visit=vw;He.visitAfter=mw;He.x=ww;He.y=_w;function Ew(e){const n=+this._x.call(null,e),t=+this._y.call(null,e),r=+this._z.call(null,e);return uv(this.cover(n,t,r),n,t,r,e)}function uv(e,n,t,r,i){if(isNaN(n)||isNaN(t)||isNaN(r))return e;var s,o=e._root,a={data:i},f=e._x0,c=e._y0,d=e._z0,p=e._x1,m=e._y1,y=e._z1,x,_,b,w,E,N,S,R,A,j,I;if(!o)return e._root=a,e;for(;o.length;)if((S=n>=(x=(f+p)/2))?f=x:p=x,(R=t>=(_=(c+m)/2))?c=_:m=_,(A=r>=(b=(d+y)/2))?d=b:y=b,s=o,!(o=o[j=A<<2|R<<1|S]))return s[j]=a,e;if(w=+e._x.call(null,o.data),E=+e._y.call(null,o.data),N=+e._z.call(null,o.data),n===w&&t===E&&r===N)return a.next=o,s?s[j]=a:e._root=a,e;do s=s?s[j]=new Array(8):e._root=new Array(8),(S=n>=(x=(f+p)/2))?f=x:p=x,(R=t>=(_=(c+m)/2))?c=_:m=_,(A=r>=(b=(d+y)/2))?d=b:y=b;while((j=A<<2|R<<1|S)===(I=(N>=b)<<2|(E>=_)<<1|w>=x));return s[I]=o,s[j]=a,e}function xw(e){Array.isArray(e)||(e=Array.from(e));const n=e.length,t=new Float64Array(n),r=new Float64Array(n),i=new Float64Array(n);let s=1/0,o=1/0,a=1/0,f=-1/0,c=-1/0,d=-1/0;for(let p=0,m,y,x,_;p<n;++p)isNaN(y=+this._x.call(null,m=e[p]))||isNaN(x=+this._y.call(null,m))||isNaN(_=+this._z.call(null,m))||(t[p]=y,r[p]=x,i[p]=_,y<s&&(s=y),y>f&&(f=y),x<o&&(o=x),x>c&&(c=x),_<a&&(a=_),_>d&&(d=_));if(s>f||o>c||a>d)return this;this.cover(s,o,a).cover(f,c,d);for(let p=0;p<n;++p)uv(this,t[p],r[p],i[p],e[p]);return this}function Nw(e,n,t){if(isNaN(e=+e)||isNaN(n=+n)||isNaN(t=+t))return this;var r=this._x0,i=this._y0,s=this._z0,o=this._x1,a=this._y1,f=this._z1;if(isNaN(r))o=(r=Math.floor(e))+1,a=(i=Math.floor(n))+1,f=(s=Math.floor(t))+1;else{for(var c=o-r||1,d=this._root,p,m;r>e||e>=o||i>n||n>=a||s>t||t>=f;)switch(m=(t<s)<<2|(n<i)<<1|e<r,p=new Array(8),p[m]=d,d=p,c*=2,m){case 0:o=r+c,a=i+c,f=s+c;break;case 1:r=o-c,a=i+c,f=s+c;break;case 2:o=r+c,i=a-c,f=s+c;break;case 3:r=o-c,i=a-c,f=s+c;break;case 4:o=r+c,a=i+c,s=f-c;break;case 5:r=o-c,a=i+c,s=f-c;break;case 6:o=r+c,i=a-c,s=f-c;break;case 7:r=o-c,i=a-c,s=f-c;break}this._root&&this._root.length&&(this._root=d)}return this._x0=r,this._y0=i,this._z0=s,this._x1=o,this._y1=a,this._z1=f,this}function Mw(){var e=[];return this.visit(function(n){if(!n.length)do e.push(n.data);while(n=n.next)}),e}function Sw(e){return arguments.length?this.cover(+e[0][0],+e[0][1],+e[0][2]).cover(+e[1][0],+e[1][1],+e[1][2]):isNaN(this._x0)?void 0:[[this._x0,this._y0,this._z0],[this._x1,this._y1,this._z1]]}function Re(e,n,t,r,i,s,o){this.node=e,this.x0=n,this.y0=t,this.z0=r,this.x1=i,this.y1=s,this.z1=o}function qw(e,n,t,r){var i,s=this._x0,o=this._y0,a=this._z0,f,c,d,p,m,y,x=this._x1,_=this._y1,b=this._z1,w=[],E=this._root,N,S;for(E&&w.push(new Re(E,s,o,a,x,_,b)),r==null?r=1/0:(s=e-r,o=n-r,a=t-r,x=e+r,_=n+r,b=t+r,r*=r);N=w.pop();)if(!(!(E=N.node)||(f=N.x0)>x||(c=N.y0)>_||(d=N.z0)>b||(p=N.x1)<s||(m=N.y1)<o||(y=N.z1)<a))if(E.length){var R=(f+p)/2,A=(c+m)/2,j=(d+y)/2;w.push(new Re(E[7],R,A,j,p,m,y),new Re(E[6],f,A,j,R,m,y),new Re(E[5],R,c,j,p,A,y),new Re(E[4],f,c,j,R,A,y),new Re(E[3],R,A,d,p,m,j),new Re(E[2],f,A,d,R,m,j),new Re(E[1],R,c,d,p,A,j),new Re(E[0],f,c,d,R,A,j)),(S=(t>=j)<<2|(n>=A)<<1|e>=R)&&(N=w[w.length-1],w[w.length-1]=w[w.length-1-S],w[w.length-1-S]=N)}else{var I=e-+this._x.call(null,E.data),D=n-+this._y.call(null,E.data),z=t-+this._z.call(null,E.data),$=I*I+D*D+z*z;if($<r){var V=Math.sqrt(r=$);s=e-V,o=n-V,a=t-V,x=e+V,_=n+V,b=t+V,i=E.data}}return i}function Rw(e){if(isNaN(m=+this._x.call(null,e))||isNaN(y=+this._y.call(null,e))||isNaN(x=+this._z.call(null,e)))return this;var n,t=this._root,r,i,s,o=this._x0,a=this._y0,f=this._z0,c=this._x1,d=this._y1,p=this._z1,m,y,x,_,b,w,E,N,S,R,A;if(!t)return this;if(t.length)for(;;){if((E=m>=(_=(o+c)/2))?o=_:c=_,(N=y>=(b=(a+d)/2))?a=b:d=b,(S=x>=(w=(f+p)/2))?f=w:p=w,n=t,!(t=t[R=S<<2|N<<1|E]))return this;if(!t.length)break;(n[R+1&7]||n[R+2&7]||n[R+3&7]||n[R+4&7]||n[R+5&7]||n[R+6&7]||n[R+7&7])&&(r=n,A=R)}for(;t.data!==e;)if(i=t,!(t=t.next))return this;return(s=t.next)&&delete t.next,i?(s?i.next=s:delete i.next,this):n?(s?n[R]=s:delete n[R],(t=n[0]||n[1]||n[2]||n[3]||n[4]||n[5]||n[6]||n[7])&&t===(n[7]||n[6]||n[5]||n[4]||n[3]||n[2]||n[1]||n[0])&&!t.length&&(r?r[A]=t:this._root=t),this):(this._root=s,this)}function Ow(e){for(var n=0,t=e.length;n<t;++n)this.remove(e[n]);return this}function Aw(){return this._root}function Iw(){var e=0;return this.visit(function(n){if(!n.length)do++e;while(n=n.next)}),e}function Tw(e){var n=[],t,r=this._root,i,s,o,a,f,c,d;for(r&&n.push(new Re(r,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1));t=n.pop();)if(!e(r=t.node,s=t.x0,o=t.y0,a=t.z0,f=t.x1,c=t.y1,d=t.z1)&&r.length){var p=(s+f)/2,m=(o+c)/2,y=(a+d)/2;(i=r[7])&&n.push(new Re(i,p,m,y,f,c,d)),(i=r[6])&&n.push(new Re(i,s,m,y,p,c,d)),(i=r[5])&&n.push(new Re(i,p,o,y,f,m,d)),(i=r[4])&&n.push(new Re(i,s,o,y,p,m,d)),(i=r[3])&&n.push(new Re(i,p,m,a,f,c,y)),(i=r[2])&&n.push(new Re(i,s,m,a,p,c,y)),(i=r[1])&&n.push(new Re(i,p,o,a,f,m,y)),(i=r[0])&&n.push(new Re(i,s,o,a,p,m,y))}return this}function kw(e){var n=[],t=[],r;for(this._root&&n.push(new Re(this._root,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1));r=n.pop();){var i=r.node;if(i.length){var s,o=r.x0,a=r.y0,f=r.z0,c=r.x1,d=r.y1,p=r.z1,m=(o+c)/2,y=(a+d)/2,x=(f+p)/2;(s=i[0])&&n.push(new Re(s,o,a,f,m,y,x)),(s=i[1])&&n.push(new Re(s,m,a,f,c,y,x)),(s=i[2])&&n.push(new Re(s,o,y,f,m,d,x)),(s=i[3])&&n.push(new Re(s,m,y,f,c,d,x)),(s=i[4])&&n.push(new Re(s,o,a,x,m,y,p)),(s=i[5])&&n.push(new Re(s,m,a,x,c,y,p)),(s=i[6])&&n.push(new Re(s,o,y,x,m,d,p)),(s=i[7])&&n.push(new Re(s,m,y,x,c,d,p))}t.push(r)}for(;r=t.pop();)e(r.node,r.x0,r.y0,r.z0,r.x1,r.y1,r.z1);return this}function jw(e){return e[0]}function Cw(e){return arguments.length?(this._x=e,this):this._x}function Pw(e){return e[1]}function Lw(e){return arguments.length?(this._y=e,this):this._y}function Dw(e){return e[2]}function zw(e){return arguments.length?(this._z=e,this):this._z}function Bn(e,n,t,r){var i=new sf(n??jw,t??Pw,r??Dw,NaN,NaN,NaN,NaN,NaN,NaN);return e==null?i:i.addAll(e)}function sf(e,n,t,r,i,s,o,a,f){this._x=e,this._y=n,this._z=t,this._x0=r,this._y0=i,this._z0=s,this._x1=o,this._y1=a,this._z1=f,this._root=void 0}function Hf(e){for(var n={data:e.data},t=n;e=e.next;)t=t.next={data:e.data};return n}var Je=Bn.prototype=sf.prototype;Je.copy=function(){var e=new sf(this._x,this._y,this._z,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1),n=this._root,t,r;if(!n)return e;if(!n.length)return e._root=Hf(n),e;for(t=[{source:n,target:e._root=new Array(8)}];n=t.pop();)for(var i=0;i<8;++i)(r=n.source[i])&&(r.length?t.push({source:r,target:n.target[i]=new Array(8)}):n.target[i]=Hf(r));return e};Je.add=Ew;Je.addAll=xw;Je.cover=Nw;Je.data=Mw;Je.extent=Sw;Je.find=qw;Je.remove=Rw;Je.removeAll=Ow;Je.root=Aw;Je.size=Iw;Je.visit=Tw;Je.visitAfter=kw;Je.x=Cw;Je.y=Lw;Je.z=zw;const Fw=.81,wr=.1;function Bw(e,n,t,r,i=2){const s=n/t,o=e.getAllNodes(),a=o.map((d,p)=>{const{nodeStrength:m,x:y,y:x,z:_,size:b}=d.data;return{x:y,y:x,z:_,size:b,index:p,id:d.id,vx:0,vy:0,vz:0,weight:s*m}}),f=(i===2?Xt(a,d=>d.x,d=>d.y):Bn(a,d=>d.x,d=>d.y,d=>d.z)).visitAfter($w),c=new Map;return a.forEach(d=>{c.set(d.id,d),Uw(d,f,i)}),a.map((d,p)=>{const{id:m,data:y}=o[p],{mass:x=1}=y;r[m]={x:d.vx/x,y:d.vy/x,z:d.vz/x}}),r}function $w(e){let n=0,t=0,r=0,i=0,s=0;const o=e.length;if(o){for(let a=0;a<o;a++){const f=e[a];f&&f.weight&&(n+=f.weight,t+=f.x*f.weight,r+=f.y*f.weight,i+=f.z*f.weight,s+=f.size*f.weight)}e.x=t/n,e.y=r/n,e.z=i/n,e.size=s/n,e.weight=n}else{const a=e;e.x=a.data.x,e.y=a.data.y,e.z=a.data.z,e.size=a.data.size,e.weight=a.data.weight}}const Gw=(e,n,t,r,i,s,o)=>{var a;if(((a=e.data)===null||a===void 0?void 0:a.id)===s.id)return;const f=[t,r,i][o-1],c=s.x-e.x||wr,d=s.y-e.y||wr,p=s.z-e.z||wr,m=[c,d,p],y=f-n;let x=0;for(let w=0;w<o;w++)x+=m[w]*m[w];const b=Math.sqrt(x)*x;if(y*y*Fw<x){const w=e.weight/b;return s.vx+=c*w,s.vy+=d*w,s.vz+=p*w,!0}if(e.length)return!1;if(e.data!==s){const w=e.data.weight/b;s.vx+=c*w,s.vy+=d*w,s.vz+=p*w}};function Uw(e,n,t){n.visit((r,i,s,o,a)=>Gw(r,i,s,o,a,e,t))}const Vw={dimensions:2,maxIteration:500,gravity:10,factor:1,edgeStrength:50,nodeStrength:1e3,coulombDisScale:.005,damping:.9,maxSpeed:200,minMovement:.4,interval:.02,linkDistance:200,clusterNodeStrength:20,preventOverlap:!0,distanceThresholdMode:"mean"};class fv{constructor(n={}){this.options=n,this.id="force",this.timeInterval=0,this.judgingDistance=0,this.running=!1,this.options=Object.assign(Object.assign({},Vw),n)}execute(n,t){return ye(this,void 0,void 0,function*(){return this.genericForceLayout(!1,n,t)})}assign(n,t){return ye(this,void 0,void 0,function*(){yield this.genericForceLayout(!0,n,t)})}stop(){this.timeInterval&&typeof window<"u"&&window.clearInterval(this.timeInterval),this.running=!1}tick(n=this.options.maxIteration||1){if(this.lastResult)return this.lastResult;for(let r=0;(this.judgingDistance>this.lastOptions.minMovement||r<1)&&r<n;r++)this.runOneStep(this.lastCalcGraph,this.lastGraph,r,this.lastVelMap,this.lastOptions),this.updatePosition(this.lastGraph,this.lastCalcGraph,this.lastVelMap,this.lastOptions);const t={nodes:this.lastLayoutNodes,edges:this.lastLayoutEdges};return this.lastAssign&&t.nodes.forEach(r=>this.lastGraph.mergeNodeData(r.id,{x:r.data.x,y:r.data.y,z:this.options.dimensions===3?r.data.z:void 0})),t}genericForceLayout(n,t,r){return ye(this,void 0,void 0,function*(){const i=Object.assign(Object.assign({},this.options),r),s=t.getAllNodes(),o=t.getAllEdges(),a=this.formatOptions(i,t),{dimensions:f,width:c,height:d,nodeSize:p,getMass:m,nodeStrength:y,edgeStrength:x,linkDistance:_}=a,b=s.map((I,D)=>Object.assign(Object.assign({},I),{data:Object.assign(Object.assign({},I.data),{x:me(I.data.x)?I.data.x:Math.random()*c,y:me(I.data.y)?I.data.y:Math.random()*d,z:me(I.data.z)?I.data.z:Math.random()*Math.sqrt(c*d),size:p(I)||30,mass:m(I),nodeStrength:y(I)})})),w=o.map(I=>Object.assign(Object.assign({},I),{data:Object.assign(Object.assign({},I.data),{edgeStrength:x(I),linkDistance:_(I,t.getNode(I.source),t.getNode(I.target))})}));if(!(s!=null&&s.length))return this.lastResult={nodes:[],edges:o},{nodes:[],edges:o};const E={};s.forEach((I,D)=>{E[I.id]={x:0,y:0,z:0}});const N=new $e({nodes:b,edges:w});this.formatCentripetal(a,N);const{maxIteration:S,minMovement:R,onTick:A}=a;if(this.lastLayoutNodes=b,this.lastLayoutEdges=w,this.lastAssign=n,this.lastGraph=t,this.lastCalcGraph=N,this.lastOptions=a,this.lastVelMap=E,typeof window>"u")return;let j=0;return new Promise(I=>{this.timeInterval=window.setInterval(()=>{(!s||!this.running)&&I({nodes:br(t,b),edges:o}),this.runOneStep(N,t,j,E,a),this.updatePosition(t,N,E,a),n&&b.forEach(D=>t.mergeNodeData(D.id,{x:D.data.x,y:D.data.y,z:f===3?D.data.z:void 0})),A==null||A({nodes:br(t,b),edges:o}),j++,(j>=S||this.judgingDistance<R)&&(window.clearInterval(this.timeInterval),I({nodes:br(t,b),edges:o}))},0),this.running=!0})})}formatOptions(n,t){const r=Object.assign({},n),{width:i,height:s,getMass:o}=n;r.width=!i&&typeof window<"u"?window.innerWidth:i,r.height=!s&&typeof window<"u"?window.innerHeight:s,n.center||(r.center=[r.width/2,r.height/2]),o||(r.getMass=f=>{let c=1;me(f==null?void 0:f.data.mass)&&(c=f==null?void 0:f.data.mass);const d=t.getDegree(f.id,"both");return!d||d<5?c:d*5*c}),r.nodeSize=nf(n.nodeSize,n.nodeSpacing);const a=n.linkDistance?jt(1,n.linkDistance):f=>1+r.nodeSize(t.getNode(f.source))+r.nodeSize(t.getNode(f.target));return r.linkDistance=a,r.nodeStrength=jt(1,n.nodeStrength),r.edgeStrength=jt(1,n.edgeStrength),r}formatCentripetal(n,t){const{dimensions:r,centripetalOptions:i,center:s,clusterNodeStrength:o,leafCluster:a,clustering:f,nodeClusterBy:c}=n,d=t.getAllNodes(),p=i||{leaf:2,single:2,others:1,center:w=>({x:s[0],y:s[1],z:r===3?s[2]:void 0})};typeof o!="function"&&(n.clusterNodeStrength=w=>o);let m,y;if(a&&c&&(m=ec(t,c),y=Array.from(new Set(d==null?void 0:d.map(w=>w.data[c])))||[],n.centripetalOptions=Object.assign(p,{single:100,leaf:w=>{const{siblingLeaves:E,sameTypeLeaves:N}=m[w.id]||{};return(N==null?void 0:N.length)===(E==null?void 0:E.length)||(y==null?void 0:y.length)===1?1:n.clusterNodeStrength(w)},others:1,center:w=>{const E=t.getDegree(w.id,"both");if(!E)return{x:100,y:100,z:0};let N;if(E===1){const{sameTypeLeaves:S=[]}=m[w.id]||{};S.length===1?N=void 0:S.length>1&&(N=tc(S))}else N=void 0;return{x:N==null?void 0:N.x,y:N==null?void 0:N.y,z:N==null?void 0:N.z}}})),f&&c){m||(m=ec(t,c)),y||(y=Array.from(new Set(d.map(E=>E.data[c])))),y=y.filter(E=>E!==void 0);const w={};y.forEach(E=>{const N=d.filter(S=>S.data[c]===E).map(S=>t.getNode(S.id));w[E]=tc(N)}),n.centripetalOptions=Object.assign(p,{single:E=>n.clusterNodeStrength(E),leaf:E=>n.clusterNodeStrength(E),others:E=>n.clusterNodeStrength(E),center:E=>{const N=w[E.data[c]];return{x:N==null?void 0:N.x,y:N==null?void 0:N.y,z:N==null?void 0:N.z}}})}const{leaf:x,single:_,others:b}=n.centripetalOptions||{};x&&typeof x!="function"&&(n.centripetalOptions.leaf=()=>x),_&&typeof _!="function"&&(n.centripetalOptions.single=()=>_),b&&typeof b!="function"&&(n.centripetalOptions.others=()=>b)}runOneStep(n,t,r,i,s){const o={},a=n.getAllNodes(),f=n.getAllEdges();if(!(a!=null&&a.length))return;const{monitor:c}=s;if(this.calRepulsive(n,o,s),f&&this.calAttractive(n,o,s),this.calGravity(n,t,o,s),this.updateVelocity(n,o,i,s),c){const d=this.calTotalEnergy(o,a);c({energy:d,nodes:t.getAllNodes(),edges:t.getAllEdges(),iterations:r})}}calTotalEnergy(n,t){if(!(t!=null&&t.length))return 0;let r=0;return t.forEach((i,s)=>{const o=n[i.id].x,a=n[i.id].y,f=this.options.dimensions===3?n[i.id].z:0,c=o*o+a*a+f*f,{mass:d=1}=i.data;r+=d*c*.5}),r}calRepulsive(n,t,r){const{dimensions:i,factor:s,coulombDisScale:o}=r;Bw(n,s,o*o,t,i)}calAttractive(n,t,r){const{dimensions:i,nodeSize:s}=r;n.getAllEdges().forEach((o,a)=>{const{source:f,target:c}=o,d=n.getNode(f),p=n.getNode(c);if(!d||!p)return;let m=p.data.x-d.data.x,y=p.data.y-d.data.y,x=i===3?p.data.z-d.data.z:0;!m&&!y&&(m=Math.random()*.01,y=Math.random()*.01,i===3&&!x&&(x=Math.random()*.01));const _=Math.sqrt(m*m+y*y+x*x);if(_<s(d)+s(p))return;const b=m/_,w=y/_,E=x/_,{linkDistance:N=200,edgeStrength:S=200}=o.data||{},A=(N-_)*S,j=d.data.mass||1,I=p.data.mass||1,D=1/j,z=1/I,$=b*A,V=w*A,Y=E*A;t[f].x-=$*D,t[f].y-=V*D,t[f].z-=Y*D,t[c].x+=$*z,t[c].y+=V*z,t[c].z+=Y*z})}calGravity(n,t,r,i){const{getCenter:s}=i,o=n.getAllNodes(),a=t.getAllNodes(),f=t.getAllEdges(),{width:c,height:d,center:p,gravity:m,centripetalOptions:y}=i;o&&o.forEach(x=>{const{id:_,data:b}=x,{mass:w,x:E,y:N,z:S}=b,R=t.getNode(_);let A=0,j=0,I=0,D=m;const z=n.getDegree(_,"in"),$=n.getDegree(_,"out"),V=n.getDegree(_,"both"),Y=s==null?void 0:s(R,V);if(Y){const[ee,J,oe]=Y;A=E-ee,j=N-J,D=oe}else A=E-p[0],j=N-p[1],I=S-p[2];if(D&&(r[_].x-=D*A/w,r[_].y-=D*j/w,r[_].z-=D*I/w),y){const{leaf:ee,single:J,others:oe,center:be}=y,{x:Z,y:ue,z:ge,centerStrength:de}=(be==null?void 0:be(R,a,f,c,d))||{x:0,y:0,z:0,centerStrength:0};if(!me(Z)||!me(ue))return;const ie=(E-Z)/w,_e=(N-ue)/w,G=(S-ge)/w;if(de&&(r[_].x-=de*ie,r[_].y-=de*_e,r[_].z-=de*G),V===0){const X=J(R);if(!X)return;r[_].x-=X*ie,r[_].y-=X*_e,r[_].z-=X*G;return}if(z===0||$===0){const X=ee(R,a,f);if(!X)return;r[_].x-=X*ie,r[_].y-=X*_e,r[_].z-=X*G;return}const P=oe(R);if(!P)return;r[_].x-=P*ie,r[_].y-=P*_e,r[_].z-=P*G}})}updateVelocity(n,t,r,i){const{damping:s,maxSpeed:o,interval:a,dimensions:f}=i,c=n.getAllNodes();c!=null&&c.length&&c.forEach(d=>{const{id:p}=d;let m=(r[p].x+t[p].x*a)*s||.01,y=(r[p].y+t[p].y*a)*s||.01,x=f===3?(r[p].z+t[p].z*a)*s||.01:0;const _=Math.sqrt(m*m+y*y+x*x);if(_>o){const b=o/_;m=b*m,y=b*y,x=b*x}r[p]={x:m,y,z:x}})}updatePosition(n,t,r,i){const{distanceThresholdMode:s,interval:o,dimensions:a}=i,f=t.getAllNodes();if(!(f!=null&&f.length)){this.judgingDistance=0;return}let c=0;s==="max"?this.judgingDistance=-1/0:s==="min"&&(this.judgingDistance=1/0),f.forEach(d=>{const{id:p}=d,m=n.getNode(p);if(me(m.data.fx)&&me(m.data.fy)){t.mergeNodeData(p,{x:m.data.fx,y:m.data.fy,z:a===3?m.data.fz:void 0});return}const y=r[p].x*o,x=r[p].y*o,_=a===3?r[p].z*o:0;t.mergeNodeData(p,{x:d.data.x+y,y:d.data.y+x,z:d.data.z+_});const b=Math.sqrt(y*y+x*x+_*_);switch(s){case"max":this.judgingDistance<b&&(this.judgingDistance=b);break;case"min":this.judgingDistance>b&&(this.judgingDistance=b);break;default:c=c+b;break}}),(!s||s==="mean")&&(this.judgingDistance=c/f.length)}}const ec=(e,n)=>{const t=e.getAllNodes();if(!(t!=null&&t.length))return{};const r={};return t.forEach((i,s)=>{e.getDegree(i.id,"both")===1&&(r[i.id]=Ww(e,"leaf",i,n))}),r},Ww=(e,n,t,r)=>{const i=e.getDegree(t.id,"in"),s=e.getDegree(t.id,"out");let o=t,a=[];i===0?(o=e.getSuccessors(t.id)[0],a=e.getNeighbors(o.id)):s===0&&(o=e.getPredecessors(t.id)[0],a=e.getNeighbors(o.id)),a=a.filter(c=>e.getDegree(c.id,"in")===0||e.getDegree(c.id,"out")===0);const f=Yw(e,n,r,t,a);return{coreNode:o,siblingLeaves:a,sameTypeLeaves:f}},Yw=(e,n,t,r,i)=>{const s=r.data[t]||"";let o=(i==null?void 0:i.filter(a=>a.data[t]===s))||[];return o=o.filter(a=>e.getDegree(a.id,"in")===0||e.getDegree(a.id,"out")===0),o},tc=e=>{const n={x:0,y:0};e.forEach(r=>{const{x:i,y:s}=r.data;n.x+=i||0,n.y+=s||0});const t=e.length||1;return{x:n.x/t,y:n.y/t}},br=(e,n)=>n.map(t=>{const{id:r,data:i}=t,s=e.getNode(r);return Object.assign(Object.assign({},s),{data:Object.assign(Object.assign({},s.data),{x:i.x,y:i.y,z:i.z})})});var Rn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function cv(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function dv(e){if(Object.prototype.hasOwnProperty.call(e,"__esModule"))return e;var n=e.default;if(typeof n=="function"){var t=function r(){return this instanceof r?Reflect.construct(n,arguments,this.constructor):n.apply(this,arguments)};t.prototype=n.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var i=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(t,r,i.get?i:{enumerable:!0,get:function(){return e[r]}})}),t}var we={};const Kw=Object.prototype.toString;function dn(e){const n=Kw.call(e);return n.endsWith("Array]")&&!n.includes("Big")}var Xw=Object.freeze({__proto__:null,isAnyArray:dn}),Zw=dv(Xw);function Jw(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!dn(e))throw new TypeError("input must be an array");if(e.length===0)throw new TypeError("input must not be empty");var t=n.fromIndex,r=t===void 0?0:t,i=n.toIndex,s=i===void 0?e.length:i;if(r<0||r>=e.length||!Number.isInteger(r))throw new Error("fromIndex must be a positive integer smaller than length");if(s<=r||s>e.length||!Number.isInteger(s))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var o=e[r],a=r+1;a<s;a++)e[a]>o&&(o=e[a]);return o}function Qw(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!dn(e))throw new TypeError("input must be an array");if(e.length===0)throw new TypeError("input must not be empty");var t=n.fromIndex,r=t===void 0?0:t,i=n.toIndex,s=i===void 0?e.length:i;if(r<0||r>=e.length||!Number.isInteger(r))throw new Error("fromIndex must be a positive integer smaller than length");if(s<=r||s>e.length||!Number.isInteger(s))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var o=e[r],a=r+1;a<s;a++)e[a]<o&&(o=e[a]);return o}function Hw(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(dn(e)){if(e.length===0)throw new TypeError("input must not be empty")}else throw new TypeError("input must be an array");var t;if(n.output!==void 0){if(!dn(n.output))throw new TypeError("output option must be an array if specified");t=n.output}else t=new Array(e.length);var r=Qw(e),i=Jw(e);if(r===i)throw new RangeError("minimum and maximum input values are equal. Cannot rescale a constant array");var s=n.min,o=s===void 0?n.autoMinMax?r:0:s,a=n.max,f=a===void 0?n.autoMinMax?i:1:a;if(o>=f)throw new RangeError("min option must be smaller than max option");for(var c=(f-o)/(i-r),d=0;d<e.length;d++)t[d]=(e[d]-r)*c+o;return t}var e1=Object.freeze({__proto__:null,default:Hw}),t1=dv(e1),nc;function n1(){var tn,Ku,Ze;if(nc)return we;nc=1,Object.defineProperty(we,"__esModule",{value:!0});var e=Zw,n=t1;const t=" ".repeat(2),r=" ".repeat(4);function i(){return s(this)}function s(M,g={}){const{maxRows:l=15,maxColumns:u=10,maxNumSize:h=8,padMinus:v="auto"}=g;return`${M.constructor.name} {
${t}[
${r}${o(M,l,u,h,v)}
${t}]
${t}rows: ${M.rows}
${t}columns: ${M.columns}
}`}function o(M,g,l,u,h){const{rows:v,columns:q}=M,O=Math.min(v,g),T=Math.min(q,l),k=[];if(h==="auto"){h=!1;e:for(let B=0;B<O;B++)for(let C=0;C<T;C++)if(M.get(B,C)<0){h=!0;break e}}for(let B=0;B<O;B++){let C=[];for(let W=0;W<T;W++)C.push(a(M.get(B,W),u,h));k.push(`${C.join(" ")}`)}return T!==q&&(k[k.length-1]+=` ... ${q-l} more columns`),O!==v&&k.push(`... ${v-g} more rows`),k.join(`
${r}`)}function a(M,g,l){return(M>=0&&l?` ${f(M,g-1)}`:f(M,g)).padEnd(g)}function f(M,g){let l=M.toString();if(l.length<=g)return l;let u=M.toFixed(g);if(u.length>g&&(u=M.toFixed(Math.max(0,g-(u.length-g)))),u.length<=g&&!u.startsWith("0.000")&&!u.startsWith("-0.000"))return u;let h=M.toExponential(g);return h.length>g&&(h=M.toExponential(Math.max(0,g-(h.length-g)))),h.slice(0)}function c(M,g){M.prototype.add=function(u){return typeof u=="number"?this.addS(u):this.addM(u)},M.prototype.addS=function(u){for(let h=0;h<this.rows;h++)for(let v=0;v<this.columns;v++)this.set(h,v,this.get(h,v)+u);return this},M.prototype.addM=function(u){if(u=g.checkMatrix(u),this.rows!==u.rows||this.columns!==u.columns)throw new RangeError("Matrices dimensions must be equal");for(let h=0;h<this.rows;h++)for(let v=0;v<this.columns;v++)this.set(h,v,this.get(h,v)+u.get(h,v));return this},M.add=function(u,h){return new g(u).add(h)},M.prototype.sub=function(u){return typeof u=="number"?this.subS(u):this.subM(u)},M.prototype.subS=function(u){for(let h=0;h<this.rows;h++)for(let v=0;v<this.columns;v++)this.set(h,v,this.get(h,v)-u);return this},M.prototype.subM=function(u){if(u=g.checkMatrix(u),this.rows!==u.rows||this.columns!==u.columns)throw new RangeError("Matrices dimensions must be equal");for(let h=0;h<this.rows;h++)for(let v=0;v<this.columns;v++)this.set(h,v,this.get(h,v)-u.get(h,v));return this},M.sub=function(u,h){return new g(u).sub(h)},M.prototype.subtract=M.prototype.sub,M.prototype.subtractS=M.prototype.subS,M.prototype.subtractM=M.prototype.subM,M.subtract=M.sub,M.prototype.mul=function(u){return typeof u=="number"?this.mulS(u):this.mulM(u)},M.prototype.mulS=function(u){for(let h=0;h<this.rows;h++)for(let v=0;v<this.columns;v++)this.set(h,v,this.get(h,v)*u);return this},M.prototype.mulM=function(u){if(u=g.checkMatrix(u),this.rows!==u.rows||this.columns!==u.columns)throw new RangeError("Matrices dimensions must be equal");for(let h=0;h<this.rows;h++)for(let v=0;v<this.columns;v++)this.set(h,v,this.get(h,v)*u.get(h,v));return this},M.mul=function(u,h){return new g(u).mul(h)},M.prototype.multiply=M.prototype.mul,M.prototype.multiplyS=M.prototype.mulS,M.prototype.multiplyM=M.prototype.mulM,M.multiply=M.mul,M.prototype.div=function(u){return typeof u=="number"?this.divS(u):this.divM(u)},M.prototype.divS=function(u){for(let h=0;h<this.rows;h++)for(let v=0;v<this.columns;v++)this.set(h,v,this.get(h,v)/u);return this},M.prototype.divM=function(u){if(u=g.checkMatrix(u),this.rows!==u.rows||this.columns!==u.columns)throw new RangeError("Matrices dimensions must be equal");for(let h=0;h<this.rows;h++)for(let v=0;v<this.columns;v++)this.set(h,v,this.get(h,v)/u.get(h,v));return this},M.div=function(u,h){return new g(u).div(h)},M.prototype.divide=M.prototype.div,M.prototype.divideS=M.prototype.divS,M.prototype.divideM=M.prototype.divM,M.divide=M.div,M.prototype.mod=function(u){return typeof u=="number"?this.modS(u):this.modM(u)},M.prototype.modS=function(u){for(let h=0;h<this.rows;h++)for(let v=0;v<this.columns;v++)this.set(h,v,this.get(h,v)%u);return this},M.prototype.modM=function(u){if(u=g.checkMatrix(u),this.rows!==u.rows||this.columns!==u.columns)throw new RangeError("Matrices dimensions must be equal");for(let h=0;h<this.rows;h++)for(let v=0;v<this.columns;v++)this.set(h,v,this.get(h,v)%u.get(h,v));return this},M.mod=function(u,h){return new g(u).mod(h)},M.prototype.modulus=M.prototype.mod,M.prototype.modulusS=M.prototype.modS,M.prototype.modulusM=M.prototype.modM,M.modulus=M.mod,M.prototype.and=function(u){return typeof u=="number"?this.andS(u):this.andM(u)},M.prototype.andS=function(u){for(let h=0;h<this.rows;h++)for(let v=0;v<this.columns;v++)this.set(h,v,this.get(h,v)&u);return this},M.prototype.andM=function(u){if(u=g.checkMatrix(u),this.rows!==u.rows||this.columns!==u.columns)throw new RangeError("Matrices dimensions must be equal");for(let h=0;h<this.rows;h++)for(let v=0;v<this.columns;v++)this.set(h,v,this.get(h,v)&u.get(h,v));return this},M.and=function(u,h){return new g(u).and(h)},M.prototype.or=function(u){return typeof u=="number"?this.orS(u):this.orM(u)},M.prototype.orS=function(u){for(let h=0;h<this.rows;h++)for(let v=0;v<this.columns;v++)this.set(h,v,this.get(h,v)|u);return this},M.prototype.orM=function(u){if(u=g.checkMatrix(u),this.rows!==u.rows||this.columns!==u.columns)throw new RangeError("Matrices dimensions must be equal");for(let h=0;h<this.rows;h++)for(let v=0;v<this.columns;v++)this.set(h,v,this.get(h,v)|u.get(h,v));return this},M.or=function(u,h){return new g(u).or(h)},M.prototype.xor=function(u){return typeof u=="number"?this.xorS(u):this.xorM(u)},M.prototype.xorS=function(u){for(let h=0;h<this.rows;h++)for(let v=0;v<this.columns;v++)this.set(h,v,this.get(h,v)^u);return this},M.prototype.xorM=function(u){if(u=g.checkMatrix(u),this.rows!==u.rows||this.columns!==u.columns)throw new RangeError("Matrices dimensions must be equal");for(let h=0;h<this.rows;h++)for(let v=0;v<this.columns;v++)this.set(h,v,this.get(h,v)^u.get(h,v));return this},M.xor=function(u,h){return new g(u).xor(h)},M.prototype.leftShift=function(u){return typeof u=="number"?this.leftShiftS(u):this.leftShiftM(u)},M.prototype.leftShiftS=function(u){for(let h=0;h<this.rows;h++)for(let v=0;v<this.columns;v++)this.set(h,v,this.get(h,v)<<u);return this},M.prototype.leftShiftM=function(u){if(u=g.checkMatrix(u),this.rows!==u.rows||this.columns!==u.columns)throw new RangeError("Matrices dimensions must be equal");for(let h=0;h<this.rows;h++)for(let v=0;v<this.columns;v++)this.set(h,v,this.get(h,v)<<u.get(h,v));return this},M.leftShift=function(u,h){return new g(u).leftShift(h)},M.prototype.signPropagatingRightShift=function(u){return typeof u=="number"?this.signPropagatingRightShiftS(u):this.signPropagatingRightShiftM(u)},M.prototype.signPropagatingRightShiftS=function(u){for(let h=0;h<this.rows;h++)for(let v=0;v<this.columns;v++)this.set(h,v,this.get(h,v)>>u);return this},M.prototype.signPropagatingRightShiftM=function(u){if(u=g.checkMatrix(u),this.rows!==u.rows||this.columns!==u.columns)throw new RangeError("Matrices dimensions must be equal");for(let h=0;h<this.rows;h++)for(let v=0;v<this.columns;v++)this.set(h,v,this.get(h,v)>>u.get(h,v));return this},M.signPropagatingRightShift=function(u,h){return new g(u).signPropagatingRightShift(h)},M.prototype.rightShift=function(u){return typeof u=="number"?this.rightShiftS(u):this.rightShiftM(u)},M.prototype.rightShiftS=function(u){for(let h=0;h<this.rows;h++)for(let v=0;v<this.columns;v++)this.set(h,v,this.get(h,v)>>>u);return this},M.prototype.rightShiftM=function(u){if(u=g.checkMatrix(u),this.rows!==u.rows||this.columns!==u.columns)throw new RangeError("Matrices dimensions must be equal");for(let h=0;h<this.rows;h++)for(let v=0;v<this.columns;v++)this.set(h,v,this.get(h,v)>>>u.get(h,v));return this},M.rightShift=function(u,h){return new g(u).rightShift(h)},M.prototype.zeroFillRightShift=M.prototype.rightShift,M.prototype.zeroFillRightShiftS=M.prototype.rightShiftS,M.prototype.zeroFillRightShiftM=M.prototype.rightShiftM,M.zeroFillRightShift=M.rightShift,M.prototype.not=function(){for(let u=0;u<this.rows;u++)for(let h=0;h<this.columns;h++)this.set(u,h,~this.get(u,h));return this},M.not=function(u){return new g(u).not()},M.prototype.abs=function(){for(let u=0;u<this.rows;u++)for(let h=0;h<this.columns;h++)this.set(u,h,Math.abs(this.get(u,h)));return this},M.abs=function(u){return new g(u).abs()},M.prototype.acos=function(){for(let u=0;u<this.rows;u++)for(let h=0;h<this.columns;h++)this.set(u,h,Math.acos(this.get(u,h)));return this},M.acos=function(u){return new g(u).acos()},M.prototype.acosh=function(){for(let u=0;u<this.rows;u++)for(let h=0;h<this.columns;h++)this.set(u,h,Math.acosh(this.get(u,h)));return this},M.acosh=function(u){return new g(u).acosh()},M.prototype.asin=function(){for(let u=0;u<this.rows;u++)for(let h=0;h<this.columns;h++)this.set(u,h,Math.asin(this.get(u,h)));return this},M.asin=function(u){return new g(u).asin()},M.prototype.asinh=function(){for(let u=0;u<this.rows;u++)for(let h=0;h<this.columns;h++)this.set(u,h,Math.asinh(this.get(u,h)));return this},M.asinh=function(u){return new g(u).asinh()},M.prototype.atan=function(){for(let u=0;u<this.rows;u++)for(let h=0;h<this.columns;h++)this.set(u,h,Math.atan(this.get(u,h)));return this},M.atan=function(u){return new g(u).atan()},M.prototype.atanh=function(){for(let u=0;u<this.rows;u++)for(let h=0;h<this.columns;h++)this.set(u,h,Math.atanh(this.get(u,h)));return this},M.atanh=function(u){return new g(u).atanh()},M.prototype.cbrt=function(){for(let u=0;u<this.rows;u++)for(let h=0;h<this.columns;h++)this.set(u,h,Math.cbrt(this.get(u,h)));return this},M.cbrt=function(u){return new g(u).cbrt()},M.prototype.ceil=function(){for(let u=0;u<this.rows;u++)for(let h=0;h<this.columns;h++)this.set(u,h,Math.ceil(this.get(u,h)));return this},M.ceil=function(u){return new g(u).ceil()},M.prototype.clz32=function(){for(let u=0;u<this.rows;u++)for(let h=0;h<this.columns;h++)this.set(u,h,Math.clz32(this.get(u,h)));return this},M.clz32=function(u){return new g(u).clz32()},M.prototype.cos=function(){for(let u=0;u<this.rows;u++)for(let h=0;h<this.columns;h++)this.set(u,h,Math.cos(this.get(u,h)));return this},M.cos=function(u){return new g(u).cos()},M.prototype.cosh=function(){for(let u=0;u<this.rows;u++)for(let h=0;h<this.columns;h++)this.set(u,h,Math.cosh(this.get(u,h)));return this},M.cosh=function(u){return new g(u).cosh()},M.prototype.exp=function(){for(let u=0;u<this.rows;u++)for(let h=0;h<this.columns;h++)this.set(u,h,Math.exp(this.get(u,h)));return this},M.exp=function(u){return new g(u).exp()},M.prototype.expm1=function(){for(let u=0;u<this.rows;u++)for(let h=0;h<this.columns;h++)this.set(u,h,Math.expm1(this.get(u,h)));return this},M.expm1=function(u){return new g(u).expm1()},M.prototype.floor=function(){for(let u=0;u<this.rows;u++)for(let h=0;h<this.columns;h++)this.set(u,h,Math.floor(this.get(u,h)));return this},M.floor=function(u){return new g(u).floor()},M.prototype.fround=function(){for(let u=0;u<this.rows;u++)for(let h=0;h<this.columns;h++)this.set(u,h,Math.fround(this.get(u,h)));return this},M.fround=function(u){return new g(u).fround()},M.prototype.log=function(){for(let u=0;u<this.rows;u++)for(let h=0;h<this.columns;h++)this.set(u,h,Math.log(this.get(u,h)));return this},M.log=function(u){return new g(u).log()},M.prototype.log1p=function(){for(let u=0;u<this.rows;u++)for(let h=0;h<this.columns;h++)this.set(u,h,Math.log1p(this.get(u,h)));return this},M.log1p=function(u){return new g(u).log1p()},M.prototype.log10=function(){for(let u=0;u<this.rows;u++)for(let h=0;h<this.columns;h++)this.set(u,h,Math.log10(this.get(u,h)));return this},M.log10=function(u){return new g(u).log10()},M.prototype.log2=function(){for(let u=0;u<this.rows;u++)for(let h=0;h<this.columns;h++)this.set(u,h,Math.log2(this.get(u,h)));return this},M.log2=function(u){return new g(u).log2()},M.prototype.round=function(){for(let u=0;u<this.rows;u++)for(let h=0;h<this.columns;h++)this.set(u,h,Math.round(this.get(u,h)));return this},M.round=function(u){return new g(u).round()},M.prototype.sign=function(){for(let u=0;u<this.rows;u++)for(let h=0;h<this.columns;h++)this.set(u,h,Math.sign(this.get(u,h)));return this},M.sign=function(u){return new g(u).sign()},M.prototype.sin=function(){for(let u=0;u<this.rows;u++)for(let h=0;h<this.columns;h++)this.set(u,h,Math.sin(this.get(u,h)));return this},M.sin=function(u){return new g(u).sin()},M.prototype.sinh=function(){for(let u=0;u<this.rows;u++)for(let h=0;h<this.columns;h++)this.set(u,h,Math.sinh(this.get(u,h)));return this},M.sinh=function(u){return new g(u).sinh()},M.prototype.sqrt=function(){for(let u=0;u<this.rows;u++)for(let h=0;h<this.columns;h++)this.set(u,h,Math.sqrt(this.get(u,h)));return this},M.sqrt=function(u){return new g(u).sqrt()},M.prototype.tan=function(){for(let u=0;u<this.rows;u++)for(let h=0;h<this.columns;h++)this.set(u,h,Math.tan(this.get(u,h)));return this},M.tan=function(u){return new g(u).tan()},M.prototype.tanh=function(){for(let u=0;u<this.rows;u++)for(let h=0;h<this.columns;h++)this.set(u,h,Math.tanh(this.get(u,h)));return this},M.tanh=function(u){return new g(u).tanh()},M.prototype.trunc=function(){for(let u=0;u<this.rows;u++)for(let h=0;h<this.columns;h++)this.set(u,h,Math.trunc(this.get(u,h)));return this},M.trunc=function(u){return new g(u).trunc()},M.pow=function(u,h){return new g(u).pow(h)},M.prototype.pow=function(u){return typeof u=="number"?this.powS(u):this.powM(u)},M.prototype.powS=function(u){for(let h=0;h<this.rows;h++)for(let v=0;v<this.columns;v++)this.set(h,v,this.get(h,v)**u);return this},M.prototype.powM=function(u){if(u=g.checkMatrix(u),this.rows!==u.rows||this.columns!==u.columns)throw new RangeError("Matrices dimensions must be equal");for(let h=0;h<this.rows;h++)for(let v=0;v<this.columns;v++)this.set(h,v,this.get(h,v)**u.get(h,v));return this}}function d(M,g,l){let u=l?M.rows:M.rows-1;if(g<0||g>u)throw new RangeError("Row index out of range")}function p(M,g,l){let u=l?M.columns:M.columns-1;if(g<0||g>u)throw new RangeError("Column index out of range")}function m(M,g){if(g.to1DArray&&(g=g.to1DArray()),g.length!==M.columns)throw new RangeError("vector size must be the same as the number of columns");return g}function y(M,g){if(g.to1DArray&&(g=g.to1DArray()),g.length!==M.rows)throw new RangeError("vector size must be the same as the number of rows");return g}function x(M,g){if(!e.isAnyArray(g))throw new TypeError("row indices must be an array");for(let l=0;l<g.length;l++)if(g[l]<0||g[l]>=M.rows)throw new RangeError("row indices are out of range")}function _(M,g){if(!e.isAnyArray(g))throw new TypeError("column indices must be an array");for(let l=0;l<g.length;l++)if(g[l]<0||g[l]>=M.columns)throw new RangeError("column indices are out of range")}function b(M,g,l,u,h){if(arguments.length!==5)throw new RangeError("expected 4 arguments");if(E("startRow",g),E("endRow",l),E("startColumn",u),E("endColumn",h),g>l||u>h||g<0||g>=M.rows||l<0||l>=M.rows||u<0||u>=M.columns||h<0||h>=M.columns)throw new RangeError("Submatrix indices are out of range")}function w(M,g=0){let l=[];for(let u=0;u<M;u++)l.push(g);return l}function E(M,g){if(typeof g!="number")throw new TypeError(`${M} must be a number`)}function N(M){if(M.isEmpty())throw new Error("Empty matrix has no elements to index")}function S(M){let g=w(M.rows);for(let l=0;l<M.rows;++l)for(let u=0;u<M.columns;++u)g[l]+=M.get(l,u);return g}function R(M){let g=w(M.columns);for(let l=0;l<M.rows;++l)for(let u=0;u<M.columns;++u)g[u]+=M.get(l,u);return g}function A(M){let g=0;for(let l=0;l<M.rows;l++)for(let u=0;u<M.columns;u++)g+=M.get(l,u);return g}function j(M){let g=w(M.rows,1);for(let l=0;l<M.rows;++l)for(let u=0;u<M.columns;++u)g[l]*=M.get(l,u);return g}function I(M){let g=w(M.columns,1);for(let l=0;l<M.rows;++l)for(let u=0;u<M.columns;++u)g[u]*=M.get(l,u);return g}function D(M){let g=1;for(let l=0;l<M.rows;l++)for(let u=0;u<M.columns;u++)g*=M.get(l,u);return g}function z(M,g,l){const u=M.rows,h=M.columns,v=[];for(let q=0;q<u;q++){let O=0,T=0,k=0;for(let B=0;B<h;B++)k=M.get(q,B)-l[q],O+=k,T+=k*k;g?v.push((T-O*O/h)/(h-1)):v.push((T-O*O/h)/h)}return v}function $(M,g,l){const u=M.rows,h=M.columns,v=[];for(let q=0;q<h;q++){let O=0,T=0,k=0;for(let B=0;B<u;B++)k=M.get(B,q)-l[q],O+=k,T+=k*k;g?v.push((T-O*O/u)/(u-1)):v.push((T-O*O/u)/u)}return v}function V(M,g,l){const u=M.rows,h=M.columns,v=u*h;let q=0,O=0,T=0;for(let k=0;k<u;k++)for(let B=0;B<h;B++)T=M.get(k,B)-l,q+=T,O+=T*T;return g?(O-q*q/v)/(v-1):(O-q*q/v)/v}function Y(M,g){for(let l=0;l<M.rows;l++)for(let u=0;u<M.columns;u++)M.set(l,u,M.get(l,u)-g[l])}function ee(M,g){for(let l=0;l<M.rows;l++)for(let u=0;u<M.columns;u++)M.set(l,u,M.get(l,u)-g[u])}function J(M,g){for(let l=0;l<M.rows;l++)for(let u=0;u<M.columns;u++)M.set(l,u,M.get(l,u)-g)}function oe(M){const g=[];for(let l=0;l<M.rows;l++){let u=0;for(let h=0;h<M.columns;h++)u+=M.get(l,h)**2/(M.columns-1);g.push(Math.sqrt(u))}return g}function be(M,g){for(let l=0;l<M.rows;l++)for(let u=0;u<M.columns;u++)M.set(l,u,M.get(l,u)/g[l])}function Z(M){const g=[];for(let l=0;l<M.columns;l++){let u=0;for(let h=0;h<M.rows;h++)u+=M.get(h,l)**2/(M.rows-1);g.push(Math.sqrt(u))}return g}function ue(M,g){for(let l=0;l<M.rows;l++)for(let u=0;u<M.columns;u++)M.set(l,u,M.get(l,u)/g[u])}function ge(M){const g=M.size-1;let l=0;for(let u=0;u<M.columns;u++)for(let h=0;h<M.rows;h++)l+=M.get(h,u)**2/g;return Math.sqrt(l)}function de(M,g){for(let l=0;l<M.rows;l++)for(let u=0;u<M.columns;u++)M.set(l,u,M.get(l,u)/g)}class ie{static from1DArray(g,l,u){if(g*l!==u.length)throw new RangeError("data length does not match given dimensions");let v=new P(g,l);for(let q=0;q<g;q++)for(let O=0;O<l;O++)v.set(q,O,u[q*l+O]);return v}static rowVector(g){let l=new P(1,g.length);for(let u=0;u<g.length;u++)l.set(0,u,g[u]);return l}static columnVector(g){let l=new P(g.length,1);for(let u=0;u<g.length;u++)l.set(u,0,g[u]);return l}static zeros(g,l){return new P(g,l)}static ones(g,l){return new P(g,l).fill(1)}static rand(g,l,u={}){if(typeof u!="object")throw new TypeError("options must be an object");const{random:h=Math.random}=u;let v=new P(g,l);for(let q=0;q<g;q++)for(let O=0;O<l;O++)v.set(q,O,h());return v}static randInt(g,l,u={}){if(typeof u!="object")throw new TypeError("options must be an object");const{min:h=0,max:v=1e3,random:q=Math.random}=u;if(!Number.isInteger(h))throw new TypeError("min must be an integer");if(!Number.isInteger(v))throw new TypeError("max must be an integer");if(h>=v)throw new RangeError("min must be smaller than max");let O=v-h,T=new P(g,l);for(let k=0;k<g;k++)for(let B=0;B<l;B++){let C=h+Math.round(q()*O);T.set(k,B,C)}return T}static eye(g,l,u){l===void 0&&(l=g),u===void 0&&(u=1);let h=Math.min(g,l),v=this.zeros(g,l);for(let q=0;q<h;q++)v.set(q,q,u);return v}static diag(g,l,u){let h=g.length;l===void 0&&(l=h),u===void 0&&(u=l);let v=Math.min(h,l,u),q=this.zeros(l,u);for(let O=0;O<v;O++)q.set(O,O,g[O]);return q}static min(g,l){g=this.checkMatrix(g),l=this.checkMatrix(l);let u=g.rows,h=g.columns,v=new P(u,h);for(let q=0;q<u;q++)for(let O=0;O<h;O++)v.set(q,O,Math.min(g.get(q,O),l.get(q,O)));return v}static max(g,l){g=this.checkMatrix(g),l=this.checkMatrix(l);let u=g.rows,h=g.columns,v=new this(u,h);for(let q=0;q<u;q++)for(let O=0;O<h;O++)v.set(q,O,Math.max(g.get(q,O),l.get(q,O)));return v}static checkMatrix(g){return ie.isMatrix(g)?g:new P(g)}static isMatrix(g){return g!=null&&g.klass==="Matrix"}get size(){return this.rows*this.columns}apply(g){if(typeof g!="function")throw new TypeError("callback must be a function");for(let l=0;l<this.rows;l++)for(let u=0;u<this.columns;u++)g.call(this,l,u);return this}to1DArray(){let g=[];for(let l=0;l<this.rows;l++)for(let u=0;u<this.columns;u++)g.push(this.get(l,u));return g}to2DArray(){let g=[];for(let l=0;l<this.rows;l++){g.push([]);for(let u=0;u<this.columns;u++)g[l].push(this.get(l,u))}return g}toJSON(){return this.to2DArray()}isRowVector(){return this.rows===1}isColumnVector(){return this.columns===1}isVector(){return this.rows===1||this.columns===1}isSquare(){return this.rows===this.columns}isEmpty(){return this.rows===0||this.columns===0}isSymmetric(){if(this.isSquare()){for(let g=0;g<this.rows;g++)for(let l=0;l<=g;l++)if(this.get(g,l)!==this.get(l,g))return!1;return!0}return!1}isDistance(){if(!this.isSymmetric())return!1;for(let g=0;g<this.rows;g++)if(this.get(g,g)!==0)return!1;return!0}isEchelonForm(){let g=0,l=0,u=-1,h=!0,v=!1;for(;g<this.rows&&h;){for(l=0,v=!1;l<this.columns&&v===!1;)this.get(g,l)===0?l++:this.get(g,l)===1&&l>u?(v=!0,u=l):(h=!1,v=!0);g++}return h}isReducedEchelonForm(){let g=0,l=0,u=-1,h=!0,v=!1;for(;g<this.rows&&h;){for(l=0,v=!1;l<this.columns&&v===!1;)this.get(g,l)===0?l++:this.get(g,l)===1&&l>u?(v=!0,u=l):(h=!1,v=!0);for(let q=l+1;q<this.rows;q++)this.get(g,q)!==0&&(h=!1);g++}return h}echelonForm(){let g=this.clone(),l=0,u=0;for(;l<g.rows&&u<g.columns;){let h=l;for(let v=l;v<g.rows;v++)g.get(v,u)>g.get(h,u)&&(h=v);if(g.get(h,u)===0)u++;else{g.swapRows(l,h);let v=g.get(l,u);for(let q=u;q<g.columns;q++)g.set(l,q,g.get(l,q)/v);for(let q=l+1;q<g.rows;q++){let O=g.get(q,u)/g.get(l,u);g.set(q,u,0);for(let T=u+1;T<g.columns;T++)g.set(q,T,g.get(q,T)-g.get(l,T)*O)}l++,u++}}return g}reducedEchelonForm(){let g=this.echelonForm(),l=g.columns,u=g.rows,h=u-1;for(;h>=0;)if(g.maxRow(h)===0)h--;else{let v=0,q=!1;for(;v<u&&q===!1;)g.get(h,v)===1?q=!0:v++;for(let O=0;O<h;O++){let T=g.get(O,v);for(let k=v;k<l;k++){let B=g.get(O,k)-T*g.get(h,k);g.set(O,k,B)}}h--}return g}set(){throw new Error("set method is unimplemented")}get(){throw new Error("get method is unimplemented")}repeat(g={}){if(typeof g!="object")throw new TypeError("options must be an object");const{rows:l=1,columns:u=1}=g;if(!Number.isInteger(l)||l<=0)throw new TypeError("rows must be a positive integer");if(!Number.isInteger(u)||u<=0)throw new TypeError("columns must be a positive integer");let h=new P(this.rows*l,this.columns*u);for(let v=0;v<l;v++)for(let q=0;q<u;q++)h.setSubMatrix(this,this.rows*v,this.columns*q);return h}fill(g){for(let l=0;l<this.rows;l++)for(let u=0;u<this.columns;u++)this.set(l,u,g);return this}neg(){return this.mulS(-1)}getRow(g){d(this,g);let l=[];for(let u=0;u<this.columns;u++)l.push(this.get(g,u));return l}getRowVector(g){return P.rowVector(this.getRow(g))}setRow(g,l){d(this,g),l=m(this,l);for(let u=0;u<this.columns;u++)this.set(g,u,l[u]);return this}swapRows(g,l){d(this,g),d(this,l);for(let u=0;u<this.columns;u++){let h=this.get(g,u);this.set(g,u,this.get(l,u)),this.set(l,u,h)}return this}getColumn(g){p(this,g);let l=[];for(let u=0;u<this.rows;u++)l.push(this.get(u,g));return l}getColumnVector(g){return P.columnVector(this.getColumn(g))}setColumn(g,l){p(this,g),l=y(this,l);for(let u=0;u<this.rows;u++)this.set(u,g,l[u]);return this}swapColumns(g,l){p(this,g),p(this,l);for(let u=0;u<this.rows;u++){let h=this.get(u,g);this.set(u,g,this.get(u,l)),this.set(u,l,h)}return this}addRowVector(g){g=m(this,g);for(let l=0;l<this.rows;l++)for(let u=0;u<this.columns;u++)this.set(l,u,this.get(l,u)+g[u]);return this}subRowVector(g){g=m(this,g);for(let l=0;l<this.rows;l++)for(let u=0;u<this.columns;u++)this.set(l,u,this.get(l,u)-g[u]);return this}mulRowVector(g){g=m(this,g);for(let l=0;l<this.rows;l++)for(let u=0;u<this.columns;u++)this.set(l,u,this.get(l,u)*g[u]);return this}divRowVector(g){g=m(this,g);for(let l=0;l<this.rows;l++)for(let u=0;u<this.columns;u++)this.set(l,u,this.get(l,u)/g[u]);return this}addColumnVector(g){g=y(this,g);for(let l=0;l<this.rows;l++)for(let u=0;u<this.columns;u++)this.set(l,u,this.get(l,u)+g[l]);return this}subColumnVector(g){g=y(this,g);for(let l=0;l<this.rows;l++)for(let u=0;u<this.columns;u++)this.set(l,u,this.get(l,u)-g[l]);return this}mulColumnVector(g){g=y(this,g);for(let l=0;l<this.rows;l++)for(let u=0;u<this.columns;u++)this.set(l,u,this.get(l,u)*g[l]);return this}divColumnVector(g){g=y(this,g);for(let l=0;l<this.rows;l++)for(let u=0;u<this.columns;u++)this.set(l,u,this.get(l,u)/g[l]);return this}mulRow(g,l){d(this,g);for(let u=0;u<this.columns;u++)this.set(g,u,this.get(g,u)*l);return this}mulColumn(g,l){p(this,g);for(let u=0;u<this.rows;u++)this.set(u,g,this.get(u,g)*l);return this}max(g){if(this.isEmpty())return NaN;switch(g){case"row":{const l=new Array(this.rows).fill(Number.NEGATIVE_INFINITY);for(let u=0;u<this.rows;u++)for(let h=0;h<this.columns;h++)this.get(u,h)>l[u]&&(l[u]=this.get(u,h));return l}case"column":{const l=new Array(this.columns).fill(Number.NEGATIVE_INFINITY);for(let u=0;u<this.rows;u++)for(let h=0;h<this.columns;h++)this.get(u,h)>l[h]&&(l[h]=this.get(u,h));return l}case void 0:{let l=this.get(0,0);for(let u=0;u<this.rows;u++)for(let h=0;h<this.columns;h++)this.get(u,h)>l&&(l=this.get(u,h));return l}default:throw new Error(`invalid option: ${g}`)}}maxIndex(){N(this);let g=this.get(0,0),l=[0,0];for(let u=0;u<this.rows;u++)for(let h=0;h<this.columns;h++)this.get(u,h)>g&&(g=this.get(u,h),l[0]=u,l[1]=h);return l}min(g){if(this.isEmpty())return NaN;switch(g){case"row":{const l=new Array(this.rows).fill(Number.POSITIVE_INFINITY);for(let u=0;u<this.rows;u++)for(let h=0;h<this.columns;h++)this.get(u,h)<l[u]&&(l[u]=this.get(u,h));return l}case"column":{const l=new Array(this.columns).fill(Number.POSITIVE_INFINITY);for(let u=0;u<this.rows;u++)for(let h=0;h<this.columns;h++)this.get(u,h)<l[h]&&(l[h]=this.get(u,h));return l}case void 0:{let l=this.get(0,0);for(let u=0;u<this.rows;u++)for(let h=0;h<this.columns;h++)this.get(u,h)<l&&(l=this.get(u,h));return l}default:throw new Error(`invalid option: ${g}`)}}minIndex(){N(this);let g=this.get(0,0),l=[0,0];for(let u=0;u<this.rows;u++)for(let h=0;h<this.columns;h++)this.get(u,h)<g&&(g=this.get(u,h),l[0]=u,l[1]=h);return l}maxRow(g){if(d(this,g),this.isEmpty())return NaN;let l=this.get(g,0);for(let u=1;u<this.columns;u++)this.get(g,u)>l&&(l=this.get(g,u));return l}maxRowIndex(g){d(this,g),N(this);let l=this.get(g,0),u=[g,0];for(let h=1;h<this.columns;h++)this.get(g,h)>l&&(l=this.get(g,h),u[1]=h);return u}minRow(g){if(d(this,g),this.isEmpty())return NaN;let l=this.get(g,0);for(let u=1;u<this.columns;u++)this.get(g,u)<l&&(l=this.get(g,u));return l}minRowIndex(g){d(this,g),N(this);let l=this.get(g,0),u=[g,0];for(let h=1;h<this.columns;h++)this.get(g,h)<l&&(l=this.get(g,h),u[1]=h);return u}maxColumn(g){if(p(this,g),this.isEmpty())return NaN;let l=this.get(0,g);for(let u=1;u<this.rows;u++)this.get(u,g)>l&&(l=this.get(u,g));return l}maxColumnIndex(g){p(this,g),N(this);let l=this.get(0,g),u=[0,g];for(let h=1;h<this.rows;h++)this.get(h,g)>l&&(l=this.get(h,g),u[0]=h);return u}minColumn(g){if(p(this,g),this.isEmpty())return NaN;let l=this.get(0,g);for(let u=1;u<this.rows;u++)this.get(u,g)<l&&(l=this.get(u,g));return l}minColumnIndex(g){p(this,g),N(this);let l=this.get(0,g),u=[0,g];for(let h=1;h<this.rows;h++)this.get(h,g)<l&&(l=this.get(h,g),u[0]=h);return u}diag(){let g=Math.min(this.rows,this.columns),l=[];for(let u=0;u<g;u++)l.push(this.get(u,u));return l}norm(g="frobenius"){switch(g){case"max":return this.max();case"frobenius":return Math.sqrt(this.dot(this));default:throw new RangeError(`unknown norm type: ${g}`)}}cumulativeSum(){let g=0;for(let l=0;l<this.rows;l++)for(let u=0;u<this.columns;u++)g+=this.get(l,u),this.set(l,u,g);return this}dot(g){ie.isMatrix(g)&&(g=g.to1DArray());let l=this.to1DArray();if(l.length!==g.length)throw new RangeError("vectors do not have the same size");let u=0;for(let h=0;h<l.length;h++)u+=l[h]*g[h];return u}mmul(g){g=P.checkMatrix(g);let l=this.rows,u=this.columns,h=g.columns,v=new P(l,h),q=new Float64Array(u);for(let O=0;O<h;O++){for(let T=0;T<u;T++)q[T]=g.get(T,O);for(let T=0;T<l;T++){let k=0;for(let B=0;B<u;B++)k+=this.get(T,B)*q[B];v.set(T,O,k)}}return v}mpow(g){if(!this.isSquare())throw new RangeError("Matrix must be square");if(!Number.isInteger(g)||g<0)throw new RangeError("Exponent must be a non-negative integer");let l=P.eye(this.rows),u=this;for(let h=g;h>1;h/=2)(h&1)!==0&&(l=l.mmul(u)),u=u.mmul(u);return l}strassen2x2(g){g=P.checkMatrix(g);let l=new P(2,2);const u=this.get(0,0),h=g.get(0,0),v=this.get(0,1),q=g.get(0,1),O=this.get(1,0),T=g.get(1,0),k=this.get(1,1),B=g.get(1,1),C=(u+k)*(h+B),W=(O+k)*h,re=u*(q-B),U=k*(T-h),K=(u+v)*B,se=(O-u)*(h+q),L=(v-k)*(T+B),ne=C+U-K+L,fe=re+K,pe=W+U,ve=C-W+re+se;return l.set(0,0,ne),l.set(0,1,fe),l.set(1,0,pe),l.set(1,1,ve),l}strassen3x3(g){g=P.checkMatrix(g);let l=new P(3,3);const u=this.get(0,0),h=this.get(0,1),v=this.get(0,2),q=this.get(1,0),O=this.get(1,1),T=this.get(1,2),k=this.get(2,0),B=this.get(2,1),C=this.get(2,2),W=g.get(0,0),re=g.get(0,1),U=g.get(0,2),K=g.get(1,0),se=g.get(1,1),L=g.get(1,2),ne=g.get(2,0),fe=g.get(2,1),pe=g.get(2,2),ve=(u+h+v-q-O-B-C)*se,Ie=(u-q)*(-re+se),le=O*(-W+re+K-se-L-ne+pe),he=(-u+q+O)*(W-re+se),qe=(q+O)*(-W+re),F=u*W,Q=(-u+k+B)*(W-U+L),ae=(-u+k)*(U-L),H=(k+B)*(-W+U),Te=(u+h+v-O-T-k-B)*L,Se=B*(-W+U+K-se-L-ne+fe),Oe=(-v+B+C)*(se+ne-fe),ke=(v-C)*(se-fe),We=v*ne,ft=(B+C)*(-ne+fe),ze=(-v+O+T)*(L+ne-pe),pt=(v-T)*(L-pe),bt=(O+T)*(-ne+pe),Ne=h*K,Ye=T*fe,nt=q*U,rt=k*re,Fe=C*pe,Mm=F+We+Ne,Sm=ve+he+qe+F+Oe+We+ft,qm=F+Q+H+Te+We+ze+bt,Rm=Ie+le+he+F+We+ze+pt,Om=Ie+he+qe+F+Ye,Am=We+ze+pt+bt+nt,Im=F+Q+ae+Se+Oe+ke+We,Tm=Oe+ke+We+ft+rt,km=F+Q+ae+H+Fe;return l.set(0,0,Mm),l.set(0,1,Sm),l.set(0,2,qm),l.set(1,0,Rm),l.set(1,1,Om),l.set(1,2,Am),l.set(2,0,Im),l.set(2,1,Tm),l.set(2,2,km),l}mmulStrassen(g){g=P.checkMatrix(g);let l=this.clone(),u=l.rows,h=l.columns,v=g.rows,q=g.columns;h!==v&&console.warn(`Multiplying ${u} x ${h} and ${v} x ${q} matrix: dimensions do not match.`);function O(C,W,re){let U=C.rows,K=C.columns;if(U===W&&K===re)return C;{let se=ie.zeros(W,re);return se=se.setSubMatrix(C,0,0),se}}let T=Math.max(u,v),k=Math.max(h,q);l=O(l,T,k),g=O(g,T,k);function B(C,W,re,U){if(re<=512||U<=512)return C.mmul(W);re%2===1&&U%2===1?(C=O(C,re+1,U+1),W=O(W,re+1,U+1)):re%2===1?(C=O(C,re+1,U),W=O(W,re+1,U)):U%2===1&&(C=O(C,re,U+1),W=O(W,re,U+1));let K=parseInt(C.rows/2,10),se=parseInt(C.columns/2,10),L=C.subMatrix(0,K-1,0,se-1),ne=W.subMatrix(0,K-1,0,se-1),fe=C.subMatrix(0,K-1,se,C.columns-1),pe=W.subMatrix(0,K-1,se,W.columns-1),ve=C.subMatrix(K,C.rows-1,0,se-1),Ie=W.subMatrix(K,W.rows-1,0,se-1),le=C.subMatrix(K,C.rows-1,se,C.columns-1),he=W.subMatrix(K,W.rows-1,se,W.columns-1),qe=B(ie.add(L,le),ie.add(ne,he),K,se),F=B(ie.add(ve,le),ne,K,se),Q=B(L,ie.sub(pe,he),K,se),ae=B(le,ie.sub(Ie,ne),K,se),H=B(ie.add(L,fe),he,K,se),Te=B(ie.sub(ve,L),ie.add(ne,pe),K,se),Se=B(ie.sub(fe,le),ie.add(Ie,he),K,se),Oe=ie.add(qe,ae);Oe.sub(H),Oe.add(Se);let ke=ie.add(Q,H),We=ie.add(F,ae),ft=ie.sub(qe,F);ft.add(Q),ft.add(Te);let ze=ie.zeros(2*Oe.rows,2*Oe.columns);return ze=ze.setSubMatrix(Oe,0,0),ze=ze.setSubMatrix(ke,Oe.rows,0),ze=ze.setSubMatrix(We,0,Oe.columns),ze=ze.setSubMatrix(ft,Oe.rows,Oe.columns),ze.subMatrix(0,re-1,0,U-1)}return B(l,g,T,k)}scaleRows(g={}){if(typeof g!="object")throw new TypeError("options must be an object");const{min:l=0,max:u=1}=g;if(!Number.isFinite(l))throw new TypeError("min must be a number");if(!Number.isFinite(u))throw new TypeError("max must be a number");if(l>=u)throw new RangeError("min must be smaller than max");let h=new P(this.rows,this.columns);for(let v=0;v<this.rows;v++){const q=this.getRow(v);q.length>0&&n(q,{min:l,max:u,output:q}),h.setRow(v,q)}return h}scaleColumns(g={}){if(typeof g!="object")throw new TypeError("options must be an object");const{min:l=0,max:u=1}=g;if(!Number.isFinite(l))throw new TypeError("min must be a number");if(!Number.isFinite(u))throw new TypeError("max must be a number");if(l>=u)throw new RangeError("min must be smaller than max");let h=new P(this.rows,this.columns);for(let v=0;v<this.columns;v++){const q=this.getColumn(v);q.length&&n(q,{min:l,max:u,output:q}),h.setColumn(v,q)}return h}flipRows(){const g=Math.ceil(this.columns/2);for(let l=0;l<this.rows;l++)for(let u=0;u<g;u++){let h=this.get(l,u),v=this.get(l,this.columns-1-u);this.set(l,u,v),this.set(l,this.columns-1-u,h)}return this}flipColumns(){const g=Math.ceil(this.rows/2);for(let l=0;l<this.columns;l++)for(let u=0;u<g;u++){let h=this.get(u,l),v=this.get(this.rows-1-u,l);this.set(u,l,v),this.set(this.rows-1-u,l,h)}return this}kroneckerProduct(g){g=P.checkMatrix(g);let l=this.rows,u=this.columns,h=g.rows,v=g.columns,q=new P(l*h,u*v);for(let O=0;O<l;O++)for(let T=0;T<u;T++)for(let k=0;k<h;k++)for(let B=0;B<v;B++)q.set(h*O+k,v*T+B,this.get(O,T)*g.get(k,B));return q}kroneckerSum(g){if(g=P.checkMatrix(g),!this.isSquare()||!g.isSquare())throw new Error("Kronecker Sum needs two Square Matrices");let l=this.rows,u=g.rows,h=this.kroneckerProduct(P.eye(u,u)),v=P.eye(l,l).kroneckerProduct(g);return h.add(v)}transpose(){let g=new P(this.columns,this.rows);for(let l=0;l<this.rows;l++)for(let u=0;u<this.columns;u++)g.set(u,l,this.get(l,u));return g}sortRows(g=_e){for(let l=0;l<this.rows;l++)this.setRow(l,this.getRow(l).sort(g));return this}sortColumns(g=_e){for(let l=0;l<this.columns;l++)this.setColumn(l,this.getColumn(l).sort(g));return this}subMatrix(g,l,u,h){b(this,g,l,u,h);let v=new P(l-g+1,h-u+1);for(let q=g;q<=l;q++)for(let O=u;O<=h;O++)v.set(q-g,O-u,this.get(q,O));return v}subMatrixRow(g,l,u){if(l===void 0&&(l=0),u===void 0&&(u=this.columns-1),l>u||l<0||l>=this.columns||u<0||u>=this.columns)throw new RangeError("Argument out of range");let h=new P(g.length,u-l+1);for(let v=0;v<g.length;v++)for(let q=l;q<=u;q++){if(g[v]<0||g[v]>=this.rows)throw new RangeError(`Row index out of range: ${g[v]}`);h.set(v,q-l,this.get(g[v],q))}return h}subMatrixColumn(g,l,u){if(l===void 0&&(l=0),u===void 0&&(u=this.rows-1),l>u||l<0||l>=this.rows||u<0||u>=this.rows)throw new RangeError("Argument out of range");let h=new P(u-l+1,g.length);for(let v=0;v<g.length;v++)for(let q=l;q<=u;q++){if(g[v]<0||g[v]>=this.columns)throw new RangeError(`Column index out of range: ${g[v]}`);h.set(q-l,v,this.get(q,g[v]))}return h}setSubMatrix(g,l,u){if(g=P.checkMatrix(g),g.isEmpty())return this;let h=l+g.rows-1,v=u+g.columns-1;b(this,l,h,u,v);for(let q=0;q<g.rows;q++)for(let O=0;O<g.columns;O++)this.set(l+q,u+O,g.get(q,O));return this}selection(g,l){x(this,g),_(this,l);let u=new P(g.length,l.length);for(let h=0;h<g.length;h++){let v=g[h];for(let q=0;q<l.length;q++){let O=l[q];u.set(h,q,this.get(v,O))}}return u}trace(){let g=Math.min(this.rows,this.columns),l=0;for(let u=0;u<g;u++)l+=this.get(u,u);return l}clone(){return this.constructor.copy(this,new P(this.rows,this.columns))}static copy(g,l){for(const[u,h,v]of g.entries())l.set(u,h,v);return l}sum(g){switch(g){case"row":return S(this);case"column":return R(this);case void 0:return A(this);default:throw new Error(`invalid option: ${g}`)}}product(g){switch(g){case"row":return j(this);case"column":return I(this);case void 0:return D(this);default:throw new Error(`invalid option: ${g}`)}}mean(g){const l=this.sum(g);switch(g){case"row":{for(let u=0;u<this.rows;u++)l[u]/=this.columns;return l}case"column":{for(let u=0;u<this.columns;u++)l[u]/=this.rows;return l}case void 0:return l/this.size;default:throw new Error(`invalid option: ${g}`)}}variance(g,l={}){if(typeof g=="object"&&(l=g,g=void 0),typeof l!="object")throw new TypeError("options must be an object");const{unbiased:u=!0,mean:h=this.mean(g)}=l;if(typeof u!="boolean")throw new TypeError("unbiased must be a boolean");switch(g){case"row":{if(!e.isAnyArray(h))throw new TypeError("mean must be an array");return z(this,u,h)}case"column":{if(!e.isAnyArray(h))throw new TypeError("mean must be an array");return $(this,u,h)}case void 0:{if(typeof h!="number")throw new TypeError("mean must be a number");return V(this,u,h)}default:throw new Error(`invalid option: ${g}`)}}standardDeviation(g,l){typeof g=="object"&&(l=g,g=void 0);const u=this.variance(g,l);if(g===void 0)return Math.sqrt(u);for(let h=0;h<u.length;h++)u[h]=Math.sqrt(u[h]);return u}center(g,l={}){if(typeof g=="object"&&(l=g,g=void 0),typeof l!="object")throw new TypeError("options must be an object");const{center:u=this.mean(g)}=l;switch(g){case"row":{if(!e.isAnyArray(u))throw new TypeError("center must be an array");return Y(this,u),this}case"column":{if(!e.isAnyArray(u))throw new TypeError("center must be an array");return ee(this,u),this}case void 0:{if(typeof u!="number")throw new TypeError("center must be a number");return J(this,u),this}default:throw new Error(`invalid option: ${g}`)}}scale(g,l={}){if(typeof g=="object"&&(l=g,g=void 0),typeof l!="object")throw new TypeError("options must be an object");let u=l.scale;switch(g){case"row":{if(u===void 0)u=oe(this);else if(!e.isAnyArray(u))throw new TypeError("scale must be an array");return be(this,u),this}case"column":{if(u===void 0)u=Z(this);else if(!e.isAnyArray(u))throw new TypeError("scale must be an array");return ue(this,u),this}case void 0:{if(u===void 0)u=ge(this);else if(typeof u!="number")throw new TypeError("scale must be a number");return de(this,u),this}default:throw new Error(`invalid option: ${g}`)}}toString(g){return s(this,g)}[Symbol.iterator](){return this.entries()}*entries(){for(let g=0;g<this.rows;g++)for(let l=0;l<this.columns;l++)yield[g,l,this.get(g,l)]}*values(){for(let g=0;g<this.rows;g++)for(let l=0;l<this.columns;l++)yield this.get(g,l)}}ie.prototype.klass="Matrix",typeof Symbol<"u"&&(ie.prototype[Symbol.for("nodejs.util.inspect.custom")]=i);function _e(M,g){return M-g}function G(M){return M.every(g=>typeof g=="number")}ie.random=ie.rand,ie.randomInt=ie.randInt,ie.diagonal=ie.diag,ie.prototype.diagonal=ie.prototype.diag,ie.identity=ie.eye,ie.prototype.negate=ie.prototype.neg,ie.prototype.tensorProduct=ie.prototype.kroneckerProduct;const Nn=class Nn extends ie{constructor(l,u){super();dr(this,tn);Ae(this,"data");if(Nn.isMatrix(l))lr(this,tn,Ku).call(this,l.rows,l.columns),Nn.copy(l,this);else if(Number.isInteger(l)&&l>=0)lr(this,tn,Ku).call(this,l,u);else if(e.isAnyArray(l)){const h=l;if(l=h.length,u=l?h[0].length:0,typeof u!="number")throw new TypeError("Data must be a 2D array with at least one element");this.data=[];for(let v=0;v<l;v++){if(h[v].length!==u)throw new RangeError("Inconsistent array dimensions");if(!G(h[v]))throw new TypeError("Input data contains non-numeric values");this.data.push(Float64Array.from(h[v]))}this.rows=l,this.columns=u}else throw new TypeError("First argument must be a positive number or an array")}set(l,u,h){return this.data[l][u]=h,this}get(l,u){return this.data[l][u]}removeRow(l){return d(this,l),this.data.splice(l,1),this.rows-=1,this}addRow(l,u){return u===void 0&&(u=l,l=this.rows),d(this,l,!0),u=Float64Array.from(m(this,u)),this.data.splice(l,0,u),this.rows+=1,this}removeColumn(l){p(this,l);for(let u=0;u<this.rows;u++){const h=new Float64Array(this.columns-1);for(let v=0;v<l;v++)h[v]=this.data[u][v];for(let v=l+1;v<this.columns;v++)h[v-1]=this.data[u][v];this.data[u]=h}return this.columns-=1,this}addColumn(l,u){typeof u>"u"&&(u=l,l=this.columns),p(this,l,!0),u=y(this,u);for(let h=0;h<this.rows;h++){const v=new Float64Array(this.columns+1);let q=0;for(;q<l;q++)v[q]=this.data[h][q];for(v[q++]=u[h];q<this.columns+1;q++)v[q]=this.data[h][q-1];this.data[h]=v}return this.columns+=1,this}};tn=new WeakSet,Ku=function(l,u){if(this.data=[],Number.isInteger(u)&&u>=0)for(let h=0;h<l;h++)this.data.push(new Float64Array(u));else throw new TypeError("nColumns must be a positive integer");this.rows=l,this.columns=u};let P=Nn;c(ie,P);const Mn=class Mn extends ie{constructor(l){super();dr(this,Ze);if(P.isMatrix(l)){if(!l.isSymmetric())throw new TypeError("not symmetric data");Sn(this,Ze,P.copy(l,new P(l.rows,l.rows)))}else if(Number.isInteger(l)&&l>=0)Sn(this,Ze,new P(l,l));else if(Sn(this,Ze,new P(l)),!this.isSymmetric())throw new TypeError("not symmetric data")}get size(){return ct(this,Ze).size}get rows(){return ct(this,Ze).rows}get columns(){return ct(this,Ze).columns}get diagonalSize(){return this.rows}static isSymmetricMatrix(l){return P.isMatrix(l)&&l.klassType==="SymmetricMatrix"}static zeros(l){return new this(l)}static ones(l){return new this(l).fill(1)}clone(){const l=new Mn(this.diagonalSize);for(const[u,h,v]of this.upperRightEntries())l.set(u,h,v);return l}toMatrix(){return new P(this)}get(l,u){return ct(this,Ze).get(l,u)}set(l,u,h){return ct(this,Ze).set(l,u,h),ct(this,Ze).set(u,l,h),this}removeCross(l){return ct(this,Ze).removeRow(l),ct(this,Ze).removeColumn(l),this}addCross(l,u){u===void 0&&(u=l,l=this.diagonalSize);const h=u.slice();return h.splice(l,1),ct(this,Ze).addRow(l,h),ct(this,Ze).addColumn(l,u),this}applyMask(l){if(l.length!==this.diagonalSize)throw new RangeError("Mask size do not match with matrix size");const u=[];for(const[h,v]of l.entries())v||u.push(h);u.reverse();for(const h of u)this.removeCross(h);return this}toCompact(){const{diagonalSize:l}=this,u=new Array(l*(l+1)/2);for(let h=0,v=0,q=0;q<u.length;q++)u[q]=this.get(v,h),++h>=l&&(h=++v);return u}static fromCompact(l){const u=l.length,h=(Math.sqrt(8*u+1)-1)/2;if(!Number.isInteger(h))throw new TypeError(`This array is not a compact representation of a Symmetric Matrix, ${JSON.stringify(l)}`);const v=new Mn(h);for(let q=0,O=0,T=0;T<u;T++)v.set(q,O,l[T]),++q>=h&&(q=++O);return v}*upperRightEntries(){for(let l=0,u=0;l<this.diagonalSize;void 0){const h=this.get(l,u);yield[l,u,h],++u>=this.diagonalSize&&(u=++l)}}*upperRightValues(){for(let l=0,u=0;l<this.diagonalSize;void 0)yield this.get(l,u),++u>=this.diagonalSize&&(u=++l)}};Ze=new WeakMap;let X=Mn;X.prototype.klassType="SymmetricMatrix";class te extends X{static isDistanceMatrix(g){return X.isSymmetricMatrix(g)&&g.klassSubType==="DistanceMatrix"}constructor(g){if(super(g),!this.isDistance())throw new TypeError("Provided arguments do no produce a distance matrix")}set(g,l,u){return g===l&&(u=0),super.set(g,l,u)}addCross(g,l){return l===void 0&&(l=g,g=this.diagonalSize),l=l.slice(),l[g]=0,super.addCross(g,l)}toSymmetricMatrix(){return new X(this)}clone(){const g=new te(this.diagonalSize);for(const[l,u,h]of this.upperRightEntries())l!==u&&g.set(l,u,h);return g}toCompact(){const{diagonalSize:g}=this,l=(g-1)*g/2,u=new Array(l);for(let h=1,v=0,q=0;q<u.length;q++)u[q]=this.get(v,h),++h>=g&&(h=++v+1);return u}static fromCompact(g){const l=g.length;if(l===0)return new this(0);const u=(Math.sqrt(8*l+1)+1)/2;if(!Number.isInteger(u))throw new TypeError(`This array is not a compact representation of a DistanceMatrix, ${JSON.stringify(g)}`);const h=new this(u);for(let v=1,q=0,O=0;O<l;O++)h.set(v,q,g[O]),++v>=u&&(v=++q+1);return h}}te.prototype.klassSubType="DistanceMatrix";class ce extends ie{constructor(g,l,u){super(),this.matrix=g,this.rows=l,this.columns=u}}class xe extends ce{constructor(g,l){p(g,l),super(g,g.rows,1),this.column=l}set(g,l,u){return this.matrix.set(g,this.column,u),this}get(g){return this.matrix.get(g,this.column)}}class Ce extends ce{constructor(g,l){_(g,l),super(g,g.rows,l.length),this.columnIndices=l}set(g,l,u){return this.matrix.set(g,this.columnIndices[l],u),this}get(g,l){return this.matrix.get(g,this.columnIndices[l])}}class Ke extends ce{constructor(g){super(g,g.rows,g.columns)}set(g,l,u){return this.matrix.set(g,this.columns-l-1,u),this}get(g,l){return this.matrix.get(g,this.columns-l-1)}}class Bt extends ce{constructor(g){super(g,g.rows,g.columns)}set(g,l,u){return this.matrix.set(this.rows-g-1,l,u),this}get(g,l){return this.matrix.get(this.rows-g-1,l)}}class Xe extends ce{constructor(g,l){d(g,l),super(g,1,g.columns),this.row=l}set(g,l,u){return this.matrix.set(this.row,l,u),this}get(g,l){return this.matrix.get(this.row,l)}}class Ge extends ce{constructor(g,l){x(g,l),super(g,l.length,g.columns),this.rowIndices=l}set(g,l,u){return this.matrix.set(this.rowIndices[g],l,u),this}get(g,l){return this.matrix.get(this.rowIndices[g],l)}}class Ee extends ce{constructor(g,l,u){x(g,l),_(g,u),super(g,l.length,u.length),this.rowIndices=l,this.columnIndices=u}set(g,l,u){return this.matrix.set(this.rowIndices[g],this.columnIndices[l],u),this}get(g,l){return this.matrix.get(this.rowIndices[g],this.columnIndices[l])}}class mt extends ce{constructor(g,l,u,h,v){b(g,l,u,h,v),super(g,u-l+1,v-h+1),this.startRow=l,this.startColumn=h}set(g,l,u){return this.matrix.set(this.startRow+g,this.startColumn+l,u),this}get(g,l){return this.matrix.get(this.startRow+g,this.startColumn+l)}}class Me extends ce{constructor(g){super(g,g.columns,g.rows)}set(g,l,u){return this.matrix.set(l,g,u),this}get(g,l){return this.matrix.get(l,g)}}class yt extends ie{constructor(g,l={}){const{rows:u=1}=l;if(g.length%u!==0)throw new Error("the data length is not divisible by the number of rows");super(),this.rows=u,this.columns=g.length/u,this.data=g}set(g,l,u){let h=this._calculateIndex(g,l);return this.data[h]=u,this}get(g,l){let u=this._calculateIndex(g,l);return this.data[u]}_calculateIndex(g,l){return g*this.columns+l}}class Le extends ie{constructor(g){super(),this.data=g,this.rows=g.length,this.columns=g[0].length}set(g,l,u){return this.data[g][l]=u,this}get(g,l){return this.data[g][l]}}function ur(M,g){if(e.isAnyArray(M))return M[0]&&e.isAnyArray(M[0])?new Le(M):new yt(M,g);throw new Error("the argument is not an array")}class wt{constructor(g){g=Le.checkMatrix(g);let l=g.clone(),u=l.rows,h=l.columns,v=new Float64Array(u),q=1,O,T,k,B,C,W,re,U,K;for(O=0;O<u;O++)v[O]=O;for(U=new Float64Array(u),T=0;T<h;T++){for(O=0;O<u;O++)U[O]=l.get(O,T);for(O=0;O<u;O++){for(K=Math.min(O,T),C=0,k=0;k<K;k++)C+=l.get(O,k)*U[k];U[O]-=C,l.set(O,T,U[O])}for(B=T,O=T+1;O<u;O++)Math.abs(U[O])>Math.abs(U[B])&&(B=O);if(B!==T){for(k=0;k<h;k++)W=l.get(B,k),l.set(B,k,l.get(T,k)),l.set(T,k,W);re=v[B],v[B]=v[T],v[T]=re,q=-q}if(T<u&&l.get(T,T)!==0)for(O=T+1;O<u;O++)l.set(O,T,l.get(O,T)/l.get(T,T))}this.LU=l,this.pivotVector=v,this.pivotSign=q}isSingular(){let g=this.LU,l=g.columns;for(let u=0;u<l;u++)if(g.get(u,u)===0)return!0;return!1}solve(g){g=P.checkMatrix(g);let l=this.LU;if(l.rows!==g.rows)throw new Error("Invalid matrix dimensions");if(this.isSingular())throw new Error("LU matrix is singular");let h=g.columns,v=g.subMatrixRow(this.pivotVector,0,h-1),q=l.columns,O,T,k;for(k=0;k<q;k++)for(O=k+1;O<q;O++)for(T=0;T<h;T++)v.set(O,T,v.get(O,T)-v.get(k,T)*l.get(O,k));for(k=q-1;k>=0;k--){for(T=0;T<h;T++)v.set(k,T,v.get(k,T)/l.get(k,k));for(O=0;O<k;O++)for(T=0;T<h;T++)v.set(O,T,v.get(O,T)-v.get(k,T)*l.get(O,k))}return v}get determinant(){let g=this.LU;if(!g.isSquare())throw new Error("Matrix must be square");let l=this.pivotSign,u=g.columns;for(let h=0;h<u;h++)l*=g.get(h,h);return l}get lowerTriangularMatrix(){let g=this.LU,l=g.rows,u=g.columns,h=new P(l,u);for(let v=0;v<l;v++)for(let q=0;q<u;q++)v>q?h.set(v,q,g.get(v,q)):v===q?h.set(v,q,1):h.set(v,q,0);return h}get upperTriangularMatrix(){let g=this.LU,l=g.rows,u=g.columns,h=new P(l,u);for(let v=0;v<l;v++)for(let q=0;q<u;q++)v<=q?h.set(v,q,g.get(v,q)):h.set(v,q,0);return h}get pivotPermutationVector(){return Array.from(this.pivotVector)}}function Ue(M,g){let l=0;return Math.abs(M)>Math.abs(g)?(l=g/M,Math.abs(M)*Math.sqrt(1+l*l)):g!==0?(l=M/g,Math.abs(g)*Math.sqrt(1+l*l)):0}class Ve{constructor(g){g=Le.checkMatrix(g);let l=g.clone(),u=g.rows,h=g.columns,v=new Float64Array(h),q,O,T,k;for(T=0;T<h;T++){let B=0;for(q=T;q<u;q++)B=Ue(B,l.get(q,T));if(B!==0){for(l.get(T,T)<0&&(B=-B),q=T;q<u;q++)l.set(q,T,l.get(q,T)/B);for(l.set(T,T,l.get(T,T)+1),O=T+1;O<h;O++){for(k=0,q=T;q<u;q++)k+=l.get(q,T)*l.get(q,O);for(k=-k/l.get(T,T),q=T;q<u;q++)l.set(q,O,l.get(q,O)+k*l.get(q,T))}}v[T]=-B}this.QR=l,this.Rdiag=v}solve(g){g=P.checkMatrix(g);let l=this.QR,u=l.rows;if(g.rows!==u)throw new Error("Matrix row dimensions must agree");if(!this.isFullRank())throw new Error("Matrix is rank deficient");let h=g.columns,v=g.clone(),q=l.columns,O,T,k,B;for(k=0;k<q;k++)for(T=0;T<h;T++){for(B=0,O=k;O<u;O++)B+=l.get(O,k)*v.get(O,T);for(B=-B/l.get(k,k),O=k;O<u;O++)v.set(O,T,v.get(O,T)+B*l.get(O,k))}for(k=q-1;k>=0;k--){for(T=0;T<h;T++)v.set(k,T,v.get(k,T)/this.Rdiag[k]);for(O=0;O<k;O++)for(T=0;T<h;T++)v.set(O,T,v.get(O,T)-v.get(k,T)*l.get(O,k))}return v.subMatrix(0,q-1,0,h-1)}isFullRank(){let g=this.QR.columns;for(let l=0;l<g;l++)if(this.Rdiag[l]===0)return!1;return!0}get upperTriangularMatrix(){let g=this.QR,l=g.columns,u=new P(l,l),h,v;for(h=0;h<l;h++)for(v=0;v<l;v++)h<v?u.set(h,v,g.get(h,v)):h===v?u.set(h,v,this.Rdiag[h]):u.set(h,v,0);return u}get orthogonalMatrix(){let g=this.QR,l=g.rows,u=g.columns,h=new P(l,u),v,q,O,T;for(O=u-1;O>=0;O--){for(v=0;v<l;v++)h.set(v,O,0);for(h.set(O,O,1),q=O;q<u;q++)if(g.get(O,O)!==0){for(T=0,v=O;v<l;v++)T+=g.get(v,O)*h.get(v,q);for(T=-T/g.get(O,O),v=O;v<l;v++)h.set(v,q,h.get(v,q)+T*g.get(v,O))}}return h}}class ut{constructor(g,l={}){if(g=Le.checkMatrix(g),g.isEmpty())throw new Error("Matrix must be non-empty");let u=g.rows,h=g.columns;const{computeLeftSingularVectors:v=!0,computeRightSingularVectors:q=!0,autoTranspose:O=!1}=l;let T=!!v,k=!!q,B=!1,C;if(u<h)if(!O)C=g.clone(),console.warn("Computing SVD on a matrix with more columns than rows. Consider enabling autoTranspose");else{C=g.transpose(),u=C.rows,h=C.columns,B=!0;let F=T;T=k,k=F}else C=g.clone();let W=Math.min(u,h),re=Math.min(u+1,h),U=new Float64Array(re),K=new P(u,W),se=new P(h,h),L=new Float64Array(h),ne=new Float64Array(u),fe=new Float64Array(re);for(let F=0;F<re;F++)fe[F]=F;let pe=Math.min(u-1,h),ve=Math.max(0,Math.min(h-2,u)),Ie=Math.max(pe,ve);for(let F=0;F<Ie;F++){if(F<pe){U[F]=0;for(let Q=F;Q<u;Q++)U[F]=Ue(U[F],C.get(Q,F));if(U[F]!==0){C.get(F,F)<0&&(U[F]=-U[F]);for(let Q=F;Q<u;Q++)C.set(Q,F,C.get(Q,F)/U[F]);C.set(F,F,C.get(F,F)+1)}U[F]=-U[F]}for(let Q=F+1;Q<h;Q++){if(F<pe&&U[F]!==0){let ae=0;for(let H=F;H<u;H++)ae+=C.get(H,F)*C.get(H,Q);ae=-ae/C.get(F,F);for(let H=F;H<u;H++)C.set(H,Q,C.get(H,Q)+ae*C.get(H,F))}L[Q]=C.get(F,Q)}if(T&&F<pe)for(let Q=F;Q<u;Q++)K.set(Q,F,C.get(Q,F));if(F<ve){L[F]=0;for(let Q=F+1;Q<h;Q++)L[F]=Ue(L[F],L[Q]);if(L[F]!==0){L[F+1]<0&&(L[F]=0-L[F]);for(let Q=F+1;Q<h;Q++)L[Q]/=L[F];L[F+1]+=1}if(L[F]=-L[F],F+1<u&&L[F]!==0){for(let Q=F+1;Q<u;Q++)ne[Q]=0;for(let Q=F+1;Q<u;Q++)for(let ae=F+1;ae<h;ae++)ne[Q]+=L[ae]*C.get(Q,ae);for(let Q=F+1;Q<h;Q++){let ae=-L[Q]/L[F+1];for(let H=F+1;H<u;H++)C.set(H,Q,C.get(H,Q)+ae*ne[H])}}if(k)for(let Q=F+1;Q<h;Q++)se.set(Q,F,L[Q])}}let le=Math.min(h,u+1);if(pe<h&&(U[pe]=C.get(pe,pe)),u<le&&(U[le-1]=0),ve+1<le&&(L[ve]=C.get(ve,le-1)),L[le-1]=0,T){for(let F=pe;F<W;F++){for(let Q=0;Q<u;Q++)K.set(Q,F,0);K.set(F,F,1)}for(let F=pe-1;F>=0;F--)if(U[F]!==0){for(let Q=F+1;Q<W;Q++){let ae=0;for(let H=F;H<u;H++)ae+=K.get(H,F)*K.get(H,Q);ae=-ae/K.get(F,F);for(let H=F;H<u;H++)K.set(H,Q,K.get(H,Q)+ae*K.get(H,F))}for(let Q=F;Q<u;Q++)K.set(Q,F,-K.get(Q,F));K.set(F,F,1+K.get(F,F));for(let Q=0;Q<F-1;Q++)K.set(Q,F,0)}else{for(let Q=0;Q<u;Q++)K.set(Q,F,0);K.set(F,F,1)}}if(k)for(let F=h-1;F>=0;F--){if(F<ve&&L[F]!==0)for(let Q=F+1;Q<h;Q++){let ae=0;for(let H=F+1;H<h;H++)ae+=se.get(H,F)*se.get(H,Q);ae=-ae/se.get(F+1,F);for(let H=F+1;H<h;H++)se.set(H,Q,se.get(H,Q)+ae*se.get(H,F))}for(let Q=0;Q<h;Q++)se.set(Q,F,0);se.set(F,F,1)}let he=le-1,qe=Number.EPSILON;for(;le>0;){let F,Q;for(F=le-2;F>=-1&&F!==-1;F--){const ae=Number.MIN_VALUE+qe*Math.abs(U[F]+Math.abs(U[F+1]));if(Math.abs(L[F])<=ae||Number.isNaN(L[F])){L[F]=0;break}}if(F===le-2)Q=4;else{let ae;for(ae=le-1;ae>=F&&ae!==F;ae--){let H=(ae!==le?Math.abs(L[ae]):0)+(ae!==F+1?Math.abs(L[ae-1]):0);if(Math.abs(U[ae])<=qe*H){U[ae]=0;break}}ae===F?Q=3:ae===le-1?Q=1:(Q=2,F=ae)}switch(F++,Q){case 1:{let ae=L[le-2];L[le-2]=0;for(let H=le-2;H>=F;H--){let Te=Ue(U[H],ae),Se=U[H]/Te,Oe=ae/Te;if(U[H]=Te,H!==F&&(ae=-Oe*L[H-1],L[H-1]=Se*L[H-1]),k)for(let ke=0;ke<h;ke++)Te=Se*se.get(ke,H)+Oe*se.get(ke,le-1),se.set(ke,le-1,-Oe*se.get(ke,H)+Se*se.get(ke,le-1)),se.set(ke,H,Te)}break}case 2:{let ae=L[F-1];L[F-1]=0;for(let H=F;H<le;H++){let Te=Ue(U[H],ae),Se=U[H]/Te,Oe=ae/Te;if(U[H]=Te,ae=-Oe*L[H],L[H]=Se*L[H],T)for(let ke=0;ke<u;ke++)Te=Se*K.get(ke,H)+Oe*K.get(ke,F-1),K.set(ke,F-1,-Oe*K.get(ke,H)+Se*K.get(ke,F-1)),K.set(ke,H,Te)}break}case 3:{const ae=Math.max(Math.abs(U[le-1]),Math.abs(U[le-2]),Math.abs(L[le-2]),Math.abs(U[F]),Math.abs(L[F])),H=U[le-1]/ae,Te=U[le-2]/ae,Se=L[le-2]/ae,Oe=U[F]/ae,ke=L[F]/ae,We=((Te+H)*(Te-H)+Se*Se)/2,ft=H*Se*(H*Se);let ze=0;(We!==0||ft!==0)&&(We<0?ze=0-Math.sqrt(We*We+ft):ze=Math.sqrt(We*We+ft),ze=ft/(We+ze));let pt=(Oe+H)*(Oe-H)+ze,bt=Oe*ke;for(let Ne=F;Ne<le-1;Ne++){let Ye=Ue(pt,bt);Ye===0&&(Ye=Number.MIN_VALUE);let nt=pt/Ye,rt=bt/Ye;if(Ne!==F&&(L[Ne-1]=Ye),pt=nt*U[Ne]+rt*L[Ne],L[Ne]=nt*L[Ne]-rt*U[Ne],bt=rt*U[Ne+1],U[Ne+1]=nt*U[Ne+1],k)for(let Fe=0;Fe<h;Fe++)Ye=nt*se.get(Fe,Ne)+rt*se.get(Fe,Ne+1),se.set(Fe,Ne+1,-rt*se.get(Fe,Ne)+nt*se.get(Fe,Ne+1)),se.set(Fe,Ne,Ye);if(Ye=Ue(pt,bt),Ye===0&&(Ye=Number.MIN_VALUE),nt=pt/Ye,rt=bt/Ye,U[Ne]=Ye,pt=nt*L[Ne]+rt*U[Ne+1],U[Ne+1]=-rt*L[Ne]+nt*U[Ne+1],bt=rt*L[Ne+1],L[Ne+1]=nt*L[Ne+1],T&&Ne<u-1)for(let Fe=0;Fe<u;Fe++)Ye=nt*K.get(Fe,Ne)+rt*K.get(Fe,Ne+1),K.set(Fe,Ne+1,-rt*K.get(Fe,Ne)+nt*K.get(Fe,Ne+1)),K.set(Fe,Ne,Ye)}L[le-2]=pt;break}case 4:{if(U[F]<=0&&(U[F]=U[F]<0?-U[F]:0,k))for(let ae=0;ae<=he;ae++)se.set(ae,F,-se.get(ae,F));for(;F<he&&!(U[F]>=U[F+1]);){let ae=U[F];if(U[F]=U[F+1],U[F+1]=ae,k&&F<h-1)for(let H=0;H<h;H++)ae=se.get(H,F+1),se.set(H,F+1,se.get(H,F)),se.set(H,F,ae);if(T&&F<u-1)for(let H=0;H<u;H++)ae=K.get(H,F+1),K.set(H,F+1,K.get(H,F)),K.set(H,F,ae);F++}le--;break}}}if(B){let F=se;se=K,K=F}this.m=u,this.n=h,this.s=U,this.U=K,this.V=se}solve(g){let l=g,u=this.threshold,h=this.s.length,v=P.zeros(h,h);for(let W=0;W<h;W++)Math.abs(this.s[W])<=u?v.set(W,W,0):v.set(W,W,1/this.s[W]);let q=this.U,O=this.rightSingularVectors,T=O.mmul(v),k=O.rows,B=q.rows,C=P.zeros(k,B);for(let W=0;W<k;W++)for(let re=0;re<B;re++){let U=0;for(let K=0;K<h;K++)U+=T.get(W,K)*q.get(re,K);C.set(W,re,U)}return C.mmul(l)}solveForDiagonal(g){return this.solve(P.diag(g))}inverse(){let g=this.V,l=this.threshold,u=g.rows,h=g.columns,v=new P(u,this.s.length);for(let B=0;B<u;B++)for(let C=0;C<h;C++)Math.abs(this.s[C])>l&&v.set(B,C,g.get(B,C)/this.s[C]);let q=this.U,O=q.rows,T=q.columns,k=new P(u,O);for(let B=0;B<u;B++)for(let C=0;C<O;C++){let W=0;for(let re=0;re<T;re++)W+=v.get(B,re)*q.get(C,re);k.set(B,C,W)}return k}get condition(){return this.s[0]/this.s[Math.min(this.m,this.n)-1]}get norm2(){return this.s[0]}get rank(){let g=Math.max(this.m,this.n)*this.s[0]*Number.EPSILON,l=0,u=this.s;for(let h=0,v=u.length;h<v;h++)u[h]>g&&l++;return l}get diagonal(){return Array.from(this.s)}get threshold(){return Number.EPSILON/2*Math.max(this.m,this.n)*this.s[0]}get leftSingularVectors(){return this.U}get rightSingularVectors(){return this.V}get diagonalMatrix(){return P.diag(this.s)}}function $t(M,g=!1){return M=Le.checkMatrix(M),g?new ut(M).inverse():wn(M,P.eye(M.rows))}function wn(M,g,l=!1){return M=Le.checkMatrix(M),g=Le.checkMatrix(g),l?new ut(M).solve(g):M.isSquare()?new wt(M).solve(g):new Ve(M).solve(g)}function Tt(M){if(M=P.checkMatrix(M),M.isSquare()){if(M.columns===0)return 1;let g,l,u,h;if(M.columns===2)return g=M.get(0,0),l=M.get(0,1),u=M.get(1,0),h=M.get(1,1),g*h-l*u;if(M.columns===3){let v,q,O;return v=new Ee(M,[1,2],[1,2]),q=new Ee(M,[1,2],[0,2]),O=new Ee(M,[1,2],[0,1]),g=M.get(0,0),l=M.get(0,1),u=M.get(0,2),g*Tt(v)-l*Tt(q)+u*Tt(O)}else return new wt(M).determinant}else throw Error("determinant can only be calculated for a square matrix")}function qt(M,g){let l=[];for(let u=0;u<M;u++)u!==g&&l.push(u);return l}function bn(M,g,l,u=1e-9,h=1e-9){if(M>h)return new Array(g.rows+1).fill(0);{let v=g.addRow(l,[0]);for(let q=0;q<v.rows;q++)Math.abs(v.get(q,0))<u&&v.set(q,0,0);return v.to1DArray()}}function _n(M,g={}){const{thresholdValue:l=1e-9,thresholdError:u=1e-9}=g;M=P.checkMatrix(M);let h=M.rows,v=new P(h,h);for(let q=0;q<h;q++){let O=P.columnVector(M.getRow(q)),T=M.subMatrixRow(qt(h,q)).transpose(),B=new ut(T).solve(O),C=P.sub(O,T.mmul(B)).abs().max();v.setRow(q,bn(C,B,q,l,u))}return v}function fr(M,g=Number.EPSILON){if(M=P.checkMatrix(M),M.isEmpty())return M.transpose();let l=new ut(M,{autoTranspose:!0}),u=l.leftSingularVectors,h=l.rightSingularVectors,v=l.diagonal;for(let q=0;q<v.length;q++)Math.abs(v[q])>g?v[q]=1/v[q]:v[q]=0;return h.mmul(P.diag(v).mmul(u.transpose()))}function En(M,g=M,l={}){M=new P(M);let u=!1;if(typeof g=="object"&&!P.isMatrix(g)&&!e.isAnyArray(g)?(l=g,g=M,u=!0):g=new P(g),M.rows!==g.rows)throw new TypeError("Both matrices must have the same number of rows");const{center:h=!0}=l;h&&(M=M.center("column"),u||(g=g.center("column")));const v=M.transpose().mmul(g);for(let q=0;q<v.rows;q++)for(let O=0;O<v.columns;O++)v.set(q,O,v.get(q,O)*(1/(M.rows-1)));return v}function ht(M,g=M,l={}){M=new P(M);let u=!1;if(typeof g=="object"&&!P.isMatrix(g)&&!e.isAnyArray(g)?(l=g,g=M,u=!0):g=new P(g),M.rows!==g.rows)throw new TypeError("Both matrices must have the same number of rows");const{center:h=!0,scale:v=!0}=l;h&&(M.center("column"),u||g.center("column")),v&&(M.scale("column"),u||g.scale("column"));const q=M.standardDeviation("column",{unbiased:!0}),O=u?q:g.standardDeviation("column",{unbiased:!0}),T=M.transpose().mmul(g);for(let k=0;k<T.rows;k++)for(let B=0;B<T.columns;B++)T.set(k,B,T.get(k,B)*(1/(q[k]*O[B]))*(1/(M.rows-1)));return T}class gt{constructor(g,l={}){const{assumeSymmetric:u=!1}=l;if(g=Le.checkMatrix(g),!g.isSquare())throw new Error("Matrix is not a square matrix");if(g.isEmpty())throw new Error("Matrix must be non-empty");let h=g.columns,v=new P(h,h),q=new Float64Array(h),O=new Float64Array(h),T=g,k,B,C=!1;if(u?C=!0:C=g.isSymmetric(),C){for(k=0;k<h;k++)for(B=0;B<h;B++)v.set(k,B,T.get(k,B));_m(h,O,q,v),Em(h,O,q,v)}else{let W=new P(h,h),re=new Float64Array(h);for(B=0;B<h;B++)for(k=0;k<h;k++)W.set(k,B,T.get(k,B));xm(h,W,re,v),Nm(h,O,q,v,W)}this.n=h,this.e=O,this.d=q,this.V=v}get realEigenvalues(){return Array.from(this.d)}get imaginaryEigenvalues(){return Array.from(this.e)}get eigenvectorMatrix(){return this.V}get diagonalMatrix(){let g=this.n,l=this.e,u=this.d,h=new P(g,g),v,q;for(v=0;v<g;v++){for(q=0;q<g;q++)h.set(v,q,0);h.set(v,v,u[v]),l[v]>0?h.set(v,v+1,l[v]):l[v]<0&&h.set(v,v-1,l[v])}return h}}function _m(M,g,l,u){let h,v,q,O,T,k,B,C;for(T=0;T<M;T++)l[T]=u.get(M-1,T);for(O=M-1;O>0;O--){for(C=0,q=0,k=0;k<O;k++)C=C+Math.abs(l[k]);if(C===0)for(g[O]=l[O-1],T=0;T<O;T++)l[T]=u.get(O-1,T),u.set(O,T,0),u.set(T,O,0);else{for(k=0;k<O;k++)l[k]/=C,q+=l[k]*l[k];for(h=l[O-1],v=Math.sqrt(q),h>0&&(v=-v),g[O]=C*v,q=q-h*v,l[O-1]=h-v,T=0;T<O;T++)g[T]=0;for(T=0;T<O;T++){for(h=l[T],u.set(T,O,h),v=g[T]+u.get(T,T)*h,k=T+1;k<=O-1;k++)v+=u.get(k,T)*l[k],g[k]+=u.get(k,T)*h;g[T]=v}for(h=0,T=0;T<O;T++)g[T]/=q,h+=g[T]*l[T];for(B=h/(q+q),T=0;T<O;T++)g[T]-=B*l[T];for(T=0;T<O;T++){for(h=l[T],v=g[T],k=T;k<=O-1;k++)u.set(k,T,u.get(k,T)-(h*g[k]+v*l[k]));l[T]=u.get(O-1,T),u.set(O,T,0)}}l[O]=q}for(O=0;O<M-1;O++){if(u.set(M-1,O,u.get(O,O)),u.set(O,O,1),q=l[O+1],q!==0){for(k=0;k<=O;k++)l[k]=u.get(k,O+1)/q;for(T=0;T<=O;T++){for(v=0,k=0;k<=O;k++)v+=u.get(k,O+1)*u.get(k,T);for(k=0;k<=O;k++)u.set(k,T,u.get(k,T)-v*l[k])}}for(k=0;k<=O;k++)u.set(k,O+1,0)}for(T=0;T<M;T++)l[T]=u.get(M-1,T),u.set(M-1,T,0);u.set(M-1,M-1,1),g[0]=0}function Em(M,g,l,u){let h,v,q,O,T,k,B,C,W,re,U,K,se,L,ne,fe;for(q=1;q<M;q++)g[q-1]=g[q];g[M-1]=0;let pe=0,ve=0,Ie=Number.EPSILON;for(k=0;k<M;k++){for(ve=Math.max(ve,Math.abs(l[k])+Math.abs(g[k])),B=k;B<M&&!(Math.abs(g[B])<=Ie*ve);)B++;if(B>k)do{for(h=l[k],C=(l[k+1]-h)/(2*g[k]),W=Ue(C,1),C<0&&(W=-W),l[k]=g[k]/(C+W),l[k+1]=g[k]*(C+W),re=l[k+1],v=h-l[k],q=k+2;q<M;q++)l[q]-=v;for(pe=pe+v,C=l[B],U=1,K=U,se=U,L=g[k+1],ne=0,fe=0,q=B-1;q>=k;q--)for(se=K,K=U,fe=ne,h=U*g[q],v=U*C,W=Ue(C,g[q]),g[q+1]=ne*W,ne=g[q]/W,U=C/W,C=U*l[q]-ne*h,l[q+1]=v+ne*(U*h+ne*l[q]),T=0;T<M;T++)v=u.get(T,q+1),u.set(T,q+1,ne*u.get(T,q)+U*v),u.set(T,q,U*u.get(T,q)-ne*v);C=-ne*fe*se*L*g[k]/re,g[k]=ne*C,l[k]=U*C}while(Math.abs(g[k])>Ie*ve);l[k]=l[k]+pe,g[k]=0}for(q=0;q<M-1;q++){for(T=q,C=l[q],O=q+1;O<M;O++)l[O]<C&&(T=O,C=l[O]);if(T!==q)for(l[T]=l[q],l[q]=C,O=0;O<M;O++)C=u.get(O,q),u.set(O,q,u.get(O,T)),u.set(O,T,C)}}function xm(M,g,l,u){let h=0,v=M-1,q,O,T,k,B,C,W;for(C=h+1;C<=v-1;C++){for(W=0,k=C;k<=v;k++)W=W+Math.abs(g.get(k,C-1));if(W!==0){for(T=0,k=v;k>=C;k--)l[k]=g.get(k,C-1)/W,T+=l[k]*l[k];for(O=Math.sqrt(T),l[C]>0&&(O=-O),T=T-l[C]*O,l[C]=l[C]-O,B=C;B<M;B++){for(q=0,k=v;k>=C;k--)q+=l[k]*g.get(k,B);for(q=q/T,k=C;k<=v;k++)g.set(k,B,g.get(k,B)-q*l[k])}for(k=0;k<=v;k++){for(q=0,B=v;B>=C;B--)q+=l[B]*g.get(k,B);for(q=q/T,B=C;B<=v;B++)g.set(k,B,g.get(k,B)-q*l[B])}l[C]=W*l[C],g.set(C,C-1,W*O)}}for(k=0;k<M;k++)for(B=0;B<M;B++)u.set(k,B,k===B?1:0);for(C=v-1;C>=h+1;C--)if(g.get(C,C-1)!==0){for(k=C+1;k<=v;k++)l[k]=g.get(k,C-1);for(B=C;B<=v;B++){for(O=0,k=C;k<=v;k++)O+=l[k]*u.get(k,B);for(O=O/l[C]/g.get(C,C-1),k=C;k<=v;k++)u.set(k,B,u.get(k,B)+O*l[k])}}}function Nm(M,g,l,u,h){let v=M-1,q=0,O=M-1,T=Number.EPSILON,k=0,B=0,C=0,W=0,re=0,U=0,K=0,se=0,L,ne,fe,pe,ve,Ie,le,he,qe,F,Q,ae,H,Te,Se;for(L=0;L<M;L++)for((L<q||L>O)&&(l[L]=h.get(L,L),g[L]=0),ne=Math.max(L-1,0);ne<M;ne++)B=B+Math.abs(h.get(L,ne));for(;v>=q;){for(pe=v;pe>q&&(U=Math.abs(h.get(pe-1,pe-1))+Math.abs(h.get(pe,pe)),U===0&&(U=B),!(Math.abs(h.get(pe,pe-1))<T*U));)pe--;if(pe===v)h.set(v,v,h.get(v,v)+k),l[v]=h.get(v,v),g[v]=0,v--,se=0;else if(pe===v-1){if(le=h.get(v,v-1)*h.get(v-1,v),C=(h.get(v-1,v-1)-h.get(v,v))/2,W=C*C+le,K=Math.sqrt(Math.abs(W)),h.set(v,v,h.get(v,v)+k),h.set(v-1,v-1,h.get(v-1,v-1)+k),he=h.get(v,v),W>=0){for(K=C>=0?C+K:C-K,l[v-1]=he+K,l[v]=l[v-1],K!==0&&(l[v]=he-le/K),g[v-1]=0,g[v]=0,he=h.get(v,v-1),U=Math.abs(he)+Math.abs(K),C=he/U,W=K/U,re=Math.sqrt(C*C+W*W),C=C/re,W=W/re,ne=v-1;ne<M;ne++)K=h.get(v-1,ne),h.set(v-1,ne,W*K+C*h.get(v,ne)),h.set(v,ne,W*h.get(v,ne)-C*K);for(L=0;L<=v;L++)K=h.get(L,v-1),h.set(L,v-1,W*K+C*h.get(L,v)),h.set(L,v,W*h.get(L,v)-C*K);for(L=q;L<=O;L++)K=u.get(L,v-1),u.set(L,v-1,W*K+C*u.get(L,v)),u.set(L,v,W*u.get(L,v)-C*K)}else l[v-1]=he+C,l[v]=he+C,g[v-1]=K,g[v]=-K;v=v-2,se=0}else{if(he=h.get(v,v),qe=0,le=0,pe<v&&(qe=h.get(v-1,v-1),le=h.get(v,v-1)*h.get(v-1,v)),se===10){for(k+=he,L=q;L<=v;L++)h.set(L,L,h.get(L,L)-he);U=Math.abs(h.get(v,v-1))+Math.abs(h.get(v-1,v-2)),he=qe=.75*U,le=-.4375*U*U}if(se===30&&(U=(qe-he)/2,U=U*U+le,U>0)){for(U=Math.sqrt(U),qe<he&&(U=-U),U=he-le/((qe-he)/2+U),L=q;L<=v;L++)h.set(L,L,h.get(L,L)-U);k+=U,he=qe=le=.964}for(se=se+1,ve=v-2;ve>=pe&&(K=h.get(ve,ve),re=he-K,U=qe-K,C=(re*U-le)/h.get(ve+1,ve)+h.get(ve,ve+1),W=h.get(ve+1,ve+1)-K-re-U,re=h.get(ve+2,ve+1),U=Math.abs(C)+Math.abs(W)+Math.abs(re),C=C/U,W=W/U,re=re/U,!(ve===pe||Math.abs(h.get(ve,ve-1))*(Math.abs(W)+Math.abs(re))<T*(Math.abs(C)*(Math.abs(h.get(ve-1,ve-1))+Math.abs(K)+Math.abs(h.get(ve+1,ve+1))))));)ve--;for(L=ve+2;L<=v;L++)h.set(L,L-2,0),L>ve+2&&h.set(L,L-3,0);for(fe=ve;fe<=v-1&&(Te=fe!==v-1,fe!==ve&&(C=h.get(fe,fe-1),W=h.get(fe+1,fe-1),re=Te?h.get(fe+2,fe-1):0,he=Math.abs(C)+Math.abs(W)+Math.abs(re),he!==0&&(C=C/he,W=W/he,re=re/he)),he!==0);fe++)if(U=Math.sqrt(C*C+W*W+re*re),C<0&&(U=-U),U!==0){for(fe!==ve?h.set(fe,fe-1,-U*he):pe!==ve&&h.set(fe,fe-1,-h.get(fe,fe-1)),C=C+U,he=C/U,qe=W/U,K=re/U,W=W/C,re=re/C,ne=fe;ne<M;ne++)C=h.get(fe,ne)+W*h.get(fe+1,ne),Te&&(C=C+re*h.get(fe+2,ne),h.set(fe+2,ne,h.get(fe+2,ne)-C*K)),h.set(fe,ne,h.get(fe,ne)-C*he),h.set(fe+1,ne,h.get(fe+1,ne)-C*qe);for(L=0;L<=Math.min(v,fe+3);L++)C=he*h.get(L,fe)+qe*h.get(L,fe+1),Te&&(C=C+K*h.get(L,fe+2),h.set(L,fe+2,h.get(L,fe+2)-C*re)),h.set(L,fe,h.get(L,fe)-C),h.set(L,fe+1,h.get(L,fe+1)-C*W);for(L=q;L<=O;L++)C=he*u.get(L,fe)+qe*u.get(L,fe+1),Te&&(C=C+K*u.get(L,fe+2),u.set(L,fe+2,u.get(L,fe+2)-C*re)),u.set(L,fe,u.get(L,fe)-C),u.set(L,fe+1,u.get(L,fe+1)-C*W)}}}if(B!==0){for(v=M-1;v>=0;v--)if(C=l[v],W=g[v],W===0)for(pe=v,h.set(v,v,1),L=v-1;L>=0;L--){for(le=h.get(L,L)-C,re=0,ne=pe;ne<=v;ne++)re=re+h.get(L,ne)*h.get(ne,v);if(g[L]<0)K=le,U=re;else if(pe=L,g[L]===0?h.set(L,v,le!==0?-re/le:-re/(T*B)):(he=h.get(L,L+1),qe=h.get(L+1,L),W=(l[L]-C)*(l[L]-C)+g[L]*g[L],Ie=(he*U-K*re)/W,h.set(L,v,Ie),h.set(L+1,v,Math.abs(he)>Math.abs(K)?(-re-le*Ie)/he:(-U-qe*Ie)/K)),Ie=Math.abs(h.get(L,v)),T*Ie*Ie>1)for(ne=L;ne<=v;ne++)h.set(ne,v,h.get(ne,v)/Ie)}else if(W<0)for(pe=v-1,Math.abs(h.get(v,v-1))>Math.abs(h.get(v-1,v))?(h.set(v-1,v-1,W/h.get(v,v-1)),h.set(v-1,v,-(h.get(v,v)-C)/h.get(v,v-1))):(Se=xn(0,-h.get(v-1,v),h.get(v-1,v-1)-C,W),h.set(v-1,v-1,Se[0]),h.set(v-1,v,Se[1])),h.set(v,v-1,0),h.set(v,v,1),L=v-2;L>=0;L--){for(F=0,Q=0,ne=pe;ne<=v;ne++)F=F+h.get(L,ne)*h.get(ne,v-1),Q=Q+h.get(L,ne)*h.get(ne,v);if(le=h.get(L,L)-C,g[L]<0)K=le,re=F,U=Q;else if(pe=L,g[L]===0?(Se=xn(-F,-Q,le,W),h.set(L,v-1,Se[0]),h.set(L,v,Se[1])):(he=h.get(L,L+1),qe=h.get(L+1,L),ae=(l[L]-C)*(l[L]-C)+g[L]*g[L]-W*W,H=(l[L]-C)*2*W,ae===0&&H===0&&(ae=T*B*(Math.abs(le)+Math.abs(W)+Math.abs(he)+Math.abs(qe)+Math.abs(K))),Se=xn(he*re-K*F+W*Q,he*U-K*Q-W*F,ae,H),h.set(L,v-1,Se[0]),h.set(L,v,Se[1]),Math.abs(he)>Math.abs(K)+Math.abs(W)?(h.set(L+1,v-1,(-F-le*h.get(L,v-1)+W*h.get(L,v))/he),h.set(L+1,v,(-Q-le*h.get(L,v)-W*h.get(L,v-1))/he)):(Se=xn(-re-qe*h.get(L,v-1),-U-qe*h.get(L,v),K,W),h.set(L+1,v-1,Se[0]),h.set(L+1,v,Se[1]))),Ie=Math.max(Math.abs(h.get(L,v-1)),Math.abs(h.get(L,v))),T*Ie*Ie>1)for(ne=L;ne<=v;ne++)h.set(ne,v-1,h.get(ne,v-1)/Ie),h.set(ne,v,h.get(ne,v)/Ie)}for(L=0;L<M;L++)if(L<q||L>O)for(ne=L;ne<M;ne++)u.set(L,ne,h.get(L,ne));for(ne=M-1;ne>=q;ne--)for(L=q;L<=O;L++){for(K=0,fe=q;fe<=Math.min(ne,O);fe++)K=K+u.get(L,fe)*h.get(fe,ne);u.set(L,ne,K)}}}function xn(M,g,l,u){let h,v;return Math.abs(l)>Math.abs(u)?(h=u/l,v=l+h*u,[(M+h*g)/v,(g-h*M)/v]):(h=l/u,v=u+h*l,[(h*M+g)/v,(h*g-M)/v])}class Of{constructor(g){if(g=Le.checkMatrix(g),!g.isSymmetric())throw new Error("Matrix is not symmetric");let l=g,u=l.rows,h=new P(u,u),v=!0,q,O,T;for(O=0;O<u;O++){let k=0;for(T=0;T<O;T++){let B=0;for(q=0;q<T;q++)B+=h.get(T,q)*h.get(O,q);B=(l.get(O,T)-B)/h.get(T,T),h.set(O,T,B),k=k+B*B}for(k=l.get(O,O)-k,v&&(v=k>0),h.set(O,O,Math.sqrt(Math.max(k,0))),T=O+1;T<u;T++)h.set(O,T,0)}this.L=h,this.positiveDefinite=v}isPositiveDefinite(){return this.positiveDefinite}solve(g){g=Le.checkMatrix(g);let l=this.L,u=l.rows;if(g.rows!==u)throw new Error("Matrix dimensions do not match");if(this.isPositiveDefinite()===!1)throw new Error("Matrix is not positive definite");let h=g.columns,v=g.clone(),q,O,T;for(T=0;T<u;T++)for(O=0;O<h;O++){for(q=0;q<T;q++)v.set(T,O,v.get(T,O)-v.get(q,O)*l.get(T,q));v.set(T,O,v.get(T,O)/l.get(T,T))}for(T=u-1;T>=0;T--)for(O=0;O<h;O++){for(q=T+1;q<u;q++)v.set(T,O,v.get(T,O)-v.get(q,O)*l.get(q,T));v.set(T,O,v.get(T,O)/l.get(T,T))}return v}get lowerTriangularMatrix(){return this.L}}class Af{constructor(g,l={}){g=Le.checkMatrix(g);let{Y:u}=l;const{scaleScores:h=!1,maxIterations:v=1e3,terminationCriteria:q=1e-10}=l;let O;if(u){if(e.isAnyArray(u)&&typeof u[0]=="number"?u=P.columnVector(u):u=Le.checkMatrix(u),u.rows!==g.rows)throw new Error("Y should have the same number of rows as X");O=u.getColumnVector(0)}else O=g.getColumnVector(0);let T=1,k,B,C,W;for(let re=0;re<v&&T>q;re++)C=g.transpose().mmul(O).div(O.transpose().mmul(O).get(0,0)),C=C.div(C.norm()),k=g.mmul(C).div(C.transpose().mmul(C).get(0,0)),re>0&&(T=k.clone().sub(W).pow(2).sum()),W=k.clone(),u?(B=u.transpose().mmul(k).div(k.transpose().mmul(k).get(0,0)),B=B.div(B.norm()),O=u.mmul(B).div(B.transpose().mmul(B).get(0,0))):O=k;if(u){let re=g.transpose().mmul(k).div(k.transpose().mmul(k).get(0,0));re=re.div(re.norm());let U=g.clone().sub(k.clone().mmul(re.transpose())),K=O.transpose().mmul(k).div(k.transpose().mmul(k).get(0,0)),se=u.clone().sub(k.clone().mulS(K.get(0,0)).mmul(B.transpose()));this.t=k,this.p=re.transpose(),this.w=C.transpose(),this.q=B,this.u=O,this.s=k.transpose().mmul(k),this.xResidual=U,this.yResidual=se,this.betas=K}else this.w=C.transpose(),this.s=k.transpose().mmul(k).sqrt(),h?this.t=k.clone().div(this.s.get(0,0)):this.t=k,this.xResidual=g.sub(k.mmul(C.transpose()))}}return we.AbstractMatrix=ie,we.CHO=Of,we.CholeskyDecomposition=Of,we.DistanceMatrix=te,we.EVD=gt,we.EigenvalueDecomposition=gt,we.LU=wt,we.LuDecomposition=wt,we.Matrix=P,we.MatrixColumnSelectionView=Ce,we.MatrixColumnView=xe,we.MatrixFlipColumnView=Ke,we.MatrixFlipRowView=Bt,we.MatrixRowSelectionView=Ge,we.MatrixRowView=Xe,we.MatrixSelectionView=Ee,we.MatrixSubView=mt,we.MatrixTransposeView=Me,we.NIPALS=Af,we.Nipals=Af,we.QR=Ve,we.QrDecomposition=Ve,we.SVD=ut,we.SingularValueDecomposition=ut,we.SymmetricMatrix=X,we.WrapperMatrix1D=yt,we.WrapperMatrix2D=Le,we.correlation=ht,we.covariance=En,we.default=P,we.determinant=Tt,we.inverse=$t,we.linearDependencies=_n,we.pseudoInverse=fr,we.solve=wn,we.wrap=ur,we}var $n=n1(),rc=cv($n);const Rt=$n.Matrix,lv=$n.SingularValueDecomposition;rc.Matrix?rc.Matrix:$n.Matrix;const r1={center:[0,0],linkDistance:50};class hv{constructor(n={}){this.options=n,this.id="mds",this.options=Object.assign(Object.assign({},r1),n)}execute(n,t){return ye(this,void 0,void 0,function*(){return this.genericMDSLayout(!1,n,t)})}assign(n,t){return ye(this,void 0,void 0,function*(){yield this.genericMDSLayout(!0,n,t)})}genericMDSLayout(n,t,r){return ye(this,void 0,void 0,function*(){const i=Object.assign(Object.assign({},this.options),r),{center:s=[0,0],linkDistance:o=50}=i,a=t.getAllNodes(),f=t.getAllEdges();if(!(a!=null&&a.length)||a.length===1)return Pt(t,n,s);const c=av({nodes:a,edges:f}),d=sv(c);i1(d);const p=Z0(d,o),m=s1(p),y=[];return m.forEach((_,b)=>{const w=it(a[b]);w.data.x=_[0]+s[0],w.data.y=_[1]+s[1],y.push(w)}),n&&y.forEach(_=>t.mergeNodeData(_.id,{x:_.data.x,y:_.data.y})),{nodes:y,edges:f}})}}const i1=e=>{let n=-999999;e.forEach(t=>{t.forEach(r=>{r!==1/0&&n<r&&(n=r)})}),e.forEach((t,r)=>{t.forEach((i,s)=>{i===1/0&&(e[r][s]=n)})})},s1=e=>{const t=Rt.mul(Rt.pow(e,2),-.5),r=t.mean("row"),i=t.mean("column"),s=t.mean();t.add(s).subRowVector(r).subColumnVector(i);const o=new lv(t),a=Rt.sqrt(o.diagonalMatrix).diagonal();return o.leftSingularVectors.toJSON().map(f=>Rt.mul([f],[a]).toJSON()[0].splice(0,2))};function gv(e){return!!e.tick&&!!e.stop}const a1={gForce:!0,force2:!0,d3force:!0,fruchterman:!0,forceAtlas2:!0,force:!0,"graphin-force":!0},o1={center:[0,0],comboPadding:10,treeKey:"combo"};class u1{constructor(n={}){this.options=n,this.id="comboCombined",this.options=Object.assign(Object.assign({},o1),n)}execute(n,t){return ye(this,void 0,void 0,function*(){return this.genericComboCombinedLayout(!1,n,t)})}assign(n,t){return ye(this,void 0,void 0,function*(){yield this.genericComboCombinedLayout(!0,n,t)})}genericComboCombinedLayout(n,t,r){return ye(this,void 0,void 0,function*(){const i=this.initVals(Object.assign(Object.assign({},this.options),r)),{center:s,treeKey:o,outerLayout:a}=i,f=t.getAllNodes().filter(I=>!I.data._isCombo),c=t.getAllNodes().filter(I=>I.data._isCombo),d=t.getAllEdges(),p=f==null?void 0:f.length;if(!p||p===1)return Pt(t,n,s);const m=[],y=new Map;f.forEach(I=>{y.set(I.id,I)});const x=new Map;c.forEach(I=>{x.set(I.id,I)});const _=new Map,b=this.getInnerGraphs(t,o,y,x,d,i,_);yield Promise.all(b);const w=new Map,E=[],N=new Map;let S=!0;t.getRoots(o).forEach(I=>{const D=_.get(I.id),z=x.get(I.id)||y.get(I.id),$={id:I.id,data:Object.assign(Object.assign({},I.data),{x:D.data.x||z.data.x,y:D.data.y||z.data.y,fx:D.data.fx||z.data.fx,fy:D.data.fy||z.data.fy,mass:D.data.mass||z.data.mass,size:D.data.size})};E.push($),w.set(I.id,!0),!isNaN($.data.x)&&$.data.x!==0&&!isNaN($.data.y)&&$.data.y!==0?S=!1:($.data.x=Math.random()*100,$.data.y=Math.random()*100),Vu(t,[I],V=>{V.id!==I.id&&N.set(V.id,I.id)},"TB",o)});const R=[];d.forEach(I=>{const D=N.get(I.source)||I.source,z=N.get(I.target)||I.target;D!==z&&w.has(D)&&w.has(z)&&R.push({id:I.id,source:D,target:z,data:{}})});let A;if(E!=null&&E.length){if(E.length===1)E[0].data.x=s[0],E[0].data.y=s[1];else{const I=new $e({nodes:E,edges:R}),D=a||new fv;S&&a1[D.id]&&(yield(E.length<100?new hv:new Yu).assign(I));const z=Object.assign({center:s,kg:5,preventOverlap:!0,animate:!1},D.id==="force"?{gravity:1,factor:4,linkDistance:($,V,Y)=>{const ee=Math.max(...V.data.size)||32,J=Math.max(...Y.data.size)||32;return ee/2+J/2+200}}:{});A=yield ic(D,I,z)}_.forEach(I=>{var D;const z=A.nodes.find(Y=>Y.id===I.id);if(z){const{x:Y,y:ee}=z.data;I.data.visited=!0,I.data.x=Y,I.data.y=ee,m.push({id:I.id,data:{x:Y,y:ee}})}const{x:$,y:V}=I.data;(D=I.data.nodes)===null||D===void 0||D.forEach(Y=>{m.push({id:Y.id,data:{x:Y.data.x+$,y:Y.data.y+V}})})}),_.forEach(({data:I})=>{const{x:D,y:z,visited:$,nodes:V}=I;V==null||V.forEach(Y=>{if(!$){const ee=m.find(J=>J.id===Y.id);ee.data.x+=D||0,ee.data.y+=z||0}})})}return n&&m.forEach(I=>{t.mergeNodeData(I.id,{x:I.data.x,y:I.data.y})}),{nodes:m,edges:d}})}initVals(n){const t=Object.assign({},n),{nodeSize:r,spacing:i,comboPadding:s}=n;let o,a;if(me(i)?a=()=>i:xt(i)?a=i:a=()=>0,t.spacing=a,!r)o=c=>{const d=a(c);return c.size?Et(c.size)?((c.size[0]>c.size[1]?c.size[0]:c.size[1])+d)/2:Wt(c.size)?((c.size.width>c.size.height?c.size.width:c.size.height)+d)/2:(c.size+d)/2:32+d/2};else if(xt(r))o=c=>{const d=r(c),p=a(c);return Et(c.size)?((c.size[0]>c.size[1]?c.size[0]:c.size[1])+p)/2:((d||32)+p)/2};else if(Et(r)){const d=(r[0]>r[1]?r[0]:r[1])/2;o=p=>d+a(p)/2}else{const c=r/2;o=d=>c+a(d)/2}t.nodeSize=o;let f;return me(s)?f=()=>s:Et(s)?f=()=>Math.max.apply(null,s):xt(s)?f=s:f=()=>0,t.comboPadding=f,t}getInnerGraphs(n,t,r,i,s,o,a){const{nodeSize:f,comboPadding:c,spacing:d,innerLayout:p}=o,m=p||new Yu({}),y={center:[0,0],preventOverlap:!0,nodeSpacing:d},x=[],_=b=>{let w=(c==null?void 0:c(b))||10;return Et(w)&&(w=Math.max(...w)),{size:w?[w*2,w*2]:[30,30],padding:w}};return n.getRoots(t).forEach(b=>{a.set(b.id,{id:b.id,data:{nodes:[],size:_(b).size}});let w=Promise.resolve();Vu(n,[b],E=>{var N;if(!E.data._isCombo)return;const{size:S,padding:R}=_(E);if(!(!((N=n.getChildren(E.id,t))===null||N===void 0)&&N.length))a.set(E.id,{id:E.id,data:Object.assign(Object.assign({},E.data),{size:S})});else{const A=a.get(E.id);a.set(E.id,{id:E.id,data:Object.assign({nodes:[]},A==null?void 0:A.data)});const j=new Map,I=n.getChildren(E.id,t).map($=>{if($.data._isCombo)return a.has($.id)||a.set($.id,{id:$.id,data:Object.assign({},$.data)}),j.set($.id,!0),a.get($.id);const V=r.get($.id)||i.get($.id);return j.set($.id,!0),{id:$.id,data:Object.assign(Object.assign({},V.data),$.data)}}),D={nodes:I,edges:s.filter($=>j.has($.source)&&j.has($.target))};let z=1/0;I.forEach($=>{var V;let{size:Y}=$.data;Y||(Y=((V=a.get($.id))===null||V===void 0?void 0:V.data.size)||(f==null?void 0:f($))||[30,30]),me(Y)&&(Y=[Y,Y]);const[ee,J]=Y;z>ee&&(z=ee),z>J&&(z=J),$.data.size=Y}),w=w.then(()=>ye(this,void 0,void 0,function*(){const $=new $e(D);yield ic(m,$,y,!0);const{minX:V,minY:Y,maxX:ee,maxY:J}=J0(I),oe={x:(ee+V)/2,y:(J+Y)/2};D.nodes.forEach(Z=>{Z.data.x-=oe.x,Z.data.y-=oe.y});const be=[Math.max(ee-V,z)+R*2,Math.max(J-Y,z)+R*2];a.get(E.id).data.size=be,a.get(E.id).data.nodes=I}))}return!0},"BT",t),x.push(w)}),x}}function ic(e,n,t,r){var i;return ye(this,void 0,void 0,function*(){return gv(e)?(e.execute(n,t),e.stop(),e.tick((i=t.iterations)!==null&&i!==void 0?i:300)):r?yield e.assign(n,t):yield e.execute(n,t)})}function f1(e,n){var t,r=1;e==null&&(e=0),n==null&&(n=0);function i(){var s,o=t.length,a,f=0,c=0;for(s=0;s<o;++s)a=t[s],f+=a.x,c+=a.y;for(f=(f/o-e)*r,c=(c/o-n)*r,s=0;s<o;++s)a=t[s],a.x-=f,a.y-=c}return i.initialize=function(s){t=s},i.x=function(s){return arguments.length?(e=+s,i):e},i.y=function(s){return arguments.length?(n=+s,i):n},i.strength=function(s){return arguments.length?(r=+s,i):r},i}function Be(e){return function(){return e}}function Ot(e){return(e()-.5)*1e-6}function c1(e){return e.x+e.vx}function d1(e){return e.y+e.vy}function l1(e){var n,t,r,i=1,s=1;typeof e!="function"&&(e=Be(e==null?1:+e));function o(){for(var c,d=n.length,p,m,y,x,_,b,w=0;w<s;++w)for(p=Xt(n,c1,d1).visitAfter(a),c=0;c<d;++c)m=n[c],_=t[m.index],b=_*_,y=m.x+m.vx,x=m.y+m.vy,p.visit(E);function E(N,S,R,A,j){var I=N.data,D=N.r,z=_+D;if(I){if(I.index>m.index){var $=y-I.x-I.vx,V=x-I.y-I.vy,Y=$*$+V*V;Y<z*z&&($===0&&($=Ot(r),Y+=$*$),V===0&&(V=Ot(r),Y+=V*V),Y=(z-(Y=Math.sqrt(Y)))/Y*i,m.vx+=($*=Y)*(z=(D*=D)/(b+D)),m.vy+=(V*=Y)*z,I.vx-=$*(z=1-z),I.vy-=V*z)}return}return S>y+z||A<y-z||R>x+z||j<x-z}}function a(c){if(c.data)return c.r=t[c.data.index];for(var d=c.r=0;d<4;++d)c[d]&&c[d].r>c.r&&(c.r=c[d].r)}function f(){if(n){var c,d=n.length,p;for(t=new Array(d),c=0;c<d;++c)p=n[c],t[p.index]=+e(p,c,n)}}return o.initialize=function(c,d){n=c,r=d,f()},o.iterations=function(c){return arguments.length?(s=+c,o):s},o.strength=function(c){return arguments.length?(i=+c,o):i},o.radius=function(c){return arguments.length?(e=typeof c=="function"?c:Be(+c),f(),o):e},o}function h1(e){return e.index}function sc(e,n){var t=e.get(n);if(!t)throw new Error("node not found: "+n);return t}function g1(e){var n=h1,t=p,r,i=Be(30),s,o,a,f,c,d=1;e==null&&(e=[]);function p(b){return 1/Math.min(a[b.source.index],a[b.target.index])}function m(b){for(var w=0,E=e.length;w<d;++w)for(var N=0,S,R,A,j,I,D,z;N<E;++N)S=e[N],R=S.source,A=S.target,j=A.x+A.vx-R.x-R.vx||Ot(c),I=A.y+A.vy-R.y-R.vy||Ot(c),D=Math.sqrt(j*j+I*I),D=(D-s[N])/D*b*r[N],j*=D,I*=D,A.vx-=j*(z=f[N]),A.vy-=I*z,R.vx+=j*(z=1-z),R.vy+=I*z}function y(){if(o){var b,w=o.length,E=e.length,N=new Map(o.map((R,A)=>[n(R,A,o),R])),S;for(b=0,a=new Array(w);b<E;++b)S=e[b],S.index=b,typeof S.source!="object"&&(S.source=sc(N,S.source)),typeof S.target!="object"&&(S.target=sc(N,S.target)),a[S.source.index]=(a[S.source.index]||0)+1,a[S.target.index]=(a[S.target.index]||0)+1;for(b=0,f=new Array(E);b<E;++b)S=e[b],f[b]=a[S.source.index]/(a[S.source.index]+a[S.target.index]);r=new Array(E),x(),s=new Array(E),_()}}function x(){if(o)for(var b=0,w=e.length;b<w;++b)r[b]=+t(e[b],b,e)}function _(){if(o)for(var b=0,w=e.length;b<w;++b)s[b]=+i(e[b],b,e)}return m.initialize=function(b,w){o=b,c=w,y()},m.links=function(b){return arguments.length?(e=b,y(),m):e},m.id=function(b){return arguments.length?(n=b,m):n},m.iterations=function(b){return arguments.length?(d=+b,m):d},m.strength=function(b){return arguments.length?(t=typeof b=="function"?b:Be(+b),x(),m):t},m.distance=function(b){return arguments.length?(i=typeof b=="function"?b:Be(+b),_(),m):i},m}var p1={value:()=>{}};function af(){for(var e=0,n=arguments.length,t={},r;e<n;++e){if(!(r=arguments[e]+"")||r in t||/[\s.]/.test(r))throw new Error("illegal type: "+r);t[r]=[]}return new Tn(t)}function Tn(e){this._=e}function v1(e,n){return e.trim().split(/^|\s+/).map(function(t){var r="",i=t.indexOf(".");if(i>=0&&(r=t.slice(i+1),t=t.slice(0,i)),t&&!n.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:r}})}Tn.prototype=af.prototype={constructor:Tn,on:function(e,n){var t=this._,r=v1(e+"",t),i,s=-1,o=r.length;if(arguments.length<2){for(;++s<o;)if((i=(e=r[s]).type)&&(i=m1(t[i],e.name)))return i;return}if(n!=null&&typeof n!="function")throw new Error("invalid callback: "+n);for(;++s<o;)if(i=(e=r[s]).type)t[i]=ac(t[i],e.name,n);else if(n==null)for(i in t)t[i]=ac(t[i],e.name,null);return this},copy:function(){var e={},n=this._;for(var t in n)e[t]=n[t].slice();return new Tn(e)},call:function(e,n){if((i=arguments.length-2)>0)for(var t=new Array(i),r=0,i,s;r<i;++r)t[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(s=this._[e],r=0,i=s.length;r<i;++r)s[r].value.apply(n,t)},apply:function(e,n,t){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,s=r.length;i<s;++i)r[i].value.apply(n,t)}};function m1(e,n){for(var t=0,r=e.length,i;t<r;++t)if((i=e[t]).name===n)return i.value}function ac(e,n,t){for(var r=0,i=e.length;r<i;++r)if(e[r].name===n){e[r]=p1,e=e.slice(0,r).concat(e.slice(r+1));break}return t!=null&&e.push({name:n,value:t}),e}var Yt=0,rn=0,nn=0,pv=1e3,Dn,sn,zn=0,Ct=0,Gn=0,ln=typeof performance=="object"&&performance.now?performance:Date,vv=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function mv(){return Ct||(vv(y1),Ct=ln.now()+Gn)}function y1(){Ct=0}function Xu(){this._call=this._time=this._next=null}Xu.prototype=of.prototype={constructor:Xu,restart:function(e,n,t){if(typeof e!="function")throw new TypeError("callback is not a function");t=(t==null?mv():+t)+(n==null?0:+n),!this._next&&sn!==this&&(sn?sn._next=this:Dn=this,sn=this),this._call=e,this._time=t,Zu()},stop:function(){this._call&&(this._call=null,this._time=1/0,Zu())}};function of(e,n,t){var r=new Xu;return r.restart(e,n,t),r}function w1(){mv(),++Yt;for(var e=Dn,n;e;)(n=Ct-e._time)>=0&&e._call.call(void 0,n),e=e._next;--Yt}function oc(){Ct=(zn=ln.now())+Gn,Yt=rn=0;try{w1()}finally{Yt=0,_1(),Ct=0}}function b1(){var e=ln.now(),n=e-zn;n>pv&&(Gn-=n,zn=e)}function _1(){for(var e,n=Dn,t,r=1/0;n;)n._call?(r>n._time&&(r=n._time),e=n,n=n._next):(t=n._next,n._next=null,n=e?e._next=t:Dn=t);sn=e,Zu(r)}function Zu(e){if(!Yt){rn&&(rn=clearTimeout(rn));var n=e-Ct;n>24?(e<1/0&&(rn=setTimeout(oc,e-ln.now()-Gn)),nn&&(nn=clearInterval(nn))):(nn||(zn=ln.now(),nn=setInterval(b1,pv)),Yt=1,vv(oc))}}const E1=1664525,x1=1013904223,uc=4294967296;function N1(){let e=1;return()=>(e=(E1*e+x1)%uc)/uc}function M1(e){return e.x}function S1(e){return e.y}var q1=10,R1=Math.PI*(3-Math.sqrt(5));function O1(e){var n,t=1,r=.001,i=1-Math.pow(r,1/300),s=0,o=.6,a=new Map,f=of(p),c=af("tick","end"),d=N1();e==null&&(e=[]);function p(){m(),c.call("tick",n),t<r&&(f.stop(),c.call("end",n))}function m(_){var b,w=e.length,E;_===void 0&&(_=1);for(var N=0;N<_;++N)for(t+=(s-t)*i,a.forEach(function(S){S(t)}),b=0;b<w;++b)E=e[b],E.fx==null?E.x+=E.vx*=o:(E.x=E.fx,E.vx=0),E.fy==null?E.y+=E.vy*=o:(E.y=E.fy,E.vy=0);return n}function y(){for(var _=0,b=e.length,w;_<b;++_){if(w=e[_],w.index=_,w.fx!=null&&(w.x=w.fx),w.fy!=null&&(w.y=w.fy),isNaN(w.x)||isNaN(w.y)){var E=q1*Math.sqrt(.5+_),N=_*R1;w.x=E*Math.cos(N),w.y=E*Math.sin(N)}(isNaN(w.vx)||isNaN(w.vy))&&(w.vx=w.vy=0)}}function x(_){return _.initialize&&_.initialize(e,d),_}return y(),n={tick:m,restart:function(){return f.restart(p),n},stop:function(){return f.stop(),n},nodes:function(_){return arguments.length?(e=_,y(),a.forEach(x),n):e},alpha:function(_){return arguments.length?(t=+_,n):t},alphaMin:function(_){return arguments.length?(r=+_,n):r},alphaDecay:function(_){return arguments.length?(i=+_,n):+i},alphaTarget:function(_){return arguments.length?(s=+_,n):s},velocityDecay:function(_){return arguments.length?(o=1-_,n):1-o},randomSource:function(_){return arguments.length?(d=_,a.forEach(x),n):d},force:function(_,b){return arguments.length>1?(b==null?a.delete(_):a.set(_,x(b)),n):a.get(_)},find:function(_,b,w){var E=0,N=e.length,S,R,A,j,I;for(w==null?w=1/0:w*=w,E=0;E<N;++E)j=e[E],S=_-j.x,R=b-j.y,A=S*S+R*R,A<w&&(I=j,w=A);return I},on:function(_,b){return arguments.length>1?(c.on(_,b),n):c.on(_)}}}function A1(){var e,n,t,r,i=Be(-30),s,o=1,a=1/0,f=.81;function c(y){var x,_=e.length,b=Xt(e,M1,S1).visitAfter(p);for(r=y,x=0;x<_;++x)n=e[x],b.visit(m)}function d(){if(e){var y,x=e.length,_;for(s=new Array(x),y=0;y<x;++y)_=e[y],s[_.index]=+i(_,y,e)}}function p(y){var x=0,_,b,w=0,E,N,S;if(y.length){for(E=N=S=0;S<4;++S)(_=y[S])&&(b=Math.abs(_.value))&&(x+=_.value,w+=b,E+=b*_.x,N+=b*_.y);y.x=E/w,y.y=N/w}else{_=y,_.x=_.data.x,_.y=_.data.y;do x+=s[_.data.index];while(_=_.next)}y.value=x}function m(y,x,_,b){if(!y.value)return!0;var w=y.x-n.x,E=y.y-n.y,N=b-x,S=w*w+E*E;if(N*N/f<S)return S<a&&(w===0&&(w=Ot(t),S+=w*w),E===0&&(E=Ot(t),S+=E*E),S<o&&(S=Math.sqrt(o*S)),n.vx+=w*y.value*r/S,n.vy+=E*y.value*r/S),!0;if(y.length||S>=a)return;(y.data!==n||y.next)&&(w===0&&(w=Ot(t),S+=w*w),E===0&&(E=Ot(t),S+=E*E),S<o&&(S=Math.sqrt(o*S)));do y.data!==n&&(N=s[y.data.index]*r/S,n.vx+=w*N,n.vy+=E*N);while(y=y.next)}return c.initialize=function(y,x){e=y,t=x,d()},c.strength=function(y){return arguments.length?(i=typeof y=="function"?y:Be(+y),d(),c):i},c.distanceMin=function(y){return arguments.length?(o=y*y,c):Math.sqrt(o)},c.distanceMax=function(y){return arguments.length?(a=y*y,c):Math.sqrt(a)},c.theta=function(y){return arguments.length?(f=y*y,c):Math.sqrt(f)},c}function I1(e,n,t){var r,i=Be(.1),s,o;typeof e!="function"&&(e=Be(+e)),n==null&&(n=0),t==null&&(t=0);function a(c){for(var d=0,p=r.length;d<p;++d){var m=r[d],y=m.x-n||1e-6,x=m.y-t||1e-6,_=Math.sqrt(y*y+x*x),b=(o[d]-_)*s[d]*c/_;m.vx+=y*b,m.vy+=x*b}}function f(){if(r){var c,d=r.length;for(s=new Array(d),o=new Array(d),c=0;c<d;++c)o[c]=+e(r[c],c,r),s[c]=isNaN(o[c])?0:+i(r[c],c,r)}}return a.initialize=function(c){r=c,f()},a.strength=function(c){return arguments.length?(i=typeof c=="function"?c:Be(+c),f(),a):i},a.radius=function(c){return arguments.length?(e=typeof c=="function"?c:Be(+c),f(),a):e},a.x=function(c){return arguments.length?(n=+c,a):n},a.y=function(c){return arguments.length?(t=+c,a):t},a}function T1(e){var n=Be(.1),t,r,i;typeof e!="function"&&(e=Be(e==null?0:+e));function s(a){for(var f=0,c=t.length,d;f<c;++f)d=t[f],d.vx+=(i[f]-d.x)*r[f]*a}function o(){if(t){var a,f=t.length;for(r=new Array(f),i=new Array(f),a=0;a<f;++a)r[a]=isNaN(i[a]=+e(t[a],a,t))?0:+n(t[a],a,t)}}return s.initialize=function(a){t=a,o()},s.strength=function(a){return arguments.length?(n=typeof a=="function"?a:Be(+a),o(),s):n},s.x=function(a){return arguments.length?(e=typeof a=="function"?a:Be(+a),o(),s):e},s}function k1(e){var n=Be(.1),t,r,i;typeof e!="function"&&(e=Be(e==null?0:+e));function s(a){for(var f=0,c=t.length,d;f<c;++f)d=t[f],d.vy+=(i[f]-d.y)*r[f]*a}function o(){if(t){var a,f=t.length;for(r=new Array(f),i=new Array(f),a=0;a<f;++a)r[a]=isNaN(i[a]=+e(t[a],a,t))?0:+n(t[a],a,t)}}return s.initialize=function(a){t=a,o()},s.strength=function(a){return arguments.length?(n=typeof a=="function"?a:Be(+a),o(),s):n},s.y=function(a){return arguments.length?(e=typeof a=="function"?a:Be(+a),o(),s):e},s}class yv{constructor(n){this.id="d3-force",this.config={inputNodeAttrs:["x","y","vx","vy","fx","fy"],outputNodeAttrs:["x","y","vx","vy"],simulationAttrs:["alpha","alphaMin","alphaDecay","alphaTarget","velocityDecay","randomSource"]},this.forceMap={link:g1,manyBody:A1,center:f1,collide:l1,radial:I1,x:T1,y:k1},this.options={link:{id:t=>t.id},manyBody:{},center:{x:0,y:0}},this.context={options:{},assign:!1,nodes:[],edges:[]},jf(this.options,n),this.options.forceSimulation&&(this.simulation=this.options.forceSimulation)}execute(n,t){return ye(this,void 0,void 0,function*(){return this.genericLayout(!1,n,t)})}assign(n,t){return ye(this,void 0,void 0,function*(){yield this.genericLayout(!0,n,t)})}stop(){this.simulation.stop()}tick(n){return this.simulation.tick(n),this.getResult()}restart(){this.simulation.restart()}setFixedPosition(n,t){const r=this.context.nodes.find(i=>i.id===n);r&&t.forEach((i,s)=>{if(typeof i=="number"||i===null){const o=["fx","fy","fz"][s];r[o]=i}})}getOptions(n){var t,r;const i=jf({},this.options,n);return i.collide&&((t=i.collide)===null||t===void 0?void 0:t.radius)===void 0&&(i.collide=i.collide||{},i.collide.radius=(r=i.nodeSize)!==null&&r!==void 0?r:10),i.iterations===void 0&&(i.link&&i.link.iterations===void 0&&(i.iterations=i.link.iterations),i.collide&&i.collide.iterations===void 0&&(i.iterations=i.collide.iterations)),this.context.options=i,i}genericLayout(n,t,r){var i;return ye(this,void 0,void 0,function*(){const s=this.getOptions(r),o=t.getAllNodes().map(({id:d,data:p})=>Object.assign(Object.assign({id:d},p),Cf(p.data,this.config.inputNodeAttrs))),a=t.getAllEdges().map(d=>Object.assign({},d));Object.assign(this.context,{assign:n,nodes:o,edges:a,graph:t});const f=new Promise(d=>{this.resolver=d}),c=this.setSimulation(s);return c.nodes(o),(i=c.force("link"))===null||i===void 0||i.links(a),f})}getResult(){const{assign:n,nodes:t,edges:r,graph:i}=this.context,s=t.map(a=>({id:a.id,data:Object.assign(Object.assign({},a.data),Cf(a,this.config.outputNodeAttrs))})),o=r.map(({id:a,source:f,target:c,data:d})=>({id:a,source:typeof f=="object"?f.id:f,target:typeof c=="object"?c.id:c,data:d}));return n&&s.forEach(a=>i.mergeNodeData(a.id,a.data)),{nodes:s,edges:o}}initSimulation(){return O1()}setSimulation(n){const t=this.simulation||this.options.forceSimulation||this.initSimulation();return this.simulation||(this.simulation=t.on("tick",()=>{var r;return(r=n.onTick)===null||r===void 0?void 0:r.call(n,this.getResult())}).on("end",()=>{var r;return(r=this.resolver)===null||r===void 0?void 0:r.call(this,this.getResult())})),fc(t,this.config.simulationAttrs.map(r=>[r,n[r]])),Object.entries(this.forceMap).forEach(([r,i])=>{const s=r;if(n[r]){let o=t.force(s);o||(o=i(),t.force(s,o)),fc(o,Object.entries(n[s]))}else t.force(s,null)}),t}}const fc=(e,n)=>n.reduce((t,[r,i])=>!t[r]||i===void 0?t:t[r].call(e,i),e);function j1(e,n,t){var r,i=1;e==null&&(e=0),n==null&&(n=0),t==null&&(t=0);function s(){var o,a=r.length,f,c=0,d=0,p=0;for(o=0;o<a;++o)f=r[o],c+=f.x||0,d+=f.y||0,p+=f.z||0;for(c=(c/a-e)*i,d=(d/a-n)*i,p=(p/a-t)*i,o=0;o<a;++o)f=r[o],c&&(f.x-=c),d&&(f.y-=d),p&&(f.z-=p)}return s.initialize=function(o){r=o},s.x=function(o){return arguments.length?(e=+o,s):e},s.y=function(o){return arguments.length?(n=+o,s):n},s.z=function(o){return arguments.length?(t=+o,s):t},s.strength=function(o){return arguments.length?(i=+o,s):i},s}function C1(e){const n=+this._x.call(null,e);return wv(this.cover(n),n,e)}function wv(e,n,t){if(isNaN(n))return e;var r,i=e._root,s={data:t},o=e._x0,a=e._x1,f,c,d,p,m;if(!i)return e._root=s,e;for(;i.length;)if((d=n>=(f=(o+a)/2))?o=f:a=f,r=i,!(i=i[p=+d]))return r[p]=s,e;if(c=+e._x.call(null,i.data),n===c)return s.next=i,r?r[p]=s:e._root=s,e;do r=r?r[p]=new Array(2):e._root=new Array(2),(d=n>=(f=(o+a)/2))?o=f:a=f;while((p=+d)==(m=+(c>=f)));return r[m]=i,r[p]=s,e}function P1(e){Array.isArray(e)||(e=Array.from(e));const n=e.length,t=new Float64Array(n);let r=1/0,i=-1/0;for(let s=0,o;s<n;++s)isNaN(o=+this._x.call(null,e[s]))||(t[s]=o,o<r&&(r=o),o>i&&(i=o));if(r>i)return this;this.cover(r).cover(i);for(let s=0;s<n;++s)wv(this,t[s],e[s]);return this}function L1(e){if(isNaN(e=+e))return this;var n=this._x0,t=this._x1;if(isNaN(n))t=(n=Math.floor(e))+1;else{for(var r=t-n||1,i=this._root,s,o;n>e||e>=t;)switch(o=+(e<n),s=new Array(2),s[o]=i,i=s,r*=2,o){case 0:t=n+r;break;case 1:n=t-r;break}this._root&&this._root.length&&(this._root=i)}return this._x0=n,this._x1=t,this}function D1(){var e=[];return this.visit(function(n){if(!n.length)do e.push(n.data);while(n=n.next)}),e}function z1(e){return arguments.length?this.cover(+e[0][0]).cover(+e[1][0]):isNaN(this._x0)?void 0:[[this._x0],[this._x1]]}function Nt(e,n,t){this.node=e,this.x0=n,this.x1=t}function F1(e,n){var t,r=this._x0,i,s,o=this._x1,a=[],f=this._root,c,d;for(f&&a.push(new Nt(f,r,o)),n==null?n=1/0:(r=e-n,o=e+n);c=a.pop();)if(!(!(f=c.node)||(i=c.x0)>o||(s=c.x1)<r))if(f.length){var p=(i+s)/2;a.push(new Nt(f[1],p,s),new Nt(f[0],i,p)),(d=+(e>=p))&&(c=a[a.length-1],a[a.length-1]=a[a.length-1-d],a[a.length-1-d]=c)}else{var m=Math.abs(e-+this._x.call(null,f.data));m<n&&(n=m,r=e-m,o=e+m,t=f.data)}return t}function B1(e){if(isNaN(f=+this._x.call(null,e)))return this;var n,t=this._root,r,i,s,o=this._x0,a=this._x1,f,c,d,p,m;if(!t)return this;if(t.length)for(;;){if((d=f>=(c=(o+a)/2))?o=c:a=c,n=t,!(t=t[p=+d]))return this;if(!t.length)break;n[p+1&1]&&(r=n,m=p)}for(;t.data!==e;)if(i=t,!(t=t.next))return this;return(s=t.next)&&delete t.next,i?(s?i.next=s:delete i.next,this):n?(s?n[p]=s:delete n[p],(t=n[0]||n[1])&&t===(n[1]||n[0])&&!t.length&&(r?r[m]=t:this._root=t),this):(this._root=s,this)}function $1(e){for(var n=0,t=e.length;n<t;++n)this.remove(e[n]);return this}function G1(){return this._root}function U1(){var e=0;return this.visit(function(n){if(!n.length)do++e;while(n=n.next)}),e}function V1(e){var n=[],t,r=this._root,i,s,o;for(r&&n.push(new Nt(r,this._x0,this._x1));t=n.pop();)if(!e(r=t.node,s=t.x0,o=t.x1)&&r.length){var a=(s+o)/2;(i=r[1])&&n.push(new Nt(i,a,o)),(i=r[0])&&n.push(new Nt(i,s,a))}return this}function W1(e){var n=[],t=[],r;for(this._root&&n.push(new Nt(this._root,this._x0,this._x1));r=n.pop();){var i=r.node;if(i.length){var s,o=r.x0,a=r.x1,f=(o+a)/2;(s=i[0])&&n.push(new Nt(s,o,f)),(s=i[1])&&n.push(new Nt(s,f,a))}t.push(r)}for(;r=t.pop();)e(r.node,r.x0,r.x1);return this}function Y1(e){return e[0]}function K1(e){return arguments.length?(this._x=e,this):this._x}function uf(e,n){var t=new ff(n??Y1,NaN,NaN);return e==null?t:t.addAll(e)}function ff(e,n,t){this._x=e,this._x0=n,this._x1=t,this._root=void 0}function cc(e){for(var n={data:e.data},t=n;e=e.next;)t=t.next={data:e.data};return n}var tt=uf.prototype=ff.prototype;tt.copy=function(){var e=new ff(this._x,this._x0,this._x1),n=this._root,t,r;if(!n)return e;if(!n.length)return e._root=cc(n),e;for(t=[{source:n,target:e._root=new Array(2)}];n=t.pop();)for(var i=0;i<2;++i)(r=n.source[i])&&(r.length?t.push({source:r,target:n.target[i]=new Array(2)}):n.target[i]=cc(r));return e};tt.add=C1;tt.addAll=P1;tt.cover=L1;tt.data=D1;tt.extent=z1;tt.find=F1;tt.remove=B1;tt.removeAll=$1;tt.root=G1;tt.size=U1;tt.visit=V1;tt.visitAfter=W1;tt.x=K1;function Pe(e){return function(){return e}}function st(e){return(e()-.5)*1e-6}function _r(e){return e.x+e.vx}function dc(e){return e.y+e.vy}function X1(e){return e.z+e.vz}function Z1(e){var n,t,r,i,s=1,o=1;typeof e!="function"&&(e=Pe(e==null?1:+e));function a(){for(var d,p=n.length,m,y,x,_,b,w,E,N=0;N<o;++N)for(m=(t===1?uf(n,_r):t===2?Xt(n,_r,dc):t===3?Bn(n,_r,dc,X1):null).visitAfter(f),d=0;d<p;++d)y=n[d],w=r[y.index],E=w*w,x=y.x+y.vx,t>1&&(_=y.y+y.vy),t>2&&(b=y.z+y.vz),m.visit(S);function S(R,A,j,I,D,z,$){var V=[A,j,I,D,z,$],Y=V[0],ee=V[1],J=V[2],oe=V[t],be=V[t+1],Z=V[t+2],ue=R.data,ge=R.r,de=w+ge;if(ue){if(ue.index>y.index){var ie=x-ue.x-ue.vx,_e=t>1?_-ue.y-ue.vy:0,G=t>2?b-ue.z-ue.vz:0,P=ie*ie+_e*_e+G*G;P<de*de&&(ie===0&&(ie=st(i),P+=ie*ie),t>1&&_e===0&&(_e=st(i),P+=_e*_e),t>2&&G===0&&(G=st(i),P+=G*G),P=(de-(P=Math.sqrt(P)))/P*s,y.vx+=(ie*=P)*(de=(ge*=ge)/(E+ge)),t>1&&(y.vy+=(_e*=P)*de),t>2&&(y.vz+=(G*=P)*de),ue.vx-=ie*(de=1-de),t>1&&(ue.vy-=_e*de),t>2&&(ue.vz-=G*de))}return}return Y>x+de||oe<x-de||t>1&&(ee>_+de||be<_-de)||t>2&&(J>b+de||Z<b-de)}}function f(d){if(d.data)return d.r=r[d.data.index];for(var p=d.r=0;p<Math.pow(2,t);++p)d[p]&&d[p].r>d.r&&(d.r=d[p].r)}function c(){if(n){var d,p=n.length,m;for(r=new Array(p),d=0;d<p;++d)m=n[d],r[m.index]=+e(m,d,n)}}return a.initialize=function(d,...p){n=d,i=p.find(m=>typeof m=="function")||Math.random,t=p.find(m=>[1,2,3].includes(m))||2,c()},a.iterations=function(d){return arguments.length?(o=+d,a):o},a.strength=function(d){return arguments.length?(s=+d,a):s},a.radius=function(d){return arguments.length?(e=typeof d=="function"?d:Pe(+d),c(),a):e},a}function J1(e){return e.index}function lc(e,n){var t=e.get(n);if(!t)throw new Error("node not found: "+n);return t}function Q1(e){var n=J1,t=m,r,i=Pe(30),s,o,a,f,c,d,p=1;e==null&&(e=[]);function m(w){return 1/Math.min(f[w.source.index],f[w.target.index])}function y(w){for(var E=0,N=e.length;E<p;++E)for(var S=0,R,A,j,I=0,D=0,z=0,$,V;S<N;++S)R=e[S],A=R.source,j=R.target,I=j.x+j.vx-A.x-A.vx||st(d),a>1&&(D=j.y+j.vy-A.y-A.vy||st(d)),a>2&&(z=j.z+j.vz-A.z-A.vz||st(d)),$=Math.sqrt(I*I+D*D+z*z),$=($-s[S])/$*w*r[S],I*=$,D*=$,z*=$,j.vx-=I*(V=c[S]),a>1&&(j.vy-=D*V),a>2&&(j.vz-=z*V),A.vx+=I*(V=1-V),a>1&&(A.vy+=D*V),a>2&&(A.vz+=z*V)}function x(){if(o){var w,E=o.length,N=e.length,S=new Map(o.map((A,j)=>[n(A,j,o),A])),R;for(w=0,f=new Array(E);w<N;++w)R=e[w],R.index=w,typeof R.source!="object"&&(R.source=lc(S,R.source)),typeof R.target!="object"&&(R.target=lc(S,R.target)),f[R.source.index]=(f[R.source.index]||0)+1,f[R.target.index]=(f[R.target.index]||0)+1;for(w=0,c=new Array(N);w<N;++w)R=e[w],c[w]=f[R.source.index]/(f[R.source.index]+f[R.target.index]);r=new Array(N),_(),s=new Array(N),b()}}function _(){if(o)for(var w=0,E=e.length;w<E;++w)r[w]=+t(e[w],w,e)}function b(){if(o)for(var w=0,E=e.length;w<E;++w)s[w]=+i(e[w],w,e)}return y.initialize=function(w,...E){o=w,d=E.find(N=>typeof N=="function")||Math.random,a=E.find(N=>[1,2,3].includes(N))||2,x()},y.links=function(w){return arguments.length?(e=w,x(),y):e},y.id=function(w){return arguments.length?(n=w,y):n},y.iterations=function(w){return arguments.length?(p=+w,y):p},y.strength=function(w){return arguments.length?(t=typeof w=="function"?w:Pe(+w),_(),y):t},y.distance=function(w){return arguments.length?(i=typeof w=="function"?w:Pe(+w),b(),y):i},y}const H1=1664525,eb=1013904223,hc=4294967296;function tb(){let e=1;return()=>(e=(H1*e+eb)%hc)/hc}var gc=3;function Er(e){return e.x}function pc(e){return e.y}function nb(e){return e.z}var rb=10,ib=Math.PI*(3-Math.sqrt(5)),sb=Math.PI*20/(9+Math.sqrt(221));function ab(e,n){n=n||2;var t=Math.min(gc,Math.max(1,Math.round(n))),r,i=1,s=.001,o=1-Math.pow(s,1/300),a=0,f=.6,c=new Map,d=of(y),p=af("tick","end"),m=tb();e==null&&(e=[]);function y(){x(),p.call("tick",r),i<s&&(d.stop(),p.call("end",r))}function x(w){var E,N=e.length,S;w===void 0&&(w=1);for(var R=0;R<w;++R)for(i+=(a-i)*o,c.forEach(function(A){A(i)}),E=0;E<N;++E)S=e[E],S.fx==null?S.x+=S.vx*=f:(S.x=S.fx,S.vx=0),t>1&&(S.fy==null?S.y+=S.vy*=f:(S.y=S.fy,S.vy=0)),t>2&&(S.fz==null?S.z+=S.vz*=f:(S.z=S.fz,S.vz=0));return r}function _(){for(var w=0,E=e.length,N;w<E;++w){if(N=e[w],N.index=w,N.fx!=null&&(N.x=N.fx),N.fy!=null&&(N.y=N.fy),N.fz!=null&&(N.z=N.fz),isNaN(N.x)||t>1&&isNaN(N.y)||t>2&&isNaN(N.z)){var S=rb*(t>2?Math.cbrt(.5+w):t>1?Math.sqrt(.5+w):w),R=w*ib,A=w*sb;t===1?N.x=S:t===2?(N.x=S*Math.cos(R),N.y=S*Math.sin(R)):(N.x=S*Math.sin(R)*Math.cos(A),N.y=S*Math.cos(R),N.z=S*Math.sin(R)*Math.sin(A))}(isNaN(N.vx)||t>1&&isNaN(N.vy)||t>2&&isNaN(N.vz))&&(N.vx=0,t>1&&(N.vy=0),t>2&&(N.vz=0))}}function b(w){return w.initialize&&w.initialize(e,m,t),w}return _(),r={tick:x,restart:function(){return d.restart(y),r},stop:function(){return d.stop(),r},numDimensions:function(w){return arguments.length?(t=Math.min(gc,Math.max(1,Math.round(w))),c.forEach(b),r):t},nodes:function(w){return arguments.length?(e=w,_(),c.forEach(b),r):e},alpha:function(w){return arguments.length?(i=+w,r):i},alphaMin:function(w){return arguments.length?(s=+w,r):s},alphaDecay:function(w){return arguments.length?(o=+w,r):+o},alphaTarget:function(w){return arguments.length?(a=+w,r):a},velocityDecay:function(w){return arguments.length?(f=1-w,r):1-f},randomSource:function(w){return arguments.length?(m=w,c.forEach(b),r):m},force:function(w,E){return arguments.length>1?(E==null?c.delete(w):c.set(w,b(E)),r):c.get(w)},find:function(){var w=Array.prototype.slice.call(arguments),E=w.shift()||0,N=(t>1?w.shift():null)||0,S=(t>2?w.shift():null)||0,R=w.shift()||1/0,A=0,j=e.length,I,D,z,$,V,Y;for(R*=R,A=0;A<j;++A)V=e[A],I=E-V.x,D=N-(V.y||0),z=S-(V.z||0),$=I*I+D*D+z*z,$<R&&(Y=V,R=$);return Y},on:function(w,E){return arguments.length>1?(p.on(w,E),r):p.on(w)}}}function ob(){var e,n,t,r,i,s=Pe(-30),o,a=1,f=1/0,c=.81;function d(x){var _,b=e.length,w=(n===1?uf(e,Er):n===2?Xt(e,Er,pc):n===3?Bn(e,Er,pc,nb):null).visitAfter(m);for(i=x,_=0;_<b;++_)t=e[_],w.visit(y)}function p(){if(e){var x,_=e.length,b;for(o=new Array(_),x=0;x<_;++x)b=e[x],o[b.index]=+s(b,x,e)}}function m(x){var _=0,b,w,E=0,N,S,R,A,j=x.length;if(j){for(N=S=R=A=0;A<j;++A)(b=x[A])&&(w=Math.abs(b.value))&&(_+=b.value,E+=w,N+=w*(b.x||0),S+=w*(b.y||0),R+=w*(b.z||0));_*=Math.sqrt(4/j),x.x=N/E,n>1&&(x.y=S/E),n>2&&(x.z=R/E)}else{b=x,b.x=b.data.x,n>1&&(b.y=b.data.y),n>2&&(b.z=b.data.z);do _+=o[b.data.index];while(b=b.next)}x.value=_}function y(x,_,b,w,E){if(!x.value)return!0;var N=[b,w,E][n-1],S=x.x-t.x,R=n>1?x.y-t.y:0,A=n>2?x.z-t.z:0,j=N-_,I=S*S+R*R+A*A;if(j*j/c<I)return I<f&&(S===0&&(S=st(r),I+=S*S),n>1&&R===0&&(R=st(r),I+=R*R),n>2&&A===0&&(A=st(r),I+=A*A),I<a&&(I=Math.sqrt(a*I)),t.vx+=S*x.value*i/I,n>1&&(t.vy+=R*x.value*i/I),n>2&&(t.vz+=A*x.value*i/I)),!0;if(x.length||I>=f)return;(x.data!==t||x.next)&&(S===0&&(S=st(r),I+=S*S),n>1&&R===0&&(R=st(r),I+=R*R),n>2&&A===0&&(A=st(r),I+=A*A),I<a&&(I=Math.sqrt(a*I)));do x.data!==t&&(j=o[x.data.index]*i/I,t.vx+=S*j,n>1&&(t.vy+=R*j),n>2&&(t.vz+=A*j));while(x=x.next)}return d.initialize=function(x,..._){e=x,r=_.find(b=>typeof b=="function")||Math.random,n=_.find(b=>[1,2,3].includes(b))||2,p()},d.strength=function(x){return arguments.length?(s=typeof x=="function"?x:Pe(+x),p(),d):s},d.distanceMin=function(x){return arguments.length?(a=x*x,d):Math.sqrt(a)},d.distanceMax=function(x){return arguments.length?(f=x*x,d):Math.sqrt(f)},d.theta=function(x){return arguments.length?(c=x*x,d):Math.sqrt(c)},d}function ub(e,n,t,r){var i,s,o=Pe(.1),a,f;typeof e!="function"&&(e=Pe(+e)),n==null&&(n=0),t==null&&(t=0),r==null&&(r=0);function c(p){for(var m=0,y=i.length;m<y;++m){var x=i[m],_=x.x-n||1e-6,b=(x.y||0)-t||1e-6,w=(x.z||0)-r||1e-6,E=Math.sqrt(_*_+b*b+w*w),N=(f[m]-E)*a[m]*p/E;x.vx+=_*N,s>1&&(x.vy+=b*N),s>2&&(x.vz+=w*N)}}function d(){if(i){var p,m=i.length;for(a=new Array(m),f=new Array(m),p=0;p<m;++p)f[p]=+e(i[p],p,i),a[p]=isNaN(f[p])?0:+o(i[p],p,i)}}return c.initialize=function(p,...m){i=p,s=m.find(y=>[1,2,3].includes(y))||2,d()},c.strength=function(p){return arguments.length?(o=typeof p=="function"?p:Pe(+p),d(),c):o},c.radius=function(p){return arguments.length?(e=typeof p=="function"?p:Pe(+p),d(),c):e},c.x=function(p){return arguments.length?(n=+p,c):n},c.y=function(p){return arguments.length?(t=+p,c):t},c.z=function(p){return arguments.length?(r=+p,c):r},c}function fb(e){var n=Pe(.1),t,r,i;typeof e!="function"&&(e=Pe(e==null?0:+e));function s(a){for(var f=0,c=t.length,d;f<c;++f)d=t[f],d.vx+=(i[f]-d.x)*r[f]*a}function o(){if(t){var a,f=t.length;for(r=new Array(f),i=new Array(f),a=0;a<f;++a)r[a]=isNaN(i[a]=+e(t[a],a,t))?0:+n(t[a],a,t)}}return s.initialize=function(a){t=a,o()},s.strength=function(a){return arguments.length?(n=typeof a=="function"?a:Pe(+a),o(),s):n},s.x=function(a){return arguments.length?(e=typeof a=="function"?a:Pe(+a),o(),s):e},s}function cb(e){var n=Pe(.1),t,r,i;typeof e!="function"&&(e=Pe(e==null?0:+e));function s(a){for(var f=0,c=t.length,d;f<c;++f)d=t[f],d.vy+=(i[f]-d.y)*r[f]*a}function o(){if(t){var a,f=t.length;for(r=new Array(f),i=new Array(f),a=0;a<f;++a)r[a]=isNaN(i[a]=+e(t[a],a,t))?0:+n(t[a],a,t)}}return s.initialize=function(a){t=a,o()},s.strength=function(a){return arguments.length?(n=typeof a=="function"?a:Pe(+a),o(),s):n},s.y=function(a){return arguments.length?(e=typeof a=="function"?a:Pe(+a),o(),s):e},s}function db(e){var n=Pe(.1),t,r,i;typeof e!="function"&&(e=Pe(e==null?0:+e));function s(a){for(var f=0,c=t.length,d;f<c;++f)d=t[f],d.vz+=(i[f]-d.z)*r[f]*a}function o(){if(t){var a,f=t.length;for(r=new Array(f),i=new Array(f),a=0;a<f;++a)r[a]=isNaN(i[a]=+e(t[a],a,t))?0:+n(t[a],a,t)}}return s.initialize=function(a){t=a,o()},s.strength=function(a){return arguments.length?(n=typeof a=="function"?a:Pe(+a),o(),s):n},s.z=function(a){return arguments.length?(e=typeof a=="function"?a:Pe(+a),o(),s):e},s}class lb extends yv{constructor(){super(...arguments),this.id="d3-force-3d",this.config={inputNodeAttrs:["x","y","z","vx","vy","vz","fx","fy","fz"],outputNodeAttrs:["x","y","z","vx","vy","vz"],simulationAttrs:["alpha","alphaMin","alphaDecay","alphaTarget","velocityDecay","randomSource","numDimensions"]},this.forceMap={link:Q1,manyBody:ob,center:j1,collide:Z1,radial:ub,x:fb,y:cb,z:db},this.options={numDimensions:3,link:{id:n=>n.id},manyBody:{},center:{x:0,y:0,z:0}}}initSimulation(){return ab()}}function cf(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var xr,vc;function hb(){if(vc)return xr;vc=1;function e(){this.__data__=[],this.size=0}return xr=e,xr}var Nr,mc;function Zt(){if(mc)return Nr;mc=1;function e(n,t){return n===t||n!==n&&t!==t}return Nr=e,Nr}var Mr,yc;function Un(){if(yc)return Mr;yc=1;var e=Zt();function n(t,r){for(var i=t.length;i--;)if(e(t[i][0],r))return i;return-1}return Mr=n,Mr}var Sr,wc;function gb(){if(wc)return Sr;wc=1;var e=Un(),n=Array.prototype,t=n.splice;function r(i){var s=this.__data__,o=e(s,i);if(o<0)return!1;var a=s.length-1;return o==a?s.pop():t.call(s,o,1),--this.size,!0}return Sr=r,Sr}var qr,bc;function pb(){if(bc)return qr;bc=1;var e=Un();function n(t){var r=this.__data__,i=e(r,t);return i<0?void 0:r[i][1]}return qr=n,qr}var Rr,_c;function vb(){if(_c)return Rr;_c=1;var e=Un();function n(t){return e(this.__data__,t)>-1}return Rr=n,Rr}var Or,Ec;function mb(){if(Ec)return Or;Ec=1;var e=Un();function n(t,r){var i=this.__data__,s=e(i,t);return s<0?(++this.size,i.push([t,r])):i[s][1]=r,this}return Or=n,Or}var Ar,xc;function Vn(){if(xc)return Ar;xc=1;var e=hb(),n=gb(),t=pb(),r=vb(),i=mb();function s(o){var a=-1,f=o==null?0:o.length;for(this.clear();++a<f;){var c=o[a];this.set(c[0],c[1])}}return s.prototype.clear=e,s.prototype.delete=n,s.prototype.get=t,s.prototype.has=r,s.prototype.set=i,Ar=s,Ar}var Ir,Nc;function yb(){if(Nc)return Ir;Nc=1;var e=Vn();function n(){this.__data__=new e,this.size=0}return Ir=n,Ir}var Tr,Mc;function wb(){if(Mc)return Tr;Mc=1;function e(n){var t=this.__data__,r=t.delete(n);return this.size=t.size,r}return Tr=e,Tr}var kr,Sc;function bb(){if(Sc)return kr;Sc=1;function e(n){return this.__data__.get(n)}return kr=e,kr}var jr,qc;function _b(){if(qc)return jr;qc=1;function e(n){return this.__data__.has(n)}return jr=e,jr}var Cr,Rc;function bv(){if(Rc)return Cr;Rc=1;var e=typeof Rn=="object"&&Rn&&Rn.Object===Object&&Rn;return Cr=e,Cr}var Pr,Oc;function lt(){if(Oc)return Pr;Oc=1;var e=bv(),n=typeof self=="object"&&self&&self.Object===Object&&self,t=e||n||Function("return this")();return Pr=t,Pr}var Lr,Ac;function Jt(){if(Ac)return Lr;Ac=1;var e=lt(),n=e.Symbol;return Lr=n,Lr}var Dr,Ic;function Eb(){if(Ic)return Dr;Ic=1;var e=Jt(),n=Object.prototype,t=n.hasOwnProperty,r=n.toString,i=e?e.toStringTag:void 0;function s(o){var a=t.call(o,i),f=o[i];try{o[i]=void 0;var c=!0}catch{}var d=r.call(o);return c&&(a?o[i]=f:delete o[i]),d}return Dr=s,Dr}var zr,Tc;function xb(){if(Tc)return zr;Tc=1;var e=Object.prototype,n=e.toString;function t(r){return n.call(r)}return zr=t,zr}var Fr,kc;function Lt(){if(kc)return Fr;kc=1;var e=Jt(),n=Eb(),t=xb(),r="[object Null]",i="[object Undefined]",s=e?e.toStringTag:void 0;function o(a){return a==null?a===void 0?i:r:s&&s in Object(a)?n(a):t(a)}return Fr=o,Fr}var Br,jc;function at(){if(jc)return Br;jc=1;function e(n){var t=typeof n;return n!=null&&(t=="object"||t=="function")}return Br=e,Br}var $r,Cc;function gn(){if(Cc)return $r;Cc=1;var e=Lt(),n=at(),t="[object AsyncFunction]",r="[object Function]",i="[object GeneratorFunction]",s="[object Proxy]";function o(a){if(!n(a))return!1;var f=e(a);return f==r||f==i||f==t||f==s}return $r=o,$r}var Gr,Pc;function Nb(){if(Pc)return Gr;Pc=1;var e=lt(),n=e["__core-js_shared__"];return Gr=n,Gr}var Ur,Lc;function Mb(){if(Lc)return Ur;Lc=1;var e=Nb(),n=function(){var r=/[^.]+$/.exec(e&&e.keys&&e.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""}();function t(r){return!!n&&n in r}return Ur=t,Ur}var Vr,Dc;function _v(){if(Dc)return Vr;Dc=1;var e=Function.prototype,n=e.toString;function t(r){if(r!=null){try{return n.call(r)}catch{}try{return r+""}catch{}}return""}return Vr=t,Vr}var Wr,zc;function Sb(){if(zc)return Wr;zc=1;var e=gn(),n=Mb(),t=at(),r=_v(),i=/[\\^$.*+?()[\]{}|]/g,s=/^\[object .+?Constructor\]$/,o=Function.prototype,a=Object.prototype,f=o.toString,c=a.hasOwnProperty,d=RegExp("^"+f.call(c).replace(i,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function p(m){if(!t(m)||n(m))return!1;var y=e(m)?d:s;return y.test(r(m))}return Wr=p,Wr}var Yr,Fc;function qb(){if(Fc)return Yr;Fc=1;function e(n,t){return n==null?void 0:n[t]}return Yr=e,Yr}var Kr,Bc;function Dt(){if(Bc)return Kr;Bc=1;var e=Sb(),n=qb();function t(r,i){var s=n(r,i);return e(s)?s:void 0}return Kr=t,Kr}var Xr,$c;function df(){if($c)return Xr;$c=1;var e=Dt(),n=lt(),t=e(n,"Map");return Xr=t,Xr}var Zr,Gc;function Wn(){if(Gc)return Zr;Gc=1;var e=Dt(),n=e(Object,"create");return Zr=n,Zr}var Jr,Uc;function Rb(){if(Uc)return Jr;Uc=1;var e=Wn();function n(){this.__data__=e?e(null):{},this.size=0}return Jr=n,Jr}var Qr,Vc;function Ob(){if(Vc)return Qr;Vc=1;function e(n){var t=this.has(n)&&delete this.__data__[n];return this.size-=t?1:0,t}return Qr=e,Qr}var Hr,Wc;function Ab(){if(Wc)return Hr;Wc=1;var e=Wn(),n="__lodash_hash_undefined__",t=Object.prototype,r=t.hasOwnProperty;function i(s){var o=this.__data__;if(e){var a=o[s];return a===n?void 0:a}return r.call(o,s)?o[s]:void 0}return Hr=i,Hr}var ei,Yc;function Ib(){if(Yc)return ei;Yc=1;var e=Wn(),n=Object.prototype,t=n.hasOwnProperty;function r(i){var s=this.__data__;return e?s[i]!==void 0:t.call(s,i)}return ei=r,ei}var ti,Kc;function Tb(){if(Kc)return ti;Kc=1;var e=Wn(),n="__lodash_hash_undefined__";function t(r,i){var s=this.__data__;return this.size+=this.has(r)?0:1,s[r]=e&&i===void 0?n:i,this}return ti=t,ti}var ni,Xc;function kb(){if(Xc)return ni;Xc=1;var e=Rb(),n=Ob(),t=Ab(),r=Ib(),i=Tb();function s(o){var a=-1,f=o==null?0:o.length;for(this.clear();++a<f;){var c=o[a];this.set(c[0],c[1])}}return s.prototype.clear=e,s.prototype.delete=n,s.prototype.get=t,s.prototype.has=r,s.prototype.set=i,ni=s,ni}var ri,Zc;function jb(){if(Zc)return ri;Zc=1;var e=kb(),n=Vn(),t=df();function r(){this.size=0,this.__data__={hash:new e,map:new(t||n),string:new e}}return ri=r,ri}var ii,Jc;function Cb(){if(Jc)return ii;Jc=1;function e(n){var t=typeof n;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?n!=="__proto__":n===null}return ii=e,ii}var si,Qc;function Yn(){if(Qc)return si;Qc=1;var e=Cb();function n(t,r){var i=t.__data__;return e(r)?i[typeof r=="string"?"string":"hash"]:i.map}return si=n,si}var ai,Hc;function Pb(){if(Hc)return ai;Hc=1;var e=Yn();function n(t){var r=e(this,t).delete(t);return this.size-=r?1:0,r}return ai=n,ai}var oi,ed;function Lb(){if(ed)return oi;ed=1;var e=Yn();function n(t){return e(this,t).get(t)}return oi=n,oi}var ui,td;function Db(){if(td)return ui;td=1;var e=Yn();function n(t){return e(this,t).has(t)}return ui=n,ui}var fi,nd;function zb(){if(nd)return fi;nd=1;var e=Yn();function n(t,r){var i=e(this,t),s=i.size;return i.set(t,r),this.size+=i.size==s?0:1,this}return fi=n,fi}var ci,rd;function lf(){if(rd)return ci;rd=1;var e=jb(),n=Pb(),t=Lb(),r=Db(),i=zb();function s(o){var a=-1,f=o==null?0:o.length;for(this.clear();++a<f;){var c=o[a];this.set(c[0],c[1])}}return s.prototype.clear=e,s.prototype.delete=n,s.prototype.get=t,s.prototype.has=r,s.prototype.set=i,ci=s,ci}var di,id;function Fb(){if(id)return di;id=1;var e=Vn(),n=df(),t=lf(),r=200;function i(s,o){var a=this.__data__;if(a instanceof e){var f=a.__data__;if(!n||f.length<r-1)return f.push([s,o]),this.size=++a.size,this;a=this.__data__=new t(f)}return a.set(s,o),this.size=a.size,this}return di=i,di}var li,sd;function Kn(){if(sd)return li;sd=1;var e=Vn(),n=yb(),t=wb(),r=bb(),i=_b(),s=Fb();function o(a){var f=this.__data__=new e(a);this.size=f.size}return o.prototype.clear=n,o.prototype.delete=t,o.prototype.get=r,o.prototype.has=i,o.prototype.set=s,li=o,li}var hi,ad;function hf(){if(ad)return hi;ad=1;function e(n,t){for(var r=-1,i=n==null?0:n.length;++r<i&&t(n[r],r,n)!==!1;);return n}return hi=e,hi}var gi,od;function Ev(){if(od)return gi;od=1;var e=Dt(),n=function(){try{var t=e(Object,"defineProperty");return t({},"",{}),t}catch{}}();return gi=n,gi}var pi,ud;function Xn(){if(ud)return pi;ud=1;var e=Ev();function n(t,r,i){r=="__proto__"&&e?e(t,r,{configurable:!0,enumerable:!0,value:i,writable:!0}):t[r]=i}return pi=n,pi}var vi,fd;function Zn(){if(fd)return vi;fd=1;var e=Xn(),n=Zt(),t=Object.prototype,r=t.hasOwnProperty;function i(s,o,a){var f=s[o];(!(r.call(s,o)&&n(f,a))||a===void 0&&!(o in s))&&e(s,o,a)}return vi=i,vi}var mi,cd;function pn(){if(cd)return mi;cd=1;var e=Zn(),n=Xn();function t(r,i,s,o){var a=!s;s||(s={});for(var f=-1,c=i.length;++f<c;){var d=i[f],p=o?o(s[d],r[d],d,s,r):void 0;p===void 0&&(p=r[d]),a?n(s,d,p):e(s,d,p)}return s}return mi=t,mi}var yi,dd;function Bb(){if(dd)return yi;dd=1;function e(n,t){for(var r=-1,i=Array(n);++r<n;)i[r]=t(r);return i}return yi=e,yi}var wi,ld;function vt(){if(ld)return wi;ld=1;function e(n){return n!=null&&typeof n=="object"}return wi=e,wi}var bi,hd;function $b(){if(hd)return bi;hd=1;var e=Lt(),n=vt(),t="[object Arguments]";function r(i){return n(i)&&e(i)==t}return bi=r,bi}var _i,gd;function vn(){if(gd)return _i;gd=1;var e=$b(),n=vt(),t=Object.prototype,r=t.hasOwnProperty,i=t.propertyIsEnumerable,s=e(function(){return arguments}())?e:function(o){return n(o)&&r.call(o,"callee")&&!i.call(o,"callee")};return _i=s,_i}var Ei,pd;function De(){if(pd)return Ei;pd=1;var e=Array.isArray;return Ei=e,Ei}var an={exports:{}},xi,vd;function Gb(){if(vd)return xi;vd=1;function e(){return!1}return xi=e,xi}an.exports;var md;function Qt(){return md||(md=1,function(e,n){var t=lt(),r=Gb(),i=n&&!n.nodeType&&n,s=i&&!0&&e&&!e.nodeType&&e,o=s&&s.exports===i,a=o?t.Buffer:void 0,f=a?a.isBuffer:void 0,c=f||r;e.exports=c}(an,an.exports)),an.exports}var Ni,yd;function Jn(){if(yd)return Ni;yd=1;var e=9007199254740991,n=/^(?:0|[1-9]\d*)$/;function t(r,i){var s=typeof r;return i=i??e,!!i&&(s=="number"||s!="symbol"&&n.test(r))&&r>-1&&r%1==0&&r<i}return Ni=t,Ni}var Mi,wd;function gf(){if(wd)return Mi;wd=1;var e=9007199254740991;function n(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=e}return Mi=n,Mi}var Si,bd;function Ub(){if(bd)return Si;bd=1;var e=Lt(),n=gf(),t=vt(),r="[object Arguments]",i="[object Array]",s="[object Boolean]",o="[object Date]",a="[object Error]",f="[object Function]",c="[object Map]",d="[object Number]",p="[object Object]",m="[object RegExp]",y="[object Set]",x="[object String]",_="[object WeakMap]",b="[object ArrayBuffer]",w="[object DataView]",E="[object Float32Array]",N="[object Float64Array]",S="[object Int8Array]",R="[object Int16Array]",A="[object Int32Array]",j="[object Uint8Array]",I="[object Uint8ClampedArray]",D="[object Uint16Array]",z="[object Uint32Array]",$={};$[E]=$[N]=$[S]=$[R]=$[A]=$[j]=$[I]=$[D]=$[z]=!0,$[r]=$[i]=$[b]=$[s]=$[w]=$[o]=$[a]=$[f]=$[c]=$[d]=$[p]=$[m]=$[y]=$[x]=$[_]=!1;function V(Y){return t(Y)&&n(Y.length)&&!!$[e(Y)]}return Si=V,Si}var qi,_d;function Qn(){if(_d)return qi;_d=1;function e(n){return function(t){return n(t)}}return qi=e,qi}var on={exports:{}};on.exports;var Ed;function pf(){return Ed||(Ed=1,function(e,n){var t=bv(),r=n&&!n.nodeType&&n,i=r&&!0&&e&&!e.nodeType&&e,s=i&&i.exports===r,o=s&&t.process,a=function(){try{var f=i&&i.require&&i.require("util").types;return f||o&&o.binding&&o.binding("util")}catch{}}();e.exports=a}(on,on.exports)),on.exports}var Ri,xd;function mn(){if(xd)return Ri;xd=1;var e=Ub(),n=Qn(),t=pf(),r=t&&t.isTypedArray,i=r?n(r):e;return Ri=i,Ri}var Oi,Nd;function xv(){if(Nd)return Oi;Nd=1;var e=Bb(),n=vn(),t=De(),r=Qt(),i=Jn(),s=mn(),o=Object.prototype,a=o.hasOwnProperty;function f(c,d){var p=t(c),m=!p&&n(c),y=!p&&!m&&r(c),x=!p&&!m&&!y&&s(c),_=p||m||y||x,b=_?e(c.length,String):[],w=b.length;for(var E in c)(d||a.call(c,E))&&!(_&&(E=="length"||y&&(E=="offset"||E=="parent")||x&&(E=="buffer"||E=="byteLength"||E=="byteOffset")||i(E,w)))&&b.push(E);return b}return Oi=f,Oi}var Ai,Md;function Hn(){if(Md)return Ai;Md=1;var e=Object.prototype;function n(t){var r=t&&t.constructor,i=typeof r=="function"&&r.prototype||e;return t===i}return Ai=n,Ai}var Ii,Sd;function Nv(){if(Sd)return Ii;Sd=1;function e(n,t){return function(r){return n(t(r))}}return Ii=e,Ii}var Ti,qd;function Vb(){if(qd)return Ti;qd=1;var e=Nv(),n=e(Object.keys,Object);return Ti=n,Ti}var ki,Rd;function vf(){if(Rd)return ki;Rd=1;var e=Hn(),n=Vb(),t=Object.prototype,r=t.hasOwnProperty;function i(s){if(!e(s))return n(s);var o=[];for(var a in Object(s))r.call(s,a)&&a!="constructor"&&o.push(a);return o}return ki=i,ki}var ji,Od;function Mt(){if(Od)return ji;Od=1;var e=gn(),n=gf();function t(r){return r!=null&&n(r.length)&&!e(r)}return ji=t,ji}var Ci,Ad;function It(){if(Ad)return Ci;Ad=1;var e=xv(),n=vf(),t=Mt();function r(i){return t(i)?e(i):n(i)}return Ci=r,Ci}var Pi,Id;function Wb(){if(Id)return Pi;Id=1;var e=pn(),n=It();function t(r,i){return r&&e(i,n(i),r)}return Pi=t,Pi}var Li,Td;function Yb(){if(Td)return Li;Td=1;function e(n){var t=[];if(n!=null)for(var r in Object(n))t.push(r);return t}return Li=e,Li}var Di,kd;function Kb(){if(kd)return Di;kd=1;var e=at(),n=Hn(),t=Yb(),r=Object.prototype,i=r.hasOwnProperty;function s(o){if(!e(o))return t(o);var a=n(o),f=[];for(var c in o)c=="constructor"&&(a||!i.call(o,c))||f.push(c);return f}return Di=s,Di}var zi,jd;function zt(){if(jd)return zi;jd=1;var e=xv(),n=Kb(),t=Mt();function r(i){return t(i)?e(i,!0):n(i)}return zi=r,zi}var Fi,Cd;function Xb(){if(Cd)return Fi;Cd=1;var e=pn(),n=zt();function t(r,i){return r&&e(i,n(i),r)}return Fi=t,Fi}var un={exports:{}};un.exports;var Pd;function Mv(){return Pd||(Pd=1,function(e,n){var t=lt(),r=n&&!n.nodeType&&n,i=r&&!0&&e&&!e.nodeType&&e,s=i&&i.exports===r,o=s?t.Buffer:void 0,a=o?o.allocUnsafe:void 0;function f(c,d){if(d)return c.slice();var p=c.length,m=a?a(p):new c.constructor(p);return c.copy(m),m}e.exports=f}(un,un.exports)),un.exports}var Bi,Ld;function Sv(){if(Ld)return Bi;Ld=1;function e(n,t){var r=-1,i=n.length;for(t||(t=Array(i));++r<i;)t[r]=n[r];return t}return Bi=e,Bi}var $i,Dd;function qv(){if(Dd)return $i;Dd=1;function e(n,t){for(var r=-1,i=n==null?0:n.length,s=0,o=[];++r<i;){var a=n[r];t(a,r,n)&&(o[s++]=a)}return o}return $i=e,$i}var Gi,zd;function Rv(){if(zd)return Gi;zd=1;function e(){return[]}return Gi=e,Gi}var Ui,Fd;function mf(){if(Fd)return Ui;Fd=1;var e=qv(),n=Rv(),t=Object.prototype,r=t.propertyIsEnumerable,i=Object.getOwnPropertySymbols,s=i?function(o){return o==null?[]:(o=Object(o),e(i(o),function(a){return r.call(o,a)}))}:n;return Ui=s,Ui}var Vi,Bd;function Zb(){if(Bd)return Vi;Bd=1;var e=pn(),n=mf();function t(r,i){return e(r,n(r),i)}return Vi=t,Vi}var Wi,$d;function yf(){if($d)return Wi;$d=1;function e(n,t){for(var r=-1,i=t.length,s=n.length;++r<i;)n[s+r]=t[r];return n}return Wi=e,Wi}var Yi,Gd;function er(){if(Gd)return Yi;Gd=1;var e=Nv(),n=e(Object.getPrototypeOf,Object);return Yi=n,Yi}var Ki,Ud;function Ov(){if(Ud)return Ki;Ud=1;var e=yf(),n=er(),t=mf(),r=Rv(),i=Object.getOwnPropertySymbols,s=i?function(o){for(var a=[];o;)e(a,t(o)),o=n(o);return a}:r;return Ki=s,Ki}var Xi,Vd;function Jb(){if(Vd)return Xi;Vd=1;var e=pn(),n=Ov();function t(r,i){return e(r,n(r),i)}return Xi=t,Xi}var Zi,Wd;function Av(){if(Wd)return Zi;Wd=1;var e=yf(),n=De();function t(r,i,s){var o=i(r);return n(r)?o:e(o,s(r))}return Zi=t,Zi}var Ji,Yd;function Iv(){if(Yd)return Ji;Yd=1;var e=Av(),n=mf(),t=It();function r(i){return e(i,t,n)}return Ji=r,Ji}var Qi,Kd;function Qb(){if(Kd)return Qi;Kd=1;var e=Av(),n=Ov(),t=zt();function r(i){return e(i,t,n)}return Qi=r,Qi}var Hi,Xd;function Hb(){if(Xd)return Hi;Xd=1;var e=Dt(),n=lt(),t=e(n,"DataView");return Hi=t,Hi}var es,Zd;function e_(){if(Zd)return es;Zd=1;var e=Dt(),n=lt(),t=e(n,"Promise");return es=t,es}var ts,Jd;function Tv(){if(Jd)return ts;Jd=1;var e=Dt(),n=lt(),t=e(n,"Set");return ts=t,ts}var ns,Qd;function t_(){if(Qd)return ns;Qd=1;var e=Dt(),n=lt(),t=e(n,"WeakMap");return ns=t,ns}var rs,Hd;function Ht(){if(Hd)return rs;Hd=1;var e=Hb(),n=df(),t=e_(),r=Tv(),i=t_(),s=Lt(),o=_v(),a="[object Map]",f="[object Object]",c="[object Promise]",d="[object Set]",p="[object WeakMap]",m="[object DataView]",y=o(e),x=o(n),_=o(t),b=o(r),w=o(i),E=s;return(e&&E(new e(new ArrayBuffer(1)))!=m||n&&E(new n)!=a||t&&E(t.resolve())!=c||r&&E(new r)!=d||i&&E(new i)!=p)&&(E=function(N){var S=s(N),R=S==f?N.constructor:void 0,A=R?o(R):"";if(A)switch(A){case y:return m;case x:return a;case _:return c;case b:return d;case w:return p}return S}),rs=E,rs}var is,el;function n_(){if(el)return is;el=1;var e=Object.prototype,n=e.hasOwnProperty;function t(r){var i=r.length,s=new r.constructor(i);return i&&typeof r[0]=="string"&&n.call(r,"index")&&(s.index=r.index,s.input=r.input),s}return is=t,is}var ss,tl;function kv(){if(tl)return ss;tl=1;var e=lt(),n=e.Uint8Array;return ss=n,ss}var as,nl;function wf(){if(nl)return as;nl=1;var e=kv();function n(t){var r=new t.constructor(t.byteLength);return new e(r).set(new e(t)),r}return as=n,as}var os,rl;function r_(){if(rl)return os;rl=1;var e=wf();function n(t,r){var i=r?e(t.buffer):t.buffer;return new t.constructor(i,t.byteOffset,t.byteLength)}return os=n,os}var us,il;function i_(){if(il)return us;il=1;var e=/\w*$/;function n(t){var r=new t.constructor(t.source,e.exec(t));return r.lastIndex=t.lastIndex,r}return us=n,us}var fs,sl;function s_(){if(sl)return fs;sl=1;var e=Jt(),n=e?e.prototype:void 0,t=n?n.valueOf:void 0;function r(i){return t?Object(t.call(i)):{}}return fs=r,fs}var cs,al;function jv(){if(al)return cs;al=1;var e=wf();function n(t,r){var i=r?e(t.buffer):t.buffer;return new t.constructor(i,t.byteOffset,t.length)}return cs=n,cs}var ds,ol;function a_(){if(ol)return ds;ol=1;var e=wf(),n=r_(),t=i_(),r=s_(),i=jv(),s="[object Boolean]",o="[object Date]",a="[object Map]",f="[object Number]",c="[object RegExp]",d="[object Set]",p="[object String]",m="[object Symbol]",y="[object ArrayBuffer]",x="[object DataView]",_="[object Float32Array]",b="[object Float64Array]",w="[object Int8Array]",E="[object Int16Array]",N="[object Int32Array]",S="[object Uint8Array]",R="[object Uint8ClampedArray]",A="[object Uint16Array]",j="[object Uint32Array]";function I(D,z,$){var V=D.constructor;switch(z){case y:return e(D);case s:case o:return new V(+D);case x:return n(D,$);case _:case b:case w:case E:case N:case S:case R:case A:case j:return i(D,$);case a:return new V;case f:case p:return new V(D);case c:return t(D);case d:return new V;case m:return r(D)}}return ds=I,ds}var ls,ul;function Cv(){if(ul)return ls;ul=1;var e=at(),n=Object.create,t=function(){function r(){}return function(i){if(!e(i))return{};if(n)return n(i);r.prototype=i;var s=new r;return r.prototype=void 0,s}}();return ls=t,ls}var hs,fl;function Pv(){if(fl)return hs;fl=1;var e=Cv(),n=er(),t=Hn();function r(i){return typeof i.constructor=="function"&&!t(i)?e(n(i)):{}}return hs=r,hs}var gs,cl;function o_(){if(cl)return gs;cl=1;var e=Ht(),n=vt(),t="[object Map]";function r(i){return n(i)&&e(i)==t}return gs=r,gs}var ps,dl;function u_(){if(dl)return ps;dl=1;var e=o_(),n=Qn(),t=pf(),r=t&&t.isMap,i=r?n(r):e;return ps=i,ps}var vs,ll;function f_(){if(ll)return vs;ll=1;var e=Ht(),n=vt(),t="[object Set]";function r(i){return n(i)&&e(i)==t}return vs=r,vs}var ms,hl;function c_(){if(hl)return ms;hl=1;var e=f_(),n=Qn(),t=pf(),r=t&&t.isSet,i=r?n(r):e;return ms=i,ms}var ys,gl;function Lv(){if(gl)return ys;gl=1;var e=Kn(),n=hf(),t=Zn(),r=Wb(),i=Xb(),s=Mv(),o=Sv(),a=Zb(),f=Jb(),c=Iv(),d=Qb(),p=Ht(),m=n_(),y=a_(),x=Pv(),_=De(),b=Qt(),w=u_(),E=at(),N=c_(),S=It(),R=zt(),A=1,j=2,I=4,D="[object Arguments]",z="[object Array]",$="[object Boolean]",V="[object Date]",Y="[object Error]",ee="[object Function]",J="[object GeneratorFunction]",oe="[object Map]",be="[object Number]",Z="[object Object]",ue="[object RegExp]",ge="[object Set]",de="[object String]",ie="[object Symbol]",_e="[object WeakMap]",G="[object ArrayBuffer]",P="[object DataView]",X="[object Float32Array]",te="[object Float64Array]",ce="[object Int8Array]",xe="[object Int16Array]",Ce="[object Int32Array]",Ke="[object Uint8Array]",Bt="[object Uint8ClampedArray]",Xe="[object Uint16Array]",Ge="[object Uint32Array]",Ee={};Ee[D]=Ee[z]=Ee[G]=Ee[P]=Ee[$]=Ee[V]=Ee[X]=Ee[te]=Ee[ce]=Ee[xe]=Ee[Ce]=Ee[oe]=Ee[be]=Ee[Z]=Ee[ue]=Ee[ge]=Ee[de]=Ee[ie]=Ee[Ke]=Ee[Bt]=Ee[Xe]=Ee[Ge]=!0,Ee[Y]=Ee[ee]=Ee[_e]=!1;function mt(Me,yt,Le,ur,wt,Ue){var Ve,ut=yt&A,$t=yt&j,wn=yt&I;if(Le&&(Ve=wt?Le(Me,ur,wt,Ue):Le(Me)),Ve!==void 0)return Ve;if(!E(Me))return Me;var Tt=_(Me);if(Tt){if(Ve=m(Me),!ut)return o(Me,Ve)}else{var qt=p(Me),bn=qt==ee||qt==J;if(b(Me))return s(Me,ut);if(qt==Z||qt==D||bn&&!wt){if(Ve=$t||bn?{}:x(Me),!ut)return $t?f(Me,i(Ve,Me)):a(Me,r(Ve,Me))}else{if(!Ee[qt])return wt?Me:{};Ve=y(Me,qt,ut)}}Ue||(Ue=new e);var _n=Ue.get(Me);if(_n)return _n;Ue.set(Me,Ve),N(Me)?Me.forEach(function(ht){Ve.add(mt(ht,yt,Le,ht,Me,Ue))}):w(Me)&&Me.forEach(function(ht,gt){Ve.set(gt,mt(ht,yt,Le,gt,Me,Ue))});var fr=wn?$t?d:c:$t?R:S,En=Tt?void 0:fr(Me);return n(En||Me,function(ht,gt){En&&(gt=ht,ht=Me[gt]),t(Ve,gt,mt(ht,yt,Le,gt,Me,Ue))}),Ve}return ys=mt,ys}var ws,pl;function d_(){if(pl)return ws;pl=1;var e=Lv(),n=4;function t(r){return e(r,n)}return ws=t,ws}var bs,vl;function bf(){if(vl)return bs;vl=1;function e(n){return function(){return n}}return bs=e,bs}var _s,ml;function l_(){if(ml)return _s;ml=1;function e(n){return function(t,r,i){for(var s=-1,o=Object(t),a=i(t),f=a.length;f--;){var c=a[n?f:++s];if(r(o[c],c,o)===!1)break}return t}}return _s=e,_s}var Es,yl;function _f(){if(yl)return Es;yl=1;var e=l_(),n=e();return Es=n,Es}var xs,wl;function Ef(){if(wl)return xs;wl=1;var e=_f(),n=It();function t(r,i){return r&&e(r,i,n)}return xs=t,xs}var Ns,bl;function h_(){if(bl)return Ns;bl=1;var e=Mt();function n(t,r){return function(i,s){if(i==null)return i;if(!e(i))return t(i,s);for(var o=i.length,a=r?o:-1,f=Object(i);(r?a--:++a<o)&&s(f[a],a,f)!==!1;);return i}}return Ns=n,Ns}var Ms,_l;function tr(){if(_l)return Ms;_l=1;var e=Ef(),n=h_(),t=n(e);return Ms=t,Ms}var Ss,El;function Ft(){if(El)return Ss;El=1;function e(n){return n}return Ss=e,Ss}var qs,xl;function Dv(){if(xl)return qs;xl=1;var e=Ft();function n(t){return typeof t=="function"?t:e}return qs=n,qs}var Rs,Nl;function zv(){if(Nl)return Rs;Nl=1;var e=hf(),n=tr(),t=Dv(),r=De();function i(s,o){var a=r(s)?e:n;return a(s,t(o))}return Rs=i,Rs}var Os,Ml;function Fv(){return Ml||(Ml=1,Os=zv()),Os}var As,Sl;function g_(){if(Sl)return As;Sl=1;var e=tr();function n(t,r){var i=[];return e(t,function(s,o,a){r(s,o,a)&&i.push(s)}),i}return As=n,As}var Is,ql;function p_(){if(ql)return Is;ql=1;var e="__lodash_hash_undefined__";function n(t){return this.__data__.set(t,e),this}return Is=n,Is}var Ts,Rl;function v_(){if(Rl)return Ts;Rl=1;function e(n){return this.__data__.has(n)}return Ts=e,Ts}var ks,Ol;function Bv(){if(Ol)return ks;Ol=1;var e=lf(),n=p_(),t=v_();function r(i){var s=-1,o=i==null?0:i.length;for(this.__data__=new e;++s<o;)this.add(i[s])}return r.prototype.add=r.prototype.push=n,r.prototype.has=t,ks=r,ks}var js,Al;function m_(){if(Al)return js;Al=1;function e(n,t){for(var r=-1,i=n==null?0:n.length;++r<i;)if(t(n[r],r,n))return!0;return!1}return js=e,js}var Cs,Il;function $v(){if(Il)return Cs;Il=1;function e(n,t){return n.has(t)}return Cs=e,Cs}var Ps,Tl;function Gv(){if(Tl)return Ps;Tl=1;var e=Bv(),n=m_(),t=$v(),r=1,i=2;function s(o,a,f,c,d,p){var m=f&r,y=o.length,x=a.length;if(y!=x&&!(m&&x>y))return!1;var _=p.get(o),b=p.get(a);if(_&&b)return _==a&&b==o;var w=-1,E=!0,N=f&i?new e:void 0;for(p.set(o,a),p.set(a,o);++w<y;){var S=o[w],R=a[w];if(c)var A=m?c(R,S,w,a,o,p):c(S,R,w,o,a,p);if(A!==void 0){if(A)continue;E=!1;break}if(N){if(!n(a,function(j,I){if(!t(N,I)&&(S===j||d(S,j,f,c,p)))return N.push(I)})){E=!1;break}}else if(!(S===R||d(S,R,f,c,p))){E=!1;break}}return p.delete(o),p.delete(a),E}return Ps=s,Ps}var Ls,kl;function y_(){if(kl)return Ls;kl=1;function e(n){var t=-1,r=Array(n.size);return n.forEach(function(i,s){r[++t]=[s,i]}),r}return Ls=e,Ls}var Ds,jl;function xf(){if(jl)return Ds;jl=1;function e(n){var t=-1,r=Array(n.size);return n.forEach(function(i){r[++t]=i}),r}return Ds=e,Ds}var zs,Cl;function w_(){if(Cl)return zs;Cl=1;var e=Jt(),n=kv(),t=Zt(),r=Gv(),i=y_(),s=xf(),o=1,a=2,f="[object Boolean]",c="[object Date]",d="[object Error]",p="[object Map]",m="[object Number]",y="[object RegExp]",x="[object Set]",_="[object String]",b="[object Symbol]",w="[object ArrayBuffer]",E="[object DataView]",N=e?e.prototype:void 0,S=N?N.valueOf:void 0;function R(A,j,I,D,z,$,V){switch(I){case E:if(A.byteLength!=j.byteLength||A.byteOffset!=j.byteOffset)return!1;A=A.buffer,j=j.buffer;case w:return!(A.byteLength!=j.byteLength||!$(new n(A),new n(j)));case f:case c:case m:return t(+A,+j);case d:return A.name==j.name&&A.message==j.message;case y:case _:return A==j+"";case p:var Y=i;case x:var ee=D&o;if(Y||(Y=s),A.size!=j.size&&!ee)return!1;var J=V.get(A);if(J)return J==j;D|=a,V.set(A,j);var oe=r(Y(A),Y(j),D,z,$,V);return V.delete(A),oe;case b:if(S)return S.call(A)==S.call(j)}return!1}return zs=R,zs}var Fs,Pl;function b_(){if(Pl)return Fs;Pl=1;var e=Iv(),n=1,t=Object.prototype,r=t.hasOwnProperty;function i(s,o,a,f,c,d){var p=a&n,m=e(s),y=m.length,x=e(o),_=x.length;if(y!=_&&!p)return!1;for(var b=y;b--;){var w=m[b];if(!(p?w in o:r.call(o,w)))return!1}var E=d.get(s),N=d.get(o);if(E&&N)return E==o&&N==s;var S=!0;d.set(s,o),d.set(o,s);for(var R=p;++b<y;){w=m[b];var A=s[w],j=o[w];if(f)var I=p?f(j,A,w,o,s,d):f(A,j,w,s,o,d);if(!(I===void 0?A===j||c(A,j,a,f,d):I)){S=!1;break}R||(R=w=="constructor")}if(S&&!R){var D=s.constructor,z=o.constructor;D!=z&&"constructor"in s&&"constructor"in o&&!(typeof D=="function"&&D instanceof D&&typeof z=="function"&&z instanceof z)&&(S=!1)}return d.delete(s),d.delete(o),S}return Fs=i,Fs}var Bs,Ll;function __(){if(Ll)return Bs;Ll=1;var e=Kn(),n=Gv(),t=w_(),r=b_(),i=Ht(),s=De(),o=Qt(),a=mn(),f=1,c="[object Arguments]",d="[object Array]",p="[object Object]",m=Object.prototype,y=m.hasOwnProperty;function x(_,b,w,E,N,S){var R=s(_),A=s(b),j=R?d:i(_),I=A?d:i(b);j=j==c?p:j,I=I==c?p:I;var D=j==p,z=I==p,$=j==I;if($&&o(_)){if(!o(b))return!1;R=!0,D=!1}if($&&!D)return S||(S=new e),R||a(_)?n(_,b,w,E,N,S):t(_,b,j,w,E,N,S);if(!(w&f)){var V=D&&y.call(_,"__wrapped__"),Y=z&&y.call(b,"__wrapped__");if(V||Y){var ee=V?_.value():_,J=Y?b.value():b;return S||(S=new e),N(ee,J,w,E,S)}}return $?(S||(S=new e),r(_,b,w,E,N,S)):!1}return Bs=x,Bs}var $s,Dl;function Uv(){if(Dl)return $s;Dl=1;var e=__(),n=vt();function t(r,i,s,o,a){return r===i?!0:r==null||i==null||!n(r)&&!n(i)?r!==r&&i!==i:e(r,i,s,o,t,a)}return $s=t,$s}var Gs,zl;function E_(){if(zl)return Gs;zl=1;var e=Kn(),n=Uv(),t=1,r=2;function i(s,o,a,f){var c=a.length,d=c,p=!f;if(s==null)return!d;for(s=Object(s);c--;){var m=a[c];if(p&&m[2]?m[1]!==s[m[0]]:!(m[0]in s))return!1}for(;++c<d;){m=a[c];var y=m[0],x=s[y],_=m[1];if(p&&m[2]){if(x===void 0&&!(y in s))return!1}else{var b=new e;if(f)var w=f(x,_,y,s,o,b);if(!(w===void 0?n(_,x,t|r,f,b):w))return!1}}return!0}return Gs=i,Gs}var Us,Fl;function Vv(){if(Fl)return Us;Fl=1;var e=at();function n(t){return t===t&&!e(t)}return Us=n,Us}var Vs,Bl;function x_(){if(Bl)return Vs;Bl=1;var e=Vv(),n=It();function t(r){for(var i=n(r),s=i.length;s--;){var o=i[s],a=r[o];i[s]=[o,a,e(a)]}return i}return Vs=t,Vs}var Ws,$l;function Wv(){if($l)return Ws;$l=1;function e(n,t){return function(r){return r==null?!1:r[n]===t&&(t!==void 0||n in Object(r))}}return Ws=e,Ws}var Ys,Gl;function N_(){if(Gl)return Ys;Gl=1;var e=E_(),n=x_(),t=Wv();function r(i){var s=n(i);return s.length==1&&s[0][2]?t(s[0][0],s[0][1]):function(o){return o===i||e(o,i,s)}}return Ys=r,Ys}var Ks,Ul;function en(){if(Ul)return Ks;Ul=1;var e=Lt(),n=vt(),t="[object Symbol]";function r(i){return typeof i=="symbol"||n(i)&&e(i)==t}return Ks=r,Ks}var Xs,Vl;function Nf(){if(Vl)return Xs;Vl=1;var e=De(),n=en(),t=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,r=/^\w*$/;function i(s,o){if(e(s))return!1;var a=typeof s;return a=="number"||a=="symbol"||a=="boolean"||s==null||n(s)?!0:r.test(s)||!t.test(s)||o!=null&&s in Object(o)}return Xs=i,Xs}var Zs,Wl;function M_(){if(Wl)return Zs;Wl=1;var e=lf(),n="Expected a function";function t(r,i){if(typeof r!="function"||i!=null&&typeof i!="function")throw new TypeError(n);var s=function(){var o=arguments,a=i?i.apply(this,o):o[0],f=s.cache;if(f.has(a))return f.get(a);var c=r.apply(this,o);return s.cache=f.set(a,c)||f,c};return s.cache=new(t.Cache||e),s}return t.Cache=e,Zs=t,Zs}var Js,Yl;function S_(){if(Yl)return Js;Yl=1;var e=M_(),n=500;function t(r){var i=e(r,function(o){return s.size===n&&s.clear(),o}),s=i.cache;return i}return Js=t,Js}var Qs,Kl;function q_(){if(Kl)return Qs;Kl=1;var e=S_(),n=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,t=/\\(\\)?/g,r=e(function(i){var s=[];return i.charCodeAt(0)===46&&s.push(""),i.replace(n,function(o,a,f,c){s.push(f?c.replace(t,"$1"):a||o)}),s});return Qs=r,Qs}var Hs,Xl;function nr(){if(Xl)return Hs;Xl=1;function e(n,t){for(var r=-1,i=n==null?0:n.length,s=Array(i);++r<i;)s[r]=t(n[r],r,n);return s}return Hs=e,Hs}var ea,Zl;function R_(){if(Zl)return ea;Zl=1;var e=Jt(),n=nr(),t=De(),r=en(),i=e?e.prototype:void 0,s=i?i.toString:void 0;function o(a){if(typeof a=="string")return a;if(t(a))return n(a,o)+"";if(r(a))return s?s.call(a):"";var f=a+"";return f=="0"&&1/a==-1/0?"-0":f}return ea=o,ea}var ta,Jl;function Yv(){if(Jl)return ta;Jl=1;var e=R_();function n(t){return t==null?"":e(t)}return ta=n,ta}var na,Ql;function rr(){if(Ql)return na;Ql=1;var e=De(),n=Nf(),t=q_(),r=Yv();function i(s,o){return e(s)?s:n(s,o)?[s]:t(r(s))}return na=i,na}var ra,Hl;function yn(){if(Hl)return ra;Hl=1;var e=en();function n(t){if(typeof t=="string"||e(t))return t;var r=t+"";return r=="0"&&1/t==-1/0?"-0":r}return ra=n,ra}var ia,eh;function ir(){if(eh)return ia;eh=1;var e=rr(),n=yn();function t(r,i){i=e(i,r);for(var s=0,o=i.length;r!=null&&s<o;)r=r[n(i[s++])];return s&&s==o?r:void 0}return ia=t,ia}var sa,th;function O_(){if(th)return sa;th=1;var e=ir();function n(t,r,i){var s=t==null?void 0:e(t,r);return s===void 0?i:s}return sa=n,sa}var aa,nh;function A_(){if(nh)return aa;nh=1;function e(n,t){return n!=null&&t in Object(n)}return aa=e,aa}var oa,rh;function Kv(){if(rh)return oa;rh=1;var e=rr(),n=vn(),t=De(),r=Jn(),i=gf(),s=yn();function o(a,f,c){f=e(f,a);for(var d=-1,p=f.length,m=!1;++d<p;){var y=s(f[d]);if(!(m=a!=null&&c(a,y)))break;a=a[y]}return m||++d!=p?m:(p=a==null?0:a.length,!!p&&i(p)&&r(y,p)&&(t(a)||n(a)))}return oa=o,oa}var ua,ih;function Xv(){if(ih)return ua;ih=1;var e=A_(),n=Kv();function t(r,i){return r!=null&&n(r,i,e)}return ua=t,ua}var fa,sh;function I_(){if(sh)return fa;sh=1;var e=Uv(),n=O_(),t=Xv(),r=Nf(),i=Vv(),s=Wv(),o=yn(),a=1,f=2;function c(d,p){return r(d)&&i(p)?s(o(d),p):function(m){var y=n(m,d);return y===void 0&&y===p?t(m,d):e(p,y,a|f)}}return fa=c,fa}var ca,ah;function Zv(){if(ah)return ca;ah=1;function e(n){return function(t){return t==null?void 0:t[n]}}return ca=e,ca}var da,oh;function T_(){if(oh)return da;oh=1;var e=ir();function n(t){return function(r){return e(r,t)}}return da=n,da}var la,uh;function k_(){if(uh)return la;uh=1;var e=Zv(),n=T_(),t=Nf(),r=yn();function i(s){return t(s)?e(r(s)):n(s)}return la=i,la}var ha,fh;function St(){if(fh)return ha;fh=1;var e=N_(),n=I_(),t=Ft(),r=De(),i=k_();function s(o){return typeof o=="function"?o:o==null?t:typeof o=="object"?r(o)?n(o[0],o[1]):e(o):i(o)}return ha=s,ha}var ga,ch;function Jv(){if(ch)return ga;ch=1;var e=qv(),n=g_(),t=St(),r=De();function i(s,o){var a=r(s)?e:n;return a(s,t(o,3))}return ga=i,ga}var pa,dh;function j_(){if(dh)return pa;dh=1;var e=Object.prototype,n=e.hasOwnProperty;function t(r,i){return r!=null&&n.call(r,i)}return pa=t,pa}var va,lh;function Qv(){if(lh)return va;lh=1;var e=j_(),n=Kv();function t(r,i){return r!=null&&n(r,i,e)}return va=t,va}var ma,hh;function C_(){if(hh)return ma;hh=1;var e=vf(),n=Ht(),t=vn(),r=De(),i=Mt(),s=Qt(),o=Hn(),a=mn(),f="[object Map]",c="[object Set]",d=Object.prototype,p=d.hasOwnProperty;function m(y){if(y==null)return!0;if(i(y)&&(r(y)||typeof y=="string"||typeof y.splice=="function"||s(y)||a(y)||t(y)))return!y.length;var x=n(y);if(x==f||x==c)return!y.size;if(o(y))return!e(y).length;for(var _ in y)if(p.call(y,_))return!1;return!0}return ma=m,ma}var ya,gh;function Hv(){if(gh)return ya;gh=1;function e(n){return n===void 0}return ya=e,ya}var wa,ph;function em(){if(ph)return wa;ph=1;var e=tr(),n=Mt();function t(r,i){var s=-1,o=n(r)?Array(r.length):[];return e(r,function(a,f,c){o[++s]=i(a,f,c)}),o}return wa=t,wa}var ba,vh;function tm(){if(vh)return ba;vh=1;var e=nr(),n=St(),t=em(),r=De();function i(s,o){var a=r(s)?e:t;return a(s,n(o,3))}return ba=i,ba}var _a,mh;function P_(){if(mh)return _a;mh=1;function e(n,t,r,i){var s=-1,o=n==null?0:n.length;for(i&&o&&(r=n[++s]);++s<o;)r=t(r,n[s],s,n);return r}return _a=e,_a}var Ea,yh;function L_(){if(yh)return Ea;yh=1;function e(n,t,r,i,s){return s(n,function(o,a,f){r=i?(i=!1,o):t(r,o,a,f)}),r}return Ea=e,Ea}var xa,wh;function nm(){if(wh)return xa;wh=1;var e=P_(),n=tr(),t=St(),r=L_(),i=De();function s(o,a,f){var c=i(o)?e:r,d=arguments.length<3;return c(o,t(a,4),f,d,n)}return xa=s,xa}var Na,bh;function D_(){if(bh)return Na;bh=1;var e=Lt(),n=De(),t=vt(),r="[object String]";function i(s){return typeof s=="string"||!n(s)&&t(s)&&e(s)==r}return Na=i,Na}var Ma,_h;function z_(){if(_h)return Ma;_h=1;var e=Zv(),n=e("length");return Ma=n,Ma}var Sa,Eh;function F_(){if(Eh)return Sa;Eh=1;var e="\\ud800-\\udfff",n="\\u0300-\\u036f",t="\\ufe20-\\ufe2f",r="\\u20d0-\\u20ff",i=n+t+r,s="\\ufe0e\\ufe0f",o="\\u200d",a=RegExp("["+o+e+i+s+"]");function f(c){return a.test(c)}return Sa=f,Sa}var qa,xh;function B_(){if(xh)return qa;xh=1;var e="\\ud800-\\udfff",n="\\u0300-\\u036f",t="\\ufe20-\\ufe2f",r="\\u20d0-\\u20ff",i=n+t+r,s="\\ufe0e\\ufe0f",o="["+e+"]",a="["+i+"]",f="\\ud83c[\\udffb-\\udfff]",c="(?:"+a+"|"+f+")",d="[^"+e+"]",p="(?:\\ud83c[\\udde6-\\uddff]){2}",m="[\\ud800-\\udbff][\\udc00-\\udfff]",y="\\u200d",x=c+"?",_="["+s+"]?",b="(?:"+y+"(?:"+[d,p,m].join("|")+")"+_+x+")*",w=_+x+b,E="(?:"+[d+a+"?",a,p,m,o].join("|")+")",N=RegExp(f+"(?="+f+")|"+E+w,"g");function S(R){for(var A=N.lastIndex=0;N.test(R);)++A;return A}return qa=S,qa}var Ra,Nh;function $_(){if(Nh)return Ra;Nh=1;var e=z_(),n=F_(),t=B_();function r(i){return n(i)?t(i):e(i)}return Ra=r,Ra}var Oa,Mh;function G_(){if(Mh)return Oa;Mh=1;var e=vf(),n=Ht(),t=Mt(),r=D_(),i=$_(),s="[object Map]",o="[object Set]";function a(f){if(f==null)return 0;if(t(f))return r(f)?i(f):f.length;var c=n(f);return c==s||c==o?f.size:e(f).length}return Oa=a,Oa}var Aa,Sh;function U_(){if(Sh)return Aa;Sh=1;var e=hf(),n=Cv(),t=Ef(),r=St(),i=er(),s=De(),o=Qt(),a=gn(),f=at(),c=mn();function d(p,m,y){var x=s(p),_=x||o(p)||c(p);if(m=r(m,4),y==null){var b=p&&p.constructor;_?y=x?new b:[]:f(p)?y=a(b)?n(i(p)):{}:y={}}return(_?e:t)(p,function(w,E,N){return m(y,w,E,N)}),y}return Aa=d,Aa}var Ia,qh;function V_(){if(qh)return Ia;qh=1;var e=Jt(),n=vn(),t=De(),r=e?e.isConcatSpreadable:void 0;function i(s){return t(s)||n(s)||!!(r&&s&&s[r])}return Ia=i,Ia}var Ta,Rh;function Mf(){if(Rh)return Ta;Rh=1;var e=yf(),n=V_();function t(r,i,s,o,a){var f=-1,c=r.length;for(s||(s=n),a||(a=[]);++f<c;){var d=r[f];i>0&&s(d)?i>1?t(d,i-1,s,o,a):e(a,d):o||(a[a.length]=d)}return a}return Ta=t,Ta}var ka,Oh;function W_(){if(Oh)return ka;Oh=1;function e(n,t,r){switch(r.length){case 0:return n.call(t);case 1:return n.call(t,r[0]);case 2:return n.call(t,r[0],r[1]);case 3:return n.call(t,r[0],r[1],r[2])}return n.apply(t,r)}return ka=e,ka}var ja,Ah;function rm(){if(Ah)return ja;Ah=1;var e=W_(),n=Math.max;function t(r,i,s){return i=n(i===void 0?r.length-1:i,0),function(){for(var o=arguments,a=-1,f=n(o.length-i,0),c=Array(f);++a<f;)c[a]=o[i+a];a=-1;for(var d=Array(i+1);++a<i;)d[a]=o[a];return d[i]=s(c),e(r,this,d)}}return ja=t,ja}var Ca,Ih;function Y_(){if(Ih)return Ca;Ih=1;var e=bf(),n=Ev(),t=Ft(),r=n?function(i,s){return n(i,"toString",{configurable:!0,enumerable:!1,value:e(s),writable:!0})}:t;return Ca=r,Ca}var Pa,Th;function K_(){if(Th)return Pa;Th=1;var e=800,n=16,t=Date.now;function r(i){var s=0,o=0;return function(){var a=t(),f=n-(a-o);if(o=a,f>0){if(++s>=e)return arguments[0]}else s=0;return i.apply(void 0,arguments)}}return Pa=r,Pa}var La,kh;function im(){if(kh)return La;kh=1;var e=Y_(),n=K_(),t=n(e);return La=t,La}var Da,jh;function sr(){if(jh)return Da;jh=1;var e=Ft(),n=rm(),t=im();function r(i,s){return t(n(i,s,e),i+"")}return Da=r,Da}var za,Ch;function sm(){if(Ch)return za;Ch=1;function e(n,t,r,i){for(var s=n.length,o=r+(i?1:-1);i?o--:++o<s;)if(t(n[o],o,n))return o;return-1}return za=e,za}var Fa,Ph;function X_(){if(Ph)return Fa;Ph=1;function e(n){return n!==n}return Fa=e,Fa}var Ba,Lh;function Z_(){if(Lh)return Ba;Lh=1;function e(n,t,r){for(var i=r-1,s=n.length;++i<s;)if(n[i]===t)return i;return-1}return Ba=e,Ba}var $a,Dh;function J_(){if(Dh)return $a;Dh=1;var e=sm(),n=X_(),t=Z_();function r(i,s,o){return s===s?t(i,s,o):e(i,n,o)}return $a=r,$a}var Ga,zh;function Q_(){if(zh)return Ga;zh=1;var e=J_();function n(t,r){var i=t==null?0:t.length;return!!i&&e(t,r,0)>-1}return Ga=n,Ga}var Ua,Fh;function H_(){if(Fh)return Ua;Fh=1;function e(n,t,r){for(var i=-1,s=n==null?0:n.length;++i<s;)if(r(t,n[i]))return!0;return!1}return Ua=e,Ua}var Va,Bh;function eE(){if(Bh)return Va;Bh=1;function e(){}return Va=e,Va}var Wa,$h;function tE(){if($h)return Wa;$h=1;var e=Tv(),n=eE(),t=xf(),r=1/0,i=e&&1/t(new e([,-0]))[1]==r?function(s){return new e(s)}:n;return Wa=i,Wa}var Ya,Gh;function nE(){if(Gh)return Ya;Gh=1;var e=Bv(),n=Q_(),t=H_(),r=$v(),i=tE(),s=xf(),o=200;function a(f,c,d){var p=-1,m=n,y=f.length,x=!0,_=[],b=_;if(d)x=!1,m=t;else if(y>=o){var w=c?null:i(f);if(w)return s(w);x=!1,m=r,b=new e}else b=c?[]:_;e:for(;++p<y;){var E=f[p],N=c?c(E):E;if(E=d||E!==0?E:0,x&&N===N){for(var S=b.length;S--;)if(b[S]===N)continue e;c&&b.push(N),_.push(E)}else m(b,N,d)||(b!==_&&b.push(N),_.push(E))}return _}return Ya=a,Ya}var Ka,Uh;function am(){if(Uh)return Ka;Uh=1;var e=Mt(),n=vt();function t(r){return n(r)&&e(r)}return Ka=t,Ka}var Xa,Vh;function rE(){if(Vh)return Xa;Vh=1;var e=Mf(),n=sr(),t=nE(),r=am(),i=n(function(s){return t(e(s,1,r,!0))});return Xa=i,Xa}var Za,Wh;function iE(){if(Wh)return Za;Wh=1;var e=nr();function n(t,r){return e(r,function(i){return t[i]})}return Za=n,Za}var Ja,Yh;function om(){if(Yh)return Ja;Yh=1;var e=iE(),n=It();function t(r){return r==null?[]:e(r,n(r))}return Ja=t,Ja}var Qa,Kh;function ot(){if(Kh)return Qa;Kh=1;var e;if(typeof cf=="function")try{e={clone:d_(),constant:bf(),each:Fv(),filter:Jv(),has:Qv(),isArray:De(),isEmpty:C_(),isFunction:gn(),isUndefined:Hv(),keys:It(),map:tm(),reduce:nm(),size:G_(),transform:U_(),union:rE(),values:om()}}catch{}return e||(e=window._),Qa=e,Qa}var Ha,Xh;function Sf(){if(Xh)return Ha;Xh=1;var e=ot();Ha=i;var n="\0",t="\0",r="";function i(d){this._isDirected=e.has(d,"directed")?d.directed:!0,this._isMultigraph=e.has(d,"multigraph")?d.multigraph:!1,this._isCompound=e.has(d,"compound")?d.compound:!1,this._label=void 0,this._defaultNodeLabelFn=e.constant(void 0),this._defaultEdgeLabelFn=e.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children[t]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}i.prototype._nodeCount=0,i.prototype._edgeCount=0,i.prototype.isDirected=function(){return this._isDirected},i.prototype.isMultigraph=function(){return this._isMultigraph},i.prototype.isCompound=function(){return this._isCompound},i.prototype.setGraph=function(d){return this._label=d,this},i.prototype.graph=function(){return this._label},i.prototype.setDefaultNodeLabel=function(d){return e.isFunction(d)||(d=e.constant(d)),this._defaultNodeLabelFn=d,this},i.prototype.nodeCount=function(){return this._nodeCount},i.prototype.nodes=function(){return e.keys(this._nodes)},i.prototype.sources=function(){var d=this;return e.filter(this.nodes(),function(p){return e.isEmpty(d._in[p])})},i.prototype.sinks=function(){var d=this;return e.filter(this.nodes(),function(p){return e.isEmpty(d._out[p])})},i.prototype.setNodes=function(d,p){var m=arguments,y=this;return e.each(d,function(x){m.length>1?y.setNode(x,p):y.setNode(x)}),this},i.prototype.setNode=function(d,p){return e.has(this._nodes,d)?(arguments.length>1&&(this._nodes[d]=p),this):(this._nodes[d]=arguments.length>1?p:this._defaultNodeLabelFn(d),this._isCompound&&(this._parent[d]=t,this._children[d]={},this._children[t][d]=!0),this._in[d]={},this._preds[d]={},this._out[d]={},this._sucs[d]={},++this._nodeCount,this)},i.prototype.node=function(d){return this._nodes[d]},i.prototype.hasNode=function(d){return e.has(this._nodes,d)},i.prototype.removeNode=function(d){var p=this;if(e.has(this._nodes,d)){var m=function(y){p.removeEdge(p._edgeObjs[y])};delete this._nodes[d],this._isCompound&&(this._removeFromParentsChildList(d),delete this._parent[d],e.each(this.children(d),function(y){p.setParent(y)}),delete this._children[d]),e.each(e.keys(this._in[d]),m),delete this._in[d],delete this._preds[d],e.each(e.keys(this._out[d]),m),delete this._out[d],delete this._sucs[d],--this._nodeCount}return this},i.prototype.setParent=function(d,p){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(e.isUndefined(p))p=t;else{p+="";for(var m=p;!e.isUndefined(m);m=this.parent(m))if(m===d)throw new Error("Setting "+p+" as parent of "+d+" would create a cycle");this.setNode(p)}return this.setNode(d),this._removeFromParentsChildList(d),this._parent[d]=p,this._children[p][d]=!0,this},i.prototype._removeFromParentsChildList=function(d){delete this._children[this._parent[d]][d]},i.prototype.parent=function(d){if(this._isCompound){var p=this._parent[d];if(p!==t)return p}},i.prototype.children=function(d){if(e.isUndefined(d)&&(d=t),this._isCompound){var p=this._children[d];if(p)return e.keys(p)}else{if(d===t)return this.nodes();if(this.hasNode(d))return[]}},i.prototype.predecessors=function(d){var p=this._preds[d];if(p)return e.keys(p)},i.prototype.successors=function(d){var p=this._sucs[d];if(p)return e.keys(p)},i.prototype.neighbors=function(d){var p=this.predecessors(d);if(p)return e.union(p,this.successors(d))},i.prototype.isLeaf=function(d){var p;return this.isDirected()?p=this.successors(d):p=this.neighbors(d),p.length===0},i.prototype.filterNodes=function(d){var p=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});p.setGraph(this.graph());var m=this;e.each(this._nodes,function(_,b){d(b)&&p.setNode(b,_)}),e.each(this._edgeObjs,function(_){p.hasNode(_.v)&&p.hasNode(_.w)&&p.setEdge(_,m.edge(_))});var y={};function x(_){var b=m.parent(_);return b===void 0||p.hasNode(b)?(y[_]=b,b):b in y?y[b]:x(b)}return this._isCompound&&e.each(p.nodes(),function(_){p.setParent(_,x(_))}),p},i.prototype.setDefaultEdgeLabel=function(d){return e.isFunction(d)||(d=e.constant(d)),this._defaultEdgeLabelFn=d,this},i.prototype.edgeCount=function(){return this._edgeCount},i.prototype.edges=function(){return e.values(this._edgeObjs)},i.prototype.setPath=function(d,p){var m=this,y=arguments;return e.reduce(d,function(x,_){return y.length>1?m.setEdge(x,_,p):m.setEdge(x,_),_}),this},i.prototype.setEdge=function(){var d,p,m,y,x=!1,_=arguments[0];typeof _=="object"&&_!==null&&"v"in _?(d=_.v,p=_.w,m=_.name,arguments.length===2&&(y=arguments[1],x=!0)):(d=_,p=arguments[1],m=arguments[3],arguments.length>2&&(y=arguments[2],x=!0)),d=""+d,p=""+p,e.isUndefined(m)||(m=""+m);var b=a(this._isDirected,d,p,m);if(e.has(this._edgeLabels,b))return x&&(this._edgeLabels[b]=y),this;if(!e.isUndefined(m)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(d),this.setNode(p),this._edgeLabels[b]=x?y:this._defaultEdgeLabelFn(d,p,m);var w=f(this._isDirected,d,p,m);return d=w.v,p=w.w,Object.freeze(w),this._edgeObjs[b]=w,s(this._preds[p],d),s(this._sucs[d],p),this._in[p][b]=w,this._out[d][b]=w,this._edgeCount++,this},i.prototype.edge=function(d,p,m){var y=arguments.length===1?c(this._isDirected,arguments[0]):a(this._isDirected,d,p,m);return this._edgeLabels[y]},i.prototype.hasEdge=function(d,p,m){var y=arguments.length===1?c(this._isDirected,arguments[0]):a(this._isDirected,d,p,m);return e.has(this._edgeLabels,y)},i.prototype.removeEdge=function(d,p,m){var y=arguments.length===1?c(this._isDirected,arguments[0]):a(this._isDirected,d,p,m),x=this._edgeObjs[y];return x&&(d=x.v,p=x.w,delete this._edgeLabels[y],delete this._edgeObjs[y],o(this._preds[p],d),o(this._sucs[d],p),delete this._in[p][y],delete this._out[d][y],this._edgeCount--),this},i.prototype.inEdges=function(d,p){var m=this._in[d];if(m){var y=e.values(m);return p?e.filter(y,function(x){return x.v===p}):y}},i.prototype.outEdges=function(d,p){var m=this._out[d];if(m){var y=e.values(m);return p?e.filter(y,function(x){return x.w===p}):y}},i.prototype.nodeEdges=function(d,p){var m=this.inEdges(d,p);if(m)return m.concat(this.outEdges(d,p))};function s(d,p){d[p]?d[p]++:d[p]=1}function o(d,p){--d[p]||delete d[p]}function a(d,p,m,y){var x=""+p,_=""+m;if(!d&&x>_){var b=x;x=_,_=b}return x+r+_+r+(e.isUndefined(y)?n:y)}function f(d,p,m,y){var x=""+p,_=""+m;if(!d&&x>_){var b=x;x=_,_=b}var w={v:x,w:_};return y&&(w.name=y),w}function c(d,p){return a(d,p.v,p.w,p.name)}return Ha}var eo,Zh;function sE(){return Zh||(Zh=1,eo="2.1.8"),eo}var to,Jh;function aE(){return Jh||(Jh=1,to={Graph:Sf(),version:sE()}),to}var no,Qh;function oE(){if(Qh)return no;Qh=1;var e=ot(),n=Sf();no={write:t,read:s};function t(o){var a={options:{directed:o.isDirected(),multigraph:o.isMultigraph(),compound:o.isCompound()},nodes:r(o),edges:i(o)};return e.isUndefined(o.graph())||(a.value=e.clone(o.graph())),a}function r(o){return e.map(o.nodes(),function(a){var f=o.node(a),c=o.parent(a),d={v:a};return e.isUndefined(f)||(d.value=f),e.isUndefined(c)||(d.parent=c),d})}function i(o){return e.map(o.edges(),function(a){var f=o.edge(a),c={v:a.v,w:a.w};return e.isUndefined(a.name)||(c.name=a.name),e.isUndefined(f)||(c.value=f),c})}function s(o){var a=new n(o.options).setGraph(o.value);return e.each(o.nodes,function(f){a.setNode(f.v,f.value),f.parent&&a.setParent(f.v,f.parent)}),e.each(o.edges,function(f){a.setEdge({v:f.v,w:f.w,name:f.name},f.value)}),a}return no}var ro,Hh;function uE(){if(Hh)return ro;Hh=1;var e=ot();ro=n;function n(t){var r={},i=[],s;function o(a){e.has(r,a)||(r[a]=!0,s.push(a),e.each(t.successors(a),o),e.each(t.predecessors(a),o))}return e.each(t.nodes(),function(a){s=[],o(a),s.length&&i.push(s)}),i}return ro}var io,eg;function um(){if(eg)return io;eg=1;var e=ot();io=n;function n(){this._arr=[],this._keyIndices={}}return n.prototype.size=function(){return this._arr.length},n.prototype.keys=function(){return this._arr.map(function(t){return t.key})},n.prototype.has=function(t){return e.has(this._keyIndices,t)},n.prototype.priority=function(t){var r=this._keyIndices[t];if(r!==void 0)return this._arr[r].priority},n.prototype.min=function(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key},n.prototype.add=function(t,r){var i=this._keyIndices;if(t=String(t),!e.has(i,t)){var s=this._arr,o=s.length;return i[t]=o,s.push({key:t,priority:r}),this._decrease(o),!0}return!1},n.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var t=this._arr.pop();return delete this._keyIndices[t.key],this._heapify(0),t.key},n.prototype.decrease=function(t,r){var i=this._keyIndices[t];if(r>this._arr[i].priority)throw new Error("New priority is greater than current priority. Key: "+t+" Old: "+this._arr[i].priority+" New: "+r);this._arr[i].priority=r,this._decrease(i)},n.prototype._heapify=function(t){var r=this._arr,i=2*t,s=i+1,o=t;i<r.length&&(o=r[i].priority<r[o].priority?i:o,s<r.length&&(o=r[s].priority<r[o].priority?s:o),o!==t&&(this._swap(t,o),this._heapify(o)))},n.prototype._decrease=function(t){for(var r=this._arr,i=r[t].priority,s;t!==0&&(s=t>>1,!(r[s].priority<i));)this._swap(t,s),t=s},n.prototype._swap=function(t,r){var i=this._arr,s=this._keyIndices,o=i[t],a=i[r];i[t]=a,i[r]=o,s[a.key]=t,s[o.key]=r},io}var so,tg;function fm(){if(tg)return so;tg=1;var e=ot(),n=um();so=r;var t=e.constant(1);function r(s,o,a,f){return i(s,String(o),a||t,f||function(c){return s.outEdges(c)})}function i(s,o,a,f){var c={},d=new n,p,m,y=function(x){var _=x.v!==p?x.v:x.w,b=c[_],w=a(x),E=m.distance+w;if(w<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+x+" Weight: "+w);E<b.distance&&(b.distance=E,b.predecessor=p,d.decrease(_,E))};for(s.nodes().forEach(function(x){var _=x===o?0:Number.POSITIVE_INFINITY;c[x]={distance:_},d.add(x,_)});d.size()>0&&(p=d.removeMin(),m=c[p],m.distance!==Number.POSITIVE_INFINITY);)f(p).forEach(y);return c}return so}var ao,ng;function fE(){if(ng)return ao;ng=1;var e=fm(),n=ot();ao=t;function t(r,i,s){return n.transform(r.nodes(),function(o,a){o[a]=e(r,a,i,s)},{})}return ao}var oo,rg;function cm(){if(rg)return oo;rg=1;var e=ot();oo=n;function n(t){var r=0,i=[],s={},o=[];function a(f){var c=s[f]={onStack:!0,lowlink:r,index:r++};if(i.push(f),t.successors(f).forEach(function(m){e.has(s,m)?s[m].onStack&&(c.lowlink=Math.min(c.lowlink,s[m].index)):(a(m),c.lowlink=Math.min(c.lowlink,s[m].lowlink))}),c.lowlink===c.index){var d=[],p;do p=i.pop(),s[p].onStack=!1,d.push(p);while(f!==p);o.push(d)}}return t.nodes().forEach(function(f){e.has(s,f)||a(f)}),o}return oo}var uo,ig;function cE(){if(ig)return uo;ig=1;var e=ot(),n=cm();uo=t;function t(r){return e.filter(n(r),function(i){return i.length>1||i.length===1&&r.hasEdge(i[0],i[0])})}return uo}var fo,sg;function dE(){if(sg)return fo;sg=1;var e=ot();fo=t;var n=e.constant(1);function t(i,s,o){return r(i,s||n,o||function(a){return i.outEdges(a)})}function r(i,s,o){var a={},f=i.nodes();return f.forEach(function(c){a[c]={},a[c][c]={distance:0},f.forEach(function(d){c!==d&&(a[c][d]={distance:Number.POSITIVE_INFINITY})}),o(c).forEach(function(d){var p=d.v===c?d.w:d.v,m=s(d);a[c][p]={distance:m,predecessor:c}})}),f.forEach(function(c){var d=a[c];f.forEach(function(p){var m=a[p];f.forEach(function(y){var x=m[c],_=d[y],b=m[y],w=x.distance+_.distance;w<b.distance&&(b.distance=w,b.predecessor=_.predecessor)})})}),a}return fo}var co,ag;function dm(){if(ag)return co;ag=1;var e=ot();co=n,n.CycleException=t;function n(r){var i={},s={},o=[];function a(f){if(e.has(s,f))throw new t;e.has(i,f)||(s[f]=!0,i[f]=!0,e.each(r.predecessors(f),a),delete s[f],o.push(f))}if(e.each(r.sinks(),a),e.size(i)!==r.nodeCount())throw new t;return o}function t(){}return t.prototype=new Error,co}var lo,og;function lE(){if(og)return lo;og=1;var e=dm();lo=n;function n(t){try{e(t)}catch(r){if(r instanceof e.CycleException)return!1;throw r}return!0}return lo}var ho,ug;function lm(){if(ug)return ho;ug=1;var e=ot();ho=n;function n(r,i,s){e.isArray(i)||(i=[i]);var o=(r.isDirected()?r.successors:r.neighbors).bind(r),a=[],f={};return e.each(i,function(c){if(!r.hasNode(c))throw new Error("Graph does not have node: "+c);t(r,c,s==="post",f,o,a)}),a}function t(r,i,s,o,a,f){e.has(o,i)||(o[i]=!0,s||f.push(i),e.each(a(i),function(c){t(r,c,s,o,a,f)}),s&&f.push(i))}return ho}var go,fg;function hE(){if(fg)return go;fg=1;var e=lm();go=n;function n(t,r){return e(t,r,"post")}return go}var po,cg;function gE(){if(cg)return po;cg=1;var e=lm();po=n;function n(t,r){return e(t,r,"pre")}return po}var vo,dg;function pE(){if(dg)return vo;dg=1;var e=ot(),n=Sf(),t=um();vo=r;function r(i,s){var o=new n,a={},f=new t,c;function d(m){var y=m.v===c?m.w:m.v,x=f.priority(y);if(x!==void 0){var _=s(m);_<x&&(a[y]=c,f.decrease(y,_))}}if(i.nodeCount()===0)return o;e.each(i.nodes(),function(m){f.add(m,Number.POSITIVE_INFINITY),o.setNode(m)}),f.decrease(i.nodes()[0],0);for(var p=!1;f.size()>0;){if(c=f.removeMin(),e.has(a,c))o.setEdge(c,a[c]);else{if(p)throw new Error("Input graph is not connected: "+i);p=!0}i.nodeEdges(c).forEach(d)}return o}return vo}var mo,lg;function vE(){return lg||(lg=1,mo={components:uE(),dijkstra:fm(),dijkstraAll:fE(),findCycles:cE(),floydWarshall:dE(),isAcyclic:lE(),postorder:hE(),preorder:gE(),prim:pE(),tarjan:cm(),topsort:dm()}),mo}var yo,hg;function mE(){if(hg)return yo;hg=1;var e=aE();return yo={Graph:e.Graph,json:oE(),alg:vE(),version:e.version},yo}var wo,gg;function dt(){if(gg)return wo;gg=1;var e;if(typeof cf=="function")try{e=mE()}catch{}return e||(e=window.graphlib),wo=e,wo}var bo,pg;function yE(){if(pg)return bo;pg=1;var e=Lv(),n=1,t=4;function r(i){return e(i,n|t)}return bo=r,bo}var _o,vg;function ar(){if(vg)return _o;vg=1;var e=Zt(),n=Mt(),t=Jn(),r=at();function i(s,o,a){if(!r(a))return!1;var f=typeof o;return(f=="number"?n(a)&&t(o,a.length):f=="string"&&o in a)?e(a[o],s):!1}return _o=i,_o}var Eo,mg;function wE(){if(mg)return Eo;mg=1;var e=sr(),n=Zt(),t=ar(),r=zt(),i=Object.prototype,s=i.hasOwnProperty,o=e(function(a,f){a=Object(a);var c=-1,d=f.length,p=d>2?f[2]:void 0;for(p&&t(f[0],f[1],p)&&(d=1);++c<d;)for(var m=f[c],y=r(m),x=-1,_=y.length;++x<_;){var b=y[x],w=a[b];(w===void 0||n(w,i[b])&&!s.call(a,b))&&(a[b]=m[b])}return a});return Eo=o,Eo}var xo,yg;function bE(){if(yg)return xo;yg=1;var e=St(),n=Mt(),t=It();function r(i){return function(s,o,a){var f=Object(s);if(!n(s)){var c=e(o,3);s=t(s),o=function(p){return c(f[p],p,f)}}var d=i(s,o,a);return d>-1?f[c?s[d]:d]:void 0}}return xo=r,xo}var No,wg;function _E(){if(wg)return No;wg=1;var e=/\s/;function n(t){for(var r=t.length;r--&&e.test(t.charAt(r)););return r}return No=n,No}var Mo,bg;function EE(){if(bg)return Mo;bg=1;var e=_E(),n=/^\s+/;function t(r){return r&&r.slice(0,e(r)+1).replace(n,"")}return Mo=t,Mo}var So,_g;function xE(){if(_g)return So;_g=1;var e=EE(),n=at(),t=en(),r=NaN,i=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,o=/^0o[0-7]+$/i,a=parseInt;function f(c){if(typeof c=="number")return c;if(t(c))return r;if(n(c)){var d=typeof c.valueOf=="function"?c.valueOf():c;c=n(d)?d+"":d}if(typeof c!="string")return c===0?c:+c;c=e(c);var p=s.test(c);return p||o.test(c)?a(c.slice(2),p?2:8):i.test(c)?r:+c}return So=f,So}var qo,Eg;function hm(){if(Eg)return qo;Eg=1;var e=xE(),n=1/0,t=17976931348623157e292;function r(i){if(!i)return i===0?i:0;if(i=e(i),i===n||i===-1/0){var s=i<0?-1:1;return s*t}return i===i?i:0}return qo=r,qo}var Ro,xg;function NE(){if(xg)return Ro;xg=1;var e=hm();function n(t){var r=e(t),i=r%1;return r===r?i?r-i:r:0}return Ro=n,Ro}var Oo,Ng;function ME(){if(Ng)return Oo;Ng=1;var e=sm(),n=St(),t=NE(),r=Math.max;function i(s,o,a){var f=s==null?0:s.length;if(!f)return-1;var c=a==null?0:t(a);return c<0&&(c=r(f+c,0)),e(s,n(o,3),c)}return Oo=i,Oo}var Ao,Mg;function SE(){if(Mg)return Ao;Mg=1;var e=bE(),n=ME(),t=e(n);return Ao=t,Ao}var Io,Sg;function gm(){if(Sg)return Io;Sg=1;var e=Mf();function n(t){var r=t==null?0:t.length;return r?e(t,1):[]}return Io=n,Io}var To,qg;function qE(){if(qg)return To;qg=1;var e=_f(),n=Dv(),t=zt();function r(i,s){return i==null?i:e(i,n(s),t)}return To=r,To}var ko,Rg;function RE(){if(Rg)return ko;Rg=1;function e(n){var t=n==null?0:n.length;return t?n[t-1]:void 0}return ko=e,ko}var jo,Og;function OE(){if(Og)return jo;Og=1;var e=Xn(),n=Ef(),t=St();function r(i,s){var o={};return s=t(s,3),n(i,function(a,f,c){e(o,f,s(a,f,c))}),o}return jo=r,jo}var Co,Ag;function qf(){if(Ag)return Co;Ag=1;var e=en();function n(t,r,i){for(var s=-1,o=t.length;++s<o;){var a=t[s],f=r(a);if(f!=null&&(c===void 0?f===f&&!e(f):i(f,c)))var c=f,d=a}return d}return Co=n,Co}var Po,Ig;function AE(){if(Ig)return Po;Ig=1;function e(n,t){return n>t}return Po=e,Po}var Lo,Tg;function IE(){if(Tg)return Lo;Tg=1;var e=qf(),n=AE(),t=Ft();function r(i){return i&&i.length?e(i,t,n):void 0}return Lo=r,Lo}var Do,kg;function pm(){if(kg)return Do;kg=1;var e=Xn(),n=Zt();function t(r,i,s){(s!==void 0&&!n(r[i],s)||s===void 0&&!(i in r))&&e(r,i,s)}return Do=t,Do}var zo,jg;function TE(){if(jg)return zo;jg=1;var e=Lt(),n=er(),t=vt(),r="[object Object]",i=Function.prototype,s=Object.prototype,o=i.toString,a=s.hasOwnProperty,f=o.call(Object);function c(d){if(!t(d)||e(d)!=r)return!1;var p=n(d);if(p===null)return!0;var m=a.call(p,"constructor")&&p.constructor;return typeof m=="function"&&m instanceof m&&o.call(m)==f}return zo=c,zo}var Fo,Cg;function vm(){if(Cg)return Fo;Cg=1;function e(n,t){if(!(t==="constructor"&&typeof n[t]=="function")&&t!="__proto__")return n[t]}return Fo=e,Fo}var Bo,Pg;function kE(){if(Pg)return Bo;Pg=1;var e=pn(),n=zt();function t(r){return e(r,n(r))}return Bo=t,Bo}var $o,Lg;function jE(){if(Lg)return $o;Lg=1;var e=pm(),n=Mv(),t=jv(),r=Sv(),i=Pv(),s=vn(),o=De(),a=am(),f=Qt(),c=gn(),d=at(),p=TE(),m=mn(),y=vm(),x=kE();function _(b,w,E,N,S,R,A){var j=y(b,E),I=y(w,E),D=A.get(I);if(D){e(b,E,D);return}var z=R?R(j,I,E+"",b,w,A):void 0,$=z===void 0;if($){var V=o(I),Y=!V&&f(I),ee=!V&&!Y&&m(I);z=I,V||Y||ee?o(j)?z=j:a(j)?z=r(j):Y?($=!1,z=n(I,!0)):ee?($=!1,z=t(I,!0)):z=[]:p(I)||s(I)?(z=j,s(j)?z=x(j):(!d(j)||c(j))&&(z=i(I))):$=!1}$&&(A.set(I,z),S(z,I,N,R,A),A.delete(I)),e(b,E,z)}return $o=_,$o}var Go,Dg;function CE(){if(Dg)return Go;Dg=1;var e=Kn(),n=pm(),t=_f(),r=jE(),i=at(),s=zt(),o=vm();function a(f,c,d,p,m){f!==c&&t(c,function(y,x){if(m||(m=new e),i(y))r(f,c,x,d,a,p,m);else{var _=p?p(o(f,x),y,x+"",f,c,m):void 0;_===void 0&&(_=y),n(f,x,_)}},s)}return Go=a,Go}var Uo,zg;function PE(){if(zg)return Uo;zg=1;var e=sr(),n=ar();function t(r){return e(function(i,s){var o=-1,a=s.length,f=a>1?s[a-1]:void 0,c=a>2?s[2]:void 0;for(f=r.length>3&&typeof f=="function"?(a--,f):void 0,c&&n(s[0],s[1],c)&&(f=a<3?void 0:f,a=1),i=Object(i);++o<a;){var d=s[o];d&&r(i,d,o,f)}return i})}return Uo=t,Uo}var Vo,Fg;function LE(){if(Fg)return Vo;Fg=1;var e=CE(),n=PE(),t=n(function(r,i,s){e(r,i,s)});return Vo=t,Vo}var Wo,Bg;function mm(){if(Bg)return Wo;Bg=1;function e(n,t){return n<t}return Wo=e,Wo}var Yo,$g;function DE(){if($g)return Yo;$g=1;var e=qf(),n=mm(),t=Ft();function r(i){return i&&i.length?e(i,t,n):void 0}return Yo=r,Yo}var Ko,Gg;function zE(){if(Gg)return Ko;Gg=1;var e=qf(),n=St(),t=mm();function r(i,s){return i&&i.length?e(i,n(s,2),t):void 0}return Ko=r,Ko}var Xo,Ug;function FE(){if(Ug)return Xo;Ug=1;var e=lt(),n=function(){return e.Date.now()};return Xo=n,Xo}var Zo,Vg;function BE(){if(Vg)return Zo;Vg=1;var e=Zn(),n=rr(),t=Jn(),r=at(),i=yn();function s(o,a,f,c){if(!r(o))return o;a=n(a,o);for(var d=-1,p=a.length,m=p-1,y=o;y!=null&&++d<p;){var x=i(a[d]),_=f;if(x==="__proto__"||x==="constructor"||x==="prototype")return o;if(d!=m){var b=y[x];_=c?c(b,x,y):void 0,_===void 0&&(_=r(b)?b:t(a[d+1])?[]:{})}e(y,x,_),y=y[x]}return o}return Zo=s,Zo}var Jo,Wg;function $E(){if(Wg)return Jo;Wg=1;var e=ir(),n=BE(),t=rr();function r(i,s,o){for(var a=-1,f=s.length,c={};++a<f;){var d=s[a],p=e(i,d);o(p,d)&&n(c,t(d,i),p)}return c}return Jo=r,Jo}var Qo,Yg;function GE(){if(Yg)return Qo;Yg=1;var e=$E(),n=Xv();function t(r,i){return e(r,i,function(s,o){return n(r,o)})}return Qo=t,Qo}var Ho,Kg;function UE(){if(Kg)return Ho;Kg=1;var e=gm(),n=rm(),t=im();function r(i){return t(n(i,void 0,e),i+"")}return Ho=r,Ho}var eu,Xg;function VE(){if(Xg)return eu;Xg=1;var e=GE(),n=UE(),t=n(function(r,i){return r==null?{}:e(r,i)});return eu=t,eu}var tu,Zg;function WE(){if(Zg)return tu;Zg=1;var e=Math.ceil,n=Math.max;function t(r,i,s,o){for(var a=-1,f=n(e((i-r)/(s||1)),0),c=Array(f);f--;)c[o?f:++a]=r,r+=s;return c}return tu=t,tu}var nu,Jg;function YE(){if(Jg)return nu;Jg=1;var e=WE(),n=ar(),t=hm();function r(i){return function(s,o,a){return a&&typeof a!="number"&&n(s,o,a)&&(o=a=void 0),s=t(s),o===void 0?(o=s,s=0):o=t(o),a=a===void 0?s<o?1:-1:t(a),e(s,o,a,i)}}return nu=r,nu}var ru,Qg;function KE(){if(Qg)return ru;Qg=1;var e=YE(),n=e();return ru=n,ru}var iu,Hg;function XE(){if(Hg)return iu;Hg=1;function e(n,t){var r=n.length;for(n.sort(t);r--;)n[r]=n[r].value;return n}return iu=e,iu}var su,ep;function ZE(){if(ep)return su;ep=1;var e=en();function n(t,r){if(t!==r){var i=t!==void 0,s=t===null,o=t===t,a=e(t),f=r!==void 0,c=r===null,d=r===r,p=e(r);if(!c&&!p&&!a&&t>r||a&&f&&d&&!c&&!p||s&&f&&d||!i&&d||!o)return 1;if(!s&&!a&&!p&&t<r||p&&i&&o&&!s&&!a||c&&i&&o||!f&&o||!d)return-1}return 0}return su=n,su}var au,tp;function JE(){if(tp)return au;tp=1;var e=ZE();function n(t,r,i){for(var s=-1,o=t.criteria,a=r.criteria,f=o.length,c=i.length;++s<f;){var d=e(o[s],a[s]);if(d){if(s>=c)return d;var p=i[s];return d*(p=="desc"?-1:1)}}return t.index-r.index}return au=n,au}var ou,np;function QE(){if(np)return ou;np=1;var e=nr(),n=ir(),t=St(),r=em(),i=XE(),s=Qn(),o=JE(),a=Ft(),f=De();function c(d,p,m){p.length?p=e(p,function(_){return f(_)?function(b){return n(b,_.length===1?_[0]:_)}:_}):p=[a];var y=-1;p=e(p,s(t));var x=r(d,function(_,b,w){var E=e(p,function(N){return N(_)});return{criteria:E,index:++y,value:_}});return i(x,function(_,b){return o(_,b,m)})}return ou=c,ou}var uu,rp;function HE(){if(rp)return uu;rp=1;var e=Mf(),n=QE(),t=sr(),r=ar(),i=t(function(s,o){if(s==null)return[];var a=o.length;return a>1&&r(s,o[0],o[1])?o=[]:a>2&&r(o[0],o[1],o[2])&&(o=[o[0]]),n(s,e(o,1),[])});return uu=i,uu}var fu,ip;function ex(){if(ip)return fu;ip=1;var e=Yv(),n=0;function t(r){var i=++n;return e(r)+i}return fu=t,fu}var cu,sp;function tx(){if(sp)return cu;sp=1;function e(n,t,r){for(var i=-1,s=n.length,o=t.length,a={};++i<s;){var f=i<o?t[i]:void 0;r(a,n[i],f)}return a}return cu=e,cu}var du,ap;function nx(){if(ap)return du;ap=1;var e=Zn(),n=tx();function t(r,i){return n(r||[],i||[],e)}return du=t,du}var lu,op;function je(){if(op)return lu;op=1;var e;if(typeof cf=="function")try{e={cloneDeep:yE(),constant:bf(),defaults:wE(),each:Fv(),filter:Jv(),find:SE(),flatten:gm(),forEach:zv(),forIn:qE(),has:Qv(),isUndefined:Hv(),last:RE(),map:tm(),mapValues:OE(),max:IE(),merge:LE(),min:DE(),minBy:zE(),now:FE(),pick:VE(),range:KE(),reduce:nm(),sortBy:HE(),uniqueId:ex(),values:om(),zipObject:nx()}}catch{}return e||(e=window._),lu=e,lu}var hu,up;function rx(){if(up)return hu;up=1,hu=e;function e(){var r={};r._next=r._prev=r,this._sentinel=r}e.prototype.dequeue=function(){var r=this._sentinel,i=r._prev;if(i!==r)return n(i),i},e.prototype.enqueue=function(r){var i=this._sentinel;r._prev&&r._next&&n(r),r._next=i._next,i._next._prev=r,i._next=r,r._prev=i},e.prototype.toString=function(){for(var r=[],i=this._sentinel,s=i._prev;s!==i;)r.push(JSON.stringify(s,t)),s=s._prev;return"["+r.join(", ")+"]"};function n(r){r._prev._next=r._next,r._next._prev=r._prev,delete r._next,delete r._prev}function t(r,i){if(r!=="_next"&&r!=="_prev")return i}return hu}var gu,fp;function ix(){if(fp)return gu;fp=1;var e=je(),n=dt().Graph,t=rx();gu=i;var r=e.constant(1);function i(c,d){if(c.nodeCount()<=1)return[];var p=a(c,d||r),m=s(p.graph,p.buckets,p.zeroIdx);return e.flatten(e.map(m,function(y){return c.outEdges(y.v,y.w)}),!0)}function s(c,d,p){for(var m=[],y=d[d.length-1],x=d[0],_;c.nodeCount();){for(;_=x.dequeue();)o(c,d,p,_);for(;_=y.dequeue();)o(c,d,p,_);if(c.nodeCount()){for(var b=d.length-2;b>0;--b)if(_=d[b].dequeue(),_){m=m.concat(o(c,d,p,_,!0));break}}}return m}function o(c,d,p,m,y){var x=y?[]:void 0;return e.forEach(c.inEdges(m.v),function(_){var b=c.edge(_),w=c.node(_.v);y&&x.push({v:_.v,w:_.w}),w.out-=b,f(d,p,w)}),e.forEach(c.outEdges(m.v),function(_){var b=c.edge(_),w=_.w,E=c.node(w);E.in-=b,f(d,p,E)}),c.removeNode(m.v),x}function a(c,d){var p=new n,m=0,y=0;e.forEach(c.nodes(),function(b){p.setNode(b,{v:b,in:0,out:0})}),e.forEach(c.edges(),function(b){var w=p.edge(b.v,b.w)||0,E=d(b),N=w+E;p.setEdge(b.v,b.w,N),y=Math.max(y,p.node(b.v).out+=E),m=Math.max(m,p.node(b.w).in+=E)});var x=e.range(y+m+3).map(function(){return new t}),_=m+1;return e.forEach(p.nodes(),function(b){f(x,_,p.node(b))}),{graph:p,buckets:x,zeroIdx:_}}function f(c,d,p){p.out?p.in?c[p.out-p.in+d].enqueue(p):c[c.length-1].enqueue(p):c[0].enqueue(p)}return gu}var pu,cp;function sx(){if(cp)return pu;cp=1;var e=je(),n=ix();pu={run:t,undo:i};function t(s){var o=s.graph().acyclicer==="greedy"?n(s,a(s)):r(s);e.forEach(o,function(f){var c=s.edge(f);s.removeEdge(f),c.forwardName=f.name,c.reversed=!0,s.setEdge(f.w,f.v,c,e.uniqueId("rev"))});function a(f){return function(c){return f.edge(c).weight}}}function r(s){var o=[],a={},f={};function c(d){e.has(f,d)||(f[d]=!0,a[d]=!0,e.forEach(s.outEdges(d),function(p){e.has(a,p.w)?o.push(p):c(p.w)}),delete a[d])}return e.forEach(s.nodes(),c),o}function i(s){e.forEach(s.edges(),function(o){var a=s.edge(o);if(a.reversed){s.removeEdge(o);var f=a.forwardName;delete a.reversed,delete a.forwardName,s.setEdge(o.w,o.v,a,f)}})}return pu}var vu,dp;function et(){if(dp)return vu;dp=1;var e=je(),n=dt().Graph;vu={addDummyNode:t,simplify:r,asNonCompoundGraph:i,successorWeights:s,predecessorWeights:o,intersectRect:a,buildLayerMatrix:f,normalizeRanks:c,removeEmptyRanks:d,addBorderNode:p,maxRank:m,partition:y,time:x,notime:_};function t(b,w,E,N){var S;do S=e.uniqueId(N);while(b.hasNode(S));return E.dummy=w,b.setNode(S,E),S}function r(b){var w=new n().setGraph(b.graph());return e.forEach(b.nodes(),function(E){w.setNode(E,b.node(E))}),e.forEach(b.edges(),function(E){var N=w.edge(E.v,E.w)||{weight:0,minlen:1},S=b.edge(E);w.setEdge(E.v,E.w,{weight:N.weight+S.weight,minlen:Math.max(N.minlen,S.minlen)})}),w}function i(b){var w=new n({multigraph:b.isMultigraph()}).setGraph(b.graph());return e.forEach(b.nodes(),function(E){b.children(E).length||w.setNode(E,b.node(E))}),e.forEach(b.edges(),function(E){w.setEdge(E,b.edge(E))}),w}function s(b){var w=e.map(b.nodes(),function(E){var N={};return e.forEach(b.outEdges(E),function(S){N[S.w]=(N[S.w]||0)+b.edge(S).weight}),N});return e.zipObject(b.nodes(),w)}function o(b){var w=e.map(b.nodes(),function(E){var N={};return e.forEach(b.inEdges(E),function(S){N[S.v]=(N[S.v]||0)+b.edge(S).weight}),N});return e.zipObject(b.nodes(),w)}function a(b,w){var E=b.x,N=b.y,S=w.x-E,R=w.y-N,A=b.width/2,j=b.height/2;if(!S&&!R)throw new Error("Not possible to find intersection inside of the rectangle");var I,D;return Math.abs(R)*A>Math.abs(S)*j?(R<0&&(j=-j),I=j*S/R,D=j):(S<0&&(A=-A),I=A,D=A*R/S),{x:E+I,y:N+D}}function f(b){var w=e.map(e.range(m(b)+1),function(){return[]});return e.forEach(b.nodes(),function(E){var N=b.node(E),S=N.rank;e.isUndefined(S)||(w[S][N.order]=E)}),w}function c(b){var w=e.min(e.map(b.nodes(),function(E){return b.node(E).rank}));e.forEach(b.nodes(),function(E){var N=b.node(E);e.has(N,"rank")&&(N.rank-=w)})}function d(b){var w=e.min(e.map(b.nodes(),function(R){return b.node(R).rank})),E=[];e.forEach(b.nodes(),function(R){var A=b.node(R).rank-w;E[A]||(E[A]=[]),E[A].push(R)});var N=0,S=b.graph().nodeRankFactor;e.forEach(E,function(R,A){e.isUndefined(R)&&A%S!==0?--N:N&&e.forEach(R,function(j){b.node(j).rank+=N})})}function p(b,w,E,N){var S={width:0,height:0};return arguments.length>=4&&(S.rank=E,S.order=N),t(b,"border",S,w)}function m(b){return e.max(e.map(b.nodes(),function(w){var E=b.node(w).rank;if(!e.isUndefined(E))return E}))}function y(b,w){var E={lhs:[],rhs:[]};return e.forEach(b,function(N){w(N)?E.lhs.push(N):E.rhs.push(N)}),E}function x(b,w){var E=e.now();try{return w()}finally{console.log(b+" time: "+(e.now()-E)+"ms")}}function _(b,w){return w()}return vu}var mu,lp;function ax(){if(lp)return mu;lp=1;var e=je(),n=et();mu={run:t,undo:i};function t(s){s.graph().dummyChains=[],e.forEach(s.edges(),function(o){r(s,o)})}function r(s,o){var a=o.v,f=s.node(a).rank,c=o.w,d=s.node(c).rank,p=o.name,m=s.edge(o),y=m.labelRank;if(d!==f+1){s.removeEdge(o);var x,_,b;for(b=0,++f;f<d;++b,++f)m.points=[],_={width:0,height:0,edgeLabel:m,edgeObj:o,rank:f},x=n.addDummyNode(s,"edge",_,"_d"),f===y&&(_.width=m.width,_.height=m.height,_.dummy="edge-label",_.labelpos=m.labelpos),s.setEdge(a,x,{weight:m.weight},p),b===0&&s.graph().dummyChains.push(x),a=x;s.setEdge(a,c,{weight:m.weight},p)}}function i(s){e.forEach(s.graph().dummyChains,function(o){var a=s.node(o),f=a.edgeLabel,c;for(s.setEdge(a.edgeObj,f);a.dummy;)c=s.successors(o)[0],s.removeNode(o),f.points.push({x:a.x,y:a.y}),a.dummy==="edge-label"&&(f.x=a.x,f.y=a.y,f.width=a.width,f.height=a.height),o=c,a=s.node(o)})}return mu}var yu,hp;function Fn(){if(hp)return yu;hp=1;var e=je();yu={longestPath:n,slack:t};function n(r){var i={};function s(o){var a=r.node(o);if(e.has(i,o))return a.rank;i[o]=!0;var f=e.min(e.map(r.outEdges(o),function(c){return s(c.w)-r.edge(c).minlen}));return(f===Number.POSITIVE_INFINITY||f===void 0||f===null)&&(f=0),a.rank=f}e.forEach(r.sources(),s)}function t(r,i){return r.node(i.w).rank-r.node(i.v).rank-r.edge(i).minlen}return yu}var wu,gp;function ym(){if(gp)return wu;gp=1;var e=je(),n=dt().Graph,t=Fn().slack;wu=r;function r(a){var f=new n({directed:!1}),c=a.nodes()[0],d=a.nodeCount();f.setNode(c,{});for(var p,m;i(f,a)<d;)p=s(f,a),m=f.hasNode(p.v)?t(a,p):-t(a,p),o(f,a,m);return f}function i(a,f){function c(d){e.forEach(f.nodeEdges(d),function(p){var m=p.v,y=d===m?p.w:m;!a.hasNode(y)&&!t(f,p)&&(a.setNode(y,{}),a.setEdge(d,y,{}),c(y))})}return e.forEach(a.nodes(),c),a.nodeCount()}function s(a,f){return e.minBy(f.edges(),function(c){if(a.hasNode(c.v)!==a.hasNode(c.w))return t(f,c)})}function o(a,f,c){e.forEach(a.nodes(),function(d){f.node(d).rank+=c})}return wu}var bu,pp;function ox(){if(pp)return bu;pp=1;var e=je(),n=ym(),t=Fn().slack,r=Fn().longestPath,i=dt().alg.preorder,s=dt().alg.postorder,o=et().simplify;bu=a,a.initLowLimValues=p,a.initCutValues=f,a.calcCutValue=d,a.leaveEdge=y,a.enterEdge=x,a.exchangeEdges=_;function a(N){N=o(N),r(N);var S=n(N);p(S),f(S,N);for(var R,A;R=y(S);)A=x(S,N,R),_(S,N,R,A)}function f(N,S){var R=s(N,N.nodes());R=R.slice(0,R.length-1),e.forEach(R,function(A){c(N,S,A)})}function c(N,S,R){var A=N.node(R),j=A.parent;N.edge(R,j).cutvalue=d(N,S,R)}function d(N,S,R){var A=N.node(R),j=A.parent,I=!0,D=S.edge(R,j),z=0;return D||(I=!1,D=S.edge(j,R)),z=D.weight,e.forEach(S.nodeEdges(R),function($){var V=$.v===R,Y=V?$.w:$.v;if(Y!==j){var ee=V===I,J=S.edge($).weight;if(z+=ee?J:-J,w(N,R,Y)){var oe=N.edge(R,Y).cutvalue;z+=ee?-oe:oe}}}),z}function p(N,S){arguments.length<2&&(S=N.nodes()[0]),m(N,{},1,S)}function m(N,S,R,A,j){var I=R,D=N.node(A);return S[A]=!0,e.forEach(N.neighbors(A),function(z){e.has(S,z)||(R=m(N,S,R,z,A))}),D.low=I,D.lim=R++,j?D.parent=j:delete D.parent,R}function y(N){return e.find(N.edges(),function(S){return N.edge(S).cutvalue<0})}function x(N,S,R){var A=R.v,j=R.w;S.hasEdge(A,j)||(A=R.w,j=R.v);var I=N.node(A),D=N.node(j),z=I,$=!1;I.lim>D.lim&&(z=D,$=!0);var V=e.filter(S.edges(),function(Y){return $===E(N,N.node(Y.v),z)&&$!==E(N,N.node(Y.w),z)});return e.minBy(V,function(Y){return t(S,Y)})}function _(N,S,R,A){var j=R.v,I=R.w;N.removeEdge(j,I),N.setEdge(A.v,A.w,{}),p(N),f(N,S),b(N,S)}function b(N,S){var R=e.find(N.nodes(),function(j){return!S.node(j).parent}),A=i(N,R);A=A.slice(1),e.forEach(A,function(j){var I=N.node(j).parent,D=S.edge(j,I),z=!1;D||(D=S.edge(I,j),z=!0),S.node(j).rank=S.node(I).rank+(z?D.minlen:-D.minlen)})}function w(N,S,R){return N.hasEdge(S,R)}function E(N,S,R){return R.low<=S.lim&&S.lim<=R.lim}return bu}var _u,vp;function ux(){if(vp)return _u;vp=1;var e=Fn(),n=e.longestPath,t=ym(),r=ox();_u=i;function i(f){switch(f.graph().ranker){case"network-simplex":a(f);break;case"tight-tree":o(f);break;case"longest-path":s(f);break;default:a(f)}}var s=n;function o(f){n(f),t(f)}function a(f){r(f)}return _u}var Eu,mp;function fx(){if(mp)return Eu;mp=1;var e=je();Eu=n;function n(i){var s=r(i);e.forEach(i.graph().dummyChains,function(o){for(var a=i.node(o),f=a.edgeObj,c=t(i,s,f.v,f.w),d=c.path,p=c.lca,m=0,y=d[m],x=!0;o!==f.w;){if(a=i.node(o),x){for(;(y=d[m])!==p&&i.node(y).maxRank<a.rank;)m++;y===p&&(x=!1)}if(!x){for(;m<d.length-1&&i.node(y=d[m+1]).minRank<=a.rank;)m++;y=d[m]}i.setParent(o,y),o=i.successors(o)[0]}})}function t(i,s,o,a){var f=[],c=[],d=Math.min(s[o].low,s[a].low),p=Math.max(s[o].lim,s[a].lim),m,y;m=o;do m=i.parent(m),f.push(m);while(m&&(s[m].low>d||p>s[m].lim));for(y=m,m=a;(m=i.parent(m))!==y;)c.push(m);return{path:f.concat(c.reverse()),lca:y}}function r(i){var s={},o=0;function a(f){var c=o;e.forEach(i.children(f),a),s[f]={low:c,lim:o++}}return e.forEach(i.children(),a),s}return Eu}var xu,yp;function cx(){if(yp)return xu;yp=1;var e=je(),n=et();xu={run:t,cleanup:o};function t(a){var f=n.addDummyNode(a,"root",{},"_root"),c=i(a),d=e.max(e.values(c))-1,p=2*d+1;a.graph().nestingRoot=f,e.forEach(a.edges(),function(y){a.edge(y).minlen*=p});var m=s(a)+1;e.forEach(a.children(),function(y){r(a,f,p,m,d,c,y)}),a.graph().nodeRankFactor=p}function r(a,f,c,d,p,m,y){var x=a.children(y);if(!x.length){y!==f&&a.setEdge(f,y,{weight:0,minlen:c});return}var _=n.addBorderNode(a,"_bt"),b=n.addBorderNode(a,"_bb"),w=a.node(y);a.setParent(_,y),w.borderTop=_,a.setParent(b,y),w.borderBottom=b,e.forEach(x,function(E){r(a,f,c,d,p,m,E);var N=a.node(E),S=N.borderTop?N.borderTop:E,R=N.borderBottom?N.borderBottom:E,A=N.borderTop?d:2*d,j=S!==R?1:p-m[y]+1;a.setEdge(_,S,{weight:A,minlen:j,nestingEdge:!0}),a.setEdge(R,b,{weight:A,minlen:j,nestingEdge:!0})}),a.parent(y)||a.setEdge(f,_,{weight:0,minlen:p+m[y]})}function i(a){var f={};function c(d,p){var m=a.children(d);m&&m.length&&e.forEach(m,function(y){c(y,p+1)}),f[d]=p}return e.forEach(a.children(),function(d){c(d,1)}),f}function s(a){return e.reduce(a.edges(),function(f,c){return f+a.edge(c).weight},0)}function o(a){var f=a.graph();a.removeNode(f.nestingRoot),delete f.nestingRoot,e.forEach(a.edges(),function(c){var d=a.edge(c);d.nestingEdge&&a.removeEdge(c)})}return xu}var Nu,wp;function dx(){if(wp)return Nu;wp=1;var e=je(),n=et();Nu=t;function t(i){function s(o){var a=i.children(o),f=i.node(o);if(a.length&&e.forEach(a,s),e.has(f,"minRank")){f.borderLeft=[],f.borderRight=[];for(var c=f.minRank,d=f.maxRank+1;c<d;++c)r(i,"borderLeft","_bl",o,f,c),r(i,"borderRight","_br",o,f,c)}}e.forEach(i.children(),s)}function r(i,s,o,a,f,c){var d={width:0,height:0,rank:c,borderType:s},p=f[s][c-1],m=n.addDummyNode(i,"border",d,o);f[s][c]=m,i.setParent(m,a),p&&i.setEdge(p,m,{weight:1})}return Nu}var Mu,bp;function lx(){if(bp)return Mu;bp=1;var e=je();Mu={adjust:n,undo:t};function n(c){var d=c.graph().rankdir.toLowerCase();(d==="lr"||d==="rl")&&r(c)}function t(c){var d=c.graph().rankdir.toLowerCase();(d==="bt"||d==="rl")&&s(c),(d==="lr"||d==="rl")&&(a(c),r(c))}function r(c){e.forEach(c.nodes(),function(d){i(c.node(d))}),e.forEach(c.edges(),function(d){i(c.edge(d))})}function i(c){var d=c.width;c.width=c.height,c.height=d}function s(c){e.forEach(c.nodes(),function(d){o(c.node(d))}),e.forEach(c.edges(),function(d){var p=c.edge(d);e.forEach(p.points,o),e.has(p,"y")&&o(p)})}function o(c){c.y=-c.y}function a(c){e.forEach(c.nodes(),function(d){f(c.node(d))}),e.forEach(c.edges(),function(d){var p=c.edge(d);e.forEach(p.points,f),e.has(p,"x")&&f(p)})}function f(c){var d=c.x;c.x=c.y,c.y=d}return Mu}var Su,_p;function hx(){if(_p)return Su;_p=1;var e=je();Su=n;function n(t){var r={},i=e.filter(t.nodes(),function(c){return!t.children(c).length}),s=e.max(e.map(i,function(c){return t.node(c).rank})),o=e.map(e.range(s+1),function(){return[]});function a(c){if(!e.has(r,c)){r[c]=!0;var d=t.node(c);o[d.rank].push(c),e.forEach(t.successors(c),a)}}var f=e.sortBy(i,function(c){return t.node(c).rank});return e.forEach(f,a),o}return Su}var qu,Ep;function gx(){if(Ep)return qu;Ep=1;var e=je();qu=n;function n(r,i){for(var s=0,o=1;o<i.length;++o)s+=t(r,i[o-1],i[o]);return s}function t(r,i,s){for(var o=e.zipObject(s,e.map(s,function(m,y){return y})),a=e.flatten(e.map(i,function(m){return e.sortBy(e.map(r.outEdges(m),function(y){return{pos:o[y.w],weight:r.edge(y).weight}}),"pos")}),!0),f=1;f<s.length;)f<<=1;var c=2*f-1;f-=1;var d=e.map(new Array(c),function(){return 0}),p=0;return e.forEach(a.forEach(function(m){var y=m.pos+f;d[y]+=m.weight;for(var x=0;y>0;)y%2&&(x+=d[y+1]),y=y-1>>1,d[y]+=m.weight;p+=m.weight*x})),p}return qu}var Ru,xp;function px(){if(xp)return Ru;xp=1;var e=je();Ru=n;function n(t,r){return e.map(r,function(i){var s=t.inEdges(i);if(s.length){var o=e.reduce(s,function(a,f){var c=t.edge(f),d=t.node(f.v);return{sum:a.sum+c.weight*d.order,weight:a.weight+c.weight}},{sum:0,weight:0});return{v:i,barycenter:o.sum/o.weight,weight:o.weight}}else return{v:i}})}return Ru}var Ou,Np;function vx(){if(Np)return Ou;Np=1;var e=je();Ou=n;function n(i,s){var o={};e.forEach(i,function(f,c){var d=o[f.v]={indegree:0,in:[],out:[],vs:[f.v],i:c};e.isUndefined(f.barycenter)||(d.barycenter=f.barycenter,d.weight=f.weight)}),e.forEach(s.edges(),function(f){var c=o[f.v],d=o[f.w];!e.isUndefined(c)&&!e.isUndefined(d)&&(d.indegree++,c.out.push(o[f.w]))});var a=e.filter(o,function(f){return!f.indegree});return t(a)}function t(i){var s=[];function o(c){return function(d){d.merged||(e.isUndefined(d.barycenter)||e.isUndefined(c.barycenter)||d.barycenter>=c.barycenter)&&r(c,d)}}function a(c){return function(d){d.in.push(c),--d.indegree===0&&i.push(d)}}for(;i.length;){var f=i.pop();s.push(f),e.forEach(f.in.reverse(),o(f)),e.forEach(f.out,a(f))}return e.map(e.filter(s,function(c){return!c.merged}),function(c){return e.pick(c,["vs","i","barycenter","weight"])})}function r(i,s){var o=0,a=0;i.weight&&(o+=i.barycenter*i.weight,a+=i.weight),s.weight&&(o+=s.barycenter*s.weight,a+=s.weight),i.vs=s.vs.concat(i.vs),i.barycenter=o/a,i.weight=a,i.i=Math.min(s.i,i.i),s.merged=!0}return Ou}var Au,Mp;function mx(){if(Mp)return Au;Mp=1;var e=je(),n=et();Au=t;function t(s,o){var a=n.partition(s,function(_){return e.has(_,"barycenter")}),f=a.lhs,c=e.sortBy(a.rhs,function(_){return-_.i}),d=[],p=0,m=0,y=0;f.sort(i(!!o)),y=r(d,c,y),e.forEach(f,function(_){y+=_.vs.length,d.push(_.vs),p+=_.barycenter*_.weight,m+=_.weight,y=r(d,c,y)});var x={vs:e.flatten(d,!0)};return m&&(x.barycenter=p/m,x.weight=m),x}function r(s,o,a){for(var f;o.length&&(f=e.last(o)).i<=a;)o.pop(),s.push(f.vs),a++;return a}function i(s){return function(o,a){return o.barycenter<a.barycenter?-1:o.barycenter>a.barycenter?1:s?a.i-o.i:o.i-a.i}}return Au}var Iu,Sp;function yx(){if(Sp)return Iu;Sp=1;var e=je(),n=px(),t=vx(),r=mx();Iu=i;function i(a,f,c,d){var p=a.children(f),m=a.node(f),y=m?m.borderLeft:void 0,x=m?m.borderRight:void 0,_={};y&&(p=e.filter(p,function(R){return R!==y&&R!==x}));var b=n(a,p);e.forEach(b,function(R){if(a.children(R.v).length){var A=i(a,R.v,c,d);_[R.v]=A,e.has(A,"barycenter")&&o(R,A)}});var w=t(b,c);s(w,_);var E=r(w,d);if(y&&(E.vs=e.flatten([y,E.vs,x],!0),a.predecessors(y).length)){var N=a.node(a.predecessors(y)[0]),S=a.node(a.predecessors(x)[0]);e.has(E,"barycenter")||(E.barycenter=0,E.weight=0),E.barycenter=(E.barycenter*E.weight+N.order+S.order)/(E.weight+2),E.weight+=2}return E}function s(a,f){e.forEach(a,function(c){c.vs=e.flatten(c.vs.map(function(d){return f[d]?f[d].vs:d}),!0)})}function o(a,f){e.isUndefined(a.barycenter)?(a.barycenter=f.barycenter,a.weight=f.weight):(a.barycenter=(a.barycenter*a.weight+f.barycenter*f.weight)/(a.weight+f.weight),a.weight+=f.weight)}return Iu}var Tu,qp;function wx(){if(qp)return Tu;qp=1;var e=je(),n=dt().Graph;Tu=t;function t(i,s,o){var a=r(i),f=new n({compound:!0}).setGraph({root:a}).setDefaultNodeLabel(function(c){return i.node(c)});return e.forEach(i.nodes(),function(c){var d=i.node(c),p=i.parent(c);(d.rank===s||d.minRank<=s&&s<=d.maxRank)&&(f.setNode(c),f.setParent(c,p||a),e.forEach(i[o](c),function(m){var y=m.v===c?m.w:m.v,x=f.edge(y,c),_=e.isUndefined(x)?0:x.weight;f.setEdge(y,c,{weight:i.edge(m).weight+_})}),e.has(d,"minRank")&&f.setNode(c,{borderLeft:d.borderLeft[s],borderRight:d.borderRight[s]}))}),f}function r(i){for(var s;i.hasNode(s=e.uniqueId("_root")););return s}return Tu}var ku,Rp;function bx(){if(Rp)return ku;Rp=1;var e=je();ku=n;function n(t,r,i){var s={},o;e.forEach(i,function(a){for(var f=t.parent(a),c,d;f;){if(c=t.parent(f),c?(d=s[c],s[c]=f):(d=o,o=f),d&&d!==f){r.setEdge(d,f);return}f=c}})}return ku}var ju,Op;function _x(){if(Op)return ju;Op=1;var e=je(),n=hx(),t=gx(),r=yx(),i=wx(),s=bx(),o=dt().Graph,a=et();ju=f;function f(m){var y=a.maxRank(m),x=c(m,e.range(1,y+1),"inEdges"),_=c(m,e.range(y-1,-1,-1),"outEdges"),b=n(m);p(m,b);for(var w=Number.POSITIVE_INFINITY,E,N=0,S=0;S<4;++N,++S){d(N%2?x:_,N%4>=2),b=a.buildLayerMatrix(m);var R=t(m,b);R<w&&(S=0,E=e.cloneDeep(b),w=R)}p(m,E)}function c(m,y,x){return e.map(y,function(_){return i(m,_,x)})}function d(m,y){var x=new o;e.forEach(m,function(_){var b=_.graph().root,w=r(_,b,x,y);e.forEach(w.vs,function(E,N){_.node(E).order=N}),s(_,x,w.vs)})}function p(m,y){e.forEach(y,function(x){e.forEach(x,function(_,b){m.node(_).order=b})})}return ju}var Cu,Ap;function Ex(){if(Ap)return Cu;Ap=1;var e=je(),n=dt().Graph,t=et();Cu={positionX:x,findType1Conflicts:r,findType2Conflicts:i,addConflict:o,hasConflict:a,verticalAlignment:f,horizontalCompaction:c,alignCoordinates:m,findSmallestWidthAlignment:p,balance:y};function r(w,E){var N={};function S(R,A){var j=0,I=0,D=R.length,z=e.last(A);return e.forEach(A,function($,V){var Y=s(w,$),ee=Y?w.node(Y).order:D;(Y||$===z)&&(e.forEach(A.slice(I,V+1),function(J){e.forEach(w.predecessors(J),function(oe){var be=w.node(oe),Z=be.order;(Z<j||ee<Z)&&!(be.dummy&&w.node(J).dummy)&&o(N,oe,J)})}),I=V+1,j=ee)}),A}return e.reduce(E,S),N}function i(w,E){var N={};function S(A,j,I,D,z){var $;e.forEach(e.range(j,I),function(V){$=A[V],w.node($).dummy&&e.forEach(w.predecessors($),function(Y){var ee=w.node(Y);ee.dummy&&(ee.order<D||ee.order>z)&&o(N,Y,$)})})}function R(A,j){var I=-1,D,z=0;return e.forEach(j,function($,V){if(w.node($).dummy==="border"){var Y=w.predecessors($);Y.length&&(D=w.node(Y[0]).order,S(j,z,V,I,D),z=V,I=D)}S(j,z,j.length,D,A.length)}),j}return e.reduce(E,R),N}function s(w,E){if(w.node(E).dummy)return e.find(w.predecessors(E),function(N){return w.node(N).dummy})}function o(w,E,N){if(E>N){var S=E;E=N,N=S}var R=w[E];R||(w[E]=R={}),R[N]=!0}function a(w,E,N){if(E>N){var S=E;E=N,N=S}return e.has(w[E],N)}function f(w,E,N,S){var R={},A={},j={};return e.forEach(E,function(I){e.forEach(I,function(D,z){R[D]=D,A[D]=D,j[D]=z})}),e.forEach(E,function(I){var D=-1;e.forEach(I,function(z){var $=S(z);if($.length){$=e.sortBy($,function(oe){return j[oe]});for(var V=($.length-1)/2,Y=Math.floor(V),ee=Math.ceil(V);Y<=ee;++Y){var J=$[Y];A[z]===z&&D<j[J]&&!a(N,z,J)&&(A[J]=z,A[z]=R[z]=R[J],D=j[J])}}})}),{root:R,align:A}}function c(w,E,N,S,R){var A={},j=d(w,E,N,R),I=R?"borderLeft":"borderRight";function D(V,Y){for(var ee=j.nodes(),J=ee.pop(),oe={};J;)oe[J]?V(J):(oe[J]=!0,ee.push(J),ee=ee.concat(Y(J))),J=ee.pop()}function z(V){A[V]=j.inEdges(V).reduce(function(Y,ee){return Math.max(Y,A[ee.v]+j.edge(ee))},0)}function $(V){var Y=j.outEdges(V).reduce(function(J,oe){return Math.min(J,A[oe.w]-j.edge(oe))},Number.POSITIVE_INFINITY),ee=w.node(V);Y!==Number.POSITIVE_INFINITY&&ee.borderType!==I&&(A[V]=Math.max(A[V],Y))}return D(z,j.predecessors.bind(j)),D($,j.successors.bind(j)),e.forEach(S,function(V){A[V]=A[N[V]]}),A}function d(w,E,N,S){var R=new n,A=w.graph(),j=_(A.nodesep,A.edgesep,S);return e.forEach(E,function(I){var D;e.forEach(I,function(z){var $=N[z];if(R.setNode($),D){var V=N[D],Y=R.edge(V,$);R.setEdge(V,$,Math.max(j(w,z,D),Y||0))}D=z})}),R}function p(w,E){return e.minBy(e.values(E),function(N){var S=Number.NEGATIVE_INFINITY,R=Number.POSITIVE_INFINITY;return e.forIn(N,function(A,j){var I=b(w,j)/2;S=Math.max(A+I,S),R=Math.min(A-I,R)}),S-R})}function m(w,E){var N=e.values(E),S=e.min(N),R=e.max(N);e.forEach(["u","d"],function(A){e.forEach(["l","r"],function(j){var I=A+j,D=w[I],z;if(D!==E){var $=e.values(D);z=j==="l"?S-e.min($):R-e.max($),z&&(w[I]=e.mapValues(D,function(V){return V+z}))}})})}function y(w,E){return e.mapValues(w.ul,function(N,S){if(E)return w[E.toLowerCase()][S];var R=e.sortBy(e.map(w,S));return(R[1]+R[2])/2})}function x(w){var E=t.buildLayerMatrix(w),N=e.merge(r(w,E),i(w,E)),S={},R;e.forEach(["u","d"],function(j){R=j==="u"?E:e.values(E).reverse(),e.forEach(["l","r"],function(I){I==="r"&&(R=e.map(R,function(V){return e.values(V).reverse()}));var D=(j==="u"?w.predecessors:w.successors).bind(w),z=f(w,R,N,D),$=c(w,R,z.root,z.align,I==="r");I==="r"&&($=e.mapValues($,function(V){return-V})),S[j+I]=$})});var A=p(w,S);return m(S,A),y(S,w.graph().align)}function _(w,E,N){return function(S,R,A){var j=S.node(R),I=S.node(A),D=0,z;if(D+=j.width/2,e.has(j,"labelpos"))switch(j.labelpos.toLowerCase()){case"l":z=-j.width/2;break;case"r":z=j.width/2;break}if(z&&(D+=N?z:-z),z=0,D+=(j.dummy?E:w)/2,D+=(I.dummy?E:w)/2,D+=I.width/2,e.has(I,"labelpos"))switch(I.labelpos.toLowerCase()){case"l":z=I.width/2;break;case"r":z=-I.width/2;break}return z&&(D+=N?z:-z),z=0,D}}function b(w,E){return w.node(E).width}return Cu}var Pu,Ip;function xx(){if(Ip)return Pu;Ip=1;var e=je(),n=et(),t=Ex().positionX;Pu=r;function r(s){s=n.asNonCompoundGraph(s),i(s),e.forEach(t(s),function(o,a){s.node(a).x=o})}function i(s){var o=n.buildLayerMatrix(s),a=s.graph().ranksep,f=0;e.forEach(o,function(c){var d=e.max(e.map(c,function(p){return s.node(p).height}));e.forEach(c,function(p){s.node(p).y=f+d/2}),f+=d+a})}return Pu}var Lu,Tp;function Nx(){if(Tp)return Lu;Tp=1;var e=je(),n=sx(),t=ax(),r=ux(),i=et().normalizeRanks,s=fx(),o=et().removeEmptyRanks,a=cx(),f=dx(),c=lx(),d=_x(),p=xx(),m=et(),y=dt().Graph;Lu=x;function x(G,P){var X=P&&P.debugTiming?m.time:m.notime;X("layout",function(){var te=X("  buildLayoutGraph",function(){return D(G)});X("  runLayout",function(){_(te,X)}),X("  updateInputGraph",function(){b(G,te)})})}function _(G,P){P("    makeSpaceForEdgeLabels",function(){z(G)}),P("    removeSelfEdges",function(){ue(G)}),P("    acyclic",function(){n.run(G)}),P("    nestingGraph.run",function(){a.run(G)}),P("    rank",function(){r(m.asNonCompoundGraph(G))}),P("    injectEdgeLabelProxies",function(){$(G)}),P("    removeEmptyRanks",function(){o(G)}),P("    nestingGraph.cleanup",function(){a.cleanup(G)}),P("    normalizeRanks",function(){i(G)}),P("    assignRankMinMax",function(){V(G)}),P("    removeEdgeLabelProxies",function(){Y(G)}),P("    normalize.run",function(){t.run(G)}),P("    parentDummyChains",function(){s(G)}),P("    addBorderSegments",function(){f(G)}),P("    order",function(){d(G)}),P("    insertSelfEdges",function(){ge(G)}),P("    adjustCoordinateSystem",function(){c.adjust(G)}),P("    position",function(){p(G)}),P("    positionSelfEdges",function(){de(G)}),P("    removeBorderNodes",function(){Z(G)}),P("    normalize.undo",function(){t.undo(G)}),P("    fixupEdgeLabelCoords",function(){oe(G)}),P("    undoCoordinateSystem",function(){c.undo(G)}),P("    translateGraph",function(){ee(G)}),P("    assignNodeIntersects",function(){J(G)}),P("    reversePoints",function(){be(G)}),P("    acyclic.undo",function(){n.undo(G)})}function b(G,P){e.forEach(G.nodes(),function(X){var te=G.node(X),ce=P.node(X);te&&(te.x=ce.x,te.y=ce.y,P.children(X).length&&(te.width=ce.width,te.height=ce.height))}),e.forEach(G.edges(),function(X){var te=G.edge(X),ce=P.edge(X);te.points=ce.points,e.has(ce,"x")&&(te.x=ce.x,te.y=ce.y)}),G.graph().width=P.graph().width,G.graph().height=P.graph().height}var w=["nodesep","edgesep","ranksep","marginx","marginy"],E={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},N=["acyclicer","ranker","rankdir","align"],S=["width","height"],R={width:0,height:0},A=["minlen","weight","width","height","labeloffset"],j={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},I=["labelpos"];function D(G){var P=new y({multigraph:!0,compound:!0}),X=_e(G.graph());return P.setGraph(e.merge({},E,ie(X,w),e.pick(X,N))),e.forEach(G.nodes(),function(te){var ce=_e(G.node(te));P.setNode(te,e.defaults(ie(ce,S),R)),P.setParent(te,G.parent(te))}),e.forEach(G.edges(),function(te){var ce=_e(G.edge(te));P.setEdge(te,e.merge({},j,ie(ce,A),e.pick(ce,I)))}),P}function z(G){var P=G.graph();P.ranksep/=2,e.forEach(G.edges(),function(X){var te=G.edge(X);te.minlen*=2,te.labelpos.toLowerCase()!=="c"&&(P.rankdir==="TB"||P.rankdir==="BT"?te.width+=te.labeloffset:te.height+=te.labeloffset)})}function $(G){e.forEach(G.edges(),function(P){var X=G.edge(P);if(X.width&&X.height){var te=G.node(P.v),ce=G.node(P.w),xe={rank:(ce.rank-te.rank)/2+te.rank,e:P};m.addDummyNode(G,"edge-proxy",xe,"_ep")}})}function V(G){var P=0;e.forEach(G.nodes(),function(X){var te=G.node(X);te.borderTop&&(te.minRank=G.node(te.borderTop).rank,te.maxRank=G.node(te.borderBottom).rank,P=e.max(P,te.maxRank))}),G.graph().maxRank=P}function Y(G){e.forEach(G.nodes(),function(P){var X=G.node(P);X.dummy==="edge-proxy"&&(G.edge(X.e).labelRank=X.rank,G.removeNode(P))})}function ee(G){var P=Number.POSITIVE_INFINITY,X=0,te=Number.POSITIVE_INFINITY,ce=0,xe=G.graph(),Ce=xe.marginx||0,Ke=xe.marginy||0;function Bt(Xe){var Ge=Xe.x,Ee=Xe.y,mt=Xe.width,Me=Xe.height;P=Math.min(P,Ge-mt/2),X=Math.max(X,Ge+mt/2),te=Math.min(te,Ee-Me/2),ce=Math.max(ce,Ee+Me/2)}e.forEach(G.nodes(),function(Xe){Bt(G.node(Xe))}),e.forEach(G.edges(),function(Xe){var Ge=G.edge(Xe);e.has(Ge,"x")&&Bt(Ge)}),P-=Ce,te-=Ke,e.forEach(G.nodes(),function(Xe){var Ge=G.node(Xe);Ge.x-=P,Ge.y-=te}),e.forEach(G.edges(),function(Xe){var Ge=G.edge(Xe);e.forEach(Ge.points,function(Ee){Ee.x-=P,Ee.y-=te}),e.has(Ge,"x")&&(Ge.x-=P),e.has(Ge,"y")&&(Ge.y-=te)}),xe.width=X-P+Ce,xe.height=ce-te+Ke}function J(G){e.forEach(G.edges(),function(P){var X=G.edge(P),te=G.node(P.v),ce=G.node(P.w),xe,Ce;X.points?(xe=X.points[0],Ce=X.points[X.points.length-1]):(X.points=[],xe=ce,Ce=te),X.points.unshift(m.intersectRect(te,xe)),X.points.push(m.intersectRect(ce,Ce))})}function oe(G){e.forEach(G.edges(),function(P){var X=G.edge(P);if(e.has(X,"x"))switch((X.labelpos==="l"||X.labelpos==="r")&&(X.width-=X.labeloffset),X.labelpos){case"l":X.x-=X.width/2+X.labeloffset;break;case"r":X.x+=X.width/2+X.labeloffset;break}})}function be(G){e.forEach(G.edges(),function(P){var X=G.edge(P);X.reversed&&X.points.reverse()})}function Z(G){e.forEach(G.nodes(),function(P){if(G.children(P).length){var X=G.node(P),te=G.node(X.borderTop),ce=G.node(X.borderBottom),xe=G.node(e.last(X.borderLeft)),Ce=G.node(e.last(X.borderRight));X.width=Math.abs(Ce.x-xe.x),X.height=Math.abs(ce.y-te.y),X.x=xe.x+X.width/2,X.y=te.y+X.height/2}}),e.forEach(G.nodes(),function(P){G.node(P).dummy==="border"&&G.removeNode(P)})}function ue(G){e.forEach(G.edges(),function(P){if(P.v===P.w){var X=G.node(P.v);X.selfEdges||(X.selfEdges=[]),X.selfEdges.push({e:P,label:G.edge(P)}),G.removeEdge(P)}})}function ge(G){var P=m.buildLayerMatrix(G);e.forEach(P,function(X){var te=0;e.forEach(X,function(ce,xe){var Ce=G.node(ce);Ce.order=xe+te,e.forEach(Ce.selfEdges,function(Ke){m.addDummyNode(G,"selfedge",{width:Ke.label.width,height:Ke.label.height,rank:Ce.rank,order:xe+ ++te,e:Ke.e,label:Ke.label},"_se")}),delete Ce.selfEdges})})}function de(G){e.forEach(G.nodes(),function(P){var X=G.node(P);if(X.dummy==="selfedge"){var te=G.node(X.e.v),ce=te.x+te.width/2,xe=te.y,Ce=X.x-ce,Ke=te.height/2;G.setEdge(X.e,X.label),G.removeNode(P),X.label.points=[{x:ce+2*Ce/3,y:xe-Ke},{x:ce+5*Ce/6,y:xe-Ke},{x:ce+Ce,y:xe},{x:ce+5*Ce/6,y:xe+Ke},{x:ce+2*Ce/3,y:xe+Ke}],X.label.x=X.x,X.label.y=X.y}})}function ie(G,P){return e.mapValues(e.pick(G,P),Number)}function _e(G){var P={};return e.forEach(G,function(X,te){P[te.toLowerCase()]=X}),P}return Lu}var Du,kp;function Mx(){if(kp)return Du;kp=1;var e=je(),n=et(),t=dt().Graph;Du={debugOrdering:r};function r(i){var s=n.buildLayerMatrix(i),o=new t({compound:!0,multigraph:!0}).setGraph({});return e.forEach(i.nodes(),function(a){o.setNode(a,{label:a}),o.setParent(a,"layer"+i.node(a).rank)}),e.forEach(i.edges(),function(a){o.setEdge(a.v,a.w,{},a.name)}),e.forEach(s,function(a,f){var c="layer"+f;o.setNode(c,{rank:"same"}),e.reduce(a,function(d,p){return o.setEdge(d,p,{style:"invis"}),p})}),o}return Du}var zu,jp;function Sx(){return jp||(jp=1,zu="0.8.5"),zu}var Fu,Cp;function qx(){return Cp||(Cp=1,Fu={graphlib:dt(),layout:Nx(),debug:Mx(),util:{time:et().time,notime:et().notime},version:Sx()}),Fu}var wm=qx(),Rx=cv(wm);class or{constructor(n){this.id="dagre",this.options={},Object.assign(this.options,or.defaultOptions,n)}execute(n,t){return ye(this,void 0,void 0,function*(){return this.genericDagreLayout(!1,n,Object.assign(Object.assign({},this.options),t))})}assign(n,t){return ye(this,void 0,void 0,function*(){yield this.genericDagreLayout(!0,n,Object.assign(Object.assign({},this.options),t))})}genericDagreLayout(n,t,r){return ye(this,void 0,void 0,function*(){const{nodeSize:i}=r,s=new wm.graphlib.Graph;s.setGraph(r),s.setDefaultEdgeLabel(()=>({}));const o=t.getAllNodes(),a=t.getAllEdges();[...o,...a].some(({id:c})=>me(c))&&console.error("Dagre layout only support string id, it will convert number to string."),t.getAllNodes().forEach(c=>{const{id:d}=c,p=Object.assign({},c.data);if(i!==void 0){const[m,y]=hn(xt(i)?i(c):i);Object.assign(p,{width:m,height:y})}s.setNode(d.toString(),p)}),t.getAllEdges().forEach(({id:c,source:d,target:p})=>{s.setEdge(d.toString(),p.toString(),{id:c})}),Rx.layout(s);const f={nodes:[],edges:[]};return s.nodes().forEach(c=>{const d=s.node(c);f.nodes.push({id:c,data:d}),n&&t.mergeNodeData(c,d)}),s.edges().forEach(c=>{const d=s.edge(c),{id:p}=d,m=Pm(d,["id"]),{v:y,w:x}=c;f.edges.push({id:p,source:y,target:x,data:m}),n&&t.mergeEdgeData(p,m)}),f})}}or.defaultOptions={};class Rf{constructor(n){this.id=n.id||0,this.rx=n.rx,this.ry=n.ry,this.fx=0,this.fy=0,this.mass=n.mass,this.degree=n.degree,this.g=n.g||0}distanceTo(n){const t=this.rx-n.rx,r=this.ry-n.ry;return Math.hypot(t,r)}setPos(n,t){this.rx=n,this.ry=t}resetForce(){this.fx=0,this.fy=0}addForce(n){const t=n.rx-this.rx,r=n.ry-this.ry;let i=Math.hypot(t,r);i=i<1e-4?1e-4:i;const s=this.g*(this.degree+1)*(n.degree+1)/i;this.fx+=s*t/i,this.fy+=s*r/i}in(n){return n.contains(this.rx,this.ry)}add(n){const t=this.mass+n.mass,r=(this.rx*this.mass+n.rx*n.mass)/t,i=(this.ry*this.mass+n.ry*n.mass)/t,s=this.degree+n.degree,o={rx:r,ry:i,mass:t,degree:s};return new Rf(o)}}class Ut{constructor(n){this.xmid=n.xmid,this.ymid=n.ymid,this.length=n.length,this.massCenter=n.massCenter||[0,0],this.mass=n.mass||1}getLength(){return this.length}contains(n,t){const r=this.length/2;return n<=this.xmid+r&&n>=this.xmid-r&&t<=this.ymid+r&&t>=this.ymid-r}NW(){const n=this.xmid-this.length/4,t=this.ymid+this.length/4,r=this.length/2,i={xmid:n,ymid:t,length:r};return new Ut(i)}NE(){const n=this.xmid+this.length/4,t=this.ymid+this.length/4,r=this.length/2,i={xmid:n,ymid:t,length:r};return new Ut(i)}SW(){const n=this.xmid-this.length/4,t=this.ymid-this.length/4,r=this.length/2,i={xmid:n,ymid:t,length:r};return new Ut(i)}SE(){const n=this.xmid+this.length/4,t=this.ymid-this.length/4,r=this.length/2,i={xmid:n,ymid:t,length:r};return new Ut(i)}}class Vt{constructor(n){this.body=null,this.quad=null,this.NW=null,this.NE=null,this.SW=null,this.SE=null,this.theta=.5,n!=null&&(this.quad=n)}insert(n){if(this.body==null){this.body=n;return}this._isExternal()?(this.quad&&(this.NW=new Vt(this.quad.NW()),this.NE=new Vt(this.quad.NE()),this.SW=new Vt(this.quad.SW()),this.SE=new Vt(this.quad.SE())),this._putBody(this.body),this._putBody(n),this.body=this.body.add(n)):(this.body=this.body.add(n),this._putBody(n))}_putBody(n){this.quad&&(n.in(this.quad.NW())&&this.NW?this.NW.insert(n):n.in(this.quad.NE())&&this.NE?this.NE.insert(n):n.in(this.quad.SW())&&this.SW?this.SW.insert(n):n.in(this.quad.SE())&&this.SE&&this.SE.insert(n))}_isExternal(){return this.NW==null&&this.NE==null&&this.SW==null&&this.SE==null}updateForce(n){if(!(this.body==null||n===this.body))if(this._isExternal())n.addForce(this.body);else{const t=this.quad?this.quad.getLength():0,r=this.body.distanceTo(n);t/r<this.theta?n.addForce(this.body):(this.NW&&this.NW.updateForce(n),this.NE&&this.NE.updateForce(n),this.SW&&this.SW.updateForce(n),this.SE&&this.SE.updateForce(n))}}}const Ox={center:[0,0],width:300,height:300,kr:5,kg:1,mode:"normal",preventOverlap:!1,dissuadeHubs:!1,maxIteration:0,ks:.1,ksmax:10,tao:.1};class Ax{constructor(n={}){this.options=n,this.id="forceAtlas2",this.options=Object.assign(Object.assign({},Ox),n)}execute(n,t){return ye(this,void 0,void 0,function*(){return this.genericForceAtlas2Layout(!1,n,t)})}assign(n,t){return ye(this,void 0,void 0,function*(){yield this.genericForceAtlas2Layout(!0,n,t)})}genericForceAtlas2Layout(n,t,r){return ye(this,void 0,void 0,function*(){const i=t.getAllEdges(),s=t.getAllNodes(),o=this.formatOptions(r,s.length),{width:a,height:f,prune:c,maxIteration:d,nodeSize:p,center:m}=o;if(!(s!=null&&s.length)||s.length===1)return Pt(t,n,m);const y=s.map(w=>it(w,[a,f])),x=i.filter(w=>{const{source:E,target:N}=w;return E!==N}),_=new $e({nodes:y,edges:x}),b=this.getSizes(_,p);if(this.run(_,t,d,b,n,o),c){for(let E=0;E<x.length;E+=1){const{source:N,target:S}=x[E],R=_.getDegree(N),A=_.getDegree(N);if(R<=1){const j=_.getNode(S);_.mergeNodeData(N,{x:j.data.x,y:j.data.y})}else if(A<=1){const j=_.getNode(N);_.mergeNodeData(S,{x:j.data.x,y:j.data.y})}}const w=Object.assign(Object.assign({},o),{prune:!1,barnesHut:!1});this.run(_,t,100,b,n,w)}return{nodes:y,edges:i}})}getSizes(n,t){const r=n.getAllNodes(),i={};for(let s=0;s<r.length;s+=1){const o=r[s];i[o.id]=nf(t,void 0)(o)}return i}formatOptions(n={},t){const r=Object.assign(Object.assign({},this.options),n),{center:i,width:s,height:o,barnesHut:a,prune:f,maxIteration:c,kr:d,kg:p}=r;return r.width=!s&&typeof window<"u"?window.innerWidth:s,r.height=!o&&typeof window<"u"?window.innerHeight:o,r.center=i||[r.width/2,r.height/2],a===void 0&&t>250&&(r.barnesHut=!0),f===void 0&&t>100&&(r.prune=!0),c===0&&!f?(r.maxIteration=250,t<=200&&t>100?r.maxIteration=1e3:t>200&&(r.maxIteration=1200)):c===0&&f&&(r.maxIteration=100,t<=200&&t>100?r.maxIteration=500:t>200&&(r.maxIteration=950)),d||(r.kr=50,t>100&&t<=500?r.kr=20:t>500&&(r.kr=1)),p||(r.kg=20,t>100&&t<=500?r.kg=10:t>500&&(r.kg=1)),r}run(n,t,r,i,s,o){const{kr:a,barnesHut:f,onTick:c}=o,d=n.getAllNodes();let p=0,m=r;const y={},x={},_={};for(let b=0;b<d.length;b+=1){const{data:w,id:E}=d[b];if(y[E]=[0,0],f){const N={id:b,rx:w.x,ry:w.y,mass:1,g:a,degree:n.getDegree(E)};_[E]=new Rf(N)}}for(;m>0;)p=this.oneStep(n,{iter:m,preventOverlapIters:50,krPrime:100,sg:p,forces:y,preForces:x,bodies:_,sizes:i},o),m--,c==null||c({nodes:d,edges:t.getAllEdges()});return n}oneStep(n,t,r){const{iter:i,preventOverlapIters:s,krPrime:o,sg:a,preForces:f,bodies:c,sizes:d}=t;let{forces:p}=t;const{preventOverlap:m,barnesHut:y}=r,x=n.getAllNodes();for(let _=0;_<x.length;_+=1){const{id:b}=x[_];f[b]=[...p[b]],p[b]=[0,0]}return p=this.getAttrForces(n,i,s,d,p,r),y&&(m&&i>s||!m)?p=this.getOptRepGraForces(n,p,c,r):p=this.getRepGraForces(n,i,s,p,o,d,r),this.updatePos(n,p,f,a,r)}getAttrForces(n,t,r,i,s,o){const{preventOverlap:a,dissuadeHubs:f,mode:c,prune:d}=o,p=n.getAllEdges();for(let m=0;m<p.length;m+=1){const{source:y,target:x}=p[m],_=n.getNode(y),b=n.getNode(x),w=n.getDegree(y),E=n.getDegree(x);if(d&&(w<=1||E<=1))continue;const N=[b.data.x-_.data.x,b.data.y-_.data.y];let S=Math.hypot(N[0],N[1]);S=S<1e-4?1e-4:S,N[0]=N[0]/S,N[1]=N[1]/S,a&&t<r&&(S=S-i[y]-i[x]);let R=S,A=R;c==="linlog"&&(R=Math.log(1+S),A=R),f&&(R=S/w,A=S/E),a&&t<r&&S<=0?(R=0,A=0):a&&t<r&&S>0&&(R=S,A=S),s[y][0]+=R*N[0],s[x][0]-=A*N[0],s[y][1]+=R*N[1],s[x][1]-=A*N[1]}return s}getOptRepGraForces(n,t,r,i){const{kg:s,center:o,prune:a}=i,f=n.getAllNodes(),c=f.length;let d=9e10,p=-9e10,m=9e10,y=-9e10;for(let E=0;E<c;E+=1){const{id:N,data:S}=f[E];a&&n.getDegree(N)<=1||(r[N].setPos(S.x,S.y),S.x>=p&&(p=S.x),S.x<=d&&(d=S.x),S.y>=y&&(y=S.y),S.y<=m&&(m=S.y))}const x=Math.max(p-d,y-m),_={xmid:(p+d)/2,ymid:(y+m)/2,length:x,massCenter:o,mass:c},b=new Ut(_),w=new Vt(b);for(let E=0;E<c;E+=1){const{id:N}=f[E];a&&n.getDegree(N)<=1||r[N].in(b)&&w.insert(r[N])}for(let E=0;E<c;E+=1){const{id:N,data:S}=f[E],R=n.getDegree(N);if(a&&R<=1)continue;r[N].resetForce(),w.updateForce(r[N]),t[N][0]-=r[N].fx,t[N][1]-=r[N].fy;const A=[S.x-o[0],S.y-o[1]];let j=Math.hypot(A[0],A[1]);j=j<1e-4?1e-4:j,A[0]=A[0]/j,A[1]=A[1]/j;const I=s*(R+1);t[N][0]-=I*A[0],t[N][1]-=I*A[1]}return t}getRepGraForces(n,t,r,i,s,o,a){const{preventOverlap:f,kr:c,kg:d,center:p,prune:m}=a,y=n.getAllNodes(),x=y.length;for(let _=0;_<x;_+=1){const b=y[_],w=n.getDegree(b.id);for(let R=_+1;R<x;R+=1){const A=y[R],j=n.getDegree(A.id);if(m&&(w<=1||j<=1))continue;const I=[A.data.x-b.data.x,A.data.y-b.data.y];let D=Math.hypot(I[0],I[1]);D=D<1e-4?1e-4:D,I[0]=I[0]/D,I[1]=I[1]/D,f&&t<r&&(D=D-o[b.id]-o[A.id]);let z=c*(w+1)*(j+1)/D;f&&t<r&&D<0?z=s*(w+1)*(j+1):f&&t<r&&D===0?z=0:f&&t<r&&D>0&&(z=c*(w+1)*(j+1)/D),i[b.id][0]-=z*I[0],i[A.id][0]+=z*I[0],i[b.id][1]-=z*I[1],i[A.id][1]+=z*I[1]}const E=[b.data.x-p[0],b.data.y-p[1]],N=Math.hypot(E[0],E[1]);E[0]=E[0]/N,E[1]=E[1]/N;const S=d*(w+1);i[b.id][0]-=S*E[0],i[b.id][1]-=S*E[1]}return i}updatePos(n,t,r,i,s){const{ks:o,tao:a,prune:f,ksmax:c}=s,d=n.getAllNodes(),p=d.length,m=[],y=[];let x=0,_=0,b=i;for(let E=0;E<p;E+=1){const{id:N}=d[E],S=n.getDegree(N);if(f&&S<=1)continue;const R=[t[N][0]-r[N][0],t[N][1]-r[N][1]],A=Math.hypot(R[0],R[1]),j=[t[N][0]+r[N][0],t[N][1]+r[N][1]],I=Math.hypot(j[0],j[1]);m[E]=A,y[E]=I/2,x+=(S+1)*m[E],_+=(S+1)*y[E]}const w=b;b=a*_/x,w!==0&&(b=b>1.5*w?1.5*w:b);for(let E=0;E<p;E+=1){const{id:N,data:S}=d[E],R=n.getDegree(N);if(f&&R<=1||me(S.fx)&&me(S.fy))continue;let A=o*b/(1+b*Math.sqrt(m[E])),j=Math.hypot(t[N][0],t[N][1]);j=j<1e-4?1e-4:j;const I=c/j;A=A>I?I:A;const D=A*t[N][0],z=A*t[N][1];n.mergeNodeData(N,{x:S.x+D,y:S.y+z})}return b}}const Ix={maxIteration:1e3,gravity:10,speed:5,clustering:!1,clusterGravity:10,width:300,height:300,nodeClusterBy:"cluster"},Tx=800;class kx{constructor(n={}){this.options=n,this.id="fruchterman",this.timeInterval=0,this.running=!1,this.options=Object.assign(Object.assign({},Ix),n)}execute(n,t){return ye(this,void 0,void 0,function*(){return this.genericFruchtermanLayout(!1,n,t)})}assign(n,t){return ye(this,void 0,void 0,function*(){yield this.genericFruchtermanLayout(!0,n,t)})}stop(){this.timeInterval&&typeof window<"u"&&window.clearInterval(this.timeInterval),this.running=!1}tick(n=this.options.maxIteration||1){if(this.lastResult)return this.lastResult;for(let r=0;r<n;r++)this.runOneStep(this.lastGraph,this.lastClusterMap,this.lastOptions);const t={nodes:this.lastLayoutNodes,edges:this.lastLayoutEdges};return this.lastAssign&&t.nodes.forEach(r=>this.lastGraph.mergeNodeData(r.id,{x:r.data.x,y:r.data.y,z:this.options.dimensions===3?r.data.z:void 0})),t}genericFruchtermanLayout(n,t,r){return ye(this,void 0,void 0,function*(){if(this.running)return;const i=this.formatOptions(r),{dimensions:s,width:o,height:a,center:f,clustering:c,nodeClusterBy:d,maxIteration:p,onTick:m}=i,y=t.getAllNodes(),x=t.getAllEdges();if(!(y!=null&&y.length)){const N={nodes:[],edges:x};return this.lastResult=N,N}if(y.length===1){n&&t.mergeNodeData(y[0].id,{x:f[0],y:f[1],z:s===3?f[2]:void 0});const N={nodes:[Object.assign(Object.assign({},y[0]),{data:Object.assign(Object.assign({},y[0].data),{x:f[0],y:f[1],z:s===3?f[2]:void 0})})],edges:x};return this.lastResult=N,N}const _=y.map(N=>it(N,[o,a])),b=new $e({nodes:_,edges:x}),w={};if(c&&_.forEach(N=>{const S=N.data[d];w[S]||(w[S]={name:S,cx:0,cy:0,count:0})}),this.lastLayoutNodes=_,this.lastLayoutEdges=x,this.lastAssign=n,this.lastGraph=b,this.lastOptions=i,this.lastClusterMap=w,typeof window>"u")return;let E=0;return new Promise(N=>{this.timeInterval=window.setInterval(()=>{if(!this.running){N({nodes:_,edges:x});return}this.runOneStep(b,w,i),n&&_.forEach(({id:S,data:R})=>t.mergeNodeData(S,{x:R.x,y:R.y,z:s===3?R.z:void 0})),m==null||m({nodes:_,edges:x}),E++,E>=p&&(window.clearInterval(this.timeInterval),N({nodes:_,edges:x}))},0),this.running=!0})})}formatOptions(n={}){const t=Object.assign(Object.assign({},this.options),n),{clustering:r,nodeClusterBy:i}=t,{center:s,width:o,height:a}=t;return t.width=!o&&typeof window<"u"?window.innerWidth:o,t.height=!a&&typeof window<"u"?window.innerHeight:a,t.center=s||[t.width/2,t.height/2],t.clustering=r&&!!i,t}runOneStep(n,t,r){const{dimensions:i,height:s,width:o,gravity:a,center:f,speed:c,clustering:d,nodeClusterBy:p,clusterGravity:m}=r,y=s*o,x=Math.sqrt(y)/10,_=n.getAllNodes(),b=y/(_.length+1),w=Math.sqrt(b),E={};if(this.applyCalculate(n,E,w,b),d){for(const S in t)t[S].cx=0,t[S].cy=0,t[S].count=0;_.forEach(S=>{const{data:R}=S,A=t[R[p]];me(R.x)&&(A.cx+=R.x),me(R.y)&&(A.cy+=R.y),A.count++});for(const S in t)t[S].cx/=t[S].count,t[S].cy/=t[S].count;const N=m||a;_.forEach((S,R)=>{const{id:A,data:j}=S;if(!me(j.x)||!me(j.y))return;const I=t[j[p]],D=Math.sqrt((j.x-I.cx)*(j.x-I.cx)+(j.y-I.cy)*(j.y-I.cy)),z=w*N;E[A].x-=z*(j.x-I.cx)/D,E[A].y-=z*(j.y-I.cy)/D})}_.forEach((N,S)=>{const{id:R,data:A}=N;if(!me(A.x)||!me(A.y))return;const j=.01*w*a;E[R].x-=j*(A.x-f[0]),E[R].y-=j*(A.y-f[1]),i===3&&(E[R].z-=j*(A.z-f[2]))}),_.forEach((N,S)=>{const{id:R,data:A}=N;if(me(A.fx)&&me(A.fy)){A.x=A.fx,A.y=A.fy,i===3&&(A.z=A.fz);return}if(!me(A.x)||!me(A.y))return;const j=Math.sqrt(E[R].x*E[R].x+E[R].y*E[R].y+(i===3?E[R].z*E[R].z:0));if(j>0){const I=Math.min(x*(c/Tx),j);n.mergeNodeData(R,{x:A.x+E[R].x/j*I,y:A.y+E[R].y/j*I,z:i===3?A.z+E[R].z/j*I:void 0})}})}applyCalculate(n,t,r,i){this.calRepulsive(n,t,i),this.calAttractive(n,t,r)}calRepulsive(n,t,r){const i=n.getAllNodes();i.forEach(({data:s,id:o},a)=>{t[o]={x:0,y:0,z:0},i.forEach(({data:f,id:c},d)=>{if(a<=d||!me(s.x)||!me(f.x)||!me(s.y)||!me(f.y))return;let p=s.x-f.x,m=s.y-f.y,y=this.options.dimensions===3?s.z-f.z:0,x=p*p+m*m+y*y;x===0&&(x=1,p=.01,m=.01,y=.01);const _=r/x,b=p*_,w=m*_,E=y*_;t[o].x+=b,t[o].y+=w,t[c].x-=b,t[c].y-=w,this.options.dimensions===3&&(t[o].z+=E,t[c].z-=E)})})}calAttractive(n,t,r){n.getAllEdges().forEach(s=>{const{source:o,target:a}=s;if(!o||!a||o===a)return;const{data:f}=n.getNode(o),{data:c}=n.getNode(a);if(!me(c.x)||!me(f.x)||!me(c.y)||!me(f.y))return;const d=c.x-f.x,p=c.y-f.y,m=this.options.dimensions===3?c.z-f.z:0,y=Math.sqrt(d*d+p*p+m*m)/r,x=d*y,_=p*y,b=m*y;t[o].x+=x,t[o].y+=_,t[a].x-=x,t[a].y-=_,this.options.dimensions===3&&(t[o].z+=b,t[a].z-=b)})}}const jx={begin:[0,0],preventOverlap:!0,preventOverlapPadding:10,condense:!1,rows:void 0,cols:void 0,position:void 0,sortBy:"degree",nodeSize:30,width:300,height:300};class Cx{constructor(n={}){this.options=n,this.id="grid",this.options=Object.assign(Object.assign({},jx),n)}execute(n,t){return ye(this,void 0,void 0,function*(){return this.genericGridLayout(!1,n,t)})}assign(n,t){return ye(this,void 0,void 0,function*(){yield this.genericGridLayout(!0,n,t)})}genericGridLayout(n,t,r){return ye(this,void 0,void 0,function*(){const i=Object.assign(Object.assign({},this.options),r),{begin:s=[0,0],condense:o,preventOverlapPadding:a,preventOverlap:f,rows:c,cols:d,nodeSpacing:p,nodeSize:m,width:y,height:x,position:_}=i;let{sortBy:b}=i;const w=t.getAllNodes(),E=t.getAllEdges(),N=w==null?void 0:w.length;if(!N||N===1)return Pt(t,n,s);const S=w.map(J=>it(J));b!=="id"&&(!fn(b)||S[0].data[b]===void 0)&&(b="degree"),b==="degree"?S.sort((J,oe)=>t.getDegree(oe.id,"both")-t.getDegree(J.id,"both")):b==="id"?S.sort((J,oe)=>me(oe.id)&&me(J.id)?oe.id-J.id:`${J.id}`.localeCompare(`${oe.id}`)):S.sort((J,oe)=>oe.data[b]-J.data[b]);const R=!y&&typeof window<"u"?window.innerWidth:y,A=!x&&typeof window<"u"?window.innerHeight:x,j=N,I={rows:c,cols:d};if(c!=null&&d!=null)I.rows=c,I.cols=d;else if(c!=null&&d==null)I.rows=c,I.cols=Math.ceil(j/I.rows);else if(c==null&&d!=null)I.cols=d,I.rows=Math.ceil(j/I.cols);else{const J=Math.sqrt(j*A/R);I.rows=Math.round(J),I.cols=Math.round(R/A*J)}if(I.rows=Math.max(I.rows,1),I.cols=Math.max(I.cols,1),I.cols*I.rows>j){const J=On(I),oe=An(I);(J-1)*oe>=j?On(I,J-1):(oe-1)*J>=j&&An(I,oe-1)}else for(;I.cols*I.rows<j;){const J=On(I),oe=An(I);(oe+1)*J>=j?An(I,oe+1):On(I,J+1)}let D=o?0:R/I.cols,z=o?0:A/I.rows;if(f||p){const J=jt(10,p),oe=tf(30,m,!1);S.forEach(be=>{(!be.data.x||!be.data.y)&&(be.data.x=0,be.data.y=0);const Z=t.getNode(be.id),[ue,ge]=hn(oe(Z)||30),de=J!==void 0?J(be):a,ie=ue+de,_e=ge+de;D=Math.max(D,ie),z=Math.max(z,_e)})}const $={},V={row:0,col:0},Y={};for(let J=0;J<S.length;J++){const oe=S[J];let be;if(_&&(be=_(t.getNode(oe.id))),be&&(be.row!==void 0||be.col!==void 0)){const Z={row:be.row,col:be.col};if(Z.col===void 0)for(Z.col=0;Ju($,Z);)Z.col++;else if(Z.row===void 0)for(Z.row=0;Ju($,Z);)Z.row++;Y[oe.id]=Z,bm($,Z)}Px(oe,s,D,z,Y,I,V,$)}const ee={nodes:S,edges:E};return n&&S.forEach(J=>{t.mergeNodeData(J.id,{x:J.data.x,y:J.data.y})}),ee})}}const On=(e,n)=>{let t;const r=e.rows||5,i=e.cols||5;return n==null?t=Math.min(r,i):Math.min(r,i)===e.rows?e.rows=n:e.cols=n,t},An=(e,n)=>{let t;const r=e.rows||5,i=e.cols||5;return n==null?t=Math.max(r,i):Math.max(r,i)===e.rows?e.rows=n:e.cols=n,t},Ju=(e,n)=>e[`c-${n.row}-${n.col}`]||!1,bm=(e,n)=>e[`c-${n.row}-${n.col}`]=!0,Pp=(e,n)=>{const t=e.cols||5;n.col++,n.col>=t&&(n.col=0,n.row++)},Px=(e,n,t,r,i,s,o,a)=>{let f,c;const d=i[e.id];if(d)f=d.col*t+t/2+n[0],c=d.row*r+r/2+n[1];else{for(;Ju(a,o);)Pp(s,o);f=o.col*t+t/2+n[0],c=o.row*r+r/2+n[1],bm(a,o),Pp(s,o)}e.data.x=f,e.data.y=c},Lx=(e,n,t)=>{try{const r=Rt.mul(Rt.pow(n,2),-.5),i=r.mean("row"),s=r.mean("column"),o=r.mean();r.add(o).subRowVector(i).subColumnVector(s);const a=new lv(r),f=Rt.sqrt(a.diagonalMatrix).diagonal();return a.leftSingularVectors.toJSON().map(c=>Rt.mul([c],[f]).toJSON()[0].splice(0,e))}catch{const i=[];for(let s=0;s<n.length;s++){const o=Math.random()*t,a=Math.random()*t;i.push([o,a])}return i}},Dx=800,zx={iterations:10,height:10,width:10,speed:100,gravity:10,k:5},Fx=(e,n)=>{const t=Object.assign(Object.assign({},zx),n),{positions:r,iterations:i,width:s,k:o,speed:a=100,strictRadial:f,focusIdx:c,radii:d=[],nodeSizeFunc:p}=t,m=e.getAllNodes(),y=[],x=s/10;for(let _=0;_<i;_++)r.forEach((b,w)=>{y[w]={x:0,y:0}}),Bx(m,r,y,o,d,p),$x(r,y,a,f,c,x,s,d);return r},Bx=(e,n,t,r,i,s)=>{n.forEach((o,a)=>{t[a]={x:0,y:0},n.forEach((f,c)=>{if(a===c||i[a]!==i[c])return;let d=o.x-f.x,p=o.y-f.y,m=Math.sqrt(d*d+p*p);if(m===0){m=1;const y=a>c?1:-1;d=.01*y,p=.01*y}if(m<s(e[a])/2+s(e[c])/2){const y=r*r/m;t[a].x+=d/m*y,t[a].y+=p/m*y}})})},$x=(e,n,t,r,i,s,o,a)=>{const f=s||o/10;return r&&n.forEach((c,d)=>{const p=e[d].x-e[i].x,m=e[d].y-e[i].y,y=Math.sqrt(p*p+m*m);let x=m/y,_=-p/y;const b=Math.sqrt(c.x*c.x+c.y*c.y);let w=Math.acos((x*c.x+_*c.y)/b);w>Math.PI/2&&(w-=Math.PI/2,x*=-1,_*=-1);const E=Math.cos(w)*b;c.x=x*E,c.y=_*E}),e.forEach((c,d)=>{if(d===i)return;const p=Math.sqrt(n[d].x*n[d].x+n[d].y*n[d].y);if(p>0&&d!==i){const m=Math.min(f*(t/Dx),p);if(c.x+=n[d].x/p*m,c.y+=n[d].y/p*m,r){let y=c.x-e[i].x,x=c.y-e[i].y;const _=Math.sqrt(y*y+x*x);y=y/_*a[d],x=x/_*a[d],c.x=e[i].x+y,c.y=e[i].y+x}}}),e},Gx={maxIteration:1e3,focusNode:null,unitRadius:null,linkDistance:50,preventOverlap:!1,strictRadial:!0,maxPreventOverlapIteration:200,sortStrength:10};class Ux{constructor(n={}){this.options=n,this.id="radial",this.options=Object.assign(Object.assign({},Gx),n)}execute(n,t){return ye(this,void 0,void 0,function*(){return this.genericRadialLayout(!1,n,t)})}assign(n,t){return ye(this,void 0,void 0,function*(){yield this.genericRadialLayout(!0,n,t)})}genericRadialLayout(n,t,r){return ye(this,void 0,void 0,function*(){const i=Object.assign(Object.assign({},this.options),r),{width:s,height:o,center:a,focusNode:f,unitRadius:c,nodeSize:d,nodeSpacing:p,strictRadial:m,preventOverlap:y,maxPreventOverlapIteration:x,sortBy:_,linkDistance:b=50,sortStrength:w=10,maxIteration:E=1e3}=i,N=t.getAllNodes(),S=t.getAllEdges(),R=!s&&typeof window<"u"?window.innerWidth:s,A=!o&&typeof window<"u"?window.innerHeight:o,j=a||[R/2,A/2];if(!(N!=null&&N.length)||N.length===1)return Pt(t,n,j);let I=N[0];if(fn(f)){for(let te=0;te<N.length;te++)if(N[te].id===f){I=N[te];break}}else I=f||N[0];const D=Yx(N,I.id),z=av({nodes:N,edges:S}),$=sv(z),V=Xx($,D);Kx($,D,V+1);const Y=$[D];let ee=R-j[0]>j[0]?j[0]:R-j[0],J=A-j[1]>j[1]?j[1]:A-j[1];ee===0&&(ee=R/2),J===0&&(J=A/2);const oe=Math.min(ee,J),be=Math.max(...Y),Z=[],ue=c||oe/be;Y.forEach((te,ce)=>{Z[ce]=te*ue});const ge=Vx(N,$,b,Z,ue,_,w),de=Wx(ge),ie=Lx(b,ge,b);let _e=ie.map(([te,ce])=>({x:(isNaN(te)?Math.random()*b:te)-ie[D][0],y:(isNaN(ce)?Math.random()*b:ce)-ie[D][1]}));this.run(E,_e,de,ge,Z,D);let G;if(y){G=nf(d,p);const te={nodes:N,nodeSizeFunc:G,positions:_e,radii:Z,height:A,width:R,strictRadial:!!m,focusIdx:D,iterations:x||200,k:_e.length/4.5};_e=Fx(t,te)}const P=[];return _e.forEach((te,ce)=>{const xe=it(N[ce]);xe.data.x=te.x+j[0],xe.data.y=te.y+j[1],P.push(xe)}),n&&P.forEach(te=>t.mergeNodeData(te.id,{x:te.data.x,y:te.data.y})),{nodes:P,edges:S}})}run(n,t,r,i,s,o){for(let a=0;a<=n;a++){const f=a/n;this.oneIteration(f,t,s,i,r,o)}}oneIteration(n,t,r,i,s,o){const a=1-n;t.forEach((f,c)=>{const d=Zf(f,{x:0,y:0}),p=d===0?0:1/d;if(c===o)return;let m=0,y=0,x=0;t.forEach((b,w)=>{if(c===w)return;const E=Zf(f,b),N=E===0?0:1/E,S=i[w][c];x+=s[c][w],m+=s[c][w]*(b.x+S*(f.x-b.x)*N),y+=s[c][w]*(b.y+S*(f.y-b.y)*N)});const _=r[c]===0?0:1/r[c];x*=a,x+=n*_*_,m*=a,m+=n*_*f.x*p,f.x=m/x,y*=a,y+=n*_*f.y*p,f.y=y/x})}}const Vx=(e,n,t,r,i,s,o)=>{if(!e)return[];const a=[];if(n){const f={};n.forEach((c,d)=>{const p=[];c.forEach((m,y)=>{var x,_;if(d===y)p.push(0);else if(r[d]===r[y])if(s==="data")p.push(m*(Math.abs(d-y)*o)/(r[d]/i));else if(s){let b,w;if(f[e[d].id])b=f[e[d].id];else{const E=(s==="id"?e[d].id:(x=e[d].data)===null||x===void 0?void 0:x[s])||0;fn(E)?b=E.charCodeAt(0):b=E,f[e[d].id]=b}if(f[e[y].id])w=f[e[y].id];else{const E=(s==="id"?e[y].id:(_=e[y].data)===null||_===void 0?void 0:_[s])||0;fn(E)?w=E.charCodeAt(0):w=E,f[e[y].id]=w}p.push(m*(Math.abs(b-w)*o)/(r[d]/i))}else p.push(m*t/(r[d]/i));else{const b=(t+i)/2;p.push(m*b)}}),a.push(p)})}return a},Wx=e=>{const n=e.length,t=e[0].length,r=[];for(let i=0;i<n;i++){const s=[];for(let o=0;o<t;o++)e[i][o]!==0?s.push(1/(e[i][o]*e[i][o])):s.push(0);r.push(s)}return r},Yx=(e,n)=>{let t=-1;return e.forEach((r,i)=>{r.id===n&&(t=i)}),Math.max(t,0)},Kx=(e,n,t)=>{const r=e.length;for(let i=0;i<r;i++)if(e[n][i]===1/0){e[n][i]=t,e[i][n]=t;for(let s=0;s<r;s++)e[i][s]!==1/0&&e[n][s]===1/0&&(e[n][s]=t+e[i][s],e[s][n]=t+e[i][s])}for(let i=0;i<r;i++)if(i!==n){for(let s=0;s<r;s++)if(e[i][s]===1/0){let o=Math.abs(e[n][i]-e[n][s]);o=o===0?1:o,e[i][s]=o}}},Xx=(e,n)=>{let t=0;for(let r=0;r<e[n].length;r++)e[n][r]!==1/0&&(t=e[n][r]>t?e[n][r]:t);return t},Zx={center:[0,0],width:300,height:300};class Jx{constructor(n={}){this.options=n,this.id="random",this.options=Object.assign(Object.assign({},Zx),n)}execute(n,t){return ye(this,void 0,void 0,function*(){return this.genericRandomLayout(!1,n,t)})}assign(n,t){return ye(this,void 0,void 0,function*(){yield this.genericRandomLayout(!0,n,t)})}genericRandomLayout(n,t,r){return ye(this,void 0,void 0,function*(){const i=Object.assign(Object.assign({},this.options),r),{center:s,width:o,height:a}=i,f=t.getAllNodes(),c=.9,d=!o&&typeof window<"u"?window.innerWidth:o,p=!a&&typeof window<"u"?window.innerHeight:a,m=s||[d/2,p/2],y=[];return f&&f.forEach(_=>{y.push({id:_.id,data:{x:(Math.random()-.5)*c*d+m[0],y:(Math.random()-.5)*c*p+m[1]}})}),n&&y.forEach(_=>t.mergeNodeData(_.id,{x:_.data.x,y:_.data.y})),{nodes:y,edges:t.getAllEdges()}})}}const Qx={circular:nw,concentric:Yu,mds:hv,random:Jx,grid:Cx,radial:Ux,force:fv,d3force:yv,"d3-force-3d":lb,fruchterman:kx,forceAtlas2:Ax,dagre:or,antvDagre:H0,comboCombined:u1};let _t;const Hx={stopLayout(){_t!=null&&_t.stop&&_t.stop()},calculateLayout(e,n){return ye(this,void 0,void 0,function*(){const{layout:{id:t,options:r,iterations:i},nodes:s,edges:o}=e,a=new $e({nodes:s,edges:o}),f=Qx[t];if(f)_t=new f(r);else throw new Error(`Unknown layout id: ${t}`);let c=yield _t.execute(a);return gv(_t)&&(_t.stop(),c=_t.tick(i)),[c,n]})}};Qu(Hx);
